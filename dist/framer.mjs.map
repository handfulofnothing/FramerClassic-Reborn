{"version":3,"file":"framer.mjs","sources":["../node_modules/lodash/lodash.js","../framer/Underscore.js","../framer/Matrix.js","../node_modules/webfontloader/webfontloader.js","../framer/Utils.js","../node_modules/eventemitter3/index.js","../framer/EventEmitter.js","../framer/BaseClass.js","../framer/Color.js","../framer/Gradient.js","../framer/Gestures.js","../framer/Events.js","../framer/Defaults.js","../framer/SVG.js","../framer/Animators/Curves.js","../framer/Animation.js","../framer/LayerStyle.js","../framer/LayerStateMachine.js","../framer/LayerStates.js","../framer/Simulator.js","../framer/Integrator.js","../framer/Simulators/SpringSimulator.js","../framer/Simulators/FrictionSimulator.js","../framer/Simulators/MomentumBounceSimulator.js","../framer/Simulation.js","../framer/EventBuffer.js","../framer/LayerDraggable.js","../framer/LayerPinchable.js","../framer/LayerPropertyProxy.js","../framer/Layer.js","../framer/BackgroundLayer.js","../framer/VideoLayer.js","../framer/SVGBaseLayer.js","../framer/SVGPath.js","../framer/SVGGroup.js","../framer/SVGLayer.js","../framer/StyledText.js","../framer/TextLayer.js","../framer/AnimationGroup.js","../framer/Screen.js","../framer/Align.js","../framer/Blending.js","../framer/DOMEventManager.js","../framer/Context.js","../framer/Print.js","../framer/Components/ScrollComponent.js","../framer/Components/PageComponent.js","../framer/Components/SliderComponent.js","../framer/Components/RangeSliderComponent.js","../framer/Components/DeviceComponent.js","../framer/Components/GridComponent.js","../framer/Components/FlowComponent.js","../framer/Components/CircularProgressComponent.js","../framer/MIDIInput.js","../framer/Components/MIDIComponent.js","../framer/Config.js","../framer/AnimationLoop.js","../framer/Animators/Animator.js","../framer/Animators/LinearAnimator.js","../framer/Animators/BezierCurveAnimator.js","../framer/Animators/SpringDHOAnimator.js","../framer/Animators/SpringRK4Animator.js","../framer/Importer.js","../framer/Extras/TouchEmulator.js","../framer/Extras/MobileScrollFix.js","../framer/Extras/ErrorDisplay.js","../framer/Extras/OmitNew.js","../framer/Extras/Hints.js","../framer/Extras/Preloader.js","../framer/GestureInputRecognizer.js","../framer/Canvas.js","../build/version.js","../framer/Framer.js"],"sourcesContent":["/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","import _ from \"lodash\";\r\n\r\n_.pluck = _.map;\r\n\r\nexport { _ };\r\nexport default _;\r\n","import _ from \"./Underscore.js\";\r\n\r\nWebKitCSSMatrix.prototype.skew = function (skew) {\r\n  if (!skew) return this;\r\n\r\n  const rad = (skew * Math.PI) / 180;\r\n  const value = Math.tan(rad);\r\n  const m = new WebKitCSSMatrix();\r\n  m.m12 = value;\r\n  m.m21 = value;\r\n\r\n  return this.multiply(m);\r\n};\r\n\r\nWebKitCSSMatrix.prototype.point = function (point = {}) {\r\n  const { x = 0, y = 0, z = 0 } = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n\r\n  let w = this.m14 * x + this.m24 * y + this.m34 * z + this.m44;\r\n  w ||= 1;\r\n\r\n  return {\r\n    x: (this.m11 * x + this.m21 * y + this.m31 * z + this.m41) / w,\r\n    y: (this.m12 * x + this.m22 * y + this.m32 * z + this.m42) / w,\r\n    z: (this.m13 * x + this.m23 * y + this.m33 * z + this.m43) / w,\r\n  };\r\n};\r\n\r\nWebKitCSSMatrix.identity3d = () =>\r\n  new WebKitCSSMatrix(\"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)\");\r\n\r\nexport const Matrix = WebKitCSSMatrix;\r\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","import _ from \"./Underscore.js\";\r\nimport { Matrix } from \"./Matrix.js\";\r\nimport WebFont from \"webfontloader\";\r\n\r\nexport const Utils = {\r\n  reset: () => Framer.CurrentContext.reset(),\r\n\r\n  getValue: (value) => (_.isFunction(value) ? value() : value),\r\n\r\n  getValueForKeyPath: (obj, key) => {\r\n    if (!key.includes(\".\")) return obj[key];\r\n\r\n    return key.split(\".\").reduce((result, part) => {\r\n      return result?.[part];\r\n    }, obj);\r\n  },\r\n\r\n  setValueForKeyPath: (obj, path, val) => {\r\n    const fields = path.split(\".\");\r\n    let result = obj;\r\n\r\n    for (let i = 0; i < fields.length && result !== undefined; i++) {\r\n      const field = fields[i];\r\n\r\n      if (i === fields.length - 1) {\r\n        const currentValue = result[field];\r\n\r\n        if (\r\n          _.isObject(currentValue) &&\r\n          _.isObject(val) &&\r\n          Object.getPrototypeOf(currentValue) === Object.prototype &&\r\n          Object.getPrototypeOf(val) === Object.prototype\r\n        ) {\r\n          _.extend(currentValue, val);\r\n        } else {\r\n          result[field] = val;\r\n        }\r\n      } else {\r\n        if (\r\n          typeof result[field] === \"undefined\" ||\r\n          !_.isObject(result[field])\r\n        ) {\r\n          result[field] = {};\r\n        }\r\n        result = result[field];\r\n      }\r\n    }\r\n  },\r\n\r\n  escapeForRegex: (string) => string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"),\r\n  valueOrDefault: (value, defaultValue) => {\r\n    if ([undefined, null].includes(value)) {\r\n      value = defaultValue;\r\n    }\r\n\r\n    return value;\r\n  },\r\n\r\n  arrayNext: (arr, item) => arr[arr.indexOf(item) + 1] || _.head(arr),\r\n  arrayPrev: (arr, item) => arr[arr.indexOf(item) - 1] || _.last(arr),\r\n  webkitPerspectiveForValue: (value) => {\r\n    if ([\"none\", null, 0].includes(value)) return \"none\";\r\n    if (_.isNumber(value)) return value;\r\n    return null;\r\n  },\r\n\r\n  sum: (arr) => _.reduce(arr, (a, b) => a + b),\r\n  average: (arr) => (arr.length ? Utils.sum(arr) / arr.length : 0),\r\n  mean: (arr) => (arr.length ? Utils.sum(arr) / arr.length : 0),\r\n  median: (arr) => {\r\n    if (!arr.length) return null;\r\n\r\n    const sorted = [...arr].sort((a, b) => a - b);\r\n    const mid = Math.floor(sorted.length / 2);\r\n\r\n    return sorted.length % 2\r\n      ? sorted[mid]\r\n      : (sorted[mid - 1] + sorted[mid]) / 2;\r\n  },\r\n\r\n  nearestIncrement: (x, increment) =>\r\n    increment ? Math.round(x * (1 / increment)) / (1 / increment) : x,\r\n\r\n  delay: function (time, f) {\r\n    const timer = setTimeout(f, time * 1000);\r\n    Framer.CurrentContext.addTimer(timer);\r\n    return timer;\r\n  },\r\n\r\n  interval: function (time, f) {\r\n    const timer = setInterval(f, time * 1000);\r\n    Framer.CurrentContext.addInterval(timer);\r\n    return timer;\r\n  },\r\n\r\n  debounce: function (threshold, fn, immediate) {\r\n    if (threshold == null) threshold = 0.1;\r\n    let timeout = null;\r\n    threshold *= 1000;\r\n    return function (...args) {\r\n      const obj = this;\r\n      const delayed = function () {\r\n        if (!immediate) fn.apply(obj, args);\r\n        return (timeout = null);\r\n      };\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n      } else if (immediate) {\r\n        fn.apply(obj, args);\r\n      }\r\n      return (timeout = setTimeout(delayed, threshold));\r\n    };\r\n  },\r\n\r\n  throttle: function (delay, fn) {\r\n    if (delay === 0) return fn;\r\n    delay *= 1000;\r\n    let timer = false;\r\n    return function (...args) {\r\n      if (timer) return;\r\n      timer = true;\r\n      if (delay !== -1) setTimeout(() => (timer = false), delay);\r\n      return fn(...args);\r\n    };\r\n  },\r\n\r\n  memoize: (fn) => {\r\n    return function (...args) {\r\n      let hash = \"\";\r\n      let i = args.length;\r\n      let currentArg = null;\r\n      while (i--) {\r\n        currentArg = args[i];\r\n        hash +=\r\n          currentArg === Object(currentArg)\r\n            ? JSON.stringify(currentArg)\r\n            : currentArg;\r\n        fn.memoize || (fn.memoize = {});\r\n      }\r\n      if (hash in fn.memoize) {\r\n        return fn.memoize[hash];\r\n      } else {\r\n        return (fn.memoize[hash] = fn.apply(this, args));\r\n      }\r\n    };\r\n  },\r\n\r\n  randomColor: function (alpha = 1.0) {\r\n    return Color.random(alpha);\r\n  },\r\n\r\n  randomChoice: (arr) => arr[Math.floor(Math.random() * arr.length)],\r\n\r\n  randomNumber: function (a = 0, b = 1) {\r\n    return Utils.mapRange(Math.random(), 0, 1, a, b);\r\n  },\r\n\r\n  randomImage: function (layer) {\r\n    if (_.isNumber(layer)) layer = { id: layer };\r\n\r\n    const photos = [\r\n      \"1417733403748-83bbc7c05140\",\r\n      \"1423841265803-dfac59ebf718\",\r\n      \"1433689056001-018e493576bc\",\r\n      \"1430812411929-de4cf1d1fe73\",\r\n      \"1457269449834-928af64c684d\",\r\n      \"1443616839562-036bb2afd9a2\",\r\n      \"1461535676131-2de1f7054d3f\",\r\n      \"1462393582935-1ac76b85dcf1\",\r\n      \"1414589530802-cb54ce0575d9\",\r\n      \"1422908132590-117a051fc5cd\",\r\n      \"1438522014717-d7ce32b9bab9\",\r\n      \"1462058164249-2dcdcda67ce7\",\r\n      \"1456757014009-0614a080ff7f\",\r\n      \"1434238255348-4fb0d9caa0a4\",\r\n      \"1448071792026-7064a01897e7\",\r\n      \"1458681842652-019f4eeda5e5\",\r\n      \"1460919920543-d8c45f4bd621\",\r\n      \"1447767961238-038617b84a2b\",\r\n      \"1449089299624-89ce41e8306c\",\r\n      \"1414777410116-81e404502b52\",\r\n      \"1433994349623-0a18966ee9c0\",\r\n      \"1452567772283-91d67178f409\",\r\n      \"1458245229726-a8ba04cb5969\",\r\n      \"1422246719650-cb30d19825e3\",\r\n      \"1417392639864-2c88dd07f460\",\r\n      \"1442328166075-47fe7153c128\",\r\n      \"1448467258552-6b3982373a13\",\r\n      \"1447023362548-250f3a7b80ed\",\r\n      \"1451486242265-24b0c0ef9a51\",\r\n      \"1414339372428-797ec111646d\",\r\n    ];\r\n\r\n    let photo = Utils.randomChoice(photos);\r\n    if (layer?.id != null) {\r\n      photo = photos[layer.id % photos.length];\r\n    }\r\n\r\n    const increment = 100;\r\n    let size = 1024;\r\n\r\n    if (layer) {\r\n      size = Math.max(layer.width, layer.height);\r\n      size = Math.ceil(size / increment) * increment;\r\n      if (size < increment) size = increment;\r\n      size = Utils.devicePixelRatio() * size;\r\n      size = parseInt(size, 10);\r\n    }\r\n\r\n    return `https://images.unsplash.com/photo-${photo}?ixlib=rb-0.3.5&q=80&fm=jpg&crop=entropy&w=${size}&h=${size}&fit=max`;\r\n  },\r\n\r\n  defineEnum: function (names = [], offset = 0, geometric = 0) {\r\n    const Enum = {};\r\n    for (let i = 0; i < names.length; i++) {\r\n      const name = names[i];\r\n      let j = i;\r\n      j = offset ? j + offset : j;\r\n      j = geometric ? Math.pow(geometric, j) : j;\r\n      Enum[(Enum[name] = j)] = name;\r\n    }\r\n    return Enum;\r\n  },\r\n\r\n  labelLayer: function (layer, text, style = {}) {\r\n    if (!text || typeof text !== \"string\") return;\r\n\r\n    const fontSize = Math.max(Math.min(48, parseInt(layer.height / 3.2)), 14);\r\n\r\n    style = _.extend(\r\n      {\r\n        font: `${fontSize}px/1em ${Utils.deviceFont()}`,\r\n        lineHeight: `${layer.height}px`,\r\n        textAlign: \"center\",\r\n        color: \"#fff\",\r\n      },\r\n      style\r\n    );\r\n\r\n    layer.style = style;\r\n    layer.html = text;\r\n  },\r\n\r\n  stringify: function (obj) {\r\n    try {\r\n      if (_.isObject(obj)) return JSON.stringify(obj);\r\n    } catch (error) {}\r\n\r\n    if (obj === null) return \"null\";\r\n    if (obj === undefined) return \"undefined\";\r\n    if (obj.toString) return obj.toString();\r\n    return obj;\r\n  },\r\n\r\n  inspectObjectType: function (item) {\r\n    // This is a hacky way to get nice object names, it tries to\r\n    // parse them from the .toString methods for objects.\r\n\r\n    let className;\r\n    if (\r\n      (item.constructor != null ? item.constructor.name : undefined) != null &&\r\n      (item.constructor != null ? item.constructor.name : undefined) !==\r\n        \"Object\"\r\n    ) {\r\n      return item.constructor.name;\r\n    }\r\n\r\n    const extract = function (str) {\r\n      if (!str) {\r\n        return null;\r\n      }\r\n      const regex = /\\[object (\\w+)\\]/;\r\n      const match = regex.exec(str);\r\n      if (match) {\r\n        return match[1];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    if (item.toString) {\r\n      className = extract(item.toString());\r\n      if (className) {\r\n        return className;\r\n      }\r\n    }\r\n\r\n    if (item.constructor != null ? item.constructor.toString : undefined) {\r\n      className = extract(\r\n        item.constructor != null ? item.constructor.toString() : undefined\r\n      );\r\n      if (className) {\r\n        return className.replace(\"Constructor\", \"\");\r\n      }\r\n    }\r\n\r\n    return \"Object\";\r\n  },\r\n\r\n  inspect: function (item, max, l) {\r\n    if (max == null) {\r\n      max = 5;\r\n    }\r\n    if (l == null) {\r\n      l = 0;\r\n    }\r\n    if (item === null) {\r\n      return \"null\";\r\n    }\r\n    if (item === undefined) {\r\n      return \"undefined\";\r\n    }\r\n\r\n    if (_.isFunction(item.toInspect)) {\r\n      return item.toInspect();\r\n    }\r\n    if (_.isString(item)) {\r\n      return `\\\"${item}\\\"`;\r\n    }\r\n    if (_.isNumber(item)) {\r\n      return `${item}`;\r\n    }\r\n    if (_.isFunction(item)) {\r\n      let code = item\r\n        .toString()\r\n        .slice(\"function \".length)\r\n        .replace(/\\n/g, \"\")\r\n        .replace(/\\s+/g, \" \");\r\n      // We limit the size of a function body if it's in a strucutre\r\n      const limit = 50;\r\n      if (code.length > limit && l > 0) {\r\n        code = `${_.trimEnd(code.slice(0, +limit + 1 || undefined))} }`;\r\n      }\r\n      return `<Function ${code}>`;\r\n    }\r\n    if (_.isArray(item)) {\r\n      if (l > max) {\r\n        return \"[...]\";\r\n      }\r\n      return (\r\n        \"[\" + _.map(item, (i) => Utils.inspect(i, max, l + 1)).join(\", \") + \"]\"\r\n      );\r\n    }\r\n    if (_.isObject(item)) {\r\n      let objectInfo;\r\n      const objectType = Utils.inspectObjectType(item);\r\n      // We should not loop over dom trees because we will have a bad time\r\n      if (/HTML\\w+?Element/.test(objectType)) {\r\n        return `<${objectType}>`;\r\n      }\r\n      if (l > max) {\r\n        objectInfo = \"{...}\";\r\n      } else {\r\n        objectInfo =\r\n          \"{\" +\r\n          _.map(item, (v, k) => `${k}:${Utils.inspect(v, max, l + 1)}`).join(\r\n            \", \"\r\n          ) +\r\n          \"}\";\r\n      }\r\n      if (objectType === \"Object\") {\r\n        return objectInfo;\r\n      }\r\n      return `<${objectType} ${objectInfo}>`;\r\n    }\r\n\r\n    return `${item}`;\r\n  },\r\n\r\n  uuid: function () {\r\n    const chars = \"0123456789abcdefghijklmnopqrstuvwxyz\".split(\"\");\r\n    const output = new Array(36);\r\n    let random = 0;\r\n\r\n    for (let digit = 1; digit <= 32; digit++) {\r\n      if (random <= 0x02) {\r\n        random = (0x2000000 + Math.random() * 0x1000000) | 0;\r\n      }\r\n      var r = random & 0xf;\r\n      random = random >> 4;\r\n      output[digit] = chars[digit === 19 ? (r & 0x3) | 0x8 : r];\r\n    }\r\n\r\n    return output.join(\"\");\r\n  },\r\n\r\n  findLayer: (layers, selector) =>\r\n    _.find(layers, (layer) => Utils.layerMatchesSelector(layer, selector)),\r\n\r\n  filterLayers: (layers, selector) =>\r\n    _.filter(layers, (layer) => Utils.layerMatchesSelector(layer, selector)),\r\n\r\n  layerMatchesSelector: (layer, selector) => {\r\n    const getHierarchyString = (l) => {\r\n      // create a string of the hierarchy so we can run regex on it\r\n      const nameArr = _.pluck(l.ancestors().reverse(), \"name\");\r\n      return nameArr.join(\">\") + `>${layer.name}`;\r\n    };\r\n\r\n    const hierarchyMatch = (hierarchy, string) => {\r\n      string = string.replace(/\\s*>\\s*/g, \">\"); // clean spaces around >\r\n      string = string.split(\"*\").join(\"[^>]*\"); // anything but >\r\n      string = string.split(\" \").join(\"(?:.*)>\"); // anything but ends with >\r\n      string = string.split(\",\").join(\"$|\"); // or\r\n      const regexString = \"(^|>)\" + string + \"$\";\r\n      const regExp = new RegExp(regexString);\r\n      return regExp.test(hierarchy);\r\n    };\r\n\r\n    if (selector) {\r\n      const hierarchy = getHierarchyString(layer, selector);\r\n      return hierarchyMatch(hierarchy, selector);\r\n    }\r\n  },\r\n\r\n  arrayFromArguments: (args) =>\r\n    _.isArray(args[0]) ? args[0] : Array.from(args),\r\n\r\n  cycle: (...args) => {\r\n    let curr = -1;\r\n    return () => {\r\n      curr++;\r\n      if (curr >= args.length) curr = 0;\r\n      return args[curr];\r\n    };\r\n  },\r\n\r\n  toggle: (...args) => Utils.cycle(...args),\r\n\r\n  callAfterCount: (total, callback) => {\r\n    let count = 0;\r\n    return () => {\r\n      count += 1;\r\n      if (count === total)\r\n        return typeof callback === \"function\" ? callback() : undefined;\r\n    };\r\n  },\r\n\r\n  equal: (a, b) => {\r\n    if (_.isFunction(a?.isEqual)) return a.isEqual(b);\r\n    if (_.isFunction(b?.isEqual)) return b.isEqual(a);\r\n    return _.isEqual(a, b);\r\n  },\r\n\r\n  isWebKit: () => window.WebKitCSSMatrix !== undefined && !Utils.isEdge(),\r\n\r\n  webkitVersion: () => {\r\n    let version = -1;\r\n    const regexp = /AppleWebKit\\/([\\d.]+)/;\r\n    const result = regexp.exec(navigator.userAgent);\r\n    if (result) version = parseFloat(result[1]);\r\n    return version;\r\n  },\r\n\r\n  isChrome: () =>\r\n    /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor),\r\n\r\n  isSafari: () =>\r\n    /Safari/.test(navigator.userAgent) &&\r\n    /Apple Computer/.test(navigator.vendor),\r\n\r\n  isFirefox: () => /^Mozilla.*Firefox\\/\\d+\\.\\d+$/.test(navigator.userAgent),\r\n\r\n  isEdge: () => /Edge/.test(navigator.userAgent),\r\n\r\n  isAndroid: () => /(android)/i.test(navigator.userAgent),\r\n\r\n  isIOS: () => /(iPhone|iPod|iPad)/i.test(navigator.platform),\r\n\r\n  isMacOS: () => /Mac/.test(navigator.platform),\r\n\r\n  isWindows: () => /Win/.test(navigator.platform),\r\n\r\n  isTouch: () =>\r\n    window.ontouchstart === null &&\r\n    window.ontouchmove === null &&\r\n    window.ontouchend === null,\r\n\r\n  isDesktop: () => Utils.deviceType() === \"desktop\",\r\n\r\n  isPhone: () => Utils.deviceType() === \"phone\",\r\n\r\n  isTablet: () => Utils.deviceType() === \"tablet\",\r\n\r\n  isMobile: () => Utils.isPhone() || Utils.isTablet(),\r\n\r\n  isFileUrl: (url) => _.startsWith(url, \"file://\"),\r\n\r\n  isDataUrl: (url) => _.startsWith(url, \"data:\"),\r\n\r\n  isRelativeUrl: (url) => !/^([a-zA-Z]{1,8}:\\/\\/).*$/.test(url),\r\n\r\n  isLocalServerUrl: (url) =>\r\n    /[a-zA-Z]{1,8}:\\/\\/127\\.0\\.0\\.1/.test(url) ||\r\n    /[a-zA-Z]{1,8}:\\/\\/localhost/.test(url),\r\n\r\n  isLocalUrl: (url) => Utils.isFileUrl(url) || Utils.isLocalServerUrl(url),\r\n\r\n  isLocalAssetUrl: (url, baseUrl = window.location.href) => {\r\n    if (Utils.isDataUrl(url)) return false;\r\n    if (Utils.isLocalUrl(url)) return true;\r\n    if (Utils.isRelativeUrl(url) && Utils.isLocalUrl(baseUrl)) return true;\r\n    return false;\r\n  },\r\n\r\n  isFramerStudio: () => navigator.userAgent.includes(\"FramerStudio\"),\r\n\r\n  framerStudioVersion: () => {\r\n    if (Utils.isFramerStudio()) {\r\n      const isBeta = navigator.userAgent.includes(\"FramerStudio/beta\");\r\n      const isLocal = navigator.userAgent.includes(\"FramerStudio/local\");\r\n      const isFuture = navigator.userAgent.includes(\"FramerStudio/future\");\r\n\r\n      if (isBeta || isLocal || isFuture) return Number.MAX_VALUE;\r\n\r\n      const matches = navigator.userAgent.match(/\\d+$/);\r\n      const version =\r\n        matches && matches.length > 0 ? parseInt(matches[0]) : undefined;\r\n\r\n      if (_.isNumber(version)) return version;\r\n    }\r\n\r\n    return Number.MAX_VALUE;\r\n  },\r\n\r\n  devicePixelRatio: () => window.devicePixelRatio,\r\n\r\n  isJP2Supported: () =>\r\n    Utils.isWebKit() && !Utils.isChrome() && !Utils.isFirefox(),\r\n\r\n  isWebPSupported: () => Utils.isChrome(),\r\n\r\n  deviceType: () => {\r\n    if (/(tablet)|(iPad)|(Nexus 9)/i.test(navigator.userAgent)) return \"tablet\";\r\n    if (/(mobi)/i.test(navigator.userAgent)) return \"phone\";\r\n    return \"desktop\";\r\n  },\r\n\r\n  pathJoin: (...args) => args.join(\"/\"),\r\n\r\n  deviceFont: (os) => {\r\n    if (!os) {\r\n      if (Utils.isMacOS()) os = \"macOS\";\r\n      if (Utils.isIOS()) os = \"iOS\";\r\n      if (Utils.isAndroid()) os = \"Android\";\r\n      if (Utils.isWindows()) os = \"Windows\";\r\n    }\r\n\r\n    const appleFont =\r\n      \"-apple-system, BlinkMacSystemFont, SF UI Text, Helvetica Neue\";\r\n    const googleFont = \"Roboto, Helvetica Neue\";\r\n    const microsoftFont = \"Segoe UI, Helvetica Neue\";\r\n\r\n    switch (os) {\r\n      case \"Android\":\r\n        return googleFont;\r\n      case \"iOS\":\r\n      case \"watchOS\":\r\n      case \"macOS\":\r\n        return appleFont;\r\n      case \"Windows\":\r\n        return microsoftFont;\r\n      default:\r\n        return appleFont;\r\n    }\r\n  },\r\n\r\n  isFontAvailable: (fonts) => {\r\n    if (_isFontLoadedResults[fonts] === true) return true;\r\n\r\n    if (monoWidth == null) monoWidth = getWidth(\"monospace\");\r\n    if (serifWidth == null) serifWidth = getWidth(\"serif\");\r\n    if (sansWidth == null) sansWidth = getWidth(\"sans-serif\");\r\n\r\n    if (\r\n      monoWidth !== getWidth(`${fonts},monospace`) ||\r\n      serifWidth !== getWidth(`${fonts},serif`) ||\r\n      sansWidth !== getWidth(`${fonts},sans-serif`)\r\n    ) {\r\n      _isFontLoadedResults[fonts] = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  isFontFamilyLoaded: (fonts, timeout = 1000) => {\r\n    if (!_.isArray(fonts)) fonts = [fonts];\r\n\r\n    const unavailableFonts = fonts.filter(\r\n      (font) => !Utils.isFontAvailable(font)\r\n    );\r\n\r\n    if (unavailableFonts.length === 0) return true;\r\n\r\n    return Utils.loadWebFontConfig({\r\n      custom: {\r\n        families: unavailableFonts,\r\n      },\r\n      timeout,\r\n    });\r\n  },\r\n\r\n  textSize: (text, style = {}, constraints = {}) => {\r\n    let frame;\r\n    const shouldCreateNode = !_textSizeNode;\r\n\r\n    if (shouldCreateNode) {\r\n      _textSizeNode = document.createElement(\"div\");\r\n      _textSizeNode.id = \"_textSizeNode\";\r\n    }\r\n\r\n    // Reset all previous styles and set the content\r\n    _textSizeNode.removeAttribute(\"style\");\r\n    _textSizeNode.innerHTML = text;\r\n\r\n    style = _.extend(_.clone(style), {\r\n      position: \"fixed\",\r\n      display: \"inline\",\r\n      visibility: \"hidden\",\r\n      top: \"-10000px\",\r\n      left: \"-10000px\",\r\n    });\r\n\r\n    // Remove sizing properties that will interfere\r\n    delete style.width;\r\n    delete style.height;\r\n    delete style.bottom;\r\n    delete style.right;\r\n\r\n    if (constraints.max) {\r\n      if (constraints.width) style.maxWidth = `${constraints.width}px`;\r\n      if (constraints.height) style.maxHeight = `${constraints.height}px`;\r\n    } else {\r\n      if (constraints.width) style.width = `${constraints.width}px`;\r\n      if (constraints.height) style.height = `${constraints.height}px`;\r\n    }\r\n\r\n    _.extend(_textSizeNode.style, style);\r\n\r\n    if (shouldCreateNode) {\r\n      if (!document.body) {\r\n        // In case document.body is not ready\r\n        document.write(_textSizeNode.outerHTML);\r\n        _textSizeNode = document.getElementById(\"_textSizeNode\");\r\n      } else {\r\n        document.body.appendChild(_textSizeNode);\r\n      }\r\n    }\r\n\r\n    const rect = _textSizeNode.getBoundingClientRect();\r\n\r\n    return {\r\n      width: rect.right - rect.left,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n  },\r\n\r\n  loadWebFontConfig: (config) => {\r\n    const fonts = fontsFromConfig(config);\r\n    let allLoadedResult = null;\r\n\r\n    for (const currentFont of fonts) {\r\n      const currentFontLoaded = _isFontLoadedResults[currentFont];\r\n      if (currentFontLoaded == null) {\r\n        allLoadedResult = null;\r\n        break;\r\n      }\r\n      allLoadedResult =\r\n        allLoadedResult === null\r\n          ? currentFontLoaded\r\n          : allLoadedResult && currentFontLoaded;\r\n    }\r\n\r\n    if (allLoadedResult != null) return allLoadedResult;\r\n\r\n    const {\r\n      active: customActive,\r\n      inactive: customInactive,\r\n      fontactive: customFontactive,\r\n      fontinactive: customFontinactive,\r\n    } = config;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      config.fontactive = (font) => {\r\n        _isFontLoadedResults[font] = true;\r\n        if (typeof customFontactive === \"function\") customFontactive(font);\r\n        if (fonts.length === 1) resolve();\r\n      };\r\n\r\n      config.fontinactive = (font) => {\r\n        console.warn(`Tried to load unavailable font: '${font}'`);\r\n        _isFontLoadedResults[font] = false;\r\n        if (typeof customFontinactive === \"function\") customFontinactive(font);\r\n        if (fonts.length === 1) reject(new Error(`${font} failed to load`));\r\n      };\r\n\r\n      config.active = () => {\r\n        if (typeof customActive === \"function\") customActive();\r\n        resolve();\r\n      };\r\n\r\n      config.inactive = () => {\r\n        if (typeof customInactive === \"function\") customInactive();\r\n        reject(new Error(`${fonts.join(\", \")} failed to load`));\r\n      };\r\n\r\n      WebFont.load(config);\r\n    });\r\n  },\r\n\r\n  loadWebFont: (font, weight, source = \"google\") => {\r\n    if (\r\n      _isFontLoadedResults[font] == null ||\r\n      _isFontLoadedResults[font] === false\r\n    ) {\r\n      delete _isFontLoadedResults[font];\r\n      const config = {};\r\n      if (source === \"google\") {\r\n        let fontToLoad = font;\r\n        if (weight != null) fontToLoad += `:${weight}`;\r\n        config.google = { families: [fontToLoad] };\r\n      }\r\n      Utils.loadWebFontConfig(config);\r\n    }\r\n    return { fontFamily: font, fontWeight: weight };\r\n  },\r\n\r\n  //#####################################################\r\n  // MATH FUNCTIONS\r\n\r\n  round: (value, decimals = 0, increment = null, min = null, max = null) => {\r\n    const d = Math.pow(10, decimals);\r\n\r\n    if (increment) value = Math.round(value / increment) * increment;\r\n    value = Math.round(value * d) / d;\r\n\r\n    if (min != null && value < min) value = min;\r\n    if (max != null && value > max) value = max;\r\n\r\n    return value;\r\n  },\r\n\r\n  roundWhole: (value, decimals = 1) =>\r\n    parseInt(value) === value ? parseInt(value) : Utils.round(value, decimals),\r\n\r\n  clamp: (value, a, b) => {\r\n    const min = Math.min(a, b);\r\n    const max = Math.max(a, b);\r\n    return Math.min(Math.max(value, min), max);\r\n  },\r\n\r\n  mapRange: (value, fromLow, fromHigh, toLow, toHigh) =>\r\n    toLow + ((value - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow),\r\n\r\n  modulate: (value, [fromLow, fromHigh], [toLow, toHigh], limit = false) => {\r\n    let result =\r\n      toLow + ((value - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow);\r\n\r\n    if (limit) {\r\n      if (toLow < toHigh) {\r\n        result = Math.min(Math.max(result, toLow), toHigh);\r\n      } else {\r\n        result = Math.max(Math.min(result, toLow), toHigh);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n  //#####################################################\r\n  // STRING FUNCTIONS\r\n\r\n  parseFunction: (str) => {\r\n    const result = { name: \"\", args: [] };\r\n\r\n    if (_.endsWith(str, \")\")) {\r\n      result.name = str.split(\"(\")[0];\r\n      result.args = str\r\n        .split(\"(\")[1]\r\n        .split(\",\")\r\n        .map((a) => _.trim(_.trimEnd(a, \")\")));\r\n    } else {\r\n      result.name = str;\r\n    }\r\n\r\n    return result;\r\n  },\r\n};\r\n\r\nif (window.requestAnimationFrame == null) {\r\n  window.requestAnimationFrame = window.webkitRequestAnimationFrame;\r\n}\r\nif (window.requestAnimationFrame == null) {\r\n  window.requestAnimationFrame = (f) => Utils.delay(1 / 60, f);\r\n}\r\n\r\n// Used by animation engine, needs to be very performant\r\nif (window.performance) {\r\n  Utils.getTime = () => window.performance.now() / 1000;\r\n} else {\r\n  Utils.getTime = () => Date.now() / 1000;\r\n}\r\n\r\nconst _isFontLoadedResults = {};\r\n\r\nconst getWidth = (fontFamily) =>\r\n  Utils.textSize(\"BESbswy\", {\r\n    fontFamily,\r\n    fontSize: 300,\r\n  }).width;\r\n\r\nlet monoWidth = null;\r\nlet serifWidth = null;\r\nlet sansWidth = null;\r\n\r\nconst fontsFromConfig = function (config) {\r\n  let result = [];\r\n  if (\r\n    _.isArray(\r\n      __guard__(config != null ? config.custom : undefined, (x) => x.families)\r\n    )\r\n  ) {\r\n    result = result.concat(\r\n      __guard__(config != null ? config.custom : undefined, (x1) => x1.families)\r\n    );\r\n  }\r\n  if (\r\n    _.isArray(\r\n      __guard__(config != null ? config.google : undefined, (x2) => x2.families)\r\n    )\r\n  ) {\r\n    result = result.concat(\r\n      __guard__(config != null ? config.google : undefined, (x3) => x3.families)\r\n    );\r\n  }\r\n  return result;\r\n};\r\n//#####################################################\r\n// DOM FUNCTIONS\r\n\r\nconst __domCompleteState = \"interactive\";\r\nlet __domComplete = [];\r\nlet __domReady = false;\r\n\r\nif (typeof document !== \"undefined\" && document !== null) {\r\n  document.onreadystatechange = function (event) {\r\n    if (document.readyState === __domCompleteState) {\r\n      __domReady = true;\r\n      return (() => {\r\n        const result = [];\r\n        while (__domComplete.length) {\r\n          var f;\r\n          result.push((f = __domComplete.shift()()));\r\n        }\r\n        return result;\r\n      })();\r\n    }\r\n  };\r\n}\r\n\r\nUtils.domComplete = function (f) {\r\n  if (__domReady) {\r\n    return f();\r\n  } else {\r\n    return __domComplete.push(f);\r\n  }\r\n};\r\n\r\nUtils.domCompleteCancel = (f) => (__domComplete = _.without(__domComplete, f));\r\n\r\nUtils.domValidEvent = function (element, eventName) {\r\n  if (!eventName) {\r\n    return;\r\n  }\r\n  if ([\"touchstart\", \"touchmove\", \"touchend\"].includes(eventName)) {\r\n    return true;\r\n  }\r\n  return typeof element[`on${eventName.toLowerCase()}`] !== \"undefined\";\r\n};\r\n\r\nUtils.domLoadScript = function (url, callback) {\r\n  const script = document.createElement(\"script\");\r\n  script.type = \"text/javascript\";\r\n  script.src = url;\r\n\r\n  script.onload = callback;\r\n\r\n  const head = document.getElementsByTagName(\"head\")[0];\r\n  head.appendChild(script);\r\n\r\n  return script;\r\n};\r\n\r\nUtils.domLoadData = function (path, callback) {\r\n  const request = new XMLHttpRequest();\r\n\r\n  // request.addEventListener \"progress\", updateProgress, false\r\n  // request.addEventListener \"abort\", transferCanceled, false\r\n\r\n  request.addEventListener(\r\n    \"load\",\r\n    () => callback(null, request.responseText),\r\n    false\r\n  );\r\n\r\n  request.addEventListener(\"error\", () => callback(true, null), false);\r\n\r\n  request.open(\"GET\", path, true);\r\n  return request.send(null);\r\n};\r\n\r\nUtils.domLoadJSON = (path, callback) =>\r\n  Utils.domLoadData(path, (err, data) => callback(err, JSON.parse(data)));\r\n\r\nUtils.domLoadDataSync = function (path) {\r\n  const request = new XMLHttpRequest();\r\n  request.open(\"GET\", path, false);\r\n\r\n  // This does not work in Safari, see below\r\n  try {\r\n    request.send(null);\r\n  } catch (e) {\r\n    console.debug(\"XMLHttpRequest.error\", e);\r\n  }\r\n\r\n  const handleError = function () {\r\n    throw Error(\r\n      `Utils.domLoadDataSync: ${path} -> [${request.status} ${request.statusText}]`\r\n    );\r\n  };\r\n\r\n  request.onerror = handleError;\r\n\r\n  if (![200, 0].includes(request.status)) {\r\n    handleError();\r\n  }\r\n\r\n  // Because I can't catch the actual 404 with Safari, I just assume something\r\n  // went wrong if there is no text data returned from the request.\r\n  if (!request.responseText) {\r\n    handleError();\r\n  }\r\n\r\n  // console.log \"domLoadDataSync\", path\r\n  // console.log \"xhr.readyState\", request.readyState\r\n  // console.log \"xhr.status\", request.status\r\n  // console.log \"xhr.responseText\", request.responseText\r\n\r\n  return request.responseText;\r\n};\r\n\r\nUtils.domLoadJSONSync = (path) => JSON.parse(Utils.domLoadDataSync(path));\r\n\r\nUtils.domLoadScriptSync = function (path) {\r\n  const scriptData = Utils.domLoadDataSync(path);\r\n  eval(scriptData);\r\n  return scriptData;\r\n};\r\n\r\nUtils.insertCSS = function (css) {\r\n  const styleElement = document.createElement(\"style\");\r\n  styleElement.type = \"text/css\";\r\n  styleElement.innerHTML = css;\r\n\r\n  return Utils.domComplete(() => document.body.appendChild(styleElement));\r\n};\r\n\r\nUtils.loadImage = function (url, callback, context) {\r\n  // Loads a single image and calls callback.\r\n  // The callback will be called with true if there is an error.\r\n\r\n  const element = new Image();\r\n  if (context == null) {\r\n    context = Framer.CurrentContext;\r\n  }\r\n\r\n  context.domEventManager\r\n    .wrap(element)\r\n    .addEventListener(\"load\", (event) => callback());\r\n\r\n  context.domEventManager\r\n    .wrap(element)\r\n    .addEventListener(\"error\", (event) => callback(true));\r\n\r\n  return (element.src = url);\r\n};\r\n\r\nUtils.isInsideIframe = function () {\r\n  if (!Utils.isInsideFramerCloud()) {\r\n    return window !== window.top;\r\n  }\r\n  return false;\r\n};\r\n\r\nUtils.isInsideFramerCloud = () => Utils.getQueryParameters()[\"cloud\"] === \"1\";\r\n\r\nUtils.getQueryParameters = () =>\r\n  _.fromPairs(\r\n    window.location.search\r\n      .slice(1)\r\n      .split(\"&\")\r\n      .map((val) => val.split(\"=\"))\r\n  );\r\n\r\n//#####################################################\r\n// GEOMETRY FUNCTIONS\r\n\r\n// Point\r\n\r\nUtils.point = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.pointZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.pointZero();\r\n  }\r\n\r\n  const result = Utils.pointZero();\r\n\r\n  for (var k of [\"x\", \"y\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.pointZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { x: n, y: n };\r\n};\r\n\r\nUtils.pointDivide = (point, fraction) =>\r\n  (point = {\r\n    x: point.x / fraction,\r\n    y: point.y / fraction,\r\n  });\r\n\r\nUtils.pointAdd = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: pointA.x + pointB.x,\r\n    y: pointA.y + pointB.y,\r\n  });\r\n};\r\n\r\nUtils.pointSubtract = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: pointA.x - pointB.x,\r\n    y: pointA.y - pointB.y,\r\n  });\r\n};\r\n\r\nUtils.pointMin = function () {\r\n  let point;\r\n  const points = Utils.arrayFromArguments(arguments);\r\n  return (point = {\r\n    x: _.min(points.map((size) => size.x)),\r\n    y: _.min(points.map((size) => size.y)),\r\n  });\r\n};\r\n\r\nUtils.pointMax = function () {\r\n  let point;\r\n  const points = Utils.arrayFromArguments(arguments);\r\n  return (point = {\r\n    x: _.max(points.map((size) => size.x)),\r\n    y: _.max(points.map((size) => size.y)),\r\n  });\r\n};\r\n\r\nUtils.pointDelta = function (pointA, pointB) {\r\n  let delta;\r\n  return (delta = {\r\n    x: pointB.x - pointA.x,\r\n    y: pointB.y - pointA.y,\r\n  });\r\n};\r\n\r\nUtils.pointDistance = function (pointA, pointB) {\r\n  const a = pointA.x - pointB.x;\r\n  const b = pointA.y - pointB.y;\r\n  return Math.sqrt(a * a + b * b);\r\n};\r\n\r\nUtils.pointInvert = (point) =>\r\n  (point = {\r\n    x: 0 - point.x,\r\n    y: 0 - point.y,\r\n  });\r\n\r\nUtils.pointTotal = (point) => point.x + point.y;\r\n\r\nUtils.pointAbs = (point) =>\r\n  (point = {\r\n    x: Math.abs(point.x),\r\n    y: Math.abs(point.y),\r\n  });\r\n\r\nUtils.pointInFrame = function (point, frame) {\r\n  if (\r\n    point.x < Utils.frameGetMinX(frame) ||\r\n    point.x > Utils.frameGetMaxX(frame)\r\n  ) {\r\n    return false;\r\n  }\r\n  if (\r\n    point.y < Utils.frameGetMinY(frame) ||\r\n    point.y > Utils.frameGetMaxY(frame)\r\n  ) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nUtils.pointCenter = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: (pointA.x + pointB.x) / 2,\r\n    y: (pointA.y + pointB.y) / 2,\r\n  });\r\n};\r\n\r\nUtils.pointAngle = (pointA, pointB) =>\r\n  (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI;\r\n\r\nUtils.divideFrame = function (frame, scale) {\r\n  frame.x /= scale;\r\n  frame.y /= scale;\r\n  frame.width /= scale;\r\n  frame.height /= scale;\r\n  return frame;\r\n};\r\n\r\nUtils.scaleFrames = function (layer, scale) {\r\n  if (layer instanceof Layer) {\r\n    layer.constraintValues = null;\r\n    layer.children.map((l) => Utils.scaleFrames(l, scale));\r\n    layer.frame = Utils.divideFrame(layer.frame, scale);\r\n  }\r\n  if (_.isArray(layer)) {\r\n    return layer.map((l) => Utils.scaleFrames(l, scale));\r\n  }\r\n};\r\n// Size\r\n\r\nUtils.size = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.sizeZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.sizeZero();\r\n  }\r\n\r\n  const result = Utils.sizeZero();\r\n\r\n  for (var k of [\"width\", \"height\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.sizeZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { width: n, height: n };\r\n};\r\n\r\nUtils.sizeMin = function () {\r\n  let size;\r\n  const sizes = Utils.arrayFromArguments(arguments);\r\n  return (size = {\r\n    width: _.min(sizes.map((size) => size.width)),\r\n    height: _.min(sizes.map((size) => size.height)),\r\n  });\r\n};\r\n\r\nUtils.sizeMax = function () {\r\n  let size;\r\n  const sizes = Utils.arrayFromArguments(arguments);\r\n  return (size = {\r\n    width: _.max(sizes.map((size) => size.width)),\r\n    height: _.max(sizes.map((size) => size.height)),\r\n  });\r\n};\r\n\r\n// Rect\r\n\r\nUtils.rectZero = function (args) {\r\n  if (args == null) {\r\n    args = {};\r\n  }\r\n  return _.defaults(args, { top: 0, right: 0, bottom: 0, left: 0 });\r\n};\r\n\r\nUtils.parseRect = function (args) {\r\n  if (_.isArray(args) && _.isNumber(args[0])) {\r\n    if (args.length === 1) {\r\n      return Utils.parseRect({ top: args[0] });\r\n    }\r\n    if (args.length === 2) {\r\n      return Utils.parseRect({ top: args[0], right: args[1] });\r\n    }\r\n    if (args.length === 3) {\r\n      return Utils.parseRect({ top: args[0], right: args[1], bottom: args[2] });\r\n    }\r\n    if (args.length === 4) {\r\n      return Utils.parseRect({\r\n        top: args[0],\r\n        right: args[1],\r\n        bottom: args[2],\r\n        left: args[3],\r\n      });\r\n    }\r\n  }\r\n  if (_.isArray(args) && _.isObject(args[0])) {\r\n    return args[0];\r\n  }\r\n  if (_.isObject(args)) {\r\n    return args;\r\n  }\r\n  if (_.isNumber(args)) {\r\n    return { top: args, right: args, bottom: args, left: args };\r\n  }\r\n\r\n  return {};\r\n};\r\n\r\n// Frames\r\n\r\n// min mid max * x, y\r\n\r\nUtils.frameGetMinX = (frame) => frame.x;\r\nUtils.frameSetMinX = (frame, value) => (frame.x = value);\r\n\r\nUtils.frameGetMidX = function (frame) {\r\n  if (frame.width === 0) {\r\n    return frame.x;\r\n  } else {\r\n    return frame.x + frame.width / 2.0;\r\n  }\r\n};\r\nUtils.frameSetMidX = (frame, value) =>\r\n  (frame.x = frame.width === 0 ? value : value - frame.width / 2.0);\r\n\r\nUtils.frameGetMaxX = function (frame) {\r\n  if (frame.width === 0) {\r\n    return 0;\r\n  } else {\r\n    return frame.x + frame.width;\r\n  }\r\n};\r\nUtils.frameSetMaxX = (frame, value) =>\r\n  (frame.x = frame.width === 0 ? 0 : value - frame.width);\r\n\r\nUtils.frameGetMinY = (frame) => frame.y;\r\nUtils.frameSetMinY = (frame, value) => (frame.y = value);\r\n\r\nUtils.frameGetMidY = function (frame) {\r\n  if (frame.height === 0) {\r\n    return frame.y;\r\n  } else {\r\n    return frame.y + frame.height / 2.0;\r\n  }\r\n};\r\nUtils.frameSetMidY = (frame, value) =>\r\n  (frame.y = frame.height === 0 ? value : value - frame.height / 2.0);\r\n\r\nUtils.frameGetMaxY = function (frame) {\r\n  if (frame.height === 0) {\r\n    return 0;\r\n  } else {\r\n    return frame.y + frame.height;\r\n  }\r\n};\r\nUtils.frameSetMaxY = (frame, value) =>\r\n  (frame.y = frame.height === 0 ? 0 : value - frame.height);\r\n\r\nUtils.frame = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.frameZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.frameZero();\r\n  }\r\n\r\n  const result = Utils.frameZero();\r\n\r\n  for (var k of [\"x\", \"y\", \"width\", \"height\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.frameZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { x: n, y: n };\r\n};\r\n\r\nUtils.frameSize = function (frame) {\r\n  let size;\r\n  return (size = {\r\n    width: frame.width,\r\n    height: frame.height,\r\n  });\r\n};\r\n\r\nUtils.framePoint = function (frame) {\r\n  let point;\r\n  return (point = {\r\n    x: frame.x,\r\n    y: frame.y,\r\n  });\r\n};\r\n\r\nUtils.pointsFromFrame = function (frame) {\r\n  const minX = Utils.frameGetMinX(frame);\r\n  const maxX = Utils.frameGetMaxX(frame);\r\n  const minY = Utils.frameGetMinY(frame);\r\n  const maxY = Utils.frameGetMaxY(frame);\r\n  const corner1 = { x: minX, y: minY };\r\n  const corner2 = { x: minX, y: maxY };\r\n  const corner3 = { x: maxX, y: maxY };\r\n  const corner4 = { x: maxX, y: minY };\r\n  return [corner1, corner2, corner3, corner4];\r\n};\r\n\r\nUtils.frameFromPoints = function (points) {\r\n  let frame;\r\n  const xValues = _.map(points, \"x\");\r\n  const yValues = _.map(points, \"y\");\r\n\r\n  const minX = _.min(xValues);\r\n  const maxX = _.max(xValues);\r\n  const minY = _.min(yValues);\r\n  const maxY = _.max(yValues);\r\n\r\n  return (frame = {\r\n    x: minX,\r\n    y: minY,\r\n    width: maxX - minX,\r\n    height: maxY - minY,\r\n  });\r\n};\r\n\r\nUtils.pixelAlignedFrame = function (frame) {\r\n  const x = Math.round(frame.x);\r\n  const y = Math.round(frame.y);\r\n  const maxX = Math.round(frame.x + frame.width);\r\n  const maxY = Math.round(frame.y + frame.height);\r\n  const width = Math.max(maxX - x, 0);\r\n  const height = Math.max(maxY - y, 0);\r\n  return { x, y, width, height };\r\n};\r\n\r\nUtils.calculateLayoutFrame = function (parentFrame, child) {\r\n  const { constraintValues } = child;\r\n\r\n  let x = constraintValues.left || 0;\r\n  let y = constraintValues.top || 0;\r\n  let { width } = constraintValues;\r\n  let { height } = constraintValues;\r\n\r\n  if (parentFrame === null) {\r\n    return Utils.pixelAlignedFrame({ x, y, width, height });\r\n  }\r\n\r\n  const ratio = width / height;\r\n\r\n  if (constraintValues.widthFactor !== null) {\r\n    width = parentFrame.width * constraintValues.widthFactor;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      height = width / ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.heightFactor !== null) {\r\n    height = parentFrame.height * constraintValues.heightFactor;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      width = height * ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.left !== null && constraintValues.right !== null) {\r\n    width = parentFrame.width - constraintValues.right - constraintValues.left;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      height = width / ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.top !== null && constraintValues.bottom !== null) {\r\n    height =\r\n      parentFrame.height - constraintValues.bottom - constraintValues.top;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      width = height * ratio;\r\n    }\r\n  }\r\n\r\n  x = Utils.calculateLayoutX(parentFrame, constraintValues, width);\r\n  y = Utils.calculateLayoutY(parentFrame, constraintValues, height);\r\n\r\n  return Utils.pixelAlignedFrame({ x, y, width, height });\r\n};\r\n\r\nUtils.calculateLayoutX = function (parentFrame, constraintValues, width) {\r\n  let x = constraintValues.left || 0;\r\n  if (constraintValues.left !== null) {\r\n    x = constraintValues.left;\r\n  } else if (constraintValues.right !== null) {\r\n    x = parentFrame.width - constraintValues.right - width;\r\n  } else {\r\n    x = constraintValues.centerAnchorX * parentFrame.width - width / 2;\r\n  }\r\n  return x;\r\n};\r\n\r\nUtils.calculateLayoutY = function (parentFrame, constraintValues, height) {\r\n  let y = constraintValues.top || 0;\r\n  if (constraintValues.top !== null) {\r\n    y = constraintValues.top;\r\n  } else if (constraintValues.bottom !== null) {\r\n    y = parentFrame.height - constraintValues.bottom - height;\r\n  } else {\r\n    y = constraintValues.centerAnchorY * parentFrame.height - height / 2;\r\n  }\r\n  return y;\r\n};\r\n\r\nUtils.frameMerge = function () {\r\n  // Return a frame that fits all the input frames\r\n\r\n  const frames = Utils.arrayFromArguments(arguments);\r\n\r\n  const frame = {\r\n    x: _.min(frames.map(Utils.frameGetMinX)),\r\n    y: _.min(frames.map(Utils.frameGetMinY)),\r\n  };\r\n\r\n  frame.width = _.max(frames.map(Utils.frameGetMaxX)) - frame.x;\r\n  frame.height = _.max(frames.map(Utils.frameGetMaxY)) - frame.y;\r\n\r\n  return frame;\r\n};\r\n\r\nUtils.frameInFrame = function (frameA, frameB) {\r\n  for (var point of Array.from(Utils.pointsFromFrame(frameA))) {\r\n    if (!Utils.pointInFrame(point, frameB)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nUtils.framePointForOrigin = (frame, originX, originY) =>\r\n  (frame = {\r\n    x: frame.x + originX * frame.width,\r\n    y: frame.y + originY * frame.height,\r\n    width: frame.width,\r\n    height: frame.height,\r\n  });\r\n\r\nUtils.frameInset = function (frame, inset) {\r\n  if (_.isNumber(inset)) {\r\n    inset = { top: inset, right: inset, bottom: inset, left: inset };\r\n  }\r\n\r\n  frame = Utils.frame(frame);\r\n\r\n  return (frame = {\r\n    x: frame.x + inset.left,\r\n    y: frame.y + inset.top,\r\n    width: frame.width - inset.left - inset.right,\r\n    height: frame.height - inset.top - inset.bottom,\r\n  });\r\n};\r\n\r\nUtils.frameSortByAbsoluteDistance = function (point, frames, originX, originY) {\r\n  if (originX == null) {\r\n    originX = 0;\r\n  }\r\n  if (originY == null) {\r\n    originY = 0;\r\n  }\r\n  const distance = function (frame) {\r\n    let result = Utils.pointDelta(\r\n      point,\r\n      Utils.framePointForOrigin(frame, originX, originY)\r\n    );\r\n    result = Utils.pointAbs(result);\r\n    result = Utils.pointTotal(result);\r\n    return result;\r\n  };\r\n\r\n  return frames.sort((a, b) => distance(a) - distance(b));\r\n};\r\n\r\nUtils.pointInPolygon = function (point, vs) {\r\n  // ray-casting algorithm based on\r\n  // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n  const x = point[0];\r\n  const y = point[1];\r\n  let inside = false;\r\n  let i = 0;\r\n  let j = vs.length - 1;\r\n  while (i < vs.length) {\r\n    var xi = vs[i][0];\r\n    var yi = vs[i][1];\r\n    var xj = vs[j][0];\r\n    var yj = vs[j][1];\r\n    var intersect =\r\n      yi > y &&\r\n      y !== yj &&\r\n      yj > y &&\r\n      x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n    if (intersect) {\r\n      inside = !inside;\r\n    }\r\n    j = i++;\r\n  }\r\n  return inside;\r\n};\r\n\r\nUtils.frameIntersection = function (rectA, rect) {\r\n  let x1 = rect.x;\r\n  let y1 = rect.y;\r\n\r\n  let x2 = x1 + rect.width;\r\n  let y2 = y1 + rect.height;\r\n\r\n  if (rectA.x > x1) {\r\n    x1 = rectA.x;\r\n  }\r\n  if (rectA.y > y1) {\r\n    y1 = rectA.y;\r\n  }\r\n  if (rectA.x + rectA.width < x2) {\r\n    x2 = rectA.x + rectA.width;\r\n  }\r\n  if (rectA.y + rectA.height < y2) {\r\n    y2 = rectA.y + rectA.height;\r\n  }\r\n  if (x2 <= x1 || y2 <= y1) {\r\n    return null;\r\n  }\r\n\r\n  return (rect = {\r\n    x: x1,\r\n    y: y1,\r\n    width: x2 - x1,\r\n    height: y2 - y1,\r\n  });\r\n};\r\n\r\nUtils.frameCenterPoint = function (frame) {\r\n  let point;\r\n  return (point = {\r\n    x: Utils.frameGetMidX(frame),\r\n    y: Utils.frameGetMidY(frame),\r\n  });\r\n};\r\n\r\nUtils.frameInFrame = function (frameA, frameB) {\r\n  for (var point of Array.from(Utils.pointsFromFrame(frameA))) {\r\n    if (!Utils.pointInFrame(point, frameB)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n// Rotation\r\n\r\nUtils.rotationNormalizer = function () {\r\n  let lastValue = null;\r\n\r\n  return function (value) {\r\n    if (lastValue == null) {\r\n      lastValue = value;\r\n    }\r\n\r\n    const diff = lastValue - value;\r\n    const maxDiff = Math.abs(diff) + 180;\r\n    const nTimes = Math.floor(maxDiff / 360);\r\n\r\n    if (diff < 180) {\r\n      value -= nTimes * 360;\r\n    }\r\n    if (diff > 180) {\r\n      value += nTimes * 360;\r\n    }\r\n\r\n    lastValue = value;\r\n    return value;\r\n  };\r\n};\r\n\r\n// Coordinate system\r\n\r\n// convert a point from a layer to the context level, with rootContext enabled you can make it cross to the top context\r\nUtils.convertPointToContext = function (\r\n  point,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (point == null) {\r\n    point = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  point = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n  const containers = layer.containers(rootContext);\r\n  if (includeLayer) {\r\n    containers.unshift(layer);\r\n  }\r\n\r\n  for (var container of Array.from(containers)) {\r\n    if (container.flat || container.clip) {\r\n      point.z = 0;\r\n    }\r\n    if (container.matrix3d != null) {\r\n      point = container.matrix3d.point(point);\r\n    } else if (container.scale != null) {\r\n      point = {\r\n        x: point.x * container.scale,\r\n        y: point.y * container.scale,\r\n      };\r\n    }\r\n    if (!container.parent) {\r\n      point.z = 0;\r\n    }\r\n  }\r\n\r\n  return point;\r\n};\r\n\r\nUtils.convertFrameToContext = function (\r\n  frame,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (frame == null) {\r\n    frame = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  frame = _.defaults(frame, {\r\n    x: 0,\r\n    y: 0,\r\n    width: Framer.Defaults.Layer.width,\r\n    height: Framer.Defaults.Layer.height,\r\n  });\r\n  const corners = Utils.pointsFromFrame(frame);\r\n  const convertedCorners = corners.map((point) =>\r\n    Utils.convertPointToContext(point, layer, rootContext, includeLayer)\r\n  );\r\n  return Utils.frameFromPoints(convertedCorners);\r\n};\r\n\r\n// convert a point from the context level to a layer, with rootContext enabled you can make it cross from the top context\r\nUtils.convertPointFromContext = function (\r\n  point,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (point == null) {\r\n    point = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  point = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n\r\n  if (\r\n    rootContext &&\r\n    typeof webkitConvertPointFromPageToNode !== \"undefined\" &&\r\n    webkitConvertPointFromPageToNode !== null\r\n  ) {\r\n    let node;\r\n    if (includeLayer) {\r\n      node = layer._element;\r\n    } else {\r\n      const parent = layer.parent || layer.context;\r\n      node = parent._element;\r\n    }\r\n    point = Utils.point(\r\n      webkitConvertPointFromPageToNode(node, new WebKitPoint(point.x, point.y))\r\n    );\r\n    const context = layer.context != null ? layer.context : layer;\r\n    point = {\r\n      x: point.x / context.scale,\r\n      y: point.y / context.scale,\r\n    };\r\n    return point;\r\n  }\r\n\r\n  const containers = layer.containers(rootContext);\r\n  containers.reverse();\r\n  if (includeLayer) {\r\n    containers.push(layer);\r\n  }\r\n\r\n  for (var container of Array.from(containers)) {\r\n    if (container.matrix3d != null) {\r\n      point = container.matrix3d.inverse().point(point);\r\n    } else if (container.scale != null) {\r\n      point = {\r\n        x: point.x / container.scale,\r\n        y: point.y / container.scale,\r\n      };\r\n    }\r\n  }\r\n  return point;\r\n};\r\n\r\n// convert a frame from the context level to a layer, with rootContext enabled you can make it start from the top context\r\nUtils.convertFrameFromContext = function (\r\n  frame,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (frame == null) {\r\n    frame = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  frame = _.defaults(frame, {\r\n    x: 0,\r\n    y: 0,\r\n    width: Framer.Defaults.Layer.width,\r\n    height: Framer.Defaults.Layer.height,\r\n  });\r\n  const corners = Utils.pointsFromFrame(frame);\r\n  const convertedCorners = corners.map((point) =>\r\n    Utils.convertPointFromContext(point, layer, rootContext, includeLayer)\r\n  );\r\n  return Utils.frameFromPoints(convertedCorners);\r\n};\r\n\r\n// convert a point from layerA to layerB via the context\r\nUtils.convertPoint = function (input, layerA, layerB, rootContext) {\r\n  // Convert a point between two layer coordinate systems\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  let point = _.defaults(input, { x: 0, y: 0, z: 0 });\r\n  if (layerA) {\r\n    point = Utils.convertPointToContext(point, layerA, rootContext);\r\n  }\r\n  if (layerB != null) {\r\n    return Utils.convertPointFromContext(point, layerB, rootContext);\r\n  } else if (\r\n    layerA != null &&\r\n    rootContext &&\r\n    typeof webkitConvertPointFromPageToNode !== \"undefined\" &&\r\n    webkitConvertPointFromPageToNode !== null\r\n  ) {\r\n    const node = layerA.context._element;\r\n    return Utils.point(\r\n      webkitConvertPointFromPageToNode(node, new WebKitPoint(point.x, point.y))\r\n    );\r\n  } else {\r\n    return point;\r\n  }\r\n};\r\n\r\n// get the bounding frame of a layer, either at the canvas (rootcontext) or screen level\r\nUtils.boundingFrame = function (layer, rootContext) {\r\n  if (rootContext == null) {\r\n    rootContext = true;\r\n  }\r\n  const frame = { x: 0, y: 0, width: layer.width, height: layer.height };\r\n  const cornerPoints = Utils.pointsFromFrame(frame);\r\n  const contextCornerPoints = cornerPoints.map((point) =>\r\n    Utils.convertPointToContext(point, layer, rootContext)\r\n  );\r\n  const boundingFrame = Utils.frameFromPoints(contextCornerPoints);\r\n  return Utils.pixelAlignedFrame(boundingFrame);\r\n};\r\n\r\nUtils.perspectiveProjectionMatrix = function (element) {\r\n  const p = element.perspective;\r\n\r\n  const m = Matrix.identity3d();\r\n  if (p != null && p !== 0) {\r\n    m.m34 = -1 / p;\r\n  }\r\n  return m;\r\n};\r\n\r\n// matrix of perspective projection with perspective origin applied\r\nUtils.perspectiveMatrix = function (element) {\r\n  const ox = element.perspectiveOriginX * element.width;\r\n  const oy = element.perspectiveOriginY * element.height;\r\n  const ppm = Utils.perspectiveProjectionMatrix(element);\r\n  return Matrix.identity3d()\r\n    .translate(ox, oy)\r\n    .multiply(ppm)\r\n    .translate(-ox, -oy);\r\n};\r\n\r\n//##################################################################\r\n// Beta additions, use with care\r\n\r\nUtils.globalLayers = function (importedLayers) {\r\n  // Beta. Not sure if we should push this but it's nice to have.\r\n  // Use this to make all layers in an imported set available on\r\n  // on the top level, so without the \"importedLayers\" prefix.\r\n\r\n  for (var layerName in importedLayers) {\r\n    // Replace all whitespace in layer names\r\n    var layer = importedLayers[layerName];\r\n    layerName = layerName.replace(/\\s/g, \"\");\r\n\r\n    // Check if there are global variables with the same name\r\n    if (\r\n      window.hasOwnProperty(layerName) &&\r\n      !window.Framer._globalWarningGiven\r\n    ) {\r\n      print(\r\n        `Warning: Cannot make layer '${layerName}' a global, a variable with that name already exists`\r\n      );\r\n    } else {\r\n      window[layerName] = layer;\r\n    }\r\n  }\r\n\r\n  return (window.Framer._globalWarningGiven = true);\r\n};\r\n\r\nlet _textSizeNode = null;\r\n\r\nUtils.throwInStudioOrWarnInProduction = function (message) {\r\n  if (Utils.isFramerStudio()) {\r\n    throw new Error(message);\r\n  }\r\n  // else\r\n  console.warn(message);\r\n  return null;\r\n};\r\n\r\nUtils.getIdAttributesFromString = function (string) {\r\n  let m;\r\n  const regex = /id=['\"]([^'\"]+)[\"']/g;\r\n  const matches = [];\r\n  while ((m = regex.exec(string))) {\r\n    var id = m[1];\r\n    if (id != null) {\r\n      matches.push(id);\r\n    }\r\n  }\r\n  return matches;\r\n};\r\n\r\nUtils.getUniqueId = function (prefix) {\r\n  if (prefix == null) {\r\n    prefix = \"id\";\r\n  }\r\n  let id = prefix;\r\n  let count = 1;\r\n  let existingElement = document.querySelector(`[id='${id}']`);\r\n  while (existingElement != null) {\r\n    id = `${prefix}${count}`;\r\n    existingElement = document.querySelector(`[id='${id}']`);\r\n    count++;\r\n  }\r\n  return id;\r\n};\r\n\r\nexport default Utils;\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import _ from \"./Underscore.js\";\r\nimport EventEmitter3 from \"eventemitter3\";\r\n\r\nconst EventKey = \"_events\";\r\n\r\nexport class EventEmitter extends EventEmitter3 {\r\n  listenerEvents() {\r\n    return _.keys(this[EventKey] ?? {});\r\n  }\r\n\r\n  removeAllListeners(eventName) {\r\n    const eventNames = eventName ? [eventName] : this.listenerEvents();\r\n\r\n    for (const name of eventNames) {\r\n      const listeners = this.listeners(name);\r\n      for (const listener of listeners) {\r\n        this.removeListener(name, listener);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\n\r\n// Constants\r\nconst CounterKey = \"_ObjectCounter\";\r\nconst DefinedPropertiesValuesKey = \"_DefinedPropertiesValuesKey\";\r\n\r\nlet ObjectDescriptors = [];\r\nlet ObjectDescriptorsChanged = true;\r\n\r\nconst DefaultPropertyOrder = [];\r\n\r\nexport class BaseClass extends EventEmitter {\r\n  static initClass() {\r\n    this.define(\"props\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        const keys = [];\r\n        const propertyList = this._propertyList();\r\n        for (var key in propertyList) {\r\n          var descriptor = propertyList[key];\r\n          if (descriptor.exportable) {\r\n            keys.push(key);\r\n          }\r\n        }\r\n\r\n        return _.pick(this, keys);\r\n      },\r\n\r\n      set(value) {\r\n        const propertyList = this._propertyList();\r\n        return (() => {\r\n          const result = [];\r\n          for (var k in value) {\r\n            // We only apply properties that we know and are marked to be\r\n            // importable.\r\n            var v = value[k];\r\n            if (\r\n              propertyList[k] != null ? propertyList[k].importable : undefined\r\n            ) {\r\n              result.push((this[k] = v));\r\n            } else {\r\n              result.push(undefined);\r\n            }\r\n          }\r\n          return result;\r\n        })();\r\n      },\r\n    });\r\n\r\n    this.define(\"id\", {\r\n      get() {\r\n        return this._id;\r\n      },\r\n    });\r\n  }\r\n\r\n  //################################################################\r\n  // Framer object properties\r\n\r\n  static define(propertyName, descriptor) {\r\n    // See if we need to add this property to the internal properties class\r\n    if (this !== BaseClass) {\r\n      this._addDescriptor(propertyName, descriptor);\r\n    }\r\n\r\n    if (descriptor.readonly) {\r\n      descriptor.set = function (value) {\r\n        throw Error(`${this.constructor.name}.${propertyName} is readonly`);\r\n      };\r\n    }\r\n\r\n    // Define the property on the prototype\r\n    return Object.defineProperty(this.prototype, propertyName, descriptor);\r\n  }\r\n\r\n  static undefine(propertyName) {\r\n    if (_.isArray(propertyName)) {\r\n      return propertyName.map((prop) => this.undefine(prop));\r\n    } else {\r\n      return this.define(\r\n        propertyName,\r\n        this.simpleProperty(propertyName, undefined, {\r\n          importable: false,\r\n          exportable: false,\r\n          enumerable: false,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  static _addDescriptor(propertyName, descriptor) {\r\n    // for key in [\"enumerable\", \"exportable\", \"importable\"]\r\n    // \tif descriptor.hasOwnProperty(key)\r\n    // \t\tthrow Error(\"woops #{propertyName} #{descriptor[key]}\") if not _.isBoolean(descriptor[key])\r\n\r\n    descriptor.propertyName = propertyName;\r\n\r\n    // Have the following flags set to true when undefined:\r\n    if (descriptor.enumerable == null) {\r\n      descriptor.enumerable = true;\r\n    }\r\n    if (descriptor.exportable == null) {\r\n      descriptor.exportable = true;\r\n    }\r\n    if (descriptor.importable == null) {\r\n      descriptor.importable = true;\r\n    }\r\n    if (descriptor.readonly == null) {\r\n      descriptor.readonly = descriptor.set == null;\r\n    }\r\n\r\n    // We assume we don't import if there is no setter, because we can't\r\n    descriptor.importable = descriptor.importable && !descriptor.readonly;\r\n    // We also assume we don't export if there is no setter, because\r\n    // it is likely a calculated property, and we can't set it.\r\n    descriptor.exportable = descriptor.exportable && !descriptor.readonly;\r\n\r\n    // We assume that every property with an underscore is private\r\n    if (_.startsWith(propertyName, \"_\")) {\r\n      return;\r\n    }\r\n\r\n    ObjectDescriptors.push([this, propertyName, descriptor]);\r\n    ObjectDescriptorsChanged = true;\r\n\r\n    // Only retain options that are importable, exportable or both:\r\n    if (descriptor.exportable || descriptor.importable) {\r\n      if (descriptor.depends) {\r\n        for (var depend of Array.from(descriptor.depends)) {\r\n          if (!Array.from(DefaultPropertyOrder).includes(depend)) {\r\n            DefaultPropertyOrder.push(depend);\r\n          }\r\n        }\r\n        const index = DefaultPropertyOrder.indexOf(propertyName);\r\n        if (index !== -1) {\r\n          DefaultPropertyOrder.splice(index, 1);\r\n          DefaultPropertyOrder.push(propertyName);\r\n        }\r\n      }\r\n      if (!Array.from(DefaultPropertyOrder).includes(propertyName)) {\r\n        return DefaultPropertyOrder.push(propertyName);\r\n      }\r\n    }\r\n  }\r\n\r\n  static simpleProperty(name, fallback, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return _.extend(options, {\r\n      default: fallback,\r\n      get() {\r\n        return this._getPropertyValue(name);\r\n      },\r\n      set(value) {\r\n        this._setPropertyValue(name, value);\r\n        return __guardMethod__(options, \"didSet\", (o) => o.didSet(this, value));\r\n      },\r\n    });\r\n  }\r\n\r\n  static proxyProperty(keyPath, options) {\r\n    // Allows to easily proxy properties from an instance object\r\n    // Object property is in the form of \"object.property\"\r\n\r\n    let descriptor;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    const objectKey = keyPath.split(\".\")[0];\r\n\r\n    return (descriptor = _.extend(options, {\r\n      get() {\r\n        if (!_.isObject(this[objectKey])) {\r\n          return;\r\n        }\r\n        return Utils.getValueForKeyPath(this, keyPath);\r\n      },\r\n      set(value) {\r\n        if (!_.isObject(this[objectKey])) {\r\n          return;\r\n        }\r\n        Utils.setValueForKeyPath(this, keyPath, value);\r\n        return __guardMethod__(options, \"didSet\", (o) => o.didSet(this, value));\r\n      },\r\n      proxy: true,\r\n    }));\r\n  }\r\n\r\n  _setPropertyValue(k, v) {\r\n    return (this[DefinedPropertiesValuesKey][k] = v);\r\n  }\r\n\r\n  _getPropertyValue(k) {\r\n    return Utils.valueOrDefault(\r\n      this[DefinedPropertiesValuesKey][k],\r\n      this._getPropertyDefaultValue(k)\r\n    );\r\n  }\r\n\r\n  _getPropertyDefaultValue(k) {\r\n    return __guard__(this._propertyList()[k], (x) => x[\"default\"]);\r\n  }\r\n\r\n  _propertyList() {\r\n    if (!this._propertyListCache || ObjectDescriptorsChanged) {\r\n      this._propertyListCache = this.__propertyList();\r\n      ObjectDescriptorsChanged = false;\r\n    }\r\n\r\n    return this._propertyListCache;\r\n  }\r\n\r\n  __propertyList() {\r\n    const result = {};\r\n\r\n    for (var k of Array.from(ObjectDescriptors)) {\r\n      var [Class, name, descriptor] = Array.from(k);\r\n      if (this instanceof Class) {\r\n        if (descriptor.exportable || descriptor.importable) {\r\n          result[name] = descriptor;\r\n        } else {\r\n          delete result[name];\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  keys() {\r\n    return _.keys(this.props);\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id || null}>`;\r\n  }\r\n\r\n  onChange(name, cb) {\r\n    return this.on(`change:${name}`, cb);\r\n  }\r\n\r\n  //################################################################\r\n  // Base constructor method\r\n\r\n  constructor(options) {\r\n    super(...arguments);\r\n\r\n    this._setPropertyValue = this._setPropertyValue.bind(this);\r\n    this._getPropertyValue = this._getPropertyValue.bind(this);\r\n    this.toInspect = this.toInspect.bind(this);\r\n\r\n    this._context =\r\n      typeof Framer !== \"undefined\" && Framer !== null\r\n        ? Framer.CurrentContext\r\n        : undefined;\r\n\r\n    // Create a holder for the property values\r\n    this[DefinedPropertiesValuesKey] = {};\r\n\r\n    this._applyDefaults(options);\r\n\r\n    // Count the creation for these objects and set the id\r\n    if (this.constructor[CounterKey] == null) {\r\n      this.constructor[CounterKey] = 0;\r\n    }\r\n    this.constructor[CounterKey] += 1;\r\n\r\n    // We set this last so if we print a layer during construction\r\n    // we don't get confused because the id changes from global to context\r\n    this._id = this.constructor[CounterKey];\r\n  }\r\n\r\n  _applyDefaults(options, proxy) {\r\n    if (proxy == null) {\r\n      proxy = false;\r\n    }\r\n    if (!options) {\r\n      return;\r\n    }\r\n\r\n    const propertyList = this._propertyList();\r\n    return (() => {\r\n      const result = [];\r\n      for (var k of Array.from(DefaultPropertyOrder)) {\r\n        var descriptor = propertyList[k];\r\n        if (descriptor != null) {\r\n          if (proxy && !(descriptor.proxy === true)) {\r\n            continue;\r\n          }\r\n          result.push(this._applyDefault(descriptor, k, options[k]));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _applyProxyDefaults(options) {\r\n    return this._applyDefaults(options, true);\r\n  }\r\n\r\n  _applyDefault(descriptor, key, optionValue) {\r\n    // For each known property (registered with @define) that has a setter, fetch\r\n    // the value from the options object, unless the prop is not importable.\r\n    // When there's no user value, apply the default value:\r\n\r\n    let value;\r\n    if (descriptor.readonly) {\r\n      return;\r\n    }\r\n\r\n    if (descriptor.importable) {\r\n      value = optionValue;\r\n    }\r\n    value = Utils.valueOrDefault(\r\n      optionValue,\r\n      this._getPropertyDefaultValue(key)\r\n    );\r\n\r\n    if ([null, undefined].includes(value)) {\r\n      return;\r\n    }\r\n\r\n    return (this[key] = value);\r\n  }\r\n}\r\nBaseClass.initClass();\r\n\r\nfunction __guardMethod__(obj, methodName, transform) {\r\n  if (\r\n    typeof obj !== \"undefined\" &&\r\n    obj !== null &&\r\n    typeof obj[methodName] === \"function\"\r\n  ) {\r\n    return transform(obj, methodName);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { _ } from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport * as hsluv from \"hsluv\";\r\nconst { rgbToHsluv } = \"hsluv\";\r\n\r\nconst ColorType = {\r\n  RGB: \"rgb\",\r\n  HSL: \"hsl\",\r\n  HEX: \"hex\",\r\n  NAME: \"name\",\r\n};\r\n\r\nexport class Color extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"r\", {\r\n      get() {\r\n        return this._r;\r\n      },\r\n    });\r\n    this.define(\"g\", {\r\n      get() {\r\n        return this._g;\r\n      },\r\n    });\r\n    this.define(\"b\", {\r\n      get() {\r\n        return this._b;\r\n      },\r\n    });\r\n    this.define(\"a\", {\r\n      get() {\r\n        return this._a;\r\n      },\r\n    });\r\n    this.define(\"h\", {\r\n      get() {\r\n        return this._h;\r\n      },\r\n    });\r\n    this.define(\"s\", {\r\n      get() {\r\n        return this._s;\r\n      },\r\n    });\r\n    this.define(\"l\", {\r\n      get() {\r\n        return this._l;\r\n      },\r\n    });\r\n\r\n    this.isColor = (color) => {\r\n      return _.isString(color)\r\n        ? this.isColorString(color)\r\n        : this.isColorObject(color);\r\n    };\r\n  }\r\n  constructor(color1, r, g, b) {\r\n    this.toInspect = this.toInspect.bind(this);\r\n    this.color = color1;\r\n    if (this.color === \"\") {\r\n      this.color = null;\r\n    }\r\n\r\n    const { color } = this;\r\n\r\n    // If input already is a Color object return input\r\n    if (Color.isColorObject(color)) {\r\n      return color;\r\n    }\r\n\r\n    // Convert input to RGB\r\n    const input = inputData(color, r, g, b);\r\n\r\n    this._type = input.type;\r\n    this._r = input.r;\r\n    this._g = input.g;\r\n    this._b = input.b;\r\n    this._a = input.a;\r\n    this._h = input.h;\r\n    this._s = input.s;\r\n    this._l = input.l;\r\n    this._roundA = Math.round(100 * this._a) / 100;\r\n  }\r\n\r\n  toHex(allow3Char) {\r\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\r\n  }\r\n\r\n  toHexString(allow3Char) {\r\n    return \"#\" + this.toHex(allow3Char);\r\n  }\r\n\r\n  toRgb() {\r\n    if (this._rgb === undefined) {\r\n      this._rgb = {\r\n        r: Math.round(this._r),\r\n        g: Math.round(this._g),\r\n        b: Math.round(this._b),\r\n        a: this._a,\r\n      };\r\n    }\r\n    return _.clone(this._rgb);\r\n  }\r\n\r\n  toRgbString() {\r\n    if (this._a === 1) {\r\n      return `rgb(${Utils.round(this._r, 0)}, ${Utils.round(\r\n        this._g,\r\n        0\r\n      )}, ${Utils.round(this._b, 0)})`;\r\n    } else {\r\n      return `rgba(${Utils.round(this._r, 0)}, ${Utils.round(\r\n        this._g,\r\n        0\r\n      )}, ${Utils.round(this._b, 0)}, ${this._roundA})`;\r\n    }\r\n  }\r\n\r\n  toHsl() {\r\n    if (this._hsl === undefined) {\r\n      this._hsl = {\r\n        h: this.h,\r\n        s: this.s,\r\n        l: this.l,\r\n        a: this.a,\r\n      };\r\n    }\r\n    return _.clone(this._hsl);\r\n  }\r\n\r\n  toHusl() {\r\n    if (this._husl === undefined) {\r\n      const rgb = [this.r / 255, this.g / 255, this.b / 255];\r\n      const husl = rgbToHsluv(rgb);\r\n      this._husl = { h: husl[0], s: husl[1], l: husl[2] };\r\n    }\r\n\r\n    return _.clone(this._husl);\r\n  }\r\n\r\n  toHslString() {\r\n    if (this._hslString === undefined) {\r\n      const hsl = this.toHsl();\r\n      const h = Math.round(hsl.h);\r\n      const s = Math.round(hsl.s * 100);\r\n      const l = Math.round(hsl.l * 100);\r\n      if (this._a === 1) {\r\n        this._hslString = `hsl(${h}, ${s}%, ${l}%)`;\r\n      } else {\r\n        this._hslString = `hsla(${h}, ${s}%, ${l}%, ${this._roundA})`;\r\n      }\r\n    }\r\n    return this._hslString;\r\n  }\r\n\r\n  toName() {\r\n    if (this._a === 0) {\r\n      return \"transparent\";\r\n    }\r\n    if (this._a < 1) {\r\n      return false;\r\n    }\r\n    const hex = rgbToHex(this._r, this._g, this._b, true);\r\n\r\n    for (var key of Array.from(_.keys(cssNames))) {\r\n      var value = cssNames[key];\r\n      if (value === hex) {\r\n        return key;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  lighten(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.l += amount / 100;\r\n    hsl.l = Math.min(1, Math.max(0, hsl.l));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  brighten(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const rgb = this.toRgb();\r\n    rgb.r = Math.max(\r\n      0,\r\n      Math.min(255, rgb.r - Math.round(255 * -(amount / 100)))\r\n    );\r\n    rgb.g = Math.max(\r\n      0,\r\n      Math.min(255, rgb.g - Math.round(255 * -(amount / 100)))\r\n    );\r\n    rgb.b = Math.max(\r\n      0,\r\n      Math.min(255, rgb.b - Math.round(255 * -(amount / 100)))\r\n    );\r\n    return new Color(rgb);\r\n  }\r\n\r\n  darken(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.l -= amount / 100;\r\n    hsl.l = Math.min(1, Math.max(0, hsl.l));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  desaturate(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.s -= amount / 100;\r\n    hsl.s = Math.min(1, Math.max(0, hsl.s));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  saturate(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.s += amount / 100;\r\n    hsl.s = Math.min(1, Math.max(0, hsl.s));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  grayscale() {\r\n    const hsl = this.toHsl();\r\n    return new Color(hsl).desaturate(100);\r\n  }\r\n\r\n  toString() {\r\n    return this.toRgbString();\r\n  }\r\n\r\n  alpha(alpha) {\r\n    let result;\r\n    if (alpha == null) {\r\n      alpha = 1;\r\n    }\r\n    return (result = new Color({\r\n      r: this.r,\r\n      g: this.g,\r\n      b: this.b,\r\n      a: alpha,\r\n    }));\r\n  }\r\n\r\n  multiplyAlpha(alpha) {\r\n    return this.alpha(this.a * alpha);\r\n  }\r\n\r\n  transparent() {\r\n    return this.alpha(0);\r\n  }\r\n\r\n  mix(colorB, fraction, limit, model) {\r\n    if (limit == null) {\r\n      limit = false;\r\n    }\r\n    return Color.mix(this, colorB, fraction, limit, model);\r\n  }\r\n\r\n  copy() {\r\n    return new Color(this);\r\n  }\r\n\r\n  isEqual(colorB) {\r\n    return Color.equal(this, colorB);\r\n  }\r\n\r\n  toInspect() {\r\n    if (this._type === ColorType.HSL) {\r\n      return `<${this.constructor.name} h:${this.h} s:${this.s} l:${this.l} a:${this.a}>`;\r\n    } else if (this._type === ColorType.HEX || this._type === ColorType.NAME) {\r\n      return `<${this.constructor.name} \\\"${this.color}\\\">`;\r\n    } else {\r\n      return `<${this.constructor.name} r:${this.r} g:${this.g} b:${this.b} a:${this.a}>`;\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  //# Class methods\r\n\r\n  static mix(colorA, colorB, fraction, limit, model) {\r\n    if (fraction == null) {\r\n      fraction = 0.5;\r\n    }\r\n    if (limit == null) {\r\n      limit = false;\r\n    }\r\n    let result = null;\r\n\r\n    //\r\n    if (typeof colorA === \"string\" && this.isColorString(colorA)) {\r\n      colorA = new Color(colorA);\r\n    }\r\n    if (typeof colorB === \"string\" && this.isColorString(colorB)) {\r\n      colorB = new Color(colorB);\r\n    }\r\n\r\n    if (!(colorA instanceof Color) && colorB instanceof Color) {\r\n      colorA = colorB.transparent();\r\n    } else if (\r\n      colorA instanceof Color &&\r\n      colorA._a === 0 &&\r\n      colorB instanceof Color &&\r\n      colorB._a !== 0\r\n    ) {\r\n      colorA = colorB.transparent();\r\n    } else if (!(colorB instanceof Color) && colorA instanceof Color) {\r\n      colorB = colorA.transparent();\r\n    } else if (\r\n      colorB instanceof Color &&\r\n      colorB._a === 0 &&\r\n      colorA instanceof Color &&\r\n      colorA._a !== 0\r\n    ) {\r\n      colorB = colorA.transparent();\r\n    }\r\n\r\n    if (colorB instanceof Color) {\r\n      if (ColorModel.isRGB(model)) {\r\n        // rgb model\r\n        result = new Color({\r\n          r: Utils.modulate(fraction, [0, 1], [colorA._r, colorB._r], limit),\r\n          g: Utils.modulate(fraction, [0, 1], [colorA._g, colorB._g], limit),\r\n          b: Utils.modulate(fraction, [0, 1], [colorA._b, colorB._b], limit),\r\n          a: Utils.modulate(fraction, [0, 1], [colorA._a, colorB._a], limit),\r\n        });\r\n      } else {\r\n        let hslA, hslB;\r\n        hslA;\r\n        hslB;\r\n\r\n        if (ColorModel.isHSL(model)) {\r\n          // hsl model\r\n          hslA = colorA.toHsl();\r\n          hslB = colorB.toHsl();\r\n        } else {\r\n          // husl model\r\n          hslA = colorA.toHusl();\r\n          hslB = colorB.toHusl();\r\n        }\r\n\r\n        if (hslA.s === 0) {\r\n          hslA.h = hslB.h;\r\n        } else if (hslB.s === 0) {\r\n          hslB.h = hslA.h;\r\n        }\r\n\r\n        const fromH = hslA.h;\r\n        const toH = hslB.h;\r\n        let deltaH = toH - fromH;\r\n\r\n        if (deltaH > 180) {\r\n          deltaH = toH - 360 - fromH;\r\n        } else if (deltaH < -180) {\r\n          deltaH = toH + 360 - fromH;\r\n        }\r\n\r\n        const tween = {\r\n          h: Utils.modulate(fraction, [0, 1], [fromH, fromH + deltaH], limit),\r\n          s: Utils.modulate(fraction, [0, 1], [hslA.s, hslB.s], limit),\r\n          l: Utils.modulate(fraction, [0, 1], [hslA.l, hslB.l], limit),\r\n          a: Utils.modulate(fraction, [0, 1], [colorA.a, colorB.a], limit),\r\n        };\r\n\r\n        if (ColorModel.isHSL(model)) {\r\n          // hsl model\r\n          result = new Color(tween);\r\n        } else {\r\n          // husl model\r\n          result = new Color(rgbaFromHusl(tween));\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static random(alpha) {\r\n    if (alpha == null) {\r\n      alpha = 1.0;\r\n    }\r\n    const c = () => parseInt(Math.random() * 255);\r\n    return new Color(`rgba(${c()}, ${c()}, ${c()}, ${alpha})`);\r\n  }\r\n\r\n  static grey(g, alpha) {\r\n    if (g == null) {\r\n      g = 0.5;\r\n    }\r\n    if (alpha == null) {\r\n      alpha = 1;\r\n    }\r\n    g = parseInt(g * 255);\r\n    return new Color(`rgba(${g}, ${g}, ${g}, ${alpha})`);\r\n  }\r\n\r\n  static gray(...args) {\r\n    return this.grey(...Array.from(args || []));\r\n  }\r\n\r\n  static toColor(color) {\r\n    return new Color(color);\r\n  }\r\n  static validColorValue(color) {\r\n    return color instanceof Color || color === null;\r\n  }\r\n\r\n  static isColorObject(color) {\r\n    return color instanceof Color;\r\n  }\r\n\r\n  static isColorString(colorString) {\r\n    if (_.isString(colorString)) {\r\n      return stringToObject(colorString) !== false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isValidColorProperty(name, value) {\r\n    // We check if the property name ends with color, because we don't want\r\n    // to convert every string that looks like a Color, like the html property containing \"add\"\r\n    const isColorKey =\r\n      _.endsWith(name.toLowerCase(), \"color\") ||\r\n      [\"fill\", \"stroke\"].includes(name);\r\n    if (isColorKey && _.isString(value) && Color.isColorString(value)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  static equal(colorA, colorB) {\r\n    if (!this.validColorValue(colorA)) {\r\n      if (!Color.isColorString(colorA)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!this.validColorValue(colorB)) {\r\n      if (!Color.isColorString(colorB)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    colorA = new Color(colorA);\r\n    colorB = new Color(colorB);\r\n\r\n    const tolerance = 0.01;\r\n    if (Math.abs(colorA.r - colorB.r) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.g - colorB.g) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.b - colorB.b) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.a - colorB.a) >= tolerance) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static rgbToHsl(a, b, c) {\r\n    return rgbToHsl(a, b, c);\r\n  }\r\n}\r\n\r\n// Color models, husl is default\r\nvar ColorModel = {\r\n  RGB: \"rgb\",\r\n  RGBA: \"rgba\",\r\n  HSL: \"hsl\",\r\n  HSLA: \"hsla\",\r\n};\r\n\r\nColorModel.isRGB = function (colorModel) {\r\n  if (_.isString(colorModel)) {\r\n    let needle;\r\n    return (\r\n      (needle = colorModel.toLowerCase()),\r\n      [ColorModel.RGB, ColorModel.RGBA].includes(needle)\r\n    );\r\n  }\r\n  return false;\r\n};\r\n\r\nColorModel.isHSL = function (colorModel) {\r\n  if (_.isString(colorModel)) {\r\n    let needle;\r\n    return (\r\n      (needle = colorModel.toLowerCase()),\r\n      [ColorModel.HSL, ColorModel.HSLA].includes(needle)\r\n    );\r\n  }\r\n  return false;\r\n};\r\n\r\nconst rgbaFromHusl = (husl) => {\r\n  const rgb = husl.hsluvToRgb([husl.h, husl.s, husl.l]);\r\n  return {\r\n    r: rgb[0] * 255,\r\n    g: rgb[1] * 255,\r\n    b: rgb[2] * 255,\r\n    a: husl.a, // keep alpha if it exists\r\n  };\r\n};\r\n\r\n// Functions\r\nvar inputData = function (color, g, b, alpha) {\r\n  let h, l, s;\r\n  let rgb = { r: 0, g: 0, b: 0 };\r\n  let hsl = { h: 0, s: 0, l: 0 };\r\n  let a = 1;\r\n  const ok = false;\r\n  let type = ColorType.RGB;\r\n\r\n  if (color === null) {\r\n    a = 0;\r\n  } else if (_.isNumber(color)) {\r\n    rgb.r = color;\r\n\r\n    if (_.isNumber(g)) {\r\n      rgb.g = g;\r\n    }\r\n    if (_.isNumber(b)) {\r\n      rgb.b = b;\r\n    }\r\n    if (_.isNumber(alpha)) {\r\n      a = alpha;\r\n    }\r\n  } else {\r\n    if (typeof color === \"string\") {\r\n      color = stringToObject(color);\r\n\r\n      if (!color) {\r\n        color = {\r\n          r: 0,\r\n          g: 0,\r\n          b: 0,\r\n          a: 0,\r\n        };\r\n      }\r\n\r\n      if (color.hasOwnProperty(\"type\")) {\r\n        ({ type } = color);\r\n      }\r\n    }\r\n\r\n    if (typeof color === \"object\") {\r\n      if (\r\n        color.hasOwnProperty(\"r\") ||\r\n        color.hasOwnProperty(\"g\") ||\r\n        color.hasOwnProperty(\"b\")\r\n      ) {\r\n        rgb = rgbToRgb(color.r, color.g, color.b);\r\n      } else if (\r\n        color.hasOwnProperty(\"h\") ||\r\n        color.hasOwnProperty(\"s\") ||\r\n        color.hasOwnProperty(\"l\")\r\n      ) {\r\n        h = isNumeric(color.h) ? parseFloat(color.h) : 0;\r\n        h = (h + 360) % 360;\r\n        s = isNumeric(color.s) ? color.s : 1;\r\n        if (_.isString(color.s)) {\r\n          s = numberFromString(color.s);\r\n        }\r\n        l = isNumeric(color.l) ? color.l : 0.5;\r\n        if (_.isString(color.l)) {\r\n          l = numberFromString(color.l);\r\n        }\r\n\r\n        rgb = hslToRgb(h, s, l);\r\n        type = ColorType.HSL;\r\n        hsl = {\r\n          h,\r\n          s,\r\n          l,\r\n        };\r\n      }\r\n\r\n      if (color.hasOwnProperty(\"a\")) {\r\n        ({ a } = color);\r\n      }\r\n    }\r\n  }\r\n\r\n  a = correctAlpha(a);\r\n\r\n  if (type !== ColorType.HSL) {\r\n    hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n  }\r\n\r\n  return {\r\n    type,\r\n    r: Math.min(255, Math.max(rgb.r, 0)),\r\n    g: Math.min(255, Math.max(rgb.g, 0)),\r\n    b: Math.min(255, Math.max(rgb.b, 0)),\r\n    h: Utils.clamp(hsl.h, 0, 360),\r\n    s: Utils.clamp(hsl.s, 0, 1),\r\n    l: Utils.clamp(hsl.l, 0, 1),\r\n    a,\r\n  };\r\n};\r\n\r\n// extract number from string\r\nvar numberFromString = (string) => string.match(/\\d+/)[0];\r\n\r\n// Conversion Functions\r\n// RGB to RGB\r\nvar rgbToRgb = (r, g, b) => ({\r\n  r: isNumeric(r) ? bound01(r, 255) * 255 : 0,\r\n  g: isNumeric(g) ? bound01(g, 255) * 255 : 0,\r\n  b: isNumeric(b) ? bound01(b, 255) * 255 : 0,\r\n});\r\n\r\n// RGB to HEX\r\nvar rgbToHex = function (r, g, b, allow3Char) {\r\n  const hex = [\r\n    pad2(Math.round(r).toString(16)),\r\n    pad2(Math.round(g).toString(16)),\r\n    pad2(Math.round(b).toString(16)),\r\n  ];\r\n  if (\r\n    allow3Char &&\r\n    hex[0].charAt(0) === hex[0].charAt(1) &&\r\n    hex[1].charAt(0) === hex[1].charAt(1) &&\r\n    hex[2].charAt(0) === hex[2].charAt(1)\r\n  ) {\r\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\r\n  }\r\n  return hex.join(\"\");\r\n};\r\n\r\n// RGB to HSL\r\nvar rgbToHsl = function (r, g, b) {\r\n  let l, s;\r\n  r = bound01(r, 255);\r\n  g = bound01(g, 255);\r\n  b = bound01(b, 255);\r\n\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n  let h = (s = l = (max + min) / 2);\r\n\r\n  if (max === min) {\r\n    h = s = 0;\r\n  } else {\r\n    const d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    switch (max) {\r\n      case r:\r\n        h = (g - b) / d + (g < b ? 6 : 0);\r\n        break;\r\n      case g:\r\n        h = (b - r) / d + 2;\r\n        break;\r\n      case b:\r\n        h = (r - g) / d + 4;\r\n        break;\r\n    }\r\n    h /= 6;\r\n  }\r\n  return { h: h * 360, s, l };\r\n};\r\n\r\n// HSL to RGB\r\nvar hslToRgb = function (h, s, l) {\r\n  let r = undefined;\r\n  let g = undefined;\r\n  let b = undefined;\r\n\r\n  h = bound01(h, 360);\r\n  s = bound01(s * 100, 100);\r\n  l = bound01(l * 100, 100);\r\n\r\n  const hue2rgb = function (p, q, t) {\r\n    if (t < 0) {\r\n      t += 1;\r\n    }\r\n    if (t > 1) {\r\n      t -= 1;\r\n    }\r\n    if (t < 1 / 6) {\r\n      return p + (q - p) * 6 * t;\r\n    }\r\n    if (t < 1 / 2) {\r\n      return q;\r\n    }\r\n    if (t < 2 / 3) {\r\n      return p + (q - p) * (2 / 3 - t) * 6;\r\n    }\r\n    return p;\r\n  };\r\n\r\n  if (s === 0) {\r\n    r = g = b = l; // Achromatic\r\n  } else {\r\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    const p = 2 * l - q;\r\n    r = hue2rgb(p, q, h + 1 / 3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1 / 3);\r\n  }\r\n\r\n  return { r: r * 255, g: g * 255, b: b * 255 };\r\n};\r\n\r\n// Utility Functions\r\n\r\nconst convertToPercentage = function (n) {\r\n  if (n <= 1) {\r\n    n = n * 100 + \"%\";\r\n  }\r\n  return n;\r\n};\r\n\r\n// Ensure there's always a correct alpha value.\r\n// If there isn't, it will be set to 1 by default.\r\nvar correctAlpha = function (a) {\r\n  a = parseFloat(a);\r\n  if (a < 0) {\r\n    a = 0;\r\n  }\r\n  if (isNaN(a) || a > 1) {\r\n    a = 1;\r\n  }\r\n  return a;\r\n};\r\n\r\n// Take input from [0, n] and return it as [0, 1]\r\nvar bound01 = function (n, max) {\r\n  if (isOnePointZero(n)) {\r\n    n = \"100%\";\r\n  }\r\n  const processPercent = isPercentage(n);\r\n  n = Math.min(max, Math.max(0, parseFloat(n)));\r\n\r\n  // Automatically convert percentage into number\r\n  if (processPercent) {\r\n    n = parseInt(n * max, 10) / 100;\r\n  }\r\n  // Handle floating point rounding errors\r\n  if (Math.abs(n - max) < 0.000001) {\r\n    return 1;\r\n  }\r\n  // Convert into [0, 1] range if it isn't already\r\n  return (n % max) / parseFloat(max);\r\n};\r\n\r\nvar isOnePointZero = (n) =>\r\n  typeof n === \"string\" && n.indexOf(\".\") !== -1 && parseFloat(n) === 1;\r\n\r\n// Check to see if string passed in is a percentage\r\nvar isPercentage = (n) => typeof n === \"string\" && n.indexOf(\"%\") !== -1;\r\n\r\n// Force hex to have 2 characters.\r\nvar pad2 = function (char) {\r\n  if (char.length === 1) {\r\n    return \"0\" + char;\r\n  } else {\r\n    return \"\" + char;\r\n  }\r\n};\r\n\r\n// Matchers\r\nconst matchers = (function () {\r\n  const css_integer = \"[-\\\\+]?\\\\d+%?\";\r\n  const css_number = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\r\n  const css_unit = \"(?:\" + css_number + \")|(?:\" + css_integer + \")\";\r\n\r\n  const permissive_match3 =\r\n    \"[\\\\s|\\\\(]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")\\\\s*\\\\)?\";\r\n  const permissive_match4 =\r\n    \"[\\\\s|\\\\(]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")\\\\s*\\\\)?\";\r\n  return {\r\n    rgb: new RegExp(\"rgb\" + permissive_match3),\r\n    rgba: new RegExp(\"rgba\" + permissive_match4),\r\n    hsl: new RegExp(\"hsl\" + permissive_match3),\r\n    hsla: new RegExp(\"hsla\" + permissive_match4),\r\n    hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n    hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\r\n  };\r\n})();\r\n\r\nvar isNumeric = (value) => !isNaN(value) && isFinite(value);\r\n\r\nconst percentToFraction = (percentage) => numberFromString(percentage) / 100;\r\n\r\nvar stringToObject = function (color) {\r\n  const trimLeft = /^[\\s,#]+/;\r\n  const trimRight = /\\s+$/;\r\n\r\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\r\n\r\n  let named = false;\r\n\r\n  if (cssNames[color]) {\r\n    color = cssNames[color];\r\n    named = true;\r\n    ({ type: ColorType.NAME });\r\n  } else if (color === \"transparent\") {\r\n    return {\r\n      r: 0,\r\n      g: 0,\r\n      b: 0,\r\n      a: 0,\r\n      type: ColorType.NAME,\r\n    };\r\n  }\r\n\r\n  let match = undefined;\r\n\r\n  if ((match = matchers.rgb.exec(color))) {\r\n    return {\r\n      r: match[1],\r\n      g: match[2],\r\n      b: match[3],\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.rgba.exec(color))) {\r\n    return {\r\n      r: match[1],\r\n      g: match[2],\r\n      b: match[3],\r\n      a: match[4],\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.hsl.exec(color))) {\r\n    return {\r\n      h: match[1],\r\n      s: percentToFraction(match[2]),\r\n      l: percentToFraction(match[3]),\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.hsla.exec(color))) {\r\n    return {\r\n      h: match[1],\r\n      s: percentToFraction(match[2]),\r\n      l: percentToFraction(match[3]),\r\n      a: match[4],\r\n    };\r\n  }\r\n\r\n  if (\r\n    (match =\r\n      matchers.hex6.exec(color) ||\r\n      (match = matchers.hex6.exec(cssNames[color])))\r\n  ) {\r\n    return {\r\n      r: parseInt(match[1], 16),\r\n      g: parseInt(match[2], 16),\r\n      b: parseInt(match[3], 16),\r\n      a: 1,\r\n      type: ColorType.HEX,\r\n    };\r\n  }\r\n\r\n  if (\r\n    (match =\r\n      matchers.hex3.exec(color) ||\r\n      (match = matchers.hex3.exec(cssNames[color])))\r\n  ) {\r\n    return {\r\n      r: parseInt(match[1] + \"\" + match[1], 16),\r\n      g: parseInt(match[2] + \"\" + match[2], 16),\r\n      b: parseInt(match[3] + \"\" + match[3], 16),\r\n      type: ColorType.HEX,\r\n    };\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n// CSS Colors\r\nvar cssNames = {\r\n  aliceblue: \"f0f8ff\",\r\n  antiquewhite: \"faebd7\",\r\n  aqua: \"0ff\",\r\n  aquamarine: \"7fffd4\",\r\n  azure: \"f0ffff\",\r\n  beige: \"f5f5dc\",\r\n  bisque: \"ffe4c4\",\r\n  black: \"000\",\r\n  blanchedalmond: \"ffebcd\",\r\n  blue: \"00f\",\r\n  blueviolet: \"8a2be2\",\r\n  brown: \"a52a2a\",\r\n  burlywood: \"deb887\",\r\n  burntsienna: \"ea7e5d\",\r\n  cadetblue: \"5f9ea0\",\r\n  chartreuse: \"7fff00\",\r\n  chocolate: \"d2691e\",\r\n  coral: \"ff7f50\",\r\n  cornflowerblue: \"6495ed\",\r\n  cornsilk: \"fff8dc\",\r\n  crimson: \"dc143c\",\r\n  cyan: \"0ff\",\r\n  darkblue: \"00008b\",\r\n  darkcyan: \"008b8b\",\r\n  darkgoldenrod: \"b8860b\",\r\n  darkgray: \"a9a9a9\",\r\n  darkgreen: \"006400\",\r\n  darkgrey: \"a9a9a9\",\r\n  darkkhaki: \"bdb76b\",\r\n  darkmagenta: \"8b008b\",\r\n  darkolivegreen: \"556b2f\",\r\n  darkorange: \"ff8c00\",\r\n  darkorchid: \"9932cc\",\r\n  darkred: \"8b0000\",\r\n  darksalmon: \"e9967a\",\r\n  darkseagreen: \"8fbc8f\",\r\n  darkslateblue: \"483d8b\",\r\n  darkslategray: \"2f4f4f\",\r\n  darkslategrey: \"2f4f4f\",\r\n  darkturquoise: \"00ced1\",\r\n  darkviolet: \"9400d3\",\r\n  deeppink: \"ff1493\",\r\n  deepskyblue: \"00bfff\",\r\n  dimgray: \"696969\",\r\n  dimgrey: \"696969\",\r\n  dodgerblue: \"1e90ff\",\r\n  firebrick: \"b22222\",\r\n  floralwhite: \"fffaf0\",\r\n  forestgreen: \"228b22\",\r\n  fuchsia: \"f0f\",\r\n  gainsboro: \"dcdcdc\",\r\n  ghostwhite: \"f8f8ff\",\r\n  gold: \"ffd700\",\r\n  goldenrod: \"daa520\",\r\n  gray: \"808080\",\r\n  green: \"008000\",\r\n  greenyellow: \"adff2f\",\r\n  grey: \"808080\",\r\n  honeydew: \"f0fff0\",\r\n  hotpink: \"ff69b4\",\r\n  indianred: \"cd5c5c\",\r\n  indigo: \"4b0082\",\r\n  ivory: \"fffff0\",\r\n  khaki: \"f0e68c\",\r\n  lavender: \"e6e6fa\",\r\n  lavenderblush: \"fff0f5\",\r\n  lawngreen: \"7cfc00\",\r\n  lemonchiffon: \"fffacd\",\r\n  lightblue: \"add8e6\",\r\n  lightcoral: \"f08080\",\r\n  lightcyan: \"e0ffff\",\r\n  lightgoldenrodyellow: \"fafad2\",\r\n  lightgray: \"d3d3d3\",\r\n  lightgreen: \"90ee90\",\r\n  lightgrey: \"d3d3d3\",\r\n  lightpink: \"ffb6c1\",\r\n  lightsalmon: \"ffa07a\",\r\n  lightseagreen: \"20b2aa\",\r\n  lightskyblue: \"87cefa\",\r\n  lightslategray: \"789\",\r\n  lightslategrey: \"789\",\r\n  lightsteelblue: \"b0c4de\",\r\n  lightyellow: \"ffffe0\",\r\n  lime: \"0f0\",\r\n  limegreen: \"32cd32\",\r\n  linen: \"faf0e6\",\r\n  magenta: \"f0f\",\r\n  maroon: \"800000\",\r\n  mediumaquamarine: \"66cdaa\",\r\n  mediumblue: \"0000cd\",\r\n  mediumorchid: \"ba55d3\",\r\n  mediumpurple: \"9370db\",\r\n  mediumseagreen: \"3cb371\",\r\n  mediumslateblue: \"7b68ee\",\r\n  mediumspringgreen: \"00fa9a\",\r\n  mediumturquoise: \"48d1cc\",\r\n  mediumvioletred: \"c71585\",\r\n  midnightblue: \"191970\",\r\n  mintcream: \"f5fffa\",\r\n  mistyrose: \"ffe4e1\",\r\n  moccasin: \"ffe4b5\",\r\n  navajowhite: \"ffdead\",\r\n  navy: \"000080\",\r\n  oldlace: \"fdf5e6\",\r\n  olive: \"808000\",\r\n  olivedrab: \"6b8e23\",\r\n  orange: \"ffa500\",\r\n  orangered: \"ff4500\",\r\n  orchid: \"da70d6\",\r\n  palegoldenrod: \"eee8aa\",\r\n  palegreen: \"98fb98\",\r\n  paleturquoise: \"afeeee\",\r\n  palevioletred: \"db7093\",\r\n  papayawhip: \"ffefd5\",\r\n  peachpuff: \"ffdab9\",\r\n  peru: \"cd853f\",\r\n  pink: \"ffc0cb\",\r\n  plum: \"dda0dd\",\r\n  powderblue: \"b0e0e6\",\r\n  purple: \"800080\",\r\n  rebeccapurple: \"663399\",\r\n  red: \"f00\",\r\n  rosybrown: \"bc8f8f\",\r\n  royalblue: \"4169e1\",\r\n  saddlebrown: \"8b4513\",\r\n  salmon: \"fa8072\",\r\n  sandybrown: \"f4a460\",\r\n  seagreen: \"2e8b57\",\r\n  seashell: \"fff5ee\",\r\n  sienna: \"a0522d\",\r\n  silver: \"c0c0c0\",\r\n  skyblue: \"87ceeb\",\r\n  slateblue: \"6a5acd\",\r\n  slategray: \"708090\",\r\n  slategrey: \"708090\",\r\n  snow: \"fffafa\",\r\n  springgreen: \"00ff7f\",\r\n  steelblue: \"4682b4\",\r\n  tan: \"d2b48c\",\r\n  teal: \"008080\",\r\n  thistle: \"d8bfd8\",\r\n  tomato: \"ff6347\",\r\n  turquoise: \"40e0d0\",\r\n  violet: \"ee82ee\",\r\n  wheat: \"f5deb3\",\r\n  white: \"fff\",\r\n  whitesmoke: \"f5f5f5\",\r\n  yellow: \"ff0\",\r\n  yellowgreen: \"9acd32\",\r\n};\r\n\r\nColor.initClass();\r\n","import _ from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\n// Modern Gradient class\r\nexport class Gradient extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"start\", {\r\n      get() {\r\n        return this._start;\r\n      },\r\n      set(value) {\r\n        this._start = new Color(value);\r\n      },\r\n    });\r\n\r\n    this.define(\"end\", {\r\n      get() {\r\n        return this._end;\r\n      },\r\n      set(value) {\r\n        this._end = new Color(value);\r\n      },\r\n    });\r\n\r\n    this.define(\"angle\", {\r\n      get() {\r\n        return this._angle;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) this._angle = value;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    const defaults = {\r\n      start: \"black\",\r\n      end: \"white\",\r\n      angle: 0,\r\n    };\r\n    super({ ...defaults, ...options });\r\n  }\r\n\r\n  toCSS() {\r\n    return `linear-gradient(${this.angle}deg, ${this.start}, ${this.end})`;\r\n  }\r\n\r\n  mix(gradientB, fraction, model) {\r\n    return Gradient.mix(this, gradientB, fraction, model);\r\n  }\r\n\r\n  isEqual(gradientB) {\r\n    return Gradient.equal(this, gradientB);\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} start:${this.start} end:${this.end} angle:${this.angle}>`;\r\n  }\r\n\r\n  static mix(gradientA, gradientB, fraction = 0.5, model) {\r\n    fraction = Utils.clamp(fraction, 0, 1);\r\n\r\n    const start = Color.mix(\r\n      gradientA.start,\r\n      gradientB.start,\r\n      fraction,\r\n      false,\r\n      model\r\n    );\r\n    const end = Color.mix(gradientA.end, gradientB.end, fraction, false, model);\r\n\r\n    const angle =\r\n      gradientA.angle + (gradientB.angle - gradientA.angle) * fraction;\r\n\r\n    return new Gradient({ start, end, angle });\r\n  }\r\n\r\n  static random() {\r\n    const hue = Math.random() * 360;\r\n    const colorA = new Color({ h: hue });\r\n    const colorB = new Color({ h: hue + 40 });\r\n\r\n    return new Gradient({\r\n      start: colorA,\r\n      end: colorB,\r\n      angle: Math.round(Math.random() * 360),\r\n    });\r\n  }\r\n\r\n  static isGradient(gradient) {\r\n    return !_.isEmpty(this._asPlainObject(gradient));\r\n  }\r\n\r\n  static isGradientObject(gradient) {\r\n    return gradient instanceof Gradient;\r\n  }\r\n\r\n  static equal(gradientA, gradientB) {\r\n    if (!Gradient.isGradient(gradientA)) return false;\r\n    if (!Gradient.isGradient(gradientB)) return false;\r\n\r\n    const equalAngle = Math.abs(gradientA.angle - gradientB.angle) % 360 === 0;\r\n    const equalStart = Color.equal(gradientA.start, gradientB.start);\r\n    const equalEnd = Color.equal(gradientA.end, gradientB.end);\r\n\r\n    return equalAngle && equalStart && equalEnd;\r\n  }\r\n\r\n  static multiplyAlpha(gradient, alpha) {\r\n    if (!this.isGradientObject(gradient)) gradient = new Gradient(gradient);\r\n\r\n    return new Gradient({\r\n      start: gradient.start.multiplyAlpha(alpha),\r\n      end: gradient.end.multiplyAlpha(alpha),\r\n      angle: gradient.angle,\r\n    });\r\n  }\r\n\r\n  static _asPlainObject(gradient) {\r\n    return _.pick(gradient, [\"start\", \"end\", \"angle\"]);\r\n  }\r\n}\r\nGradient.initClass();\r\n","export const Gestures = Object.freeze({\r\n  // Tap\r\n  Tap: \"tap\",\r\n  TapStart: \"tapstart\",\r\n  TapEnd: \"tapend\",\r\n  DoubleTap: \"doubletap\",\r\n\r\n  // Force Tap\r\n  ForceTap: \"forcetap\",\r\n  ForceTapChange: \"forcetapchange\",\r\n  ForceTapStart: \"forcetapstart\",\r\n  ForceTapEnd: \"forcetapend\",\r\n\r\n  // Long Press\r\n  LongPress: \"longpress\",\r\n  LongPressStart: \"longpressstart\",\r\n  LongPressEnd: \"longpressend\",\r\n\r\n  // Swipe\r\n  Swipe: \"swipe\",\r\n  SwipeStart: \"swipestart\",\r\n  SwipeEnd: \"swipeend\",\r\n\r\n  SwipeUp: \"swipeup\",\r\n  SwipeUpStart: \"swipeupstart\",\r\n  SwipeUpEnd: \"swipeupend\",\r\n\r\n  SwipeDown: \"swipedown\",\r\n  SwipeDownStart: \"swipedownstart\",\r\n  SwipeDownEnd: \"swipedownend\",\r\n\r\n  SwipeLeft: \"swipeleft\",\r\n  SwipeLeftStart: \"swipeleftstart\",\r\n  SwipeLeftEnd: \"swipeleftend\",\r\n\r\n  SwipeRight: \"swiperight\",\r\n  SwipeRightStart: \"swiperightstart\",\r\n  SwipeRightEnd: \"swiperightend\",\r\n\r\n  // Edge Swipe\r\n  EdgeSwipe: \"edgeswipe\",\r\n  EdgeSwipeStart: \"edgeswipestart\",\r\n  EdgeSwipeEnd: \"edgeswipeend\",\r\n\r\n  EdgeSwipeTop: \"edgeswipetop\",\r\n  EdgeSwipeTopStart: \"edgeswipetopstart\",\r\n  EdgeSwipeTopEnd: \"edgeswipetopend\",\r\n\r\n  EdgeSwipeRight: \"edgeswiperight\",\r\n  EdgeSwipeRightStart: \"edgeswiperightstart\",\r\n  EdgeSwipeRightEnd: \"edgeswiperightend\",\r\n\r\n  EdgeSwipeBottom: \"edgeswipebottom\",\r\n  EdgeSwipeBottomStart: \"edgeswipebottomstart\",\r\n  EdgeSwipeBottomEnd: \"edgeswipebottomend\",\r\n\r\n  EdgeSwipeLeft: \"edgeswipeleft\",\r\n  EdgeSwipeLeftStart: \"edgeswipeleftstart\",\r\n  EdgeSwipeLeftEnd: \"edgeswipeleftend\",\r\n\r\n  // Pan\r\n  Pan: \"pan\",\r\n  PanStart: \"panstart\",\r\n  PanEnd: \"panend\",\r\n  PanLeft: \"panleft\",\r\n  PanRight: \"panright\",\r\n  PanUp: \"panup\",\r\n  PanDown: \"pandown\",\r\n\r\n  // Pinch\r\n  Pinch: \"pinch\",\r\n  PinchStart: \"pinchstart\",\r\n  PinchEnd: \"pinchend\",\r\n\r\n  // Scale\r\n  Scale: \"scale\",\r\n  ScaleStart: \"scalestart\",\r\n  ScaleEnd: \"scaleend\",\r\n\r\n  // Rotate\r\n  Rotate: \"rotate\",\r\n  RotateStart: \"rotatestart\",\r\n  RotateEnd: \"rotateend\",\r\n});\r\n","import Utils from \"./Utils.js\";\r\nimport _ from \"./Underscore.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\nconst Events = {\r\n  // Standard DOM events\r\n  MouseUp: \"mouseup\",\r\n  MouseDown: \"mousedown\",\r\n  MouseOver: \"mouseover\",\r\n  MouseOut: \"mouseout\",\r\n  MouseEnter: \"mouseenter\",\r\n  MouseLeave: \"mouseleave\",\r\n  MouseMove: \"mousemove\",\r\n  MouseWheel: \"mousewheel\",\r\n  DoubleClick: \"dblclick\",\r\n  MouseDoubleClick: \"dblclick\", // Alias\r\n};\r\n\r\n// Pointer support detection\r\nconst supportsPointerEvents =\r\n  window.onpointerdown === null &&\r\n  window.onpointermove === null &&\r\n  window.onpointerup === null;\r\n\r\nEvents.PointerUp = \"pointerup\";\r\nEvents.PointerDown = \"pointerdown\";\r\nEvents.PointerOver = \"pointerover\";\r\nEvents.PointerOut = \"pointerout\";\r\nEvents.PointerMove = \"pointermove\";\r\n\r\n// Touch events\r\nEvents.enableEmulatedTouchEvents = (enable = true) => {\r\n  if (supportsPointerEvents) return;\r\n\r\n  if (enable) {\r\n    Events.TouchStart = Events.MouseDown;\r\n    Events.TouchEnd = Events.MouseUp;\r\n    Events.TouchMove = Events.MouseMove;\r\n    Events.Click = \"touchend\";\r\n  } else {\r\n    Events.TouchStart = \"touchstart\";\r\n    Events.TouchEnd = \"touchend\";\r\n    Events.TouchMove = \"touchmove\";\r\n    Events.Click = Utils.isTouch() ? \"touchend\" : \"mouseup\";\r\n  }\r\n};\r\n\r\n// Ensure touch events work on desktop too\r\nEvents.enableEmulatedTouchEvents(!Utils.isTouch());\r\n\r\n// Use pointer events if supported\r\nif (supportsPointerEvents) {\r\n  Events.MouseUp = Events.PointerUp;\r\n  Events.MouseDown = Events.PointerDown;\r\n  Events.MouseOver = Events.PointerOver;\r\n  Events.MouseOut = Events.PointerOut;\r\n  Events.MouseMove = Events.PointerMove;\r\n\r\n  Events.TouchStart = Events.PointerDown;\r\n  Events.TouchEnd = Events.PointerUp;\r\n  Events.TouchMove = Events.PointerMove;\r\n  Events.Click = Events.PointerUp;\r\n}\r\n\r\n// Animation events\r\nEvents.AnimationStart = \"start\";\r\nEvents.AnimationHalt = \"halt\";\r\nEvents.AnimationStop = \"stop\";\r\nEvents.AnimationEnd = \"end\";\r\n\r\nEvents.AnimationDidStart = Events.AnimationStart; // Deprecated\r\nEvents.AnimationDidStop = Events.AnimationStop; // Deprecated\r\nEvents.AnimationDidEnd = Events.AnimationEnd; // Deprecated\r\n\r\n// State events\r\nEvents.StateSwitchStart = \"stateswitchstart\";\r\nEvents.StateSwitchStop = \"stateswitchstop\";\r\nEvents.StateSwitchEnd = \"stateswitchend\";\r\n\r\nEvents.StateWillSwitch = Events.StateSwitchStart; // Deprecated\r\nEvents.StateDidSwitch = Events.StateSwitchEnd; // Deprecated\r\n\r\n// Scroll events\r\nEvents.Scroll = \"scroll\";\r\n\r\n// Image events\r\nEvents.ImageLoaded = \"imageload\";\r\nEvents.ImageLoadError = \"imageerror\";\r\nEvents.ImageLoadCancelled = \"imagecancelled\";\r\n\r\n// Sensor events\r\nEvents.DeviceOrientation = \"deviceorientation\";\r\nEvents.DeviceMotion = \"devicemotion\";\r\n\r\n// Merge gesture events\r\nObject.assign(Events, Gestures);\r\n\r\n// Extract touch from any event\r\nEvents.touchEvent = (event) => {\r\n  return event.touches?.[0] ?? event.changedTouches?.[0] ?? event;\r\n};\r\n\r\n// Wrapping for Framer\r\nEvents.wrap = (element) => Framer.CurrentContext.domEventManager.wrap(element);\r\n\r\n// Check if an event is a gesture\r\nEvents.isGesture = (eventName) => Object.values(Gestures).includes(eventName);\r\n\r\n// Interactive events\r\nconst interactiveEvents = [\r\n  ...Object.values(Gestures),\r\n  Events.TouchStart,\r\n  Events.TouchEnd,\r\n  Events.MouseUp,\r\n  Events.MouseDown,\r\n  Events.MouseWheel,\r\n  Events.DoubleClick,\r\n];\r\n\r\nEvents.isInteractive = (eventName) => interactiveEvents.includes(eventName);\r\n\r\nexport { Events };\r\n","import _ from \"./Underscore.js\";\r\n\r\nconst Originals = {\r\n  Layer: {\r\n    backgroundColor: \"rgba(123, 123, 123, 0.5)\",\r\n    color: \"white\",\r\n    borderColor: \"rgba(123, 123, 123, 0.5)\",\r\n    width: 200,\r\n    height: 200,\r\n  },\r\n  Animation: {\r\n    curve: \"ease\", // or \"spring(400, 40, 0)\"\r\n    time: 1,\r\n    repeat: 0,\r\n    delay: 0,\r\n    debug: false,\r\n    colorModel: \"husl\",\r\n    animate: true,\r\n    looping: false,\r\n  },\r\n  Context: {\r\n    perspective: 0,\r\n    perspectiveOriginX: 0.5,\r\n    perspectiveOriginY: 0.5,\r\n    parent: null,\r\n    name: null,\r\n  },\r\n  DeviceComponent: {\r\n    fullScreen: false,\r\n    padding: 50,\r\n    deviceType: \"apple-iphone-8-silver\",\r\n    deviceZoom: \"fit\",\r\n    contentZoom: 1,\r\n    orientation: \"portrait\",\r\n    keyboard: false,\r\n    animationOptions: {\r\n      time: 0.3,\r\n      curve: \"ease-in-out\",\r\n    },\r\n  },\r\n  LayerDraggable: {\r\n    momentum: true,\r\n    momentumOptions: { friction: 2.1, tolerance: 1 },\r\n    bounce: true,\r\n    bounceOptions: { friction: 40, tension: 200, tolerance: 1 },\r\n    directionLock: false,\r\n    directionLockThreshold: { x: 10, y: 10 },\r\n    overdrag: true,\r\n    overdragScale: 0.5,\r\n    pixelAlign: true,\r\n    velocityTimeout: 100,\r\n    velocityScale: 890,\r\n  },\r\n  FrictionSimulator: { friction: 2, tolerance: 1 / 10 },\r\n  Spring: { dampingRatio: 0.5, mass: 1, velocity: 0 },\r\n  SpringSimulator: { tension: 500, friction: 10, tolerance: 1 / 10000 },\r\n  MomentumBounceSimulator: {\r\n    momentum: { friction: 2, tolerance: 10 },\r\n    bounce: { tension: 500, friction: 10, tolerance: 1 },\r\n  },\r\n  GridComponent: {\r\n    rows: 3,\r\n    columns: 3,\r\n    spacing: 0,\r\n    backgroundColor: \"transparent\",\r\n  },\r\n  ScrollComponent: {\r\n    clip: true,\r\n    mouseWheelEnabled: false,\r\n    backgroundColor: null,\r\n  },\r\n  Hints: { color: \"rgba(144, 19, 254, 0.8)\" },\r\n  Shadow: {\r\n    x: 0,\r\n    y: 0,\r\n    color: \"rgba(123, 123, 123, 0.5)\",\r\n    type: \"box\",\r\n    blur: 0,\r\n    spread: 0,\r\n  },\r\n};\r\n\r\nexport const Defaults = {\r\n  getDefaults(className, options = {}) {\r\n    if (!Originals[className] || !Framer.Defaults?.[className]) return {};\r\n\r\n    const optsClone = _.clone(options);\r\n    const defaults = _.cloneDeep(Originals[className]);\r\n\r\n    for (const [k, v] of Object.entries(Framer.Defaults[className])) {\r\n      defaults[k] =\r\n        _.isFunction(v) && !(className === \"Animation\" && k === \"curve\")\r\n          ? v()\r\n          : v;\r\n    }\r\n\r\n    for (const [k, v] of Object.entries(defaults)) {\r\n      if (!optsClone.hasOwnProperty(k)) optsClone[k] = v;\r\n    }\r\n\r\n    return optsClone;\r\n  },\r\n\r\n  setup() {\r\n    if (window.FramerDefaults) {\r\n      for (const [className, classValues] of Object.entries(\r\n        window.FramerDefaults\r\n      )) {\r\n        Object.assign(Originals[className], classValues);\r\n      }\r\n    }\r\n    return this.reset();\r\n  },\r\n\r\n  reset() {\r\n    window.Framer.Defaults = _.cloneDeep(Originals);\r\n    return window.Framer.Defaults;\r\n  },\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport { Color } from \"./Color.js\";\r\n\r\nexport class SVG {\r\n  static validFill(value) {\r\n    return Color.validColorValue(value) || _.startsWith(value, \"url(\");\r\n  }\r\n\r\n  static toFill(value) {\r\n    if (_.startsWith(value, \"url(\")) {\r\n      return value;\r\n    } else {\r\n      return Color.toColor(value);\r\n    }\r\n  }\r\n\r\n  static updateGradientSVG(svgLayer) {\r\n    if (svgLayer.__constructor) {\r\n      return;\r\n    }\r\n    if (!Gradient.isGradient(svgLayer.gradient)) {\r\n      if (svgLayer._elementGradientSVG != null) {\r\n        svgLayer._elementGradientSVG.innerHTML = \"\";\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!svgLayer._elementGradientSVG) {\r\n      svgLayer._elementGradientSVG = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"svg\"\r\n      );\r\n      svgLayer._element.appendChild(svgLayer._elementGradientSVG);\r\n    }\r\n\r\n    const id = `gradient-${svgLayer.id}`;\r\n    svgLayer._elementGradientSVG.innerHTML = `\\\r\n<linearGradient id='${id}' gradientTransform='rotate(${\r\n      svgLayer.gradient.angle - 90\r\n    }, 0.5, 0.5)' >\r\n\t<stop offset=\"0\" stop-color='#${svgLayer.gradient.start.toHex()}' stop-opacity='${\r\n      svgLayer.gradient.start.a\r\n    }' />\r\n\t<stop offset=\"1\" stop-color='#${svgLayer.gradient.end.toHex()}' stop-opacity='${\r\n      svgLayer.gradient.end.a\r\n    }' />\r\n</linearGradient>\\\r\n`;\r\n    return (svgLayer.fill = `url(#${id})`);\r\n  }\r\n\r\n  static updateImagePatternSVG(svgLayer) {\r\n    if (svgLayer.__constructor) {\r\n      return;\r\n    }\r\n\r\n    if (!svgLayer.image) {\r\n      if (svgLayer._elementImagePatternSVG != null) {\r\n        svgLayer._elementImagePatternSVG.innerHTML = \"\";\r\n      }\r\n      return;\r\n    }\r\n\r\n    let transform = \"\";\r\n\r\n    if (\r\n      [\"fill\", \"fit\", \"contain\", \"cover\"].includes(svgLayer.backgroundSize) &&\r\n      svgLayer.imageSize\r\n    ) {\r\n      let scaleX = 1;\r\n      let scaleY = 1;\r\n      let offsetX = 0;\r\n      let offsetY = 0;\r\n\r\n      const imageWidth = svgLayer.imageSize.width;\r\n      const imageHeight = svgLayer.imageSize.height;\r\n\r\n      const imageRatio = imageWidth / imageHeight;\r\n      const realWidth = svgLayer.height * imageRatio;\r\n      const realHeight = svgLayer.width / imageRatio;\r\n      const validScaleX = realWidth / svgLayer.width;\r\n      const validScaleY = realHeight / svgLayer.height;\r\n\r\n      const fillBackground = [\"fill\", \"cover\"].includes(\r\n        svgLayer.backgroundSize\r\n      );\r\n\r\n      if (\r\n        (fillBackground && validScaleY > validScaleX) ||\r\n        (!fillBackground && validScaleY < validScaleX)\r\n      ) {\r\n        scaleY = validScaleY;\r\n        offsetY = (1 - validScaleY) / 2;\r\n      } else {\r\n        scaleX = validScaleX;\r\n        offsetX = (1 - validScaleX) / 2;\r\n      }\r\n\r\n      transform = `transform=\"translate(${offsetX}, ${offsetY}) scale(${scaleX}, ${scaleY})\" `;\r\n    }\r\n\r\n    if (!svgLayer._elementImagePatternSVG) {\r\n      svgLayer._elementImagePatternSVG = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"svg\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\r\n        \"xmlns\",\r\n        \"http://www.w3.org/2000/svg\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\r\n        \"xmlns:xlink\",\r\n        \"http://www.w3.org/1999/xlink\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\"width\", \"100%\");\r\n      svgLayer._elementImagePatternSVG.setAttribute(\"height\", \"100%\");\r\n      svgLayer._element.appendChild(svgLayer._elementImagePatternSVG);\r\n    }\r\n\r\n    const id = `image-pattern-${svgLayer.id}`;\r\n    svgLayer._elementImagePatternSVG.innerHTML = `\\\r\n<pattern id=\"${id}\" width=\"100%\" height=\"100%\" patternContentUnits=\"objectBoundingBox\">\r\n\t<image width=\"1\" height=\"1\" xlink:href=${svgLayer.image} preserveAspectRatio=\"none\" ${transform} />\r\n</pattern>\\\r\n`;\r\n    return window.requestAnimationFrame(() =>\r\n      window.requestAnimationFrame(() => (svgLayer.fill = `url(#${id})`))\r\n    );\r\n  }\r\n  // Utils.delay 0.1, -> svgLayer.fill = \"url(##{id})\"\r\n\r\n  static constructSVGElements(root, elements, PathClass, GroupClass) {\r\n    const targets = {};\r\n    let children = [];\r\n\r\n    if (elements != null) {\r\n      for (var element of Array.from(elements)) {\r\n        if (!(element instanceof SVGElement)) {\r\n          // Children can contain text nodes\r\n          continue;\r\n        }\r\n        var name = element.getAttribute(\"name\");\r\n        if (name == null) {\r\n          if (element instanceof SVGGElement) {\r\n            var defsResult = this.constructSVGElements(\r\n              root,\r\n              element.childNodes,\r\n              PathClass,\r\n              GroupClass\r\n            );\r\n            _.extend(targets, defsResult.targets);\r\n            children = children.concat(defsResult.children);\r\n            continue;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        var options = {};\r\n        options.name = name;\r\n        options.parent = root;\r\n\r\n        if (element instanceof SVGGElement) {\r\n          var group = new GroupClass(element, options);\r\n          children.push(group);\r\n          _.extend(targets, group.elements);\r\n          if (element.id != null && element.id !== \"\") {\r\n            targets[element.id] = group;\r\n          }\r\n          continue;\r\n        }\r\n        if (\r\n          element instanceof SVGPathElement ||\r\n          element instanceof SVGUseElement\r\n        ) {\r\n          var path = new PathClass(element, options);\r\n          children.push(path);\r\n          if (path._path.id != null && path._path.id !== \"\") {\r\n            var { id } = path._path;\r\n            targets[id] = path;\r\n          }\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n    return { targets, children };\r\n  }\r\n\r\n  static isPath(path) {\r\n    return path instanceof Framer.SVGPath;\r\n  }\r\n}\r\n","const { BezierCurveAnimator } = require(\"./BezierCurveAnimator\");\r\nconst {\r\n  computeDerivedCurveOptions,\r\n  computeDuration,\r\n  computeDampingRatio,\r\n} = require(\"./SpringCurveValueConverter\");\r\nconst { SpringRK4Animator } = require(\"./SpringRK4Animator\");\r\nconst { Defaults } = require(\"../Defaults\");\r\n\r\nconst Bezier = (...values) =>\r\n  function (options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (values.length > 0) {\r\n      options.values = values;\r\n    }\r\n    return new BezierCurveAnimator(options);\r\n  };\r\n\r\n// We define each in a seperate function here\r\n// so they become named functions\r\n// and Framer.Curves.Bezier.ease.name is set\r\nconst BezierDefaults = {\r\n  linear(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0, 0, 1, 1)(options);\r\n  },\r\n  ease(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.25, 0.1, 0.25, 1)(options);\r\n  },\r\n  easeIn(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.42, 0, 1, 1)(options);\r\n  },\r\n  easeOut(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0, 0, 0.58, 1)(options);\r\n  },\r\n  easeInOut(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.42, 0, 0.58, 1)(options);\r\n  },\r\n};\r\n\r\nconst Spring = function (dampingRatio, mass, velocity) {\r\n  let curveOptions = {};\r\n  if (dampingRatio != null && _.isFinite(dampingRatio)) {\r\n    curveOptions.dampingRatio = dampingRatio;\r\n  }\r\n  if (mass != null) {\r\n    curveOptions.mass = mass;\r\n  }\r\n  if (velocity != null) {\r\n    curveOptions.velocity = velocity;\r\n  }\r\n  if (!_.isFinite(dampingRatio) && typeof dampingRatio === \"object\") {\r\n    curveOptions = dampingRatio;\r\n    if (curveOptions.damping != null && curveOptions.dampingRatio == null) {\r\n      curveOptions.dampingRatio = curveOptions.damping;\r\n    }\r\n  }\r\n  if (curveOptions.tension == null && curveOptions.friction == null) {\r\n    curveOptions = Defaults.getDefaults(\"Spring\", curveOptions);\r\n  }\r\n\r\n  return function (options) {\r\n    let duration;\r\n    if (curveOptions.dampingRatio != null) {\r\n      duration =\r\n        (options != null ? options.time : undefined) != null\r\n          ? options != null\r\n            ? options.time\r\n            : undefined\r\n          : 1;\r\n      const derivedOptions = computeDerivedCurveOptions(\r\n        curveOptions.dampingRatio,\r\n        duration,\r\n        curveOptions.velocity,\r\n        curveOptions.mass\r\n      );\r\n      curveOptions = _.defaults(derivedOptions, curveOptions);\r\n    } else {\r\n      if (options != null) {\r\n        delete options.time;\r\n      }\r\n    }\r\n    options = _.defaults(curveOptions, options);\r\n    const animator = new SpringRK4Animator(options);\r\n    if (duration != null) {\r\n      animator.time = duration;\r\n    }\r\n    return animator;\r\n  };\r\n};\r\n\r\n_.assign(Bezier, BezierDefaults);\r\nSpring.computeDerivedCurveOptions = computeDerivedCurveOptions;\r\nSpring.computeDuration = computeDuration;\r\nSpring.computeDampingRatio = computeDampingRatio;\r\n\r\nconst parseFunction = function (string) {\r\n  let value;\r\n  if (!_.isString(string)) {\r\n    return null;\r\n  }\r\n\r\n  // This parses functions with or without arguments like Bezier(0.1, 0.2, 0.3, 0.4) and Spring(damping: 0.5)\r\n  const regex = /.*(Spring|Bezier)(?:\\(\\s*{?([\\w:\\s,.]*)}?\\s*\\)|\\.(\\w+))?/;\r\n  let matches = regex.exec(string);\r\n  if (matches == null) {\r\n    return null;\r\n  }\r\n  let [match, type, args, prop] = Array.from(matches);\r\n  const result = { name: type, property: null, arguments: null };\r\n  if (prop != null) {\r\n    result.property = prop;\r\n    return result;\r\n  }\r\n  if (args == null) {\r\n    return result;\r\n  }\r\n  if (args.length === 0) {\r\n    result.arguments = [];\r\n  }\r\n\r\n  const argumentsRegex = /\\s*([\\w]+)\\s*:\\s*([\\d.]+)\\s*,?/g;\r\n  const argumentObject = {};\r\n  while ((matches = argumentsRegex.exec(args))) {\r\n    let property;\r\n    [match, property, value] = Array.from(matches);\r\n    value = parseFloat(value);\r\n    if (!isNaN(value)) {\r\n      argumentObject[property] = value;\r\n    }\r\n  }\r\n  if (_.size(argumentObject) > 0) {\r\n    result.arguments = argumentObject;\r\n    return result;\r\n  }\r\n\r\n  const numbersRegex = /\\s*([.\\d]+)\\s*/g;\r\n  const numbers = [];\r\n  while ((matches = numbersRegex.exec(args))) {\r\n    [match, value] = Array.from(matches);\r\n    value = parseFloat(value);\r\n    numbers.push(value);\r\n  }\r\n  result.arguments = numbers;\r\n  return result;\r\n};\r\n\r\nconst fromDefinition = function (definition) {\r\n  if (definition == null) {\r\n    return null;\r\n  }\r\n  const curve = Framer.Curves[definition.name];\r\n  if (curve == null) {\r\n    return null;\r\n  }\r\n\r\n  if (definition.property != null) {\r\n    return curve[definition.property];\r\n  }\r\n  if (definition.arguments == null) {\r\n    return curve;\r\n  }\r\n\r\n  if (_.isArray(definition.arguments)) {\r\n    return curve(...Array.from(definition.arguments || []));\r\n  }\r\n\r\n  return curve(definition.arguments);\r\n};\r\nexport { parseFunction, fromDefinition, Spring, Bezier };\r\n\r\nexport const fromString = (string) => {\r\n  if (!_.isString(string)) {\r\n    return null;\r\n  }\r\n  let func = fromDefinition(parseFunction(string));\r\n  if (func != null) {\r\n    return func;\r\n  }\r\n  func = Utils.parseFunction(string);\r\n  const args = func.args.map(parseFloat);\r\n  switch (func.name) {\r\n    case \"linear\":\r\n      return Bezier.linear;\r\n    case \"ease\":\r\n      return Bezier.ease;\r\n    case \"ease-in\":\r\n      return Bezier.easeIn;\r\n    case \"ease-out\":\r\n      return Bezier.easeOut;\r\n    case \"ease-in-out\":\r\n      return Bezier.easeInOut;\r\n    case \"bezier-curve\":\r\n    case \"cubic-bezier\":\r\n      return Bezier(...Array.from(args || []));\r\n    case \"spring\":\r\n    case \"spring-rk4\":\r\n    case \"spring-dho\":\r\n      var pairs = _.zipWith(\r\n        [\"tension\", \"friction\", \"velocity\", \"tolerance\"],\r\n        args,\r\n        [250, 25, 0, 1 / 100],\r\n        (key, value, defaults) => [key, value != null ? value : defaults]\r\n      );\r\n      var object = _.fromPairs(pairs);\r\n      return Spring(object);\r\n    default:\r\n      return Bezier.linear;\r\n  }\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { SVG } from \"./SVG.js\";\r\nimport * as Curves from \"./Animators/Curves.js\";\r\n\r\nconst numberRE = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/;\r\nconst relativePropertyRE = new RegExp(\r\n  `^(?:([+-])=|)(${numberRE.source})([a-z%]*)$`,\r\n  \"i\"\r\n);\r\n\r\nexport const isRelativeProperty = (v) =>\r\n  _.isString(v) && relativePropertyRE.test(v);\r\n\r\nexport const evaluateRelativeProperty = (target, k, v) => {\r\n  const match = relativePropertyRE.exec(v);\r\n  if (!match) return +v;\r\n  const [, sign, number, unit] = match;\r\n  if (sign) return target[k] + Number(sign + 1) * Number(number);\r\n  return +number;\r\n};\r\n\r\nexport class Animation extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"layer\", {\r\n      get() {\r\n        return this._layer;\r\n      },\r\n    });\r\n\r\n    this.define(\"isPending\", {\r\n      get() {\r\n        return this._delayTimer != null;\r\n      },\r\n    });\r\n\r\n    this.define(\"isAnimating\", {\r\n      get() {\r\n        let needle;\r\n        return (\r\n          (needle = this), Array.from(this.layer.animations()).includes(needle)\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"looping\", {\r\n      get() {\r\n        return this.options.looping;\r\n      },\r\n      set(value) {\r\n        if (this.options != null) {\r\n          this.options.looping = value;\r\n        }\r\n        if (\r\n          (this.options != null ? this.options.looping : undefined) &&\r\n          this.layer != null &&\r\n          !this.isAnimating\r\n        ) {\r\n          return this.restart();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"isNoop\", this.simpleProperty(\"isNoop\", false));\r\n  }\r\n\r\n  constructor(...args) {\r\n    // Old API detection\r\n\r\n    // animationA = new Animation\r\n    // \tlayer: layerA\r\n    // \tproperties:\r\n    // \t\tx: 100\r\n\r\n    this.start = this.start.bind(this);\r\n    this._instant = this._instant.bind(this);\r\n    this._noop = this._noop.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this.finish = this.finish.bind(this);\r\n    this._update = this._update.bind(this);\r\n    this._prepareUpdateValues = this._prepareUpdateValues.bind(this);\r\n    this._updateValues = this._updateValues.bind(this);\r\n    this._updateNumberValue = this._updateNumberValue.bind(this);\r\n    this._calculateNumericObjectValue =\r\n      this._calculateNumericObjectValue.bind(this);\r\n    this._updateNumericObjectValue = this._updateNumericObjectValue.bind(this);\r\n    this._updateColorValue = this._updateColorValue.bind(this);\r\n    this._updateGradientValue = this._updateGradientValue.bind(this);\r\n    this._updateShadows = this._updateShadows.bind(this);\r\n    this._updateTemplateValue = this._updateTemplateValue.bind(this);\r\n    let layer = null;\r\n    let properties = {};\r\n    let options = {};\r\n\r\n    // Actual current api\r\n    if (arguments.length === 3) {\r\n      layer = args[0];\r\n      properties = args[1];\r\n\r\n      options = {};\r\n\r\n      if (properties.options != null) {\r\n        options = _.clone(properties.options);\r\n      }\r\n\r\n      if (args[2]) {\r\n        options = _.extend({}, options, args[2]);\r\n      }\r\n    }\r\n\r\n    // Mix of current and old api\r\n    if (arguments.length === 2) {\r\n      layer = args[0];\r\n      if (args[1].properties != null) {\r\n        ({ properties } = args[1]);\r\n      } else {\r\n        properties = args[1];\r\n      }\r\n      if (args[1].options != null) {\r\n        ({ options } = args[1]);\r\n      }\r\n    }\r\n\r\n    // Old api\r\n    if (arguments.length === 1) {\r\n      ({ layer } = args[0]);\r\n      ({ properties } = args[0]);\r\n      if (args[0].options != null) {\r\n        ({ options } = args[0]);\r\n      } else {\r\n        options = args[0];\r\n      }\r\n    }\r\n\r\n    delete options.layer;\r\n    delete options.properties;\r\n    delete options.options;\r\n\r\n    this.options = _.cloneDeep(Defaults.getDefaults(\"Animation\", options));\r\n\r\n    super(...arguments);\r\n\r\n    this._layer = layer;\r\n\r\n    if (!(layer instanceof _Layer)) {\r\n      throw Error(\"Animation: missing layer\");\r\n    }\r\n\r\n    this.properties = Animation.filterAnimatableProperties(properties, layer);\r\n\r\n    if (properties.origin) {\r\n      console.warn(\r\n        \"Animation.origin: please use layer.originX and layer.originY\"\r\n      );\r\n    }\r\n\r\n    if (_.isString(this.options.curve)) {\r\n      this.options.curve = Curves.fromString(this.options.curve);\r\n    }\r\n    if (\r\n      this.options.curve === Curves.Spring ||\r\n      this.options.curve === Curves.Bezier\r\n    ) {\r\n      this.options.curve = this.options.curve.call();\r\n    }\r\n    this._originalState = this._currentState();\r\n    this._repeatCounter = this.options.repeat;\r\n  }\r\n\r\n  start() {\r\n    let k, start, v;\r\n    this._animator = this.options.curve(this.options);\r\n    this._target = this.layer;\r\n    this._stateA = this._currentState();\r\n    this._stateB = {};\r\n\r\n    for (k in this.properties) {\r\n      // Filter out properties that are literally equal\r\n      v = this.properties[k];\r\n      if (this._stateA[k] === v) {\r\n        continue;\r\n      }\r\n\r\n      // Evaluate function properties\r\n      if (_.isFunction(v)) {\r\n        v = v(this.layer, k);\r\n\r\n        // Evaluate relative properties\r\n      } else if (isRelativeProperty(v)) {\r\n        v = evaluateRelativeProperty(this._target, k, v);\r\n      }\r\n\r\n      // Filter out the properties that have equal values\r\n      if (this._stateA[k] !== v) {\r\n        this._stateB[k] = v;\r\n      }\r\n    }\r\n\r\n    if (_.keys(this._stateA).length === 0) {\r\n      console.warn(\"Animation: nothing to animate, no animatable properties\");\r\n      return this._noop();\r\n    }\r\n\r\n    if (_.isEqual(this._stateA, this._stateB)) {\r\n      console.warn(\r\n        \"Animation: nothing to animate, all properties are equal to what it is now\"\r\n      );\r\n      return this._noop();\r\n    }\r\n\r\n    if (_.keys(this._stateB).length === 0) {\r\n      return this._noop();\r\n    }\r\n\r\n    // If this animation wants to animate a property that is already being animated, it stops\r\n    // that currently running animation. If not, it allows them both to continue.\r\n    const object = this._target.animatingProperties();\r\n    for (var property in object) {\r\n      var animation = object[property];\r\n      if (this._stateA.hasOwnProperty(property)) {\r\n        animation.stop();\r\n      }\r\n\r\n      // We also need to account for derivatives from x, y\r\n      if (\r\n        property === \"x\" &&\r\n        (this._stateA.hasOwnProperty(\"minX\") ||\r\n          this._stateA.hasOwnProperty(\"midX\") ||\r\n          this._stateA.hasOwnProperty(\"maxX\"))\r\n      ) {\r\n        animation.stop();\r\n      }\r\n\r\n      if (\r\n        property === \"y\" &&\r\n        (this._stateA.hasOwnProperty(\"minY\") ||\r\n          this._stateA.hasOwnProperty(\"midY\") ||\r\n          this._stateA.hasOwnProperty(\"maxY\"))\r\n      ) {\r\n        animation.stop();\r\n      }\r\n    }\r\n\r\n    if (this.options.debug) {\r\n      console.log(\"Animation.start\");\r\n      for (k in this._stateB) {\r\n        v = this._stateB[k];\r\n        console.log(`\\t${k}: ${this._stateA[k]} -> ${this._stateB[k]}`);\r\n      }\r\n    }\r\n\r\n    // Add the callbacks\r\n    if (_.isFunction(this.options.onStart)) {\r\n      this.on(Events.AnimationStart, this.options.onStart);\r\n    }\r\n    if (_.isFunction(this.options.onHalt)) {\r\n      this.on(Events.AnimationHalt, this.options.onHalt);\r\n    }\r\n    if (_.isFunction(this.options.onStop)) {\r\n      this.on(Events.AnimationStop, this.options.onStop);\r\n    }\r\n    if (_.isFunction(this.options.onEnd)) {\r\n      this.on(Events.AnimationEnd, this.options.onEnd);\r\n    }\r\n\r\n    // See if we need to repeat this animation\r\n    // Todo: more repeat behaviours:\r\n    // 1) add (from end position) 2) reverse (loop between a and b)\r\n    this.once(\"end\", () => {\r\n      if (this._repeatCounter > 0 || this.looping) {\r\n        this.restart();\r\n        if (!this.looping) {\r\n          return this._repeatCounter--;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Figure out what kind of values we have so we don't have to do it in\r\n    // the actual update loop. This saves a lot of frame budget.\r\n    this._prepareUpdateValues();\r\n\r\n    // The option keywords animate and instant trigger an instant animation\r\n    if (this.options.animate === false || this.options.instant === true) {\r\n      // If animate is false we set everything immediately and skip the actual animation\r\n      start = this._instant;\r\n    } else {\r\n      start = this._start;\r\n    }\r\n\r\n    this.layer.context.addAnimation(this);\r\n    // If we have a delay, we wait a bit for it to start\r\n    if (this.options.delay) {\r\n      this._delayTimer = Utils.delay(this.options.delay, start);\r\n    } else {\r\n      start();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  stop(emit) {\r\n    if (emit == null) {\r\n      emit = true;\r\n    }\r\n    if (this._delayTimer != null) {\r\n      Framer.CurrentContext.removeTimer(this._delayTimer);\r\n      this._delayTimer = null;\r\n    }\r\n\r\n    this.layer.context.removeAnimation(this);\r\n    if (emit) {\r\n      this.emit(Events.AnimationHalt);\r\n    }\r\n    if (emit) {\r\n      this.emit(Events.AnimationStop);\r\n    }\r\n    return Framer.Loop.off(\"update\", this._update);\r\n  }\r\n\r\n  reverse() {\r\n    // TODO: Add some tests\r\n    const properties = _.clone(this._originalState);\r\n    for (var key in this.properties) {\r\n      var value = this.properties[key];\r\n      if (SVG.isPath(value)) {\r\n        value.reversed = !value.reversed;\r\n        properties[key] = value;\r\n      }\r\n    }\r\n    const options = _.clone(this.options);\r\n    return new Animation(this.layer, properties, options);\r\n  }\r\n\r\n  reset() {\r\n    return (() => {\r\n      const result = [];\r\n      for (var k in this._stateA) {\r\n        var v = this._stateA[k];\r\n        result.push((this._target[k] = v));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  restart() {\r\n    this.reset();\r\n    return this.start();\r\n  }\r\n\r\n  copy() {\r\n    const properties = _.clone(this.properties);\r\n    const options = _.clone(this.options);\r\n    return new Animation(this.layer, properties, options);\r\n  }\r\n\r\n  // A bunch of common aliases to minimize frustration\r\n  revert() {\r\n    return this.reverse();\r\n  }\r\n  inverse() {\r\n    return this.reverse();\r\n  }\r\n  invert() {\r\n    return this.reverse();\r\n  }\r\n\r\n  emit(event) {\r\n    super.emit(...arguments);\r\n    // Also emit this to the layer with self as argument\r\n    return this.layer.emit(event, this);\r\n  }\r\n\r\n  animatingProperties() {\r\n    return _.keys(this._stateA);\r\n  }\r\n\r\n  _instant() {\r\n    this.emit(Events.AnimationStart);\r\n    this._updateValues(1);\r\n    this.emit(Events.AnimationStop);\r\n    return this.emit(Events.AnimationEnd);\r\n  }\r\n\r\n  _noop() {\r\n    this.isNoop = true;\r\n    // We don't emit these so you can call layer.animate safely\r\n    // from the same layers layer.onAnimationEnd handler\r\n    // @emit(Events.AnimationStart)\r\n    // @emit(Events.AnimationStop)\r\n    // @emit(Events.AnimationEnd)\r\n    return !this.isNoop;\r\n  }\r\n\r\n  _start() {\r\n    this._delayTimer = null;\r\n    this.emit(Events.AnimationStart);\r\n    this._previousValue = 0;\r\n    return Framer.Loop.on(\"update\", this._update);\r\n  }\r\n\r\n  finish() {\r\n    this.stop();\r\n    return this._updateValues(1);\r\n  }\r\n\r\n  _update(delta) {\r\n    if (this._animator.finished()) {\r\n      let emit;\r\n      this._updateValues(1);\r\n      this.stop((emit = false));\r\n      this.emit(Events.AnimationStop);\r\n      return this.emit(Events.AnimationEnd);\r\n    } else {\r\n      return this._updateValues(this._animator.next(delta));\r\n    }\r\n  }\r\n\r\n  _prepareUpdateValues() {\r\n    this._valueUpdaters = {};\r\n    return (() => {\r\n      const result = [];\r\n      for (var k in this._stateB) {\r\n        var v = this._stateB[k];\r\n        if (SVG.isPath(v)) {\r\n          var path = v;\r\n          var direction = null;\r\n          var start = null;\r\n          var end = null;\r\n          switch (k) {\r\n            case \"x\":\r\n            case \"minX\":\r\n            case \"midX\":\r\n            case \"maxX\":\r\n            case \"width\":\r\n              direction = \"horizontal\";\r\n              break;\r\n            case \"y\":\r\n            case \"minY\":\r\n            case \"midY\":\r\n            case \"maxY\":\r\n            case \"height\":\r\n              direction = \"vertical\";\r\n              break;\r\n            case \"rotation\":\r\n            case \"rotationZ\":\r\n            case \"rotationX\":\r\n            case \"rotationY\":\r\n              direction = \"angle\";\r\n              break;\r\n          }\r\n\r\n          result.push(\r\n            (this._valueUpdaters[k] = path.valueUpdater(\r\n              direction,\r\n              this._target,\r\n              this._target[k]\r\n            ))\r\n          );\r\n        } else if (\r\n          Color.isColorObject(v) ||\r\n          Color.isColorObject(this._stateA[k])\r\n        ) {\r\n          result.push((this._valueUpdaters[k] = this._updateColorValue));\r\n        } else if (\r\n          Gradient.isGradient(v) ||\r\n          Gradient.isGradient(this._stateA[k])\r\n        ) {\r\n          this._valueUpdaters[k] = this._updateGradientValue;\r\n          // If the begin state is not set, animate from the same state but with alpha 0\r\n          result.push(\r\n            this._stateA[k] != null\r\n              ? this._stateA[k]\r\n              : (this._stateA[k] = Gradient.multiplyAlpha(v, 0))\r\n          );\r\n        } else if (k === \"borderWidth\") {\r\n          result.push(\r\n            (this._valueUpdaters[k] = this._updateNumericObjectValue.bind(\r\n              this,\r\n              [\"top\", \"left\", \"bottom\", \"right\"]\r\n            ))\r\n          );\r\n        } else if (k === \"borderRadius\") {\r\n          result.push(\r\n            (this._valueUpdaters[k] = this._updateNumericObjectValue.bind(\r\n              this,\r\n              [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\r\n            ))\r\n          );\r\n        } else if (k === \"template\") {\r\n          result.push((this._valueUpdaters[k] = this._updateTemplateValue));\r\n        } else if (k === \"shadows\") {\r\n          result.push((this._valueUpdaters[k] = this._updateShadows));\r\n        } else {\r\n          result.push((this._valueUpdaters[k] = this._updateNumberValue));\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _updateValues(value) {\r\n    const delta = value - this._previousValue;\r\n    this._previousValue = value;\r\n    for (var k in this._stateB) {\r\n      var v = this._stateB[k];\r\n      this._valueUpdaters[k](k, value, delta);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _updateNumberValue(key, value) {\r\n    return (this._target[key] = Utils.mapRange(\r\n      value,\r\n      0,\r\n      1,\r\n      this._stateA[key],\r\n      this._stateB[key]\r\n    ));\r\n  }\r\n\r\n  _interpolateNumericObjectValues(propKeys, valueA, valueB, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    let result = {};\r\n\r\n    for (var propKey of Array.from(propKeys)) {\r\n      var keyValueA = _.isNumber(valueA)\r\n        ? valueA\r\n        : valueA != null\r\n        ? valueA[propKey]\r\n        : undefined;\r\n      var keyValueB = _.isNumber(valueB)\r\n        ? valueB\r\n        : valueB != null\r\n        ? valueB[propKey]\r\n        : undefined;\r\n      // If the key value is undefined in one state, use the value from the other\r\n      if (keyValueA == null) {\r\n        keyValueA = keyValueB;\r\n      }\r\n      if (keyValueB == null) {\r\n        keyValueB = keyValueA;\r\n      }\r\n      result[propKey] = Utils.mapRange(value, 0, 1, keyValueA, keyValueB);\r\n    }\r\n\r\n    // Flatten to a single number if all properties have the same value\r\n    if (flatten && _.uniq(_.values(result)).length === 1) {\r\n      result = result[propKeys[0]];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  _calculateNumericObjectValue(propKeys, key, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    const valueA = this._stateA[key];\r\n    const valueB = this._stateB[key];\r\n\r\n    return this._interpolateNumericObjectValues(\r\n      propKeys,\r\n      valueA,\r\n      valueB,\r\n      value,\r\n      flatten\r\n    );\r\n  }\r\n\r\n  _updateNumericObjectValue(propKeys, key, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    const result = this._calculateNumericObjectValue(\r\n      propKeys,\r\n      key,\r\n      value,\r\n      flatten\r\n    );\r\n    return (this._target[key] = result);\r\n  }\r\n\r\n  _updateColorValue(key, value) {\r\n    return (this._target[key] = Color.mix(\r\n      this._stateA[key],\r\n      this._stateB[key],\r\n      value,\r\n      false,\r\n      this.options.colorModel\r\n    ));\r\n  }\r\n\r\n  _updateGradientValue(key, value) {\r\n    if (!this._stateB[key] && value === 1) {\r\n      this._target[key] = this._stateB[key];\r\n      return;\r\n    }\r\n\r\n    const gradientA = Gradient._asPlainObject(this._stateA[key]);\r\n    // If the end state is not set, animate to the same state but with alpha 0\r\n    const gradientB = Gradient._asPlainObject(\r\n      this._stateB[key] != null\r\n        ? this._stateB[key]\r\n        : Gradient.multiplyAlpha(gradientA, 0)\r\n    );\r\n\r\n    return (this._target[key] = Gradient.mix(\r\n      _.defaults(gradientA, gradientB),\r\n      _.defaults(gradientB, gradientA),\r\n      value,\r\n      this.options.colorModel\r\n    ));\r\n  }\r\n\r\n  _updateShadows(key, value) {\r\n    if (value === 1) {\r\n      this._target[key] = this._stateB[key];\r\n      return;\r\n    }\r\n\r\n    const result = [];\r\n    const numShadows = Math.max(\r\n      (this._stateA[key] != null ? this._stateA[key].length : undefined) != null\r\n        ? this._stateA[key] != null\r\n          ? this._stateA[key].length\r\n          : undefined\r\n        : 0,\r\n      (this._stateB[key] != null ? this._stateB[key].length : undefined) != null\r\n        ? this._stateB[key] != null\r\n          ? this._stateB[key].length\r\n          : undefined\r\n        : 0\r\n    );\r\n    for (\r\n      let index = 0, end = numShadows, asc = 0 <= end;\r\n      asc ? index < end : index > end;\r\n      asc ? index++ : index--\r\n    ) {\r\n      var left;\r\n      var fromShadow =\r\n        this._stateA[key] != null ? this._stateA[key][index] : undefined;\r\n      var toShadow =\r\n        this._stateB[key] != null ? this._stateB[key][index] : undefined;\r\n      if (toShadow == null && fromShadow == null) {\r\n        continue;\r\n      }\r\n      var type =\r\n        (left =\r\n          (toShadow != null ? toShadow.type : undefined) != null\r\n            ? toShadow != null\r\n              ? toShadow.type\r\n              : undefined\r\n            : fromShadow != null\r\n            ? fromShadow.type\r\n            : undefined) != null\r\n          ? left\r\n          : Framer.Defaults.Shadow.type;\r\n      if (fromShadow == null) {\r\n        fromShadow = _.defaults({ color: null, type }, Framer.Defaults.Shadow);\r\n      }\r\n      if (toShadow == null) {\r\n        toShadow = _.defaults({ color: null, type }, Framer.Defaults.Shadow);\r\n      }\r\n      _.defaults(fromShadow, Framer.Defaults.Shadow);\r\n      _.defaults(toShadow, Framer.Defaults.Shadow);\r\n      result[index] = this._interpolateNumericObjectValues(\r\n        [\"x\", \"y\", \"blur\", \"spread\"],\r\n        fromShadow,\r\n        toShadow,\r\n        value,\r\n        false\r\n      );\r\n      result[index].color = Color.mix(\r\n        fromShadow.color,\r\n        toShadow.color,\r\n        value,\r\n        false,\r\n        this.options.colorModel\r\n      );\r\n      result[index].type = type;\r\n    }\r\n    return (this._target[key] = result);\r\n  }\r\n\r\n  // shallow mix all end state `{key: value}`s if `value` is a number, otherwise just takes `value`\r\n  _updateTemplateValue(key, value) {\r\n    let k, valueA, valueB;\r\n    const fromData = this._stateA[key];\r\n    const toData = this._stateB[key];\r\n    const targetData = {};\r\n\r\n    if (!_.isObject(toData)) {\r\n      k =\r\n        this._target._styledText != null\r\n          ? this._target._styledText.buildTemplate()\r\n          : undefined;\r\n      if (!k) {\r\n        return;\r\n      }\r\n      valueB = toData;\r\n      if (_.isNumber(valueB)) {\r\n        valueA = _.isObject(fromData) ? fromData[k] : fromData;\r\n        if (!_.isNumber(valueA)) {\r\n          valueA = 0;\r\n        }\r\n        valueB = Utils.mapRange(value, 0, 1, valueA, valueB);\r\n      }\r\n      targetData[k] = valueB;\r\n      this._target.template = targetData;\r\n      return;\r\n    }\r\n\r\n    for (k in toData) {\r\n      valueB = toData[k];\r\n      if (_.isNumber(valueB)) {\r\n        valueA = _.isObject(fromData) ? fromData[k] : fromData;\r\n        if (!_.isNumber(valueA)) {\r\n          valueA = 0;\r\n        }\r\n        valueB = Utils.mapRange(value, 0, 1, valueA, valueB);\r\n      }\r\n      targetData[k] = valueB;\r\n    }\r\n    return (this._target.template = targetData);\r\n  }\r\n\r\n  _currentState() {\r\n    return _.pick(this.layer, _.keys(this.properties));\r\n  }\r\n\r\n  static isAnimatable(v) {\r\n    return (\r\n      _.isNumber(v) ||\r\n      _.isFunction(v) ||\r\n      isRelativeProperty(v) ||\r\n      Color.isColorObject(v) ||\r\n      Gradient.isGradientObject(v) ||\r\n      SVG.isPath(v)\r\n    );\r\n  }\r\n\r\n  // Special cases that animate with different types of objects\r\n  static isAnimatableKey(k) {\r\n    return [\r\n      \"gradient\",\r\n      \"borderWidth\",\r\n      \"borderRadius\",\r\n      \"template\",\r\n      \"shadows\",\r\n    ].includes(k);\r\n  }\r\n\r\n  static filterAnimatableProperties(properties, layer) {\r\n    // Function to filter only animatable properties out of a given set\r\n    const animatableProperties = {};\r\n\r\n    // Only animate numeric properties for now\r\n    for (var k in properties) {\r\n      var matches;\r\n      var v = properties[k];\r\n      if ([\"frame\", \"size\", \"point\", \"midPoint\", \"path\"].includes(k)) {\r\n        // Derived properties\r\n        var derivedKey, derivedKeys;\r\n        switch (k) {\r\n          case \"frame\":\r\n            derivedKeys = [\"x\", \"y\", \"width\", \"height\"];\r\n            break;\r\n          case \"size\":\r\n            derivedKeys = [\"width\", \"height\"];\r\n            break;\r\n          case \"point\":\r\n            derivedKeys = [\"x\", \"y\"];\r\n            break;\r\n          case \"midPoint\":\r\n            derivedKeys = [\"midX\", \"midY\"];\r\n            break;\r\n          case \"path\":\r\n            derivedKeys = [\"x\", \"y\", \"rotation\"];\r\n            break;\r\n          default:\r\n            derivedKeys = [];\r\n        }\r\n        if (SVG.isPath(v)) {\r\n          if (k === \"path\") {\r\n            layer.midPoint = v.start;\r\n          }\r\n          for (derivedKey of Array.from(derivedKeys)) {\r\n            animatableProperties[derivedKey] = v;\r\n          }\r\n        } else if (_.isObject(v)) {\r\n          _.defaults(animatableProperties, _.pick(v, derivedKeys));\r\n        } else if (_.isNumber(v)) {\r\n          for (derivedKey of Array.from(derivedKeys)) {\r\n            animatableProperties[derivedKey] = v;\r\n          }\r\n        }\r\n      } else if (this.isAnimatable(v)) {\r\n        animatableProperties[k] = v;\r\n      } else if (Color.isValidColorProperty(k, v)) {\r\n        animatableProperties[k] = new Color(v);\r\n      } else if (this.isAnimatableKey(k)) {\r\n        animatableProperties[k] = v;\r\n      } else if ((matches = k.match(/^shadow([1-9])$/))) {\r\n        if (animatableProperties.shadows == null) {\r\n          var left;\r\n          animatableProperties.shadows =\r\n            (left = _.clone(layer.shadows)) != null ? left : [];\r\n        }\r\n        var shadowIndex = parseInt(matches[1]) - 1;\r\n        if (animatableProperties.shadows[shadowIndex] != null) {\r\n          _.defaults(v, animatableProperties.shadows[shadowIndex]);\r\n        }\r\n        animatableProperties.shadows[shadowIndex] = v;\r\n      }\r\n    }\r\n    return animatableProperties;\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id} layer:${\r\n      this.layer != null ? this.layer.toName() : undefined\r\n    } [${_.keys(this.properties).join(\", \")}] isAnimating:${this.isAnimating}>`;\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationHalt(cb) {\r\n    return this.on(Events.AnimationHalt, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n  onAnimationDidStart(cb) {\r\n    return this.on(Events.AnimationDidStart, cb);\r\n  }\r\n  onAnimationDidStop(cb) {\r\n    return this.on(Events.AnimationDidStop, cb);\r\n  }\r\n  onAnimationDidEnd(cb) {\r\n    return this.on(Events.AnimationDidEnd, cb);\r\n  }\r\n}\r\nAnimation.initClass();\r\n","const filterFormat = function (name, value, unit, pixelMultiplier) {\r\n  if (unit === \"px\") {\r\n    value *= pixelMultiplier;\r\n  }\r\n  return `${name}(${Utils.round(value, 2)}${unit})`;\r\n};\r\n// \"#{value}#{unit}\"\r\n\r\nconst roundToZero = function (num) {\r\n  if (-1e-6 < num && num < 1e-6) {\r\n    return 0;\r\n  }\r\n  return num;\r\n};\r\n\r\n// TODO: Ideally these should be read out from the layer defined properties\r\nconst _WebkitProperties = [\r\n  [\"blur\", \"blur\", 0, \"px\"],\r\n  [\"brightness\", \"brightness\", 100, \"%\"],\r\n  [\"saturate\", \"saturate\", 100, \"%\"],\r\n  [\"hue-rotate\", \"hueRotate\", 0, \"deg\"],\r\n  [\"contrast\", \"contrast\", 100, \"%\"],\r\n  [\"invert\", \"invert\", 0, \"%\"],\r\n  [\"grayscale\", \"grayscale\", 0, \"%\"],\r\n  [\"sepia\", \"sepia\", 0, \"%\"],\r\n];\r\n\r\nconst _BackdropProperties = [\r\n  [\"blur\", \"backgroundBlur\", 0, \"px\"],\r\n  [\"brightness\", \"backgroundBrightness\", 100, \"%\"],\r\n  [\"saturate\", \"backgroundSaturate\", 100, \"%\"],\r\n  [\"hue-rotate\", \"backgroundHueRotate\", 0, \"deg\"],\r\n  [\"contrast\", \"backgroundContrast\", 100, \"%\"],\r\n  [\"invert\", \"backgroundInvert\", 0, \"%\"],\r\n  [\"grayscale\", \"backgroundGrayscale\", 0, \"%\"],\r\n  [\"sepia\", \"backgroundSepia\", 0, \"%\"],\r\n];\r\n\r\nconst _Force2DProperties = {\r\n  z: 0,\r\n  scaleZ: 1,\r\n  skewX: 0,\r\n  skewY: 0,\r\n  rotationX: 0,\r\n  rotationY: 0,\r\n};\r\n\r\nconst getShadowStrings = function (layer, types, createString) {\r\n  if (!_.isArray(types)) {\r\n    types = [types];\r\n  }\r\n  const result = [];\r\n  if (layer.shadows != null) {\r\n    for (var shadow of Array.from(layer.shadows)) {\r\n      if (shadow === null) {\r\n        continue;\r\n      }\r\n      shadow = _.defaults(_.clone(shadow), Framer.Defaults.Shadow);\r\n      if (shadow.type === \"inner\") {\r\n        shadow.type = \"inset\";\r\n      } else if (shadow.type === \"outer\") {\r\n        if (layer.image != null && layer.image !== \"\") {\r\n          shadow.type = \"drop\";\r\n        } else {\r\n          shadow.type = \"box\";\r\n        }\r\n      }\r\n      if (\r\n        !Array.from(types).includes(shadow.type) ||\r\n        (shadow.x === 0 &&\r\n          shadow.y === 0 &&\r\n          shadow.blur === 0 &&\r\n          shadow.spread === 0)\r\n      ) {\r\n        continue;\r\n      }\r\n      if (shadow.color === null) {\r\n        shadow.color = new Color(null);\r\n      }\r\n      var dpr =\r\n        layer._pixelMultiplierOverride != null\r\n          ? layer._pixelMultiplierOverride\r\n          : layer.context.pixelMultiplier;\r\n      var shadowString = createString(shadow, dpr);\r\n      result.push(shadowString);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const LayerStyle = {\r\n  width(layer) {\r\n    layer._updateHTMLScale();\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return layer._properties.width * dpr + \"px\";\r\n  },\r\n\r\n  height(layer) {\r\n    layer._updateHTMLScale();\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return layer._properties.height * dpr + \"px\";\r\n  },\r\n\r\n  display(layer) {\r\n    if (layer._properties.visible === true) {\r\n      return \"block\";\r\n    }\r\n    return \"none\";\r\n  },\r\n\r\n  opacity(layer) {\r\n    return layer._properties.opacity;\r\n  },\r\n\r\n  webkitTransformStyle(layer) {\r\n    if (layer._properties.flat) {\r\n      return \"flat\";\r\n    } else {\r\n      return \"preserve-3d\";\r\n    }\r\n  },\r\n\r\n  webkitBackfaceVisibility(layer) {\r\n    if (layer._properties.backfaceVisible) {\r\n      return \"visible\";\r\n    } else {\r\n      return \"hidden\";\r\n    }\r\n  },\r\n\r\n  overflow(layer) {\r\n    if (\r\n      layer._properties.scrollHorizontal === true ||\r\n      layer._properties.scrollVertical === true\r\n    ) {\r\n      return \"auto\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  overflowX(layer) {\r\n    if (layer._properties.scrollHorizontal === true) {\r\n      return \"scroll\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  overflowY(layer) {\r\n    if (layer._properties.scrollVertical === true) {\r\n      return \"scroll\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  zIndex(layer) {\r\n    return layer._properties.index;\r\n  },\r\n\r\n  webkitFilter(layer) {\r\n    // This is mostly an optimization for Chrome. If you pass in the Webkit filters\r\n    // with the defaults, it still takes a shitty rendering path. So I compare them\r\n    // first and only add the ones that have a non default value.\r\n\r\n    let css = [];\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    for (var [cssName, layerPropertyName, fallback, unit] of Array.from(\r\n      _WebkitProperties\r\n    )) {\r\n      if (\r\n        layer._properties.hasOwnProperty(layerPropertyName) &&\r\n        layer[layerPropertyName] !== fallback\r\n      ) {\r\n        var filter = filterFormat(cssName, layer[layerPropertyName], unit, dpr);\r\n        css.push(filter);\r\n      }\r\n    }\r\n\r\n    // filter shadow\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      \"drop\",\r\n      (shadow, pixelMultiplier) =>\r\n        `drop-shadow(${shadow.x * pixelMultiplier}px ${\r\n          shadow.y * pixelMultiplier\r\n        }px ${shadow.blur * pixelMultiplier}px ${shadow.color})`\r\n    );\r\n\r\n    css = css.concat(shadowStrings);\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitBackdropFilter(layer) {\r\n    const css = [];\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    for (var [cssName, layerPropertyName, fallback, unit] of Array.from(\r\n      _BackdropProperties\r\n    )) {\r\n      if (\r\n        layer._properties.hasOwnProperty(layerPropertyName) &&\r\n        layer[layerPropertyName] !== fallback\r\n      ) {\r\n        var filter = filterFormat(cssName, layer[layerPropertyName], unit, dpr);\r\n        css.push(filter);\r\n      }\r\n    }\r\n\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitTransform(layer) {\r\n    // We have a special rendering path for layers that prefer 2d rendering.\r\n    // This definitely decreases performance, but is handy in complex drawing\r\n    // scenarios with rounded corners and shadows where gpu drawing gets weird\r\n    // results.\r\n\r\n    if (layer._prefer2d || layer._properties.force2d) {\r\n      return exports.LayerStyle.webkitTransformForce2d(layer);\r\n    }\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return `\\\r\ntranslate3d( \\\r\n${roundToZero(layer._properties.x * dpr)}px, \\\r\n${roundToZero(layer._properties.y * dpr)}px, \\\r\n${roundToZero(layer._properties.z * dpr)}px) \\\r\nscale3d( \\\r\n${roundToZero(layer._properties.scaleX * layer._properties.scale)}, \\\r\n${roundToZero(layer._properties.scaleY * layer._properties.scale)}, \\\r\n${roundToZero(layer._properties.scaleZ)}) \\\r\nskew(${roundToZero(layer._properties.skew)}deg,${roundToZero(\r\n      layer._properties.skew\r\n    )}deg) \\\r\nskewX(${roundToZero(layer._properties.skewX)}deg) \\\r\nskewY(${roundToZero(layer._properties.skewY)}deg) \\\r\ntranslateZ(${roundToZero(layer._properties.originZ * dpr)}px) \\\r\nrotateX(${roundToZero(layer._properties.rotationX)}deg) \\\r\nrotateY(${roundToZero(layer._properties.rotationY)}deg) \\\r\nrotateZ(${roundToZero(layer._properties.rotationZ)}deg) \\\r\ntranslateZ(${roundToZero(-layer._properties.originZ * dpr)}px)\\\r\n`;\r\n  },\r\n\r\n  webkitTransformForce2d(layer) {\r\n    // This detects if we use 3d properties, if we don't it only uses\r\n    // 2d properties to disable gpu rendering.\r\n\r\n    const css = [];\r\n\r\n    for (var p in _Force2DProperties) {\r\n      var v = _Force2DProperties[p];\r\n      if (layer._properties[p] !== v) {\r\n        console.warn(\r\n          `Layer property '${p}'' will be ignored with force2d enabled`\r\n        );\r\n      }\r\n    }\r\n\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    css.push(\r\n      `translate(${roundToZero(layer._properties.x * dpr)}px,${roundToZero(\r\n        layer._properties.y * dpr\r\n      )}px)`\r\n    );\r\n    css.push(\r\n      `scale(${roundToZero(\r\n        layer._properties.scaleX * layer._properties.scale\r\n      )},\t${roundToZero(layer._properties.scaleY * layer._properties.scale)})`\r\n    );\r\n    css.push(\r\n      `skew(${roundToZero(layer._properties.skew)}deg,${roundToZero(\r\n        layer._properties.skew\r\n      )}deg)`\r\n    );\r\n    css.push(`rotate(${roundToZero(layer._properties.rotationZ)}deg)`);\r\n\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitTransformOrigin(layer) {\r\n    return `${layer._properties.originX * 100}% ${\r\n      layer._properties.originY * 100\r\n    }%`;\r\n  },\r\n\r\n  webkitPerspective(layer) {\r\n    let left;\r\n    const value =\r\n      (left = Utils.webkitPerspectiveForValue(layer._properties.perspective)) !=\r\n      null\r\n        ? left\r\n        : \"\";\r\n    if (_.isNumber(value)) {\r\n      const dpr =\r\n        layer._pixelMultiplierOverride != null\r\n          ? layer._pixelMultiplierOverride\r\n          : layer.context.pixelMultiplier;\r\n      return `${value * dpr}`;\r\n    } else {\r\n      return value;\r\n    }\r\n  },\r\n\r\n  webkitPerspectiveOrigin(layer) {\r\n    return `${layer._properties.perspectiveOriginX * 100}% ${\r\n      layer._properties.perspectiveOriginY * 100\r\n    }%`;\r\n  },\r\n\r\n  mixBlendMode(layer) {\r\n    let needle;\r\n    if (\r\n      ((needle = layer._properties.blending),\r\n      Array.from(_.values(Blending)).includes(needle))\r\n    ) {\r\n      return layer._properties.blending;\r\n    } else {\r\n      return \"\";\r\n    }\r\n  },\r\n\r\n  pointerEvents(layer) {\r\n    if (layer._properties.ignoreEvents) {\r\n      return \"none\";\r\n    } else {\r\n      return \"auto\";\r\n    }\r\n  },\r\n\r\n  boxShadow(layer) {\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      [\"box\", \"inset\"],\r\n      function (shadow, pixelMultiplier) {\r\n        const insetString = shadow.type === \"inset\" ? \"inset \" : \"\";\r\n        return `${insetString}${shadow.x * pixelMultiplier}px ${\r\n          shadow.y * pixelMultiplier\r\n        }px ${shadow.blur * pixelMultiplier}px ${\r\n          shadow.spread * pixelMultiplier\r\n        }px ${shadow.color}`;\r\n      }\r\n    );\r\n\r\n    return shadowStrings.join(\", \");\r\n  },\r\n\r\n  textShadow(layer) {\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      \"text\",\r\n      (shadow, pixelMultiplier) =>\r\n        `${shadow.x * pixelMultiplier}px ${shadow.y * pixelMultiplier}px ${\r\n          shadow.blur * pixelMultiplier\r\n        }px ${shadow.color}`\r\n    );\r\n    return shadowStrings.join(\", \");\r\n  },\r\n\r\n  backgroundColor(layer) {\r\n    return layer._properties.backgroundColor;\r\n  },\r\n\r\n  backgroundSize(layer) {\r\n    switch (layer._properties.backgroundSize) {\r\n      case \"fill\":\r\n        return \"cover\";\r\n        break;\r\n      case \"fit\":\r\n        return \"contain\";\r\n        break;\r\n      case \"stretch\":\r\n        return \"100% 100%\";\r\n        break;\r\n    }\r\n    return layer._properties.backgroundSize;\r\n  },\r\n\r\n  fill(layer) {\r\n    return layer._properties.fill;\r\n  },\r\n\r\n  strokeWidth(layer) {\r\n    const factor =\r\n      layer.strokeWidthMultiplier != null ? layer.strokeWidthMultiplier : 1;\r\n    return layer._properties.strokeWidth * factor;\r\n  },\r\n\r\n  strokeDasharray(layer) {\r\n    return layer._properties.strokeDasharray.join(\",\");\r\n  },\r\n\r\n  color(layer) {\r\n    return layer._properties.color;\r\n  },\r\n\r\n  borderRadius(layer) {\r\n    const radius = layer._properties.borderRadius;\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n\r\n    if (_.isNumber(radius)) {\r\n      return radius * dpr + \"px\";\r\n    }\r\n\r\n    if (_.isObject(layer._properties.borderRadius)) {\r\n      return (\r\n        (radius.topLeft != null ? radius.topLeft : 0) * dpr +\r\n        \"px \" +\r\n        (radius.topRight != null ? radius.topRight : 0) * dpr +\r\n        \"px \" +\r\n        (radius.bottomRight != null ? radius.bottomRight : 0) * dpr +\r\n        \"px \" +\r\n        (radius.bottomLeft != null ? radius.bottomLeft : 0) * dpr +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    // Custom values like strings are still allowed for compatibility reasons\r\n    return layer._properties.borderRadius;\r\n  },\r\n\r\n  borderWidth(layer) {\r\n    let left;\r\n    const { borderWidth } = layer._properties;\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n\r\n    if (_.isNumber(borderWidth)) {\r\n      let left1;\r\n      const borderTopBottom =\r\n        ((left = Math.min(borderWidth, layer.height / 2)) != null ? left : 0) *\r\n        dpr;\r\n      const borderRightLeft =\r\n        ((left1 = Math.min(borderWidth, layer.width / 2)) != null ? left1 : 0) *\r\n        dpr;\r\n      return (\r\n        borderTopBottom +\r\n        \"px \" +\r\n        borderRightLeft +\r\n        \"px \" +\r\n        borderTopBottom +\r\n        \"px \" +\r\n        borderRightLeft +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    if (_.isObject(borderWidth)) {\r\n      let borderTop = borderWidth.top != null ? borderWidth.top : 0;\r\n      let borderBottom = borderWidth.bottom != null ? borderWidth.bottom : 0;\r\n      let borderLeft = borderWidth.left != null ? borderWidth.left : 0;\r\n      let borderRight = borderWidth.right != null ? borderWidth.right : 0;\r\n\r\n      if (borderTop + borderBottom > layer.height) {\r\n        const topRatio = borderTop / (borderTop + borderBottom);\r\n        borderTop = Math.round(topRatio * layer.height);\r\n        borderBottom = layer.height - borderTop;\r\n      }\r\n\r\n      if (borderLeft + borderRight > layer.width) {\r\n        const leftRatio = borderLeft / (borderLeft + borderRight);\r\n        borderLeft = Math.round(leftRatio * layer.width);\r\n        borderRight = layer.width - borderLeft;\r\n      }\r\n\r\n      return (\r\n        borderTop * dpr +\r\n        \"px \" +\r\n        borderRight * dpr +\r\n        \"px \" +\r\n        borderBottom * dpr +\r\n        \"px \" +\r\n        borderLeft * dpr +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    return borderWidth;\r\n  },\r\n\r\n  fontSize(layer) {\r\n    return layer._properties.fontSize + \"px\";\r\n  },\r\n\r\n  letterSpacing(layer) {\r\n    return layer._properties.letterSpacing + \"px\";\r\n  },\r\n\r\n  wordSpacing(layer) {\r\n    return layer._properties.wordSpacing + \"px\";\r\n  },\r\n\r\n  textIndent(layer) {\r\n    return layer._properties.textIndent + \"px\";\r\n  },\r\n\r\n  textAlign(layer) {\r\n    const value = layer._properties.textAlign;\r\n    if (value === Align.left) {\r\n      return \"left\";\r\n    }\r\n    if (value === Align.center) {\r\n      return \"center\";\r\n    }\r\n    if (value === Align.right) {\r\n      return \"right\";\r\n    } else {\r\n      return value;\r\n    }\r\n  },\r\n\r\n  direction(layer) {\r\n    const value = layer._properties.direction;\r\n    switch (value) {\r\n      case \"right-to-left\":\r\n        return \"rtl\";\r\n      case \"left-to-right\":\r\n        return \"ltr\";\r\n      default:\r\n        return value;\r\n    }\r\n  },\r\n\r\n  padding(layer) {\r\n    const padding = Utils.rectZero(Utils.parseRect(layer.padding));\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return `${padding.top * dpr}px ${padding.right * dpr}px ${\r\n      padding.bottom * dpr\r\n    }px ${padding.left * dpr}px`;\r\n  },\r\n};\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport _ from \"./Underscore.js\"; // keep underscore if your Utils still depends on it\r\nimport { Events } from \"./Events.js\"; // assuming Events is imported from somewhere\r\nimport { Utils } from \"./Utils.js\"; // assuming Utils is available\r\n\r\nexport class LayerStateMachine extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"layer\", {\r\n      get() {\r\n        return this._layer;\r\n      },\r\n    });\r\n\r\n    this.define(\"current\", {\r\n      get() {\r\n        return this.currentName;\r\n      },\r\n    });\r\n\r\n    this.define(\"previous\", {\r\n      get() {\r\n        return this.previousName;\r\n      },\r\n    });\r\n\r\n    this.define(\"currentName\", {\r\n      get() {\r\n        return this._currentName;\r\n      },\r\n    });\r\n\r\n    this.define(\"previousName\", {\r\n      get() {\r\n        return _.last(this._previousNames) || \"default\";\r\n      },\r\n    });\r\n\r\n    this.define(\"stateNames\", {\r\n      get() {\r\n        return Object.keys(this.states);\r\n      },\r\n    });\r\n\r\n    this.define(\"states\", {\r\n      get() {\r\n        return this._states;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layer, states) {\r\n    super();\r\n    this._layer = layer;\r\n    this._states = states;\r\n    this.reset();\r\n  }\r\n\r\n  switchInstant(stateName) {\r\n    return this.switchTo(stateName, { instant: true });\r\n  }\r\n\r\n  switchTo(stateName, options = {}) {\r\n    if (!this.states[stateName]) {\r\n      throw new Error(`No such state: '${stateName}'`);\r\n    }\r\n\r\n    if (stateName === \"previous\") {\r\n      stateName = this.previousName;\r\n    }\r\n\r\n    // Clone and merge animation properties\r\n    const properties = { ...this.states[stateName] };\r\n    let opts = { ...options };\r\n\r\n    if (properties.animationOptions) {\r\n      opts = { ...properties.animationOptions, ...opts };\r\n      delete properties.animationOptions;\r\n    }\r\n\r\n    const stateNameA = this.currentName;\r\n    const stateNameB = stateName;\r\n\r\n    const startAnimation = opts.start ?? true;\r\n    opts.start = false;\r\n\r\n    const animation = this.layer.animate(properties, opts);\r\n\r\n    let stateSwitched = false;\r\n    const switchState = () => {\r\n      if (stateSwitched) return;\r\n      stateSwitched = true;\r\n      this._previousNames.push(stateNameA);\r\n      this._currentName = stateNameB;\r\n    };\r\n\r\n    const onStart = () => {\r\n      this.emit(Events.StateSwitchStart, stateNameA, stateNameB, this);\r\n      switchState();\r\n    };\r\n\r\n    const onStop = () => {\r\n      this.emit(Events.StateSwitchStop, stateNameA, stateNameB, this);\r\n    };\r\n\r\n    const onEnd = () => {\r\n      const instantProps = _.difference(\r\n        Object.keys(properties),\r\n        Object.keys(animation.properties)\r\n      );\r\n\r\n      for (const k of instantProps) {\r\n        this.layer[k] = properties[k];\r\n      }\r\n\r\n      this.emit(Events.StateSwitchEnd, stateNameA, stateNameB, this);\r\n    };\r\n\r\n    animation.on(Events.AnimationStart, onStart);\r\n    animation.on(Events.AnimationStop, onStop);\r\n    animation.on(Events.AnimationEnd, onEnd);\r\n\r\n    if (startAnimation) {\r\n      const started = animation.start();\r\n      if (!started) {\r\n        onStart();\r\n        onStop();\r\n        onEnd();\r\n      }\r\n    }\r\n\r\n    switchState();\r\n    return animation;\r\n  }\r\n\r\n  next(states = this.stateNames) {\r\n    return Utils.arrayNext(states, this.currentName);\r\n  }\r\n\r\n  emit(...args) {\r\n    super.emit(...args);\r\n    return this._layer.emit(...args);\r\n  }\r\n\r\n  reset() {\r\n    for (const key of Object.keys(this.states)) {\r\n      if (key !== \"default\") delete this.states[key];\r\n    }\r\n\r\n    this._previousNames = [];\r\n    this._currentName = \"default\";\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id} layer:${this.layer.id} current:'${this.currentName}'>`;\r\n  }\r\n}\r\nLayerStateMachine.initClass();\r\n","import { _ } from \"./Underscore\";\r\nimport { LayerStateMachine } from \"./LayerStateMachine\";\r\nconst LayerStatesIgnoredKeys = [\"ignoreEvents\", \"name\", \"id\"];\r\n\r\nconst reservedStateError = function (name) {\r\n  throw Error(`The state '${name}' is a reserved name.`);\r\n};\r\n\r\nconst deprecatedWarning = function (name, suggestion) {\r\n  let message = `layer.states.${name} is deprecated`;\r\n  if (suggestion != null) {\r\n    message += `, use '${suggestion}' instead.`;\r\n  }\r\n  return console.warn(message);\r\n};\r\n\r\nconst namedState = (state, name) => _.extend({}, { name }, state);\r\n\r\nexport const LayerStates = (function () {\r\n  let capture = undefined;\r\n  let methods = undefined;\r\n  LayerStates = class LayerStates {\r\n    static initClass() {\r\n      this.defineReserved(\"previous\", {\r\n        get() {\r\n          return namedState(\r\n            this[this.machine.previousName],\r\n            this.machine.previousName\r\n          );\r\n        },\r\n      });\r\n      this.defineReserved(\"current\", {\r\n        get() {\r\n          return namedState(\r\n            this[this.machine.currentName],\r\n            this.machine.currentName\r\n          );\r\n        },\r\n      });\r\n\r\n      capture = function (name) {\r\n        return (this[name] = LayerStates.filterStateProperties(\r\n          this.machine.layer.props\r\n        ));\r\n      };\r\n\r\n      this.defineReserved(\"capture\", {\r\n        get() {\r\n          return capture;\r\n        },\r\n      });\r\n\r\n      //################################################################\r\n      // Backwards compatibility\r\n\r\n      methods = {\r\n        add(states, object) {\r\n          if (object == null) {\r\n            object = {};\r\n          }\r\n          deprecatedWarning(\"add\", \"layer.states = \");\r\n          if (_.isString(states)) {\r\n            return (this[states] = object);\r\n          } else {\r\n            return (this.machine.layer.states = states);\r\n          }\r\n        },\r\n\r\n        remove(stateName) {\r\n          deprecatedWarning(\"remove\", \"delete layer.states.a\");\r\n          return delete this[stateName];\r\n        },\r\n\r\n        switch(stateName, options) {\r\n          deprecatedWarning(\"switch\", 'layer.animate(\"state\")');\r\n          return this.machine.switchTo(stateName, options);\r\n        },\r\n\r\n        switchInstant(stateName) {\r\n          deprecatedWarning(\r\n            \"switchInstant\",\r\n            'layer.animate(\"state\", {instant: true})'\r\n          );\r\n          return this.machine.switchTo(stateName, { instant: true });\r\n        },\r\n\r\n        next(...options) {\r\n          deprecatedWarning(\"next\", \"layer.stateCycle()\");\r\n          options = _.flatten(options);\r\n          return this.machine.layer.stateCycle(options);\r\n        },\r\n      };\r\n\r\n      this.defineReserved(\"add\", {\r\n        get() {\r\n          return methods.add;\r\n        },\r\n      });\r\n      this.defineReserved(\"remove\", {\r\n        get() {\r\n          return methods.remove;\r\n        },\r\n      });\r\n      this.defineReserved(\"switch\", {\r\n        get() {\r\n          return methods.switch;\r\n        },\r\n      });\r\n      this.defineReserved(\"switchInstant\", {\r\n        get() {\r\n          return methods.switchInstant;\r\n        },\r\n      });\r\n      this.defineReserved(\"next\", {\r\n        get() {\r\n          return methods.next;\r\n        },\r\n      });\r\n      this.defineReserved(\"animationOptions\", {\r\n        get() {\r\n          return this.machine.layer.animationOptions;\r\n        },\r\n        set(options) {\r\n          return (this.machine.layer.animationOptions = options);\r\n        },\r\n      });\r\n    }\r\n\r\n    static defineReserved(propertyName, descriptor) {\r\n      descriptor.configurable = true;\r\n      if (descriptor.enumerable == null) {\r\n        descriptor.enumerable = false;\r\n      }\r\n      if (descriptor.set == null) {\r\n        descriptor.set = () => reservedStateError(propertyName);\r\n      }\r\n      return Object.defineProperty(this.prototype, propertyName, descriptor);\r\n    }\r\n\r\n    constructor(layer) {\r\n      const _machine = new LayerStateMachine(layer, this);\r\n\r\n      // A trick to include a reference to the state machine, without exposing\r\n      // the key on the layer states object.\r\n\r\n      Object.defineProperty(this, \"machine\", {\r\n        enumerable: false,\r\n        configurable: false,\r\n        get() {\r\n          return _machine;\r\n        },\r\n        set() {\r\n          return reservedStateError(\"machine\");\r\n        },\r\n      });\r\n\r\n      this.capture(\"default\");\r\n    }\r\n\r\n    static filterStateProperties(properties) {\r\n      const stateProperties = {};\r\n\r\n      for (var k in properties) {\r\n        var v = properties[k];\r\n        if (Array.from(LayerStatesIgnoredKeys).includes(k)) {\r\n          continue;\r\n        }\r\n\r\n        if (Color.isValidColorProperty(k, v)) {\r\n          stateProperties[k] = new Color(v);\r\n          continue;\r\n        }\r\n\r\n        if (Gradient.isGradient(v)) {\r\n          stateProperties[k] = v;\r\n          continue;\r\n        }\r\n\r\n        if (this._isValidProperty(k, v)) {\r\n          stateProperties[k] = v;\r\n        }\r\n      }\r\n\r\n      return stateProperties;\r\n    }\r\n\r\n    static _isValidProperty(k, v) {\r\n      if (_.isNumber(v)) {\r\n        return true;\r\n      }\r\n      if (_.isFunction(v)) {\r\n        return true;\r\n      }\r\n      if (_.isBoolean(v)) {\r\n        return true;\r\n      }\r\n      if (_.isString(v)) {\r\n        return true;\r\n      }\r\n      if (Color.isColorObject(v)) {\r\n        return true;\r\n      }\r\n      if (Gradient.isGradient(v)) {\r\n        return true;\r\n      }\r\n      if (v === null) {\r\n        return true;\r\n      }\r\n      if (\r\n        __guard__(v != null ? v.constructor : undefined, (x) => x.name) ===\r\n        \"Layer\"\r\n      ) {\r\n        return true;\r\n      }\r\n      if ([\"template\", \"shadows\"].includes(k)) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  };\r\n  LayerStates.initClass();\r\n  return LayerStates;\r\n})();\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\n\r\nexport class Simulator extends BaseClass {\r\n  static initClass() {\r\n    `\\\r\nThe simulator class runs a physics simulation based on a set of input values\r\nat setup({input values}), and emits an output state {x, v}\\\r\n`;\r\n\r\n    this.define(\"state\", {\r\n      get() {\r\n        return _.clone(this._state);\r\n      },\r\n      set(state) {\r\n        return (this._state = _.clone(state));\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this._state = { x: 0, v: 0 };\r\n    this.options = null;\r\n    this.setup(options);\r\n  }\r\n\r\n  setup(options) {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  next(delta) {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  finished() {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  setState(state) {\r\n    return (this._state = state);\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\n\r\nexport class Integrator {\r\n  static initClass() {\r\n    `\r\nUsage:\r\n  - Instantiate with a function that takes (state) -> acceleration\r\n  - Call integrateState with state={x, v} and delta\r\n    `;\r\n  }\r\n\r\n  constructor(accelerationForState) {\r\n    this._accelerationForState = accelerationForState;\r\n\r\n    if (!_.isFunction(this._accelerationForState)) {\r\n      console.warn(\r\n        \"Integrator: an integrator must be constructed with an acceleration function\"\r\n      );\r\n      this._accelerationForState = () => 0;\r\n    }\r\n  }\r\n\r\n  integrateState(state, dt) {\r\n    const a = this._evaluateState(state);\r\n    const b = this._evaluateStateWithDerivative(state, dt * 0.5, a);\r\n    const c = this._evaluateStateWithDerivative(state, dt * 0.5, b);\r\n    const d = this._evaluateStateWithDerivative(state, dt, c);\r\n\r\n    const dxdt = (1 / 6) * (a.dx + 2 * (b.dx + c.dx) + d.dx);\r\n    const dvdt = (1 / 6) * (a.dv + 2 * (b.dv + c.dv) + d.dv);\r\n\r\n    state.x += dxdt * dt;\r\n    state.v += dvdt * dt;\r\n\r\n    return state;\r\n  }\r\n\r\n  _evaluateState(initialState) {\r\n    return {\r\n      dx: initialState.v,\r\n      dv: this._accelerationForState(initialState),\r\n    };\r\n  }\r\n\r\n  _evaluateStateWithDerivative(initialState, dt, derivative) {\r\n    const state = {\r\n      x: initialState.x + derivative.dx * dt,\r\n      v: initialState.v + derivative.dv * dt,\r\n    };\r\n\r\n    return {\r\n      dx: state.v,\r\n      dv: this._accelerationForState(state),\r\n    };\r\n  }\r\n}\r\n\r\nIntegrator.initClass();\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\n\r\nexport class SpringSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"SpringSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n      offset: 0,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._integrator = new Integrator((state) => {\r\n      return -this.options.tension * state.x - this.options.friction * state.v;\r\n    }));\r\n  }\r\n\r\n  next(delta) {\r\n    this._state = this._integrator.integrateState(this._state, delta);\r\n\r\n    // Return a copy of the state so it cannot be modified\r\n    return this.getState();\r\n  }\r\n\r\n  finished() {\r\n    const positionNearZero = Math.abs(this._state.x) < this.options.tolerance;\r\n    const velocityNearZero = Math.abs(this._state.v) < this.options.tolerance;\r\n    return positionNearZero && velocityNearZero;\r\n  }\r\n\r\n  setState(state) {\r\n    return (this._state = {\r\n      x: state.x - this.options.offset,\r\n      v: state.v,\r\n    });\r\n  }\r\n\r\n  getState() {\r\n    let state;\r\n    return (state = {\r\n      x: this._state.x + this.options.offset,\r\n      v: this._state.v,\r\n    });\r\n  }\r\n}\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\n\r\nexport class FrictionSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"FrictionSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._integrator = new Integrator((state) => {\r\n      return -(this.options.friction * state.v);\r\n    }));\r\n  }\r\n\r\n  next(delta) {\r\n    this._state = this._integrator.integrateState(this._state, delta);\r\n\r\n    return this._state;\r\n  }\r\n\r\n  finished() {\r\n    return Math.abs(this._state.v) < this.options.tolerance;\r\n  }\r\n}\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\n\r\nimport { SpringSimulator } from \"./SpringSimulator.js\";\r\nimport { FrictionSimulator } from \"./FrictionSimulator.js\";\r\n\r\nexport class MomentumBounceSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"MomentumBounceSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n      min: 0,\r\n      max: 0,\r\n    });\r\n\r\n    this._frictionSimulator = new FrictionSimulator({\r\n      friction: this.options.momentum.friction,\r\n      tolerance: this.options.momentum.tolerance,\r\n      velocity: this.options.velocity,\r\n      position: this.options.position,\r\n    });\r\n\r\n    this._springSimulator = new SpringSimulator({\r\n      tension: this.options.bounce.tension,\r\n      friction: this.options.bounce.friction,\r\n      tolerance: this.options.bounce.tolerance,\r\n      velocity: this.options.velocity,\r\n      position: this.options.position,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._useSpring = false);\r\n  }\r\n\r\n  next(delta) {\r\n    if (this._useSpring) {\r\n      this._state = this._springSimulator.next(delta);\r\n    } else {\r\n      this._state = this._frictionSimulator.next(delta);\r\n      this._tryTransitionToSpring(this._state);\r\n    }\r\n\r\n    return this._state;\r\n  }\r\n\r\n  finished() {\r\n    if (this._useSpring) {\r\n      return this._springSimulator.finished();\r\n    }\r\n    return this._frictionSimulator.finished();\r\n  }\r\n\r\n  setState(state) {\r\n    this._state = {\r\n      x: state.x,\r\n      v: state.v,\r\n    };\r\n\r\n    this._frictionSimulator.setState(this._state);\r\n\r\n    if (this._isValidState()) {\r\n      return this._tryTransitionToSpring();\r\n    } else {\r\n      let bound;\r\n      if (this._state.x <= this.options.min) {\r\n        bound = this.options.min;\r\n      }\r\n      if (this._state.x >= this.options.max) {\r\n        bound = this.options.max;\r\n      }\r\n      return this._transitionToSpring(bound);\r\n    }\r\n  }\r\n\r\n  // If the position is outside the min and max bounds, and traveling\r\n  // further away, then transition from friction to spring simulation\r\n  _tryTransitionToSpring(force) {\r\n    const belowMinWithVelocity =\r\n      this._state.x < this.options.min && this._state.v <= 0;\r\n    const aboveMaxWithVelocity =\r\n      this._state.x > this.options.max && this._state.v >= 0;\r\n\r\n    if (belowMinWithVelocity || aboveMaxWithVelocity) {\r\n      let bound;\r\n      if (belowMinWithVelocity) {\r\n        bound = this.options.min;\r\n      }\r\n      if (aboveMaxWithVelocity) {\r\n        bound = this.options.max;\r\n      }\r\n      return this._transitionToSpring(bound);\r\n    } else {\r\n      return (this._useSpring = false);\r\n    }\r\n  }\r\n\r\n  _transitionToSpring(bound) {\r\n    this._useSpring = true;\r\n    this._springSimulator.options.offset = bound;\r\n    return this._springSimulator.setState(this._state);\r\n  }\r\n\r\n  // If the position is outside the min and max bounds, but traveling\r\n  // back towards the bounds, check if the velocity is sufficient to\r\n  // carry the position back within bounds. If it is, let friction do the\r\n  // work. If not, the state is invalid, so use the spring.\r\n  _isValidState() {\r\n    // Note that if velocity is 0, the state is still valid (should use spring,\r\n    // not friction), and we don't want to divide by 0 later in the check.\r\n    let bound;\r\n    const belowMinTravelingBack =\r\n      this._state.x < this.options.min && this._state.v > 0;\r\n    const aboveMaxTravelingBack =\r\n      this._state.x > this.options.max && this._state.v < 0;\r\n\r\n    let check = false;\r\n\r\n    if (belowMinTravelingBack) {\r\n      bound = this.options.min;\r\n      check = true;\r\n    } else if (aboveMaxTravelingBack) {\r\n      bound = this.options.max;\r\n      check = true;\r\n    }\r\n\r\n    if (check) {\r\n      const { friction } = this._frictionSimulator.options;\r\n      const solution = 1 - (friction * (bound - this._state.x)) / this._state.v;\r\n\r\n      return solution > 0;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n// The math behind _isValidState:\r\n//\r\n// 1. Integrate the friction simulator's acceleration to find velocity\r\n//\r\n//         a = - k * v\r\n//     dv/dt = - k * v\r\n// Int(dv/v) = - k * Int(dt)\r\n//      ln v = - k * t + C\r\n//\r\n// => Solve for C at t = 0\r\n//\r\n// ln v(0) = - k * 0 + C\r\n// ln v(0) = C\r\n//\r\n// => Plug C back into v(t)\r\n//\r\n//     ln v = - k * t + ln v(0)\r\n// e^(ln v) = e^(- k * t) + e^(ln v(0))\r\n//        v = v(0) * e^(- k * t)\r\n//\r\n// 2. Integrate velocity to find position\r\n//\r\n// Int(v) = v(0) * Int(e^(- k * t))\r\n//      x = - v(0) * e^(-k * t) / k + C\r\n//\r\n// => Solve for C at t = 0\r\n//\r\n//            x(0) = - v(0) * e^(-k * 0) / k + C\r\n//            x(0) = - v(0) / k + C\r\n// x(0) + v(0) / k = C\r\n//\r\n// => Plug C back into x(t)\r\n//\r\n// x = - v(0) * e^(-k * t) / k + x(0) + v(0) / k\r\n//\r\n// 3. Check if a (real) solution exists for t for position x\r\n//\r\n//                                x = - v(0) * e^(-k * t) / k + x(0) + v(0) / k\r\n//                         x - x(0) = - v(0) * e^(-k * t) / k + v(0) / k\r\n//                   k * (x - x(0)) = - v(0) * e^(-k * t) + v(0)\r\n//            k * (x - x(0)) - v(0) = - v(0) * e^(-k * t)\r\n// (k * (x - x(0)) - v(0)) / - v(0) = e^(-k * t)\r\n//       1 - (k * (x - x(0)) / v(0) = e^(-k * t)\r\n//   ln(1 - (k * (x - x(0)) / v(0)) = -k * t\r\n//\r\n// Therefore, a real solution exists if 1 - (k * (x - x(0)) / v(0) > 0\r\n","// Modern ES module imports\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\n\r\nimport { SpringSimulator } from \"./Simulators/SpringSimulator.js\";\r\nimport { FrictionSimulator } from \"./Simulators/FrictionSimulator.js\";\r\nimport { MomentumBounceSimulator } from \"./Simulators/MomentumBounceSimulator.js\";\r\n\r\n// Extend the Events object\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  SimulationStart: \"simulationStart\",\r\n  SimulationStep: \"simulationStep\",\r\n  SimulationStop: \"simulationStop\",\r\n};\r\n\r\nconst SimulatorClasses = {\r\n  spring: SpringSimulator,\r\n  friction: FrictionSimulator,\r\n  \"inertial-scroll\": MomentumBounceSimulator,\r\n};\r\n\r\nexport class Simulation extends BaseClass {\r\n  // Pass-through to simulator\r\n  static initClass() {\r\n    this.define(\"simulator\", {\r\n      get() {\r\n        return this._simulator;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.start = this.start.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this._update = this._update.bind(this);\r\n\r\n    // Modern default options\r\n    this.options = {\r\n      layer: null,\r\n      properties: {},\r\n      model: \"spring\",\r\n      modelOptions: {},\r\n      delay: 0,\r\n      debug: false,\r\n      ...options,\r\n    };\r\n\r\n    this.layer = this.options.layer;\r\n    this.properties = this.options.properties;\r\n    this._running = false;\r\n\r\n    const SimulatorClass =\r\n      SimulatorClasses[this.options.model] || SpringSimulator;\r\n    this._simulator = new SimulatorClass(this.options.modelOptions);\r\n  }\r\n\r\n  animatingProperties() {\r\n    return Object.keys(this.properties);\r\n  }\r\n\r\n  start() {\r\n    if (!this.layer) {\r\n      console.error(\"Simulation: missing layer\");\r\n      return false;\r\n    }\r\n\r\n    if (this.options.debug) {\r\n      console.log(\r\n        `Simulation.start ${this._simulator.constructor.name}`,\r\n        this.options.modelOptions\r\n      );\r\n    }\r\n\r\n    const animatingProperties = this.animatingProperties();\r\n    const layerProperties = this.layer.animatingProperties();\r\n\r\n    for (const property in layerProperties) {\r\n      if (animatingProperties.includes(property)) {\r\n        layerProperties[property].stop();\r\n      }\r\n    }\r\n\r\n    if (this.options.delay) {\r\n      Utils.delay(this.options.delay, this._start);\r\n    } else {\r\n      this._start();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  stop(emit = true) {\r\n    if (!this._running) return;\r\n\r\n    this._running = false;\r\n    this.layer.context.removeAnimation(this);\r\n\r\n    if (emit) this.emit(Events.SimulationStop);\r\n    return Framer.Loop.off(\"update\", this._update);\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    super.emit(event, ...args);\r\n    this.layer?.emit(event, this, ...args);\r\n  }\r\n\r\n  _start() {\r\n    if (this._running) return;\r\n\r\n    this._running = true;\r\n    this.layer.context.addAnimation(this);\r\n\r\n    this.emit(Events.SimulationStart);\r\n    Framer.Loop.on(\"update\", this._update);\r\n  }\r\n\r\n  _update(delta) {\r\n    if (this._simulator.finished()) {\r\n      this.stop(false);\r\n      this.emit(\"end\");\r\n      this.emit(Events.SimulationStop);\r\n    } else {\r\n      const result = this._simulator.next(delta);\r\n      this.emit(Events.SimulationStep, result, delta);\r\n    }\r\n  }\r\n\r\n  finished() {\r\n    return this._simulator.finished();\r\n  }\r\n}\r\n\r\nSimulation.initClass();\r\n","// Modern ES module imports\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\n\r\n// Extend the Events object with new event types\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  EventBufferReset: \"eventbufferreset\",\r\n  EventBufferUpdated: \"eventbufferupdated\",\r\n};\r\n\r\nexport class EventBuffer extends BaseClass {\r\n  constructor(options = {}) {\r\n    super();\r\n    this.options = _.defaults(options, { velocityTimeout: 100 });\r\n    this._events = [];\r\n  }\r\n\r\n  // Computed properties\r\n  get length() {\r\n    return this._events.length;\r\n  }\r\n\r\n  get first() {\r\n    return this._events[0];\r\n  }\r\n\r\n  get events() {\r\n    const timeout =\r\n      (Utils.getTime?.() ?? Date.now()) - this.options.velocityTimeout;\r\n    return _.filter(this._events, (event) => event.t > timeout);\r\n  }\r\n\r\n  get offset() {\r\n    const events = this.events;\r\n    if (events.length < 2) return { x: 0, y: 0 };\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    return {\r\n      x: current.x - first.x,\r\n      y: current.y - first.y,\r\n    };\r\n  }\r\n\r\n  get angle() {\r\n    const events = this.events;\r\n    if (events.length < 2) return 0;\r\n\r\n    const p1 = events[0];\r\n    const p2 = events[1];\r\n    return (Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180) / Math.PI;\r\n  }\r\n\r\n  get velocity() {\r\n    const events = this.events;\r\n    if (events.length < 2) return { x: 0, y: 0 };\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    const time = current.t - first.t;\r\n\r\n    let velocity = {\r\n      x: (current.x - first.x) / time,\r\n      y: (current.y - first.y) / time,\r\n    };\r\n\r\n    if (!isFinite(velocity.x)) velocity.x = 0;\r\n    if (!isFinite(velocity.y)) velocity.y = 0;\r\n\r\n    return velocity;\r\n  }\r\n\r\n  // Methods\r\n  push(event) {\r\n    this._events.push(event);\r\n    this.emit(Events.EventBufferUpdated, event);\r\n  }\r\n\r\n  reset() {\r\n    this._events.length = 0;\r\n    this.emit(Events.EventBufferReset);\r\n  }\r\n\r\n  // Simple emit helper (if BaseClass doesn't already have it)\r\n  emit(eventName, payload) {\r\n    if (typeof this.onEvent === \"function\") {\r\n      this.onEvent(eventName, payload);\r\n    }\r\n  }\r\n}\r\n","// utils and core imports using ES modules\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\nimport { Simulation } from \"./Simulation.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { EventBuffer } from \"./EventBuffer.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\n// Extend the Events object with new event types\r\nexport const Events = {\r\n  ...BaseEvents, // keep existing events\r\n\r\n  Move: \"move\",\r\n  DragStart: \"dragstart\",\r\n  DragWillMove: \"dragwillmove\",\r\n  DragMove: \"dragmove\",\r\n  DragDidMove: \"dragmove\",\r\n  Drag: \"dragmove\",\r\n  DragEnd: \"dragend\",\r\n  DragAnimationStart: \"draganimationstart\",\r\n  DragAnimationEnd: \"draganimationend\",\r\n  DirectionLockStart: \"directionlockstart\",\r\n\r\n  // Special cases\r\n  DragSessionStart: \"dragsessionstart\",\r\n  DragSessionMove: \"dragsessionmove\",\r\n  DragSessionEnd: \"dragsessionend\",\r\n\r\n  // Deprecated aliases\r\n  DragAnimationDidStart: \"draganimationstart\",\r\n  DragAnimationDidEnd: \"draganimationend\",\r\n  DirectionLockDidStart: \"directionlockstart\",\r\n};\r\n\r\n`\\\r\n\r\n                   \r\n      \r\n          \r\n      \r\n                   \r\n\r\n   \r\n\r\n\tDrag         Momentum      Bounce\r\n\\\r\n`;\r\n\r\nexport class LayerDraggable extends BaseClass {\r\n  static initClass() {\r\n    this._globalDidDrag = false;\r\n\r\n    this.define(\"speedX\", this.simpleProperty(\"speedX\", 1));\r\n    this.define(\"speedY\", this.simpleProperty(\"speedY\", 1));\r\n\r\n    this.define(\"horizontal\", this.simpleProperty(\"horizontal\", true));\r\n    this.define(\"vertical\", this.simpleProperty(\"vertical\", true));\r\n\r\n    this.define(\r\n      \"momentumVelocityMultiplier\",\r\n      this.simpleProperty(\"momentumVelocityMultiplier\", 800)\r\n    );\r\n    this.define(\"directionLock\", this.simpleProperty(\"directionLock\", true));\r\n    this.define(\r\n      \"directionLockThreshold\",\r\n      this.simpleProperty(\"directionLockThreshold\", { x: 10, y: 10 })\r\n    );\r\n    this.define(\r\n      \"propagateEvents\",\r\n      this.simpleProperty(\"propagateEvents\", true)\r\n    );\r\n\r\n    this.define(\"constraints\", {\r\n      get() {\r\n        return this._constraints;\r\n      },\r\n      set(value) {\r\n        if (value && _.isObject(value)) {\r\n          value = _.pick(value, [\"x\", \"y\", \"width\", \"height\"]);\r\n          value = _.defaults(value, { x: 0, y: 0, width: 0, height: 0 });\r\n          this._constraints = value;\r\n        } else {\r\n          this._constraints = { x: 0, y: 0, width: 0, height: 0 };\r\n        }\r\n        if (this._constraints) {\r\n          return this._updateSimulationConstraints(this._constraints);\r\n        }\r\n      },\r\n    });\r\n\r\n    // The isDragging only is true when there was actual movement, so you can\r\n    // use it to determine a click from a drag event.\r\n    this.define(\"isDragging\", {\r\n      get() {\r\n        return this._isDragging || false;\r\n      },\r\n    });\r\n    this.define(\"isAnimating\", {\r\n      get() {\r\n        return this._isAnimating || false;\r\n      },\r\n    });\r\n    this.define(\"isMoving\", {\r\n      get() {\r\n        return this._isMoving || false;\r\n      },\r\n    });\r\n\r\n    this.define(\"layerStartPoint\", {\r\n      get() {\r\n        return this._layerStartPoint || this.layer.point;\r\n      },\r\n    });\r\n    this.define(\"cursorStartPoint\", {\r\n      get() {\r\n        return this._cursorStartPoint || { x: 0, y: 0 };\r\n      },\r\n    });\r\n    this.define(\"layerCursorOffset\", {\r\n      get() {\r\n        return this._layerCursorOffset || { x: 0, y: 0 };\r\n      },\r\n    });\r\n\r\n    this.define(\"offset\", {\r\n      get() {\r\n        let offset;\r\n        if (!this._correctedLayerStartPoint) {\r\n          return { x: 0, y: 0 };\r\n        }\r\n        return (offset = {\r\n          x: this.layer.x - this._correctedLayerStartPoint.x,\r\n          y: this.layer.y - this._correctedLayerStartPoint.y,\r\n        });\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Constraints\r\n\r\n    this.define(\"constraintsOffset\", {\r\n      get() {\r\n        if (!this.constraints) {\r\n          return { x: 0, y: 0 };\r\n        }\r\n        const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n          this.constraints\r\n        );\r\n        const { point } = this.layer;\r\n        const constrainedPoint = {\r\n          x: Utils.clamp(point.x, minX, maxX),\r\n          y: Utils.clamp(point.y, minY, maxY),\r\n        };\r\n        const offset = {\r\n          x: point.x - constrainedPoint.x,\r\n          y: point.y - constrainedPoint.y,\r\n        };\r\n        return offset;\r\n      },\r\n    });\r\n\r\n    this.define(\"isBeyondConstraints\", {\r\n      get() {\r\n        const { constraintsOffset } = this;\r\n        if (constraintsOffset.x !== 0) {\r\n          return true;\r\n        }\r\n        if (constraintsOffset.y !== 0) {\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Velocity\r\n\r\n    this.define(\"velocity\", {\r\n      get() {\r\n        if (this.isAnimating) {\r\n          return this._calculateSimulationVelocity();\r\n        }\r\n        return this._eventBuffer.velocity;\r\n        return { x: 0, y: 0 };\r\n      },\r\n    });\r\n\r\n    // return @_eventBuffer.velocity if @isDragging\r\n    // return @_calculateSimulationVelocity() if @isAnimating\r\n    // return {x: 0, y: 0}\r\n\r\n    this.define(\"angle\", {\r\n      get() {\r\n        return this._eventBuffer.angle;\r\n      },\r\n    });\r\n\r\n    this.define(\"direction\", {\r\n      get() {\r\n        // return null if not @isDragging\r\n        const { velocity } = this;\r\n        if (velocity.x === 0 && velocity.y === 0) {\r\n          const delta =\r\n            this._lastEvent != null ? this._lastEvent.delta : undefined;\r\n          if (!delta) {\r\n            return null;\r\n          }\r\n          if (Math.abs(delta.x) > Math.abs(delta.y)) {\r\n            if (delta.x > 0) {\r\n              return \"right\";\r\n            }\r\n            return \"left\";\r\n          } else {\r\n            if (delta.y > 0) {\r\n              return \"down\";\r\n            }\r\n            return \"up\";\r\n          }\r\n        }\r\n        if (Math.abs(velocity.x) > Math.abs(velocity.y)) {\r\n          if (velocity.x > 0) {\r\n            return \"right\";\r\n          }\r\n          return \"left\";\r\n        } else {\r\n          if (velocity.y > 0) {\r\n            return \"down\";\r\n          }\r\n          return \"up\";\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layer) {\r\n    this.panStart = this.panStart.bind(this);\r\n    this.touchStart = this.touchStart.bind(this);\r\n    this.tapStart = this.tapStart.bind(this);\r\n    this._updateLayerPosition = this._updateLayerPosition.bind(this);\r\n    this._panStart = this._panStart.bind(this);\r\n    this._panMove = this._panMove.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._panEnd = this._panEnd.bind(this);\r\n    this._onSimulationStep = this._onSimulationStep.bind(this);\r\n    this._onSimulationStop = this._onSimulationStop.bind(this);\r\n    this._stopSimulation = this._stopSimulation.bind(this);\r\n    this.layer = layer;\r\n    const options = Defaults.getDefaults(\"LayerDraggable\", {});\r\n\r\n    super(options);\r\n\r\n    _.extend(this, options);\r\n\r\n    this.enabled = true;\r\n\r\n    // TODO: will have to change panRecognizer's horizontal/vertical etc\r\n    // when they are changed on the LayerDraggable\r\n    // @_panRecognizer = new PanRecognizer @eventBuffer\r\n\r\n    this._eventBuffer = new EventBuffer();\r\n    this._constraints = null;\r\n    this._ignoreUpdateLayerPosition = true;\r\n\r\n    this.attach();\r\n  }\r\n\r\n  attach() {\r\n    this.layer.on(Gestures.TapStart, this.tapStart);\r\n    this.layer.on(Gestures.PanStart, this.panStart);\r\n    this.layer.on(\"change:x\", this._updateLayerPosition);\r\n    return this.layer.on(\"change:y\", this._updateLayerPosition);\r\n  }\r\n\r\n  remove() {\r\n    this.layer.off(Gestures.TapStart, this.tapStart);\r\n    this.layer.off(Gestures.PanStart, this.panStart);\r\n    this.layer.off(Gestures.Pan, this._panMove);\r\n    return this.layer.off(Gestures.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  updatePosition(point) {\r\n    // Override this to add your own behaviour to the update position\r\n    return point;\r\n  }\r\n\r\n  panStart(event) {\r\n    // For backwards compatibility, we still call touchStart here\r\n    return this.touchStart(event);\r\n  }\r\n\r\n  touchStart(event) {\r\n    // We expose this publicly so you can start the dragging from an external event\r\n    // this is for example needed with the slider.\r\n    return this._panStart(event);\r\n  }\r\n\r\n  // Stop the simulation if we touch the layer again\r\n  tapStart(event) {\r\n    if (this._isAnimating) {\r\n      __guard__(\r\n        Framer.GestureInputRecognizer != null\r\n          ? Framer.GestureInputRecognizer.session\r\n          : undefined,\r\n        (x) => (x.cancelTap = true)\r\n      );\r\n      return this._panStart(event);\r\n    }\r\n  }\r\n\r\n  _updateLayerPosition() {\r\n    // This updates the layer position if it's extrenally changed while\r\n    // a drag is going on at the same time.\r\n    if (this._ignoreUpdateLayerPosition === true) {\r\n      return;\r\n    }\r\n    return (this._point = this.layer.point);\r\n  }\r\n\r\n  _panStart(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    LayerDraggable._globalDidDrag = false;\r\n\r\n    Events.wrap(document).addEventListener(Gestures.Pan, this._panMove);\r\n    // One would assume to use Gestures.PanEnd here, but we also want to animate back when we touched, but didn't pan\r\n    Events.wrap(document).addEventListener(Gestures.TapEnd, this._tapEnd);\r\n\r\n    // Only reset isMoving if this was not animating when we were clicking\r\n    // so we can use it to detect a click versus a drag.\r\n    this._isMoving = this._isAnimating;\r\n\r\n    // Stop any animations influencing the position, but no others.\r\n    for (var animation of Array.from(this.layer.animations())) {\r\n      var { properties } = animation;\r\n      if (properties.hasOwnProperty(\"x\") || properties.hasOwnProperty(\"y\")) {\r\n        animation.stop();\r\n      }\r\n    }\r\n\r\n    this._stopSimulation();\r\n    this._resetdirectionLock();\r\n\r\n    event.preventDefault();\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    // Extract the event (mobile may have multiple)\r\n    const touchEvent = Events.touchEvent(event);\r\n\r\n    // TODO: we should use the event velocity\r\n    this._eventBuffer.push({\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n      t: Date.now(),\r\n    });\r\n\r\n    // Store original layer position\r\n    this._layerStartPoint = this.layer.point;\r\n    this._correctedLayerStartPoint = this.layer.point;\r\n\r\n    // If we are beyond bounds, we need to correct for the scaled clamping from the last drag,\r\n    // hence the 1 / overdragScale\r\n    if (this.constraints && this.bounce) {\r\n      this._correctedLayerStartPoint = this._constrainPosition(\r\n        this._correctedLayerStartPoint,\r\n        this.constraints,\r\n        1 / this.overdragScale\r\n      );\r\n    }\r\n\r\n    // Store start cursor position\r\n    this._cursorStartPoint = {\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n    };\r\n\r\n    // Store cursor/layer offset\r\n    this._layerCursorOffset = {\r\n      x: touchEvent.clientX - this._correctedLayerStartPoint.x,\r\n      y: touchEvent.clientY - this._correctedLayerStartPoint.y,\r\n    };\r\n\r\n    this._point = this._correctedLayerStartPoint;\r\n    this._ignoreUpdateLayerPosition = false;\r\n\r\n    return this.emit(Events.DragSessionStart, event);\r\n  }\r\n\r\n  _panMove(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    // If we started dragging from another event we need to capture some initial values\r\n    if (!this._point) {\r\n      this.touchStart(event);\r\n    }\r\n\r\n    event.preventDefault();\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    const touchEvent = Events.touchEvent(event);\r\n    this._lastEvent = touchEvent;\r\n\r\n    this._eventBuffer.push({\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n      t: Date.now(),\r\n    }); // We don't use timeStamp because it's different on Chrome/Safari\r\n\r\n    let point = _.clone(this._point);\r\n    if (this.horizontal) {\r\n      point.x =\r\n        this._point.x +\r\n        event.delta.x * this.speedX * (1 / this.layer.screenScaleX(false));\r\n    }\r\n    if (this.vertical) {\r\n      point.y =\r\n        this._point.y +\r\n        event.delta.y * this.speedY * (1 / this.layer.screenScaleY(false));\r\n    }\r\n\r\n    // Save the point for the next update so we have the unrounded, unconstrained value\r\n    this._point = _.clone(point);\r\n\r\n    // Constraints and overdrag\r\n    if (this._constraints) {\r\n      point = this._constrainPosition(\r\n        point,\r\n        this._constraints,\r\n        this.overdragScale\r\n      );\r\n    }\r\n\r\n    // Direction lock\r\n    if (this.directionLock) {\r\n      if (!this._directionLockEnabledX && !this._directionLockEnabledY) {\r\n        const { offset } = event;\r\n        offset.x =\r\n          offset.x *\r\n          this.speedX *\r\n          (1 / this.layer.canvasScaleX()) *\r\n          this.layer.scaleX *\r\n          this.layer.scale;\r\n        offset.y =\r\n          offset.y *\r\n          this.speedY *\r\n          (1 / this.layer.canvasScaleY()) *\r\n          this.layer.scaleY *\r\n          this.layer.scale;\r\n\r\n        this._updatedirectionLock(offset);\r\n        return;\r\n      } else {\r\n        if (this._directionLockEnabledX) {\r\n          point.x = this._layerStartPoint.x;\r\n        }\r\n        if (this._directionLockEnabledY) {\r\n          point.y = this._layerStartPoint.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update the dragging status\r\n    if (\r\n      point.x !== this._layerStartPoint.x ||\r\n      point.y !== this._layerStartPoint.y\r\n    ) {\r\n      LayerDraggable._globalDidDrag = true;\r\n      if (!this._isDragging) {\r\n        this._isDragging = true;\r\n        this._isMoving = true;\r\n        this.emit(Events.DragStart, event);\r\n      }\r\n    }\r\n\r\n    // Move literally means move. If there is no movement, we do not emit.\r\n    if (this.isDragging) {\r\n      this.emit(Events.DragWillMove, event);\r\n    }\r\n\r\n    // Align every drag to pixels\r\n    if (this.pixelAlign) {\r\n      if (this.horizontal) {\r\n        point.x = Math.round(point.x);\r\n      }\r\n      if (this.vertical) {\r\n        point.y = Math.round(point.y);\r\n      }\r\n    }\r\n\r\n    // While we update the layer position ourselves, we don't want\r\n    // to trigger the updater for external changes.\r\n    this._ignoreUpdateLayerPosition = true;\r\n    this.layer.point = this.updatePosition(point);\r\n    this._ignoreUpdateLayerPosition = false;\r\n\r\n    if (this.isDragging) {\r\n      this.emit(Events.Move, this.layer.point);\r\n      this.emit(Events.DragDidMove, event);\r\n    }\r\n\r\n    return this.emit(Events.DragSessionMove, event);\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._panEnd(event);\r\n  }\r\n\r\n  _panEnd(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    LayerDraggable._globalDidDrag = false;\r\n\r\n    Events.wrap(document).removeEventListener(Gestures.Pan, this._panMove);\r\n    Events.wrap(document).removeEventListener(Gestures.TapEnd, this._tapEnd);\r\n    event.stopPropagation();\r\n\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    // Start the simulation prior to emitting the DragEnd event.\r\n    // This way, if the user calls layer.animate on DragEnd, the simulation will\r\n    // be canceled by the user's animation (if the user animates x and/or y).\r\n    this._startSimulation();\r\n\r\n    this.emit(Events.DragSessionEnd, event);\r\n    if (this._isDragging) {\r\n      this.emit(Events.DragEnd, event);\r\n    }\r\n\r\n    // Set _isDragging after DragEnd is fired, so that calls to calculateVelocity()\r\n    // still returns dragging velocity - both in case the user calls calculateVelocity(),\r\n    // (which would return a stale value before the simulation had finished one tick)\r\n    // and because @_start currently calls calculateVelocity().\r\n    this._isDragging = false;\r\n\r\n    // reset isMoving if not animating, otherwise animation start/stop will reset it\r\n    this._isMoving = this._isAnimating;\r\n    this._ignoreUpdateLayerPosition = true;\r\n    this._lastEvent = null;\r\n    return this._eventBuffer.reset();\r\n  }\r\n\r\n  _clampAndScale(value, min, max, scale) {\r\n    // TODO: Move to utils? Combine with clamp?\r\n    if (value < min) {\r\n      value = min + (value - min) * scale;\r\n    }\r\n    if (value > max) {\r\n      value = max + (value - max) * scale;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  _calculateConstraints(bounds) {\r\n    let constraints;\r\n    if (!bounds) {\r\n      return (constraints = {\r\n        minX: Infinity,\r\n        maxX: Infinity,\r\n        minY: Infinity,\r\n        maxY: Infinity,\r\n      });\r\n    }\r\n\r\n    // Correct the constraints if the layer size exceeds the constraints\r\n    if (bounds.width < this.layer.width) {\r\n      bounds.width = this.layer.width;\r\n    }\r\n    if (bounds.height < this.layer.height) {\r\n      bounds.height = this.layer.height;\r\n    }\r\n\r\n    //bounds.width = _.max([bounds.width, @layer.width])\r\n\r\n    constraints = {\r\n      minX: Utils.frameGetMinX(bounds),\r\n      maxX: Utils.frameGetMaxX(bounds),\r\n      minY: Utils.frameGetMinY(bounds),\r\n      maxY: Utils.frameGetMaxY(bounds),\r\n    };\r\n\r\n    // It makes sense to take the dimensions of the object into account\r\n    constraints.maxX -= this.layer.width;\r\n    constraints.maxY -= this.layer.height;\r\n\r\n    return constraints;\r\n  }\r\n\r\n  _constrainPosition(proposedPoint, bounds, scale) {\r\n    let point;\r\n    const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n      this._constraints\r\n    );\r\n\r\n    if (this.overdrag) {\r\n      point = {\r\n        x: this._clampAndScale(proposedPoint.x, minX, maxX, scale),\r\n        y: this._clampAndScale(proposedPoint.y, minY, maxY, scale),\r\n      };\r\n    } else {\r\n      point = {\r\n        x: Utils.clamp(proposedPoint.x, minX, maxX),\r\n        y: Utils.clamp(proposedPoint.y, minY, maxY),\r\n      };\r\n    }\r\n\r\n    if (this.speedX === 0 || this.horizontal === false) {\r\n      point.x = proposedPoint.x;\r\n    }\r\n    if (this.speedY === 0 || this.vertical === false) {\r\n      point.y = proposedPoint.y;\r\n    }\r\n\r\n    return point;\r\n  }\r\n\r\n  calculateVelocity() {\r\n    // Compatibility method\r\n    return this.velocity;\r\n  }\r\n\r\n  _calculateSimulationVelocity() {\r\n    const xFinished = this._simulation.x.finished();\r\n    const yFinished = this._simulation.y.finished();\r\n\r\n    const velocity = { x: 0, y: 0 };\r\n    if (!xFinished) {\r\n      velocity.x =\r\n        this._simulation.x.simulator.state.v / this.momentumVelocityMultiplier;\r\n    }\r\n    if (!yFinished) {\r\n      velocity.y =\r\n        this._simulation.y.simulator.state.v / this.momentumVelocityMultiplier;\r\n    }\r\n\r\n    return velocity;\r\n  }\r\n\r\n  //#############################################################\r\n  // Event Handling\r\n\r\n  emit(eventName, event) {\r\n    // TODO: Add new event properties like position corrected for device\r\n\r\n    // Pass this to the layer above\r\n    this.layer.emit(eventName, event);\r\n\r\n    return super.emit(eventName, event);\r\n  }\r\n\r\n  //#############################################################\r\n  // Lock Direction\r\n\r\n  _updatedirectionLock(correctedDelta) {\r\n    this._directionLockEnabledX =\r\n      Math.abs(correctedDelta.y) > this.directionLockThreshold.y;\r\n    this._directionLockEnabledY =\r\n      Math.abs(correctedDelta.x) > this.directionLockThreshold.x;\r\n\r\n    // TODO: This wasn't working as advertised. We shouls have a way to scroll diagonally\r\n    // if we were sort of moving into both directions equally.\r\n\r\n    // xSlightlyPreferred = Math.abs(correctedDelta.y) > @directionLockThreshold.y / 2\r\n    // ySlightlyPreferred = Math.abs(correctedDelta.x) > @directionLockThreshold.x / 2\r\n\r\n    // # Allow locking in both directions at the same time\r\n    // @_directionLockEnabledX = @_directionLockEnabledY = true if (xSlightlyPreferred and ySlightlyPreferred)\r\n\r\n    if (this._directionLockEnabledX || this._directionLockEnabledY) {\r\n      return this.emit(Events.DirectionLockStart, {\r\n        x: this._directionLockEnabledX,\r\n        y: this._directionLockEnabledY,\r\n      });\r\n    }\r\n  }\r\n\r\n  _resetdirectionLock() {\r\n    this._directionLockEnabledX = false;\r\n    return (this._directionLockEnabledY = false);\r\n  }\r\n\r\n  //#############################################################\r\n  // Inertial scroll simulation\r\n\r\n  _setupSimulation() {\r\n    if (this._simulation) {\r\n      return;\r\n    }\r\n\r\n    this._simulation = {\r\n      x: this._setupSimulationForAxis(\"x\"),\r\n      y: this._setupSimulationForAxis(\"y\"),\r\n    };\r\n\r\n    return this._updateSimulationConstraints(this.constraints);\r\n  }\r\n\r\n  _setupSimulationForAxis(axis) {\r\n    const properties = {};\r\n    properties[axis] = true;\r\n\r\n    const simulation = new Simulation({\r\n      layer: this.layer,\r\n      properties,\r\n      model: \"inertial-scroll\",\r\n      modelOptions: {\r\n        momentum: this.momentumOptions,\r\n        bounce: this.bounceOptions,\r\n      },\r\n    });\r\n\r\n    simulation.on(Events.SimulationStep, (state) =>\r\n      this._onSimulationStep(axis, state)\r\n    );\r\n    simulation.on(Events.SimulationStop, (state) =>\r\n      this._onSimulationStop(axis, state)\r\n    );\r\n    return simulation;\r\n  }\r\n\r\n  _updateSimulationConstraints(constraints) {\r\n    // This is where we let the simulator know about our constraints\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n    if (constraints) {\r\n      const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n        this._constraints\r\n      );\r\n      this._simulation.x.simulator.options = { min: minX, max: maxX };\r\n      return (this._simulation.y.simulator.options = { min: minY, max: maxY });\r\n    } else {\r\n      this._simulation.x.simulator.options = { min: -Infinity, max: +Infinity };\r\n      return (this._simulation.y.simulator.options = {\r\n        min: -Infinity,\r\n        max: +Infinity,\r\n      });\r\n    }\r\n  }\r\n\r\n  _onSimulationStep(axis, state) {\r\n    let delta;\r\n    if (axis === \"x\" && this.horizontal === false) {\r\n      return;\r\n    }\r\n    if (axis === \"y\" && this.vertical === false) {\r\n      return;\r\n    }\r\n\r\n    // The simulation state has x as value, it can look confusing here\r\n    // as we're working with x and y.\r\n\r\n    if (this.constraints) {\r\n      if (this.bounce) {\r\n        delta = state.x - this.layer[axis];\r\n      } else {\r\n        const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n          this._constraints\r\n        );\r\n        if (axis === \"x\") {\r\n          delta = Utils.clamp(state.x, minX, maxX) - this.layer[axis];\r\n        }\r\n        if (axis === \"y\") {\r\n          delta = Utils.clamp(state.x, minY, maxY) - this.layer[axis];\r\n        }\r\n      }\r\n    } else {\r\n      delta = state.x - this.layer[axis];\r\n    }\r\n\r\n    const updatePoint = this.layer.point;\r\n    if (axis === \"x\") {\r\n      updatePoint[axis] = updatePoint[axis] + delta;\r\n    }\r\n    if (axis === \"y\") {\r\n      updatePoint[axis] = updatePoint[axis] + delta;\r\n    }\r\n    this.updatePosition(updatePoint);\r\n\r\n    this.layer[axis] = this.updatePosition(updatePoint)[axis];\r\n    return this.emit(Events.Move, this.layer.point);\r\n  }\r\n\r\n  _onSimulationStop(axis, state) {\r\n    if (axis === \"x\" && this.horizontal === false) {\r\n      return;\r\n    }\r\n    if (axis === \"y\" && this.vertical === false) {\r\n      return;\r\n    }\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n\r\n    // Round the end position to whole pixels\r\n    if (this.pixelAlign) {\r\n      this.layer[axis] = Math.round(this.layer[axis]);\r\n    }\r\n\r\n    // See if both simulators are stopped\r\n    if (this._simulation.x.finished() && this._simulation.y.finished()) {\r\n      return this._stopSimulation();\r\n    }\r\n  }\r\n\r\n  _startSimulation() {\r\n    // The types of simulation that we can have are:\r\n    // 1) Momentum inside constraints\r\n    // 2) Momentum inside constraints to outside constraints bounce\r\n    // 3) Release outside constraints bounce\r\n    // 4) Momentum without constraints\r\n\r\n    if (!this.momentum && !this.bounce) {\r\n      return;\r\n    }\r\n    if (this.isBeyondConstraints === false && this.momentum === false) {\r\n      return;\r\n    }\r\n    if (this.isBeyondConstraints === false && this.isDragging === false) {\r\n      return;\r\n    }\r\n\r\n    // If overdrag is disabled, we need to not have a bounce animation\r\n    // when the cursor is outside of the dragging bounds for an axis.\r\n    const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n      this._constraints\r\n    );\r\n\r\n    const startSimulationX =\r\n      this.overdrag === true || (this.layer.x > minX && this.layer.x < maxX);\r\n    const startSimulationY =\r\n      this.overdrag === true || (this.layer.y > minY && this.layer.y < maxY);\r\n\r\n    if (startSimulationX === startSimulationY && startSimulationY === false) {\r\n      return;\r\n    }\r\n\r\n    const { velocity } = this;\r\n\r\n    const velocityX =\r\n      velocity.x *\r\n      this.momentumVelocityMultiplier *\r\n      this.speedX *\r\n      (1 / this.layer.canvasScaleX()) *\r\n      this.layer.scaleX *\r\n      this.layer.scale;\r\n    const velocityY =\r\n      velocity.y *\r\n      this.momentumVelocityMultiplier *\r\n      this.speedY *\r\n      (1 / this.layer.canvasScaleY()) *\r\n      this.layer.scaleY *\r\n      this.layer.scale;\r\n\r\n    this._setupSimulation();\r\n    this._isAnimating = true;\r\n    this._isMoving = true;\r\n\r\n    this._simulation.x.simulator.setState({\r\n      x: this.layer.x,\r\n      v: velocityX,\r\n    });\r\n    if (startSimulationX) {\r\n      this._simulation.x.start();\r\n    }\r\n\r\n    this._simulation.y.simulator.setState({\r\n      x: this.layer.y,\r\n      v: velocityY,\r\n    });\r\n    if (startSimulationY) {\r\n      this._simulation.y.start();\r\n    }\r\n\r\n    return this.emit(Events.DragAnimationStart);\r\n  }\r\n\r\n  _stopSimulation() {\r\n    if (this._isMoving) {\r\n      this.emit(Events.Move, this.layer.point);\r\n    }\r\n    this._isAnimating = false;\r\n    this._isMoving = false;\r\n\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n    if (this._simulation != null) {\r\n      this._simulation.x.stop();\r\n    }\r\n    if (this._simulation != null) {\r\n      this._simulation.y.stop();\r\n    }\r\n    this._simulation = null;\r\n    return this.emit(Events.DragAnimationEnd);\r\n  }\r\n\r\n  animateStop() {\r\n    return this._stopSimulation();\r\n  }\r\n\r\n  onMove(cb) {\r\n    return this.on(Events.Move, cb);\r\n  }\r\n  onDragStart(cb) {\r\n    return this.on(Events.DragStart, cb);\r\n  }\r\n  onDragWillMove(cb) {\r\n    return this.on(Events.DragWillMove, cb);\r\n  }\r\n  onDragMove(cb) {\r\n    return this.on(Events.DragMove, cb);\r\n  }\r\n  onDragDidMove(cb) {\r\n    return this.on(Events.DragDidMove, cb);\r\n  }\r\n  onDrag(cb) {\r\n    return this.on(Events.Drag, cb);\r\n  }\r\n  onDragEnd(cb) {\r\n    return this.on(Events.DragEnd, cb);\r\n  }\r\n  onDragAnimationStart(cb) {\r\n    return this.on(Events.DragAnimationStart, cb);\r\n  }\r\n  onDragAnimationEnd(cb) {\r\n    return this.on(Events.DragAnimationEnd, cb);\r\n  }\r\n  onDirectionLockStart(cb) {\r\n    return this.on(Events.DirectionLockStart, cb);\r\n  }\r\n}\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\nLayerDraggable.initClass();\r\n","import Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\n// Extend Events\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  PinchStart: \"pinchstart\",\r\n  Pinch: \"pinch\",\r\n  PinchEnd: \"pinchend\",\r\n  RotateStart: \"rotatestart\",\r\n  Rotate: \"rotate\",\r\n  RotateEnd: \"rotateend\",\r\n  ScaleStart: \"scalestart\",\r\n  Scale: \"scale\",\r\n  ScaleEnd: \"scaleend\",\r\n};\r\n\r\nexport class LayerPinchable extends BaseClass {\r\n  static initClass() {\r\n    // Properties\r\n    this.define(\"enabled\", this.simpleProperty(\"enabled\", true));\r\n    this.define(\"threshold\", this.simpleProperty(\"threshold\", 0));\r\n    this.define(\"centerOrigin\", this.simpleProperty(\"centerOrigin\", true));\r\n\r\n    this.define(\"scale\", this.simpleProperty(\"scale\", true));\r\n    this.define(\"scaleIncrements\", this.simpleProperty(\"scaleIncrements\", 0));\r\n    this.define(\"minScale\", this.simpleProperty(\"minScale\", 0));\r\n    this.define(\"maxScale\", this.simpleProperty(\"maxScale\", Number.MAX_VALUE));\r\n    this.define(\"scaleFactor\", this.simpleProperty(\"scaleFactor\", 1));\r\n\r\n    this.define(\"rotate\", this.simpleProperty(\"rotate\", true));\r\n    this.define(\"rotateIncrements\", this.simpleProperty(\"rotateIncrements\", 0));\r\n    this.define(\"rotateMin\", this.simpleProperty(\"rotateMin\", 0));\r\n    this.define(\"rotateMax\", this.simpleProperty(\"rotateMax\", 0));\r\n    this.define(\"rotateFactor\", this.simpleProperty(\"rotateFactor\", 1));\r\n  }\r\n\r\n  constructor(layer) {\r\n    super();\r\n    this.layer = layer;\r\n\r\n    this._centerOrigin = this._centerOrigin.bind(this);\r\n    this._pinchStart = this._pinchStart.bind(this);\r\n    this._pinch = this._pinch.bind(this);\r\n    this._pinchEnd = this._pinchEnd.bind(this);\r\n    this._tapStart = this._tapStart?.bind(this);\r\n\r\n    this._attach();\r\n  }\r\n\r\n  _attach() {\r\n    this.layer.on(Gestures.PinchStart, this._pinchStart);\r\n    this.layer.on(Gestures.Pinch, this._pinch);\r\n    this.layer.on(Gestures.PinchEnd, this._pinchEnd);\r\n    this.layer.on(Gestures.TapStart, this._tapStart);\r\n  }\r\n\r\n  _reset() {\r\n    this._scaleStart = null;\r\n    this._rotationStart = null;\r\n    this._rotationOffset = null;\r\n  }\r\n\r\n  _tapStart(event) {\r\n    // Placeholder for optional tap behavior\r\n    // if (this.centerOrigin) this._centerOrigin(event);\r\n  }\r\n\r\n  _centerOrigin(event) {\r\n    const topBefore = Utils.convertPoint({}, this.layer, this.layer.superLayer);\r\n    const pinchLocation = Utils.convertPointFromContext(\r\n      event.touchCenter,\r\n      this.layer,\r\n      true,\r\n      true\r\n    );\r\n\r\n    this.layer.originX = pinchLocation.x / this.layer.width;\r\n    this.layer.originY = pinchLocation.y / this.layer.height;\r\n\r\n    const topAfter = Utils.convertPoint({}, this.layer, this.layer.superLayer);\r\n    const originDelta = {\r\n      x: topAfter.x - topBefore.x,\r\n      y: topAfter.y - topBefore.y,\r\n    };\r\n\r\n    this.layer.x -= originDelta.x;\r\n    this.layer.y -= originDelta.y;\r\n  }\r\n\r\n  _pinchStart(event) {\r\n    this._reset();\r\n    if (this.centerOrigin) this._centerOrigin(event);\r\n    this.normalizeRotation = Utils.rotationNormalizer();\r\n  }\r\n\r\n  _pinch(event) {\r\n    if (\r\n      event.fingers !== 2 ||\r\n      !this.enabled ||\r\n      event.touchDistance <= this.threshold\r\n    )\r\n      return;\r\n\r\n    // Handle scaling\r\n    if (this.scale) {\r\n      if (this._scaleStart == null) this._scaleStart = this.layer.scale;\r\n      let scale = ((event.scale - 1) * this.scaleFactor + 1) * this._scaleStart;\r\n\r\n      if (this.minScale && this.maxScale) {\r\n        scale = Utils.clamp(scale, this.minScale, this.maxScale);\r\n      } else if (this.minScale) {\r\n        scale = Utils.clamp(scale, this.minScale, 1e6);\r\n      } else if (this.maxScale) {\r\n        scale = Utils.clamp(scale, 1e-5, this.maxScale);\r\n      }\r\n\r\n      if (this.scaleIncrements)\r\n        scale = Utils.nearestIncrement(scale, this.scaleIncrements);\r\n      this.layer.scale = scale;\r\n      this.emit(Events.Scale, event);\r\n    }\r\n\r\n    // Handle rotation\r\n    if (this.rotate) {\r\n      if (this._rotationStart == null)\r\n        this._rotationStart = this.layer.rotation;\r\n      if (this._rotationOffset == null) this._rotationOffset = event.rotation;\r\n\r\n      let rotation =\r\n        event.rotation - this._rotationOffset + this._rotationStart;\r\n      rotation *= this.rotateFactor;\r\n      rotation = this.normalizeRotation(rotation);\r\n\r\n      if (this.rotateMin && this.rotateMax)\r\n        rotation = Utils.clamp(rotation, this.rotateMin, this.rotateMax);\r\n      if (this.rotateIncrements)\r\n        rotation = Utils.nearestIncrement(rotation, this.rotateIncrements);\r\n\r\n      this.layer.rotation = rotation;\r\n      this.emit(Events.Rotate, event);\r\n    }\r\n  }\r\n\r\n  _pinchEnd(event) {\r\n    this._reset();\r\n  }\r\n}\r\n\r\nLayerPinchable.initClass();\r\n","export class LayerPropertyProxy {\r\n  constructor(target, callback) {\r\n    const proxy = this;\r\n    const getter = function (prop) {\r\n      return this[prop];\r\n    };\r\n    const setter = function (prop, value) {\r\n      return callback(this, prop, value, proxy);\r\n    };\r\n    for (var prop of Array.from(Object.getOwnPropertyNames(target))) {\r\n      var targetDesc = Object.getOwnPropertyDescriptor(target, prop);\r\n      var desc = {\r\n        enumerable: targetDesc.enumerable,\r\n        get: getter.bind(target, prop),\r\n        set: setter.bind(target, prop),\r\n      };\r\n      Object.defineProperty(proxy, prop, desc);\r\n    }\r\n    proxy.__proto__ = target.__proto__;\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Gradient } from \"./Gradient.js\";\r\nimport { Matrix } from \"./Matrix.js\";\r\nimport { Animation } from \"./Animation.js\";\r\nimport { LayerStyle } from \"./LayerStyle.js\";\r\nimport { LayerStates } from \"./LayerStates.js\";\r\nimport { LayerDraggable } from \"./LayerDraggable.js\";\r\nimport { LayerPinchable } from \"./LayerPinchable.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\nimport { LayerPropertyProxy } from \"./LayerPropertyProxy.js\";\r\n\r\nconst NoCacheDateKey = Date.now();\r\n\r\nconst delayedStyles = [\r\n  \"webkitTransform\",\r\n  \"webkitFilter\",\r\n  \"webkitPerspectiveOrigin\",\r\n  \"webkitTransformOrigin\",\r\n  \"webkitBackdropFilter\",\r\n];\r\n\r\nconst layerValueTypeError = function (name, value) {\r\n  throw new Error(\r\n    `Layer.${name}: value '${value}' of type '${typeof value}' is not valid`\r\n  );\r\n};\r\n\r\nexport const layerProperty = function (\r\n  name,\r\n  cssProperty,\r\n  fallback,\r\n  validator,\r\n  transformer,\r\n  options,\r\n  set,\r\n  targetElement,\r\n  includeMainElement,\r\n  useSubpropertyProxy\r\n) {\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  let result = {\r\n    default: fallback,\r\n    get() {\r\n      // console.log \"Layer.#{name}.get #{@_properties[name]}\", @_properties.hasOwnProperty(name)\r\n\r\n      let value;\r\n      if (this._properties.hasOwnProperty(name)) {\r\n        value = this._properties[name];\r\n      }\r\n      if (value == null) {\r\n        value = fallback;\r\n      }\r\n\r\n      if (useSubpropertyProxy) {\r\n        return layerProxiedValue(value, this, name);\r\n      }\r\n      return value;\r\n    },\r\n\r\n    set(value) {\r\n      if (transformer) {\r\n        value = transformer(value, this, name);\r\n      }\r\n\r\n      const oldValue = this._properties[name];\r\n      if (value === oldValue) {\r\n        return;\r\n      }\r\n\r\n      if (value && validator && !validator(value)) {\r\n        layerValueTypeError(name, value);\r\n      }\r\n\r\n      this._properties[name] = value;\r\n\r\n      if (cssProperty !== null) {\r\n        let mainElement, subElement;\r\n        let elementContainer = this;\r\n        if (Array.from(this._stylesAppliedToParent).includes(cssProperty)) {\r\n          elementContainer = this._parent;\r\n          this._parent._properties[name] = fallback;\r\n        }\r\n        if (includeMainElement || !targetElement) {\r\n          mainElement = elementContainer._element;\r\n        }\r\n        if (targetElement != null) {\r\n          subElement = elementContainer[targetElement];\r\n        }\r\n        if (name === cssProperty && LayerStyle[cssProperty] == null) {\r\n          if (mainElement != null) {\r\n            mainElement.style[cssProperty] = this._properties[name];\r\n          }\r\n          if (subElement != null) {\r\n            subElement.style[cssProperty] = this._properties[name];\r\n          }\r\n          // These values are set multiple times during applyDefaults, so ignore them here, and set the style in the constructor\r\n        } else if (\r\n          !this.__applyingDefaults ||\r\n          !Array.from(delayedStyles).includes(cssProperty)\r\n        ) {\r\n          const style = LayerStyle[cssProperty](this);\r\n          if (mainElement != null) {\r\n            mainElement.style[cssProperty] = style;\r\n          }\r\n          if (subElement != null) {\r\n            subElement.style[cssProperty] = style;\r\n          }\r\n        }\r\n      }\r\n      if (typeof set === \"function\") {\r\n        set(this, value);\r\n      }\r\n\r\n      // We try to not send any events while we run the constructor, it just\r\n      // doesn't make sense, because no one can listen to use yet.\r\n      if (this.__constructor) {\r\n        return;\r\n      }\r\n\r\n      this.emit(`change:${name}`, value, oldValue);\r\n      if ([\"x\", \"y\"].includes(name)) {\r\n        this.emit(\"change:point\", value);\r\n      }\r\n      if ([\"width\", \"height\"].includes(name)) {\r\n        this.emit(\"change:size\", value);\r\n      }\r\n      if ([\"x\", \"y\", \"width\", \"height\"].includes(name)) {\r\n        this.emit(\"change:frame\", value);\r\n      }\r\n      if ([\"rotationZ\"].includes(name)) {\r\n        return this.emit(\"change:rotation\", value);\r\n      }\r\n    },\r\n  };\r\n\r\n  return (result = _.extend(result, options));\r\n};\r\n\r\nexport var layerProxiedValue = function (value, layer, property) {\r\n  if (!_.isObject(value)) {\r\n    return value;\r\n  }\r\n  return new LayerPropertyProxy(value, function (\r\n    proxiedValue,\r\n    subProperty,\r\n    subValue\r\n  ) {\r\n    proxiedValue[subProperty] = subValue;\r\n    return (layer[property] = proxiedValue);\r\n  });\r\n};\r\n\r\nexports.layerProxiedValue = layerProxiedValue;\r\n\r\nconst layerPropertyPointTransformer = function (value, layer, property) {\r\n  if (_.isFunction(value)) {\r\n    value = value(layer, property);\r\n  }\r\n\r\n  return value;\r\n};\r\n\r\nconst layerPropertyIgnore = function (options, propertyName, properties) {\r\n  if (!options.hasOwnProperty(propertyName)) {\r\n    return options;\r\n  }\r\n\r\n  for (var p of Array.from(properties)) {\r\n    if (options.hasOwnProperty(p)) {\r\n      delete options[propertyName];\r\n      return options;\r\n    }\r\n  }\r\n\r\n  return options;\r\n};\r\n\r\nconst asBorderRadius = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n\r\n  if (_.isString(value)) {\r\n    if (!_.endsWith(value, \"%\")) {\r\n      console.error(\r\n        \"Layer.borderRadius only correctly supports percentages in strings\"\r\n      );\r\n    }\r\n    return value;\r\n  }\r\n\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n\r\n  const result = {};\r\n  let isValidObject = false;\r\n  for (var key of [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst asBorderWidth = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n  const result = {};\r\n  let isValidObject = false;\r\n  for (var key of [\"left\", \"right\", \"bottom\", \"top\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst parentOrContext = function (layerOrContext) {\r\n  if (layerOrContext.parent != null) {\r\n    return layerOrContext.parent;\r\n  } else {\r\n    return layerOrContext.context;\r\n  }\r\n};\r\n\r\nconst proxiedShadowValue = function (layer, value, index) {\r\n  if (index == null) {\r\n    index = 0;\r\n  }\r\n  const v = _.defaults(_.clone(value), Framer.Defaults.Shadow);\r\n  if (v.color !== null) {\r\n    if (v != null) {\r\n      v.color = new Color(v.color);\r\n    }\r\n  }\r\n  return layerProxiedValue(v, layer, `shadow${index + 1}`);\r\n};\r\n\r\nexport class Layer extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"context\", {\r\n      get() {\r\n        return this._context;\r\n      },\r\n    });\r\n\r\n    this.define(\"label\", {\r\n      get() {\r\n        return this._label;\r\n      },\r\n      set(value) {\r\n        if (value === this._label) {\r\n          return;\r\n        }\r\n        this._label = value;\r\n        return Utils.labelLayer(this, this._label);\r\n      },\r\n    });\r\n\r\n    // A placeholder for layer bound properties defined by the user:\r\n    this.define(\"custom\", this.simpleProperty(\"custom\", undefined));\r\n\r\n    // Default animation options for every animation of this layer\r\n    this.define(\r\n      \"animationOptions\",\r\n      this.simpleProperty(\"animationOptions\", {})\r\n    );\r\n\r\n    // Behaviour properties\r\n    this.define(\r\n      \"ignoreEvents\",\r\n      layerProperty(this, \"ignoreEvents\", \"pointerEvents\", true, _.isBoolean)\r\n    );\r\n\r\n    // Css properties\r\n    this.define(\r\n      \"width\",\r\n      layerProperty(\r\n        this,\r\n        \"width\",\r\n        \"width\",\r\n        100,\r\n        _.isNumber,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (layer.constraintValues == null || layer.isLayouting) {\r\n            return;\r\n          }\r\n          layer.constraintValues.width = value;\r\n          layer.constraintValues.aspectRatioLocked = false;\r\n          layer.constraintValues.widthFactor = null;\r\n          return layer._layoutX();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"height\",\r\n      layerProperty(\r\n        this,\r\n        \"height\",\r\n        \"height\",\r\n        100,\r\n        _.isNumber,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (layer.constraintValues == null || layer.isLayouting) {\r\n            return;\r\n          }\r\n          layer.constraintValues.height = value;\r\n          layer.constraintValues.aspectRatioLocked = false;\r\n          layer.constraintValues.heightFactor = null;\r\n          return layer._layoutY();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"visible\",\r\n      layerProperty(this, \"visible\", \"display\", true, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"opacity\",\r\n      layerProperty(this, \"opacity\", \"opacity\", 1, _.isNumber, parseFloat)\r\n    );\r\n    this.define(\r\n      \"index\",\r\n      layerProperty(this, \"index\", \"zIndex\", 0, _.isNumber, null, {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"clip\",\r\n      layerProperty(\r\n        this,\r\n        \"clip\",\r\n        \"overflow\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        null,\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"scrollHorizontal\",\r\n      layerProperty(\r\n        this,\r\n        \"scrollHorizontal\",\r\n        \"overflowX\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === true) {\r\n            return (layer.ignoreEvents = false);\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"scrollVertical\",\r\n      layerProperty(\r\n        this,\r\n        \"scrollVertical\",\r\n        \"overflowY\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === true) {\r\n            return (layer.ignoreEvents = false);\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\"scroll\", {\r\n      get() {\r\n        return this.scrollHorizontal === true || this.scrollVertical === true;\r\n      },\r\n      set(value) {\r\n        return (this.scrollHorizontal = this.scrollVertical = value);\r\n      },\r\n    });\r\n\r\n    // Matrix properties\r\n    this.define(\r\n      \"x\",\r\n      layerProperty(\r\n        this,\r\n        \"x\",\r\n        \"webkitTransform\",\r\n        0,\r\n        _.isNumber,\r\n        layerPropertyPointTransformer,\r\n        { depends: [\"width\", \"height\"] },\r\n        function (layer) {\r\n          if (layer.isLayouting) {\r\n            return;\r\n          }\r\n          return (layer.constraintValues = null);\r\n        }\r\n      )\r\n    );\r\n    this.define(\r\n      \"y\",\r\n      layerProperty(\r\n        this,\r\n        \"y\",\r\n        \"webkitTransform\",\r\n        0,\r\n        _.isNumber,\r\n        layerPropertyPointTransformer,\r\n        { depends: [\"width\", \"height\"] },\r\n        function (layer) {\r\n          if (layer.isLayouting) {\r\n            return;\r\n          }\r\n          return (layer.constraintValues = null);\r\n        }\r\n      )\r\n    );\r\n    this.define(\r\n      \"z\",\r\n      layerProperty(this, \"z\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"scaleX\",\r\n      layerProperty(this, \"scaleX\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scaleY\",\r\n      layerProperty(this, \"scaleY\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scaleZ\",\r\n      layerProperty(this, \"scaleZ\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scale\",\r\n      layerProperty(this, \"scale\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"skewX\",\r\n      layerProperty(this, \"skewX\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"skewY\",\r\n      layerProperty(this, \"skewY\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"skew\",\r\n      layerProperty(this, \"skew\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n\r\n    // @define \"scale\",\r\n    // \tget: -> (@scaleX + @scaleY + @scaleZ) / 3.0\r\n    // \tset: (value) -> @scaleX = @scaleY = @scaleZ = value\r\n\r\n    this.define(\r\n      \"originX\",\r\n      layerProperty(this, \"originX\", \"webkitTransformOrigin\", 0.5, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"originY\",\r\n      layerProperty(this, \"originY\", \"webkitTransformOrigin\", 0.5, _.isNumber)\r\n    );\r\n    this.define(\"originZ\", layerProperty(this, \"originZ\", null, 0, _.isNumber));\r\n\r\n    this.define(\r\n      \"perspective\",\r\n      layerProperty(\r\n        this,\r\n        \"perspective\",\r\n        \"webkitPerspective\",\r\n        0,\r\n        (v) => Utils.webkitPerspectiveForValue(v) !== null\r\n      )\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginX\",\r\n      layerProperty(\r\n        this,\r\n        \"perspectiveOriginX\",\r\n        \"webkitPerspectiveOrigin\",\r\n        0.5,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginY\",\r\n      layerProperty(\r\n        this,\r\n        \"perspectiveOriginY\",\r\n        \"webkitPerspectiveOrigin\",\r\n        0.5,\r\n        _.isNumber\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"rotationX\",\r\n      layerProperty(this, \"rotationX\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"rotationY\",\r\n      layerProperty(this, \"rotationY\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"rotationZ\",\r\n      layerProperty(this, \"rotationZ\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\"rotation\", {\r\n      //exportable: false\r\n      get() {\r\n        return this.rotationZ;\r\n      },\r\n      set(value) {\r\n        return (this.rotationZ = value);\r\n      },\r\n    });\r\n\r\n    // Filter properties\r\n    this.define(\r\n      \"blur\",\r\n      layerProperty(this, \"blur\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"brightness\",\r\n      layerProperty(this, \"brightness\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"saturate\",\r\n      layerProperty(this, \"saturate\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"hueRotate\",\r\n      layerProperty(this, \"hueRotate\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"contrast\",\r\n      layerProperty(this, \"contrast\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"invert\",\r\n      layerProperty(this, \"invert\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"grayscale\",\r\n      layerProperty(this, \"grayscale\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"sepia\",\r\n      layerProperty(this, \"sepia\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"blending\",\r\n      layerProperty(this, \"blending\", \"mixBlendMode\", null, _.isString)\r\n    );\r\n\r\n    this.define(\r\n      \"backgroundBlur\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundBlur\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundBrightness\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundBrightness\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundSaturate\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSaturate\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundHueRotate\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundHueRotate\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundContrast\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundContrast\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundInvert\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundInvert\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundGrayscale\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundGrayscale\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundSepia\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSepia\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"backgroundSize\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSize\",\r\n        \"backgroundSize\",\r\n        \"fill\",\r\n        _.isString\r\n      )\r\n    );\r\n\r\n    for (let i = 0; i <= 8; i++) {\r\n      ((i) => {\r\n        return this.define(`shadow${i + 1}`, {\r\n          exportable: false,\r\n          depends: [\r\n            \"shadowX\",\r\n            \"shadowY\",\r\n            \"shadowBlur\",\r\n            \"shadowSpread\",\r\n            \"shadowColor\",\r\n            \"shadowType\",\r\n          ],\r\n          get() {\r\n            if (this.shadows == null) {\r\n              this.shadows = [];\r\n            }\r\n            if (this.shadows[i] == null) {\r\n              this.shadows[i] = proxiedShadowValue(this, {}, i);\r\n            }\r\n            return this.shadows[i];\r\n          },\r\n          set(value) {\r\n            if (this.shadows == null) {\r\n              this.shadows = [];\r\n            }\r\n            this.shadows[i] = proxiedShadowValue(this, value, i);\r\n            return this.updateShadowStyle();\r\n          },\r\n        });\r\n      })(i);\r\n    }\r\n\r\n    // Shadow properties\r\n    for (var shadowProp of [\"X\", \"Y\", \"Blur\", \"Spread\", \"Color\", \"Type\"]) {\r\n      ((shadowProp) => {\r\n        return this.define(`shadow${shadowProp}`, {\r\n          get() {\r\n            if (this.shadows == null || this.shadows.length === 0) {\r\n              return null;\r\n            }\r\n            return this.shadows[0][shadowProp.toLowerCase()];\r\n          },\r\n          set(value) {\r\n            return this.updateShadowsProperty(shadowProp.toLowerCase(), value);\r\n          },\r\n        });\r\n      })(shadowProp);\r\n    }\r\n\r\n    this.define(\"shadows\", {\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"shadows\");\r\n      },\r\n      set(value) {\r\n        if (value == null) {\r\n          value = [];\r\n        }\r\n        const shadows = [];\r\n        for (let index = 0; index < value.length; index++) {\r\n          var shadow = value[index];\r\n          if (shadow === null) {\r\n            shadows.push(null);\r\n          } else {\r\n            shadows.push(proxiedShadowValue(this, shadow, index));\r\n          }\r\n        }\r\n        this._setPropertyValue(\"shadows\", shadows);\r\n        return this.updateShadowStyle();\r\n      },\r\n    });\r\n\r\n    // Color properties\r\n    this.define(\r\n      \"backgroundColor\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundColor\",\r\n        \"backgroundColor\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor\r\n      )\r\n    );\r\n    this.define(\r\n      \"color\",\r\n      layerProperty(\r\n        this,\r\n        \"color\",\r\n        \"color\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        null,\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    // Border properties\r\n    this.define(\r\n      \"borderRadius\",\r\n      layerProperty(\r\n        this,\r\n        \"borderRadius\",\r\n        \"borderRadius\",\r\n        0,\r\n        null,\r\n        asBorderRadius,\r\n        null,\r\n        null,\r\n        \"_elementBorder\",\r\n        true,\r\n        true\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderColor\",\r\n      layerProperty(\r\n        this,\r\n        \"borderColor\",\r\n        \"borderColor\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        null,\r\n        \"_elementBorder\"\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderWidth\",\r\n      layerProperty(\r\n        this,\r\n        \"borderWidth\",\r\n        \"borderWidth\",\r\n        0,\r\n        null,\r\n        asBorderWidth,\r\n        null,\r\n        null,\r\n        \"_elementBorder\",\r\n        false,\r\n        true\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderStyle\",\r\n      layerProperty(\r\n        this,\r\n        \"borderStyle\",\r\n        \"borderStyle\",\r\n        \"solid\",\r\n        _.isString,\r\n        null,\r\n        null,\r\n        null,\r\n        \"_elementBorder\"\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"force2d\",\r\n      layerProperty(this, \"force2d\", \"webkitTransform\", false, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"flat\",\r\n      layerProperty(this, \"flat\", \"webkitTransformStyle\", false, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"backfaceVisible\",\r\n      layerProperty(\r\n        this,\r\n        \"backfaceVisible\",\r\n        \"webkitBackfaceVisibility\",\r\n        true,\r\n        _.isBoolean\r\n      )\r\n    );\r\n\r\n    //#############################################################\r\n    // Identity\r\n\r\n    this.define(\"name\", {\r\n      default: \"\",\r\n      get() {\r\n        const name = this._getPropertyValue(\"name\");\r\n        if (name != null) {\r\n          return `${name}`;\r\n        } else {\r\n          return \"\";\r\n        }\r\n      },\r\n\r\n      set(value) {\r\n        this._setPropertyValue(\"name\", value);\r\n        // Set the name attribute of the dom element too\r\n        // See: https://github.com/koenbok/Framer/issues/63\r\n        return this._element.setAttribute(\"name\", value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Matrices\r\n\r\n    // matrix of layer transforms\r\n    this.define(\"matrix\", {\r\n      get() {\r\n        if (this.force2d) {\r\n          return this._matrix2d;\r\n        }\r\n        return Matrix.identity3d()\r\n          .translate(this.x, this.y, this.z)\r\n          .scale(this.scale)\r\n          .scale(this.scaleX, this.scaleY, this.scaleZ)\r\n          .skew(this.skew)\r\n          .skewX(this.skewX)\r\n          .skewY(this.skewY)\r\n          .translate(0, 0, this.originZ)\r\n          .rotate(this.rotationX, 0, 0)\r\n          .rotate(0, this.rotationY, 0)\r\n          .rotate(0, 0, this.rotationZ)\r\n          .translate(0, 0, -this.originZ);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms when 2d is forced\r\n    this.define(\"_matrix2d\", {\r\n      get() {\r\n        return Matrix.identity3d()\r\n          .translate(this.x, this.y)\r\n          .scale(this.scale)\r\n          .scale(this.scaleX, this.scaleY)\r\n          .skewX(this.skew)\r\n          .skewY(this.skew)\r\n          .rotate(0, 0, this.rotationZ);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms with transform origin applied\r\n    this.define(\"transformMatrix\", {\r\n      get() {\r\n        return Matrix.identity3d()\r\n          .translate(this.originX * this.width, this.originY * this.height)\r\n          .multiply(this.matrix)\r\n          .translate(-this.originX * this.width, -this.originY * this.height);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms with perspective applied\r\n    this.define(\"matrix3d\", {\r\n      get() {\r\n        const parent = this.parent || this.context;\r\n        const ppm = Utils.perspectiveMatrix(parent);\r\n        return Matrix.identity3d().multiply(ppm).multiply(this.transformMatrix);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Border radius compatibility\r\n\r\n    // Because it should be cornerRadius, we alias it here\r\n    this.define(\"cornerRadius\", {\r\n      importable: false,\r\n      exportable: false,\r\n      // exportable: no\r\n      get() {\r\n        return this.borderRadius;\r\n      },\r\n      set(value) {\r\n        return (this.borderRadius = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"point\", {\r\n      importable: true,\r\n      exportable: false,\r\n      depends: [\"width\", \"height\", \"size\", \"parent\"],\r\n      get() {\r\n        return Utils.point(this);\r\n      },\r\n      set(input) {\r\n        input = layerPropertyPointTransformer(input, this, \"point\");\r\n        return this._setGeometryValues(input, [\"x\", \"y\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"midPoint\", {\r\n      importable: true,\r\n      exportable: false,\r\n      depends: [\"width\", \"height\", \"size\", \"parent\", \"point\"],\r\n      get() {\r\n        return {\r\n          x: this.midX,\r\n          y: this.midY,\r\n        };\r\n      },\r\n      set(input) {\r\n        input = layerPropertyPointTransformer(input, this, \"midPoint\");\r\n        if (!_.isNumber(input)) {\r\n          input = _.pick(input, [\"x\", \"y\", \"midX\", \"midY\"]);\r\n          if (input.x != null && input.midX == null) {\r\n            input.midX = input.x;\r\n            delete input.x;\r\n          }\r\n          if (input.y != null && input.midY == null) {\r\n            input.midY = input.y;\r\n            delete input.y;\r\n          }\r\n        }\r\n        return this._setGeometryValues(input, [\"midX\", \"midY\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"size\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.size(this);\r\n      },\r\n      set(input) {\r\n        return this._setGeometryValues(input, [\"width\", \"height\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"frame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frame(this);\r\n      },\r\n      set(input) {\r\n        return this._setGeometryValues(input, [\"x\", \"y\", \"width\", \"height\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"minX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this.x;\r\n      },\r\n      set(value) {\r\n        return (this.x = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"midX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMidX(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMidX(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"maxX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMaxX(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMaxX(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"minY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this.y;\r\n      },\r\n      set(value) {\r\n        return (this.y = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"midY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMidY(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMidY(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"maxY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMaxY(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMaxY(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"constraintValues\", {\r\n      importable: true,\r\n      exportable: false,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"constraintValues\");\r\n      },\r\n      set(value) {\r\n        let newValue;\r\n        if (value === null) {\r\n          newValue = null;\r\n          this.off(\"change:parent\", this.parentChanged);\r\n          Screen.off(\"resize\", this.layout);\r\n        } else {\r\n          let needle3;\r\n          newValue = _.defaults(_.clone(value), {\r\n            left: 0,\r\n            right: null,\r\n            top: 0,\r\n            bottom: null,\r\n            centerAnchorX: 0,\r\n            centerAnchorY: 0,\r\n            widthFactor: null,\r\n            heightFactor: null,\r\n            aspectRatioLocked: false,\r\n            width: this.width,\r\n            height: this.height,\r\n          });\r\n          if (this.parent != null) {\r\n            let needle, needle1;\r\n            if (\r\n              !((needle = this.layout),\r\n              Array.from(this.parent.listeners(\"change:width\")).includes(\r\n                needle\r\n              ))\r\n            ) {\r\n              this.parent.on(\"change:width\", this.layout);\r\n            }\r\n            if (\r\n              !((needle1 = this.layout),\r\n              Array.from(this.parent.listeners(\"change:height\")).includes(\r\n                needle1\r\n              ))\r\n            ) {\r\n              this.parent.on(\"change:height\", this.layout);\r\n            }\r\n          } else {\r\n            let needle2;\r\n            if (\r\n              !((needle2 = this.layout),\r\n              Array.from(Screen.listeners(\"resize\")).includes(needle2))\r\n            ) {\r\n              Screen.on(\"resize\", this.layout);\r\n            }\r\n          }\r\n          if (\r\n            !((needle3 = this.parentChanged),\r\n            Array.from(this.listeners(\"change:parent\")).includes(needle3))\r\n          ) {\r\n            this.on(\"change:parent\", this.parentChanged);\r\n          }\r\n        }\r\n        return this._setPropertyValue(\"constraintValues\", newValue);\r\n      },\r\n    });\r\n\r\n    this.define(\"htmlIntrinsicSize\", {\r\n      importable: true,\r\n      exportable: true,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"htmlIntrinsicSize\");\r\n      },\r\n      set(value) {\r\n        if (value === null) {\r\n          return this._setPropertyValue(\"htmlIntrinsicSize\", value);\r\n        } else {\r\n          if (!_.isFinite(value.width) || !_.isFinite(value.height)) {\r\n            return;\r\n          }\r\n          return this._setPropertyValue(\"htmlIntrinsicSize\", {\r\n            width: value.width,\r\n            height: value.height,\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"canvasFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.boundingFrame(this);\r\n      },\r\n      set(frame) {\r\n        return (this.frame = Utils.convertFrameFromContext(\r\n          frame,\r\n          this,\r\n          true,\r\n          false\r\n        ));\r\n      },\r\n    });\r\n\r\n    this.define(\"screenFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.boundingFrame(this, false);\r\n      },\r\n      set(frame) {\r\n        return (this.frame = Utils.convertFrameFromContext(\r\n          frame,\r\n          this,\r\n          false,\r\n          false\r\n        ));\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // CSS\r\n\r\n    this.define(\"style\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this._element.style;\r\n      },\r\n      set(value) {\r\n        _.extend(this._element.style, value);\r\n        return this.emit(\"change:style\");\r\n      },\r\n    });\r\n\r\n    this.define(\"classList\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this._element.classList;\r\n      },\r\n    });\r\n\r\n    this.define(\"html\", {\r\n      get() {\r\n        return (\r\n          (this._elementHTML != null\r\n            ? this._elementHTML.innerHTML\r\n            : undefined) || \"\"\r\n        );\r\n      },\r\n\r\n      set(value) {\r\n        // Insert some html directly into this layer. We actually create\r\n        // a child node to insert it in, so it won't mess with Framers\r\n        // layer hierarchy.\r\n        this._createHTMLElementIfNeeded();\r\n        const ids = Utils.getIdAttributesFromString(value);\r\n        for (var id of Array.from(ids)) {\r\n          var existingElement = document.querySelector(`[id='${id}']`);\r\n          if (existingElement != null) {\r\n            Utils.throwInStudioOrWarnInProduction(\r\n              Layer.ExistingIdMessage(\"html\", id)\r\n            );\r\n            return;\r\n          }\r\n        }\r\n\r\n        this._elementHTML.innerHTML = value;\r\n        this._updateHTMLScale();\r\n\r\n        // If the contents contains something else than plain text\r\n        // then we turn off ignoreEvents so buttons etc will work.\r\n\r\n        // if not (\r\n        // \t@_elementHTML.childNodes.length is 1 and\r\n        // \t@_elementHTML.childNodes[0].nodeName is \"#text\")\r\n        // \t@ignoreEvents = false\r\n\r\n        return this.emit(\"change:html\");\r\n      },\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      default: \"\",\r\n      get() {\r\n        return this._getPropertyValue(\"image\");\r\n      },\r\n      set(value) {\r\n        const currentValue = this._getPropertyValue(\"image\");\r\n        const defaults = Defaults.getDefaults(\"Layer\", {});\r\n        const isBackgroundColorDefault =\r\n          this.backgroundColor != null\r\n            ? this.backgroundColor.isEqual(defaults.backgroundColor)\r\n            : undefined;\r\n\r\n        if (Gradient.isGradientObject(value)) {\r\n          this.emit(\"change:gradient\", value, currentValue);\r\n          this.emit(\"change:image\", value, currentValue);\r\n          this._setPropertyValue(\"image\", value);\r\n          this.style[\"background-image\"] = value.toCSS();\r\n          if (isBackgroundColorDefault) {\r\n            this.backgroundColor = null;\r\n          }\r\n          return;\r\n        }\r\n\r\n        if (!(_.isString(value) || value === null)) {\r\n          layerValueTypeError(\"image\", value);\r\n        }\r\n\r\n        if (currentValue === value) {\r\n          return this.emit(\"load\");\r\n        }\r\n\r\n        // Unset the background color only if its the default color\r\n        if (isBackgroundColorDefault) {\r\n          this.backgroundColor = null;\r\n        }\r\n\r\n        // Set the property value\r\n        this._setPropertyValue(\"image\", value);\r\n        if ([null, \"\"].includes(value)) {\r\n          if (this._imageLoader != null) {\r\n            this._imageEventManager.removeAllListeners();\r\n            this._imageLoader.src = null;\r\n          }\r\n\r\n          this.style[\"background-image\"] = null;\r\n\r\n          if (this._imageLoader != null) {\r\n            this.emit(Events.ImageLoadCancelled, this._imageLoader);\r\n            this._cleanupImageLoader();\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        // Show placeholder image on any browser that doesn't support inline pdf\r\n        if (\r\n          _.endsWith(\r\n            typeof value.toLowerCase === \"function\"\r\n              ? value.toLowerCase()\r\n              : undefined,\r\n            \".pdf\"\r\n          ) &&\r\n          (!Utils.isWebKit() || Utils.isChrome())\r\n        ) {\r\n          this.style[\"background-image\"] =\r\n            \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAVlJREFUaAXtlwEOwiAMRdF4Cr3/0fQaSre9ZFSYLCrQpSSG/FLW9v92agghXJdP3KZlCp/J2up+WiUuzMt6zNukzPDYvALCsKme1/maV8BnQHqw9/IZ6KmAz0BP9ontMwATPXafgR6s65g+A5qRlrhmBu6FhG6LXf9/+JU/YclROkVWEs/8r9FLrChb2apSqVqWZgKmtRKz9/f+CdPxoVl8CAWylcWKUQZGwfhjB3OOHcw5djDn2MH6fBNLC42yaEnyoTXB2V36+lPlz+zN9x6HKfxrZwZ/HUbf5/lJviMpoBPWBWWxFJCtLNqplItIWuvPffx5Dphz7GB9vonNv4X2zICWuMTM3p7Gv/b5iVLmFaiZgb3M/Ns/Ud68AvIGkJ6ir8xh8wrQrzAve9Jjo2PzCsC8z4Aw0WP5DPRgXcf07wHNSEvsM9CS7VIsn4ESMy3sPgMtWN6K8QKfubDo2UqVogAAAABJRU5ErkJggg==')\";\r\n          return;\r\n        }\r\n\r\n        let imageUrl = value;\r\n\r\n        // Optional base image value\r\n        // imageUrl = Config.baseUrl + imageUrl\r\n\r\n        if (\r\n          this._alwaysUseImageCache === false &&\r\n          Utils.isLocalAssetUrl(imageUrl)\r\n        ) {\r\n          imageUrl += /\\?/.test(imageUrl) ? \"&\" : \"?\";\r\n          imageUrl += `nocache=${NoCacheDateKey}`;\r\n        }\r\n\r\n        // As an optimization, we will only use a loader\r\n        // if something is explicitly listening to the load event\r\n\r\n        if (\r\n          this.listeners(Events.ImageLoaded, true) ||\r\n          this.listeners(Events.ImageLoadError, true) ||\r\n          this.listeners(Events.ImageLoadCancelled, true)\r\n        ) {\r\n          this._imageLoader = new Image();\r\n          this._imageLoader.name = imageUrl;\r\n          this._imageLoader.src = imageUrl;\r\n          this._imageEventManager = this._context.domEventManager.wrap(\r\n            this._imageLoader\r\n          );\r\n          this._imageEventManager.addEventListener(\"load\", () => {\r\n            this.style[\"background-image\"] = `url('${imageUrl}')`;\r\n            this.emit(Events.ImageLoaded, this._imageLoader);\r\n            return this._cleanupImageLoader();\r\n          });\r\n\r\n          return this._imageEventManager.addEventListener(\"error\", () => {\r\n            this.emit(Events.ImageLoadError, this._imageLoader);\r\n            return this._cleanupImageLoader();\r\n          });\r\n        } else {\r\n          return (this.style[\"background-image\"] = `url('${imageUrl}')`);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"gradient\", {\r\n      get() {\r\n        if (Gradient.isGradientObject(this.image)) {\r\n          return layerProxiedValue(this.image, this, \"gradient\");\r\n        }\r\n        return null;\r\n      },\r\n      set(value) {\r\n        // Copy semantics!\r\n        if (Gradient.isGradient(value)) {\r\n          return (this.image = new Gradient(value));\r\n        } else if (!value && Gradient.isGradientObject(this.image)) {\r\n          return (this.image = null);\r\n        }\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# HIERARCHY\r\n\r\n    this.define(\"parent\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: true,\r\n      get() {\r\n        return this._parent || null;\r\n      },\r\n      set(layer) {\r\n        if (layer === this._parent) {\r\n          return;\r\n        }\r\n\r\n        if (layer === this) {\r\n          throw Error(\"Layer.parent: a layer cannot be it's own parent.\");\r\n        }\r\n\r\n        // Check the type\r\n        if (!layer instanceof Layer) {\r\n          throw Error(\"Layer.parent needs to be a Layer object\");\r\n        }\r\n\r\n        // Cancel previous pending insertions\r\n        Utils.domCompleteCancel(this.__insertElement);\r\n\r\n        // Remove from previous parent children\r\n        if (this._parent) {\r\n          this._parent._children = _.pull(this._parent._children, this);\r\n          this._parent._element.removeChild(this._element);\r\n          this._parent.emit(\"change:children\", { added: [], removed: [this] });\r\n          this._parent.emit(\"change:subLayers\", { added: [], removed: [this] });\r\n        }\r\n\r\n        // Either insert the element to the new parent element or into dom\r\n        if (layer) {\r\n          layer._element.appendChild(this._element);\r\n          layer._children.push(this);\r\n          layer.emit(\"change:children\", { added: [this], removed: [] });\r\n          layer.emit(\"change:subLayers\", { added: [this], removed: [] });\r\n        } else {\r\n          this._insertElement();\r\n        }\r\n\r\n        const oldParent = this._parent;\r\n        // Set the parent\r\n        this._parent = layer;\r\n\r\n        // Place this layer on top of its siblings\r\n        this.bringToFront();\r\n\r\n        this.emit(\"change:parent\", this._parent, oldParent);\r\n        return this.emit(\"change:superLayer\", this._parent, oldParent);\r\n      },\r\n    });\r\n\r\n    this.define(\"children\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this._children.map(function (c) {\r\n          if (\r\n            c instanceof SVGLayer &&\r\n            c.children.length === 1 &&\r\n            _.startsWith(c.name, \".\")\r\n          ) {\r\n            return c.children[0];\r\n          } else {\r\n            return c;\r\n          }\r\n        });\r\n      },\r\n    });\r\n\r\n    this.define(\"siblings\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        // If there is no parent we need to walk through the root\r\n        if (this.parent === null) {\r\n          return _.filter(this._context.layers, (layer) => {\r\n            return layer !== this && layer.parent === null;\r\n          });\r\n        }\r\n\r\n        return _.without(this.parent.children, this);\r\n      },\r\n    });\r\n\r\n    this.define(\"descendants\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        const result = [];\r\n\r\n        var f = function (layer) {\r\n          result.push(layer);\r\n          return layer.children.map(f);\r\n        };\r\n\r\n        this.children.map(f);\r\n\r\n        return result;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Backwards superLayer and children compatibility\r\n\r\n    this.define(\"superLayer\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.parent;\r\n      },\r\n      set(value) {\r\n        return (this.parent = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"subLayers\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.children;\r\n      },\r\n    });\r\n\r\n    this.define(\"siblingLayers\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.siblings;\r\n      },\r\n    });\r\n\r\n    this.define(\"isAnimating\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this.animations().length !== 0;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# STATES\r\n\r\n    this.define(\"states\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        if (this._states == null) {\r\n          this._states = new LayerStates(this);\r\n        }\r\n        return this._states;\r\n      },\r\n      set(states) {\r\n        this.states.machine.reset();\r\n        return _.extend(this.states, states);\r\n      },\r\n    });\r\n\r\n    this.define(\"stateNames\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.states.machine.stateNames;\r\n      },\r\n    });\r\n\r\n    //############################################################################\r\n    //# Draggable, Pinchable\r\n\r\n    this.define(\"draggable\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._draggable != null\r\n          ? this._draggable\r\n          : (this._draggable = new LayerDraggable(this));\r\n      },\r\n      set(value) {\r\n        if (_.isBoolean(value)) {\r\n          return (this.draggable.enabled = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"pinchable\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._pinchable != null\r\n          ? this._pinchable\r\n          : (this._pinchable = new LayerPinchable(this));\r\n      },\r\n      set(value) {\r\n        if (_.isBoolean(value)) {\r\n          return (this.pinchable.enabled = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# SCROLLING\r\n\r\n    this.define(\"scrollFrame\", {\r\n      importable: false,\r\n      get() {\r\n        let frame;\r\n        return (frame = {\r\n          x: this.scrollX,\r\n          y: this.scrollY,\r\n          width: this.width,\r\n          height: this.height,\r\n        });\r\n      },\r\n      set(frame) {\r\n        this.scrollX = frame.x;\r\n        return (this.scrollY = frame.y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollX\", {\r\n      get() {\r\n        return this._element.scrollLeft;\r\n      },\r\n      set(value) {\r\n        if (!_.isNumber(value)) {\r\n          layerValueTypeError(\"scrollX\", value);\r\n        }\r\n        return (this._element.scrollLeft = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollY\", {\r\n      get() {\r\n        return this._element.scrollTop;\r\n      },\r\n      set(value) {\r\n        if (!_.isNumber(value)) {\r\n          layerValueTypeError(\"scrollY\", value);\r\n        }\r\n        return (this._element.scrollTop = value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# EVENTS\r\n\r\n    this.define(\"_domEventManager\", {\r\n      get() {\r\n        return this._context.domEventManager.wrap(this._element);\r\n      },\r\n    });\r\n\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n  }\r\n\r\n  constructor(options) {\r\n    // Make sure we never call the constructor twice\r\n    this.parentChanged = this.parentChanged.bind(this);\r\n    this._layoutX = this._layoutX.bind(this);\r\n    this._layoutY = this._layoutY.bind(this);\r\n    this.layout = this.layout.bind(this);\r\n    this.convertPointToScreen = this.convertPointToScreen.bind(this);\r\n    this.convertPointToCanvas = this.convertPointToCanvas.bind(this);\r\n    this.convertPointToLayer = this.convertPointToLayer.bind(this);\r\n    this.updateForDevicePixelRatioChange =\r\n      this.updateForDevicePixelRatioChange.bind(this);\r\n    this.updateForSizeChange = this.updateForSizeChange.bind(this);\r\n    this.once = this.once.bind(this);\r\n    this.addListener = this.addListener.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (this.__constructorCalled) {\r\n      throw Error(`Layer.constructor ${this.toInspect()} called twice`);\r\n    }\r\n    this.__constructorCalled = true;\r\n    this.__constructor = true;\r\n\r\n    // Set needed private variables\r\n    this._properties = {};\r\n    this._style = {};\r\n    this._children = [];\r\n\r\n    if (this._stylesAppliedToParent == null) {\r\n      this._stylesAppliedToParent = [];\r\n    }\r\n\r\n    // Special power setting for 2d rendering path. Only enable this\r\n    // if you know what you are doing. See LayerStyle for more info.\r\n    this._prefer2d = false;\r\n    this._alwaysUseImageCache = false;\r\n\r\n    // Private setting for canceling of click event if wrapped in moved draggable\r\n    this._cancelClickEventInDragSession = true;\r\n\r\n    // We have to create the element before we set the defaults\r\n    this._createElement();\r\n\r\n    if (options.createHTMLElement) {\r\n      this._createHTMLElementIfNeeded();\r\n    }\r\n\r\n    // Create border element\r\n    this._createBorderElement();\r\n\r\n    // Sanitize calculated property setters so direct properties always win\r\n    layerPropertyIgnore(options, \"point\", [\"x\", \"y\"]);\r\n    layerPropertyIgnore(options, \"midPoint\", [\"midX\", \"midY\"]);\r\n    layerPropertyIgnore(options, \"size\", [\"width\", \"height\"]);\r\n    layerPropertyIgnore(options, \"frame\", [\"x\", \"y\", \"width\", \"height\"]);\r\n\r\n    // Backwards compatibility for superLayer\r\n    if (\r\n      !options.hasOwnProperty(\"parent\") &&\r\n      options.hasOwnProperty(\"superLayer\")\r\n    ) {\r\n      options.parent = options.superLayer;\r\n      delete options.superLayer;\r\n    }\r\n\r\n    this.__applyingDefaults = true;\r\n    super(Defaults.getDefaults(\"Layer\", options));\r\n    delete this.__applyingDefaults;\r\n\r\n    for (var cssProperty of Array.from(delayedStyles)) {\r\n      var element = this._element;\r\n      if (Array.from(this._stylesAppliedToParent).includes(cssProperty)) {\r\n        element = this._parent._element;\r\n      }\r\n      element.style[cssProperty] = LayerStyle[cssProperty](this);\r\n    }\r\n\r\n    // Add this layer to the current context\r\n    this._context.addLayer(this);\r\n    this._id = this._context.layerCounter;\r\n\r\n    // Insert the layer into the dom or the parent element\r\n    if (!options.parent) {\r\n      if (!options.shadow) {\r\n        this._insertElement();\r\n      }\r\n    } else {\r\n      this.parent = options.parent;\r\n    }\r\n\r\n    // Set some calculated properties\r\n    // Make sure we set the right index\r\n    if (options.hasOwnProperty(\"index\")) {\r\n      this.index = options.index;\r\n    }\r\n\r\n    // x and y always win from point, frame or size\r\n    for (var p of [\"x\", \"y\", \"width\", \"height\"]) {\r\n      if (options.hasOwnProperty(p)) {\r\n        this[p] = options[p];\r\n      }\r\n    }\r\n\r\n    this._context.emit(\"layer:create\", this);\r\n\r\n    // Make sure the layer is always centered\r\n    this.label = this.label;\r\n\r\n    delete this.__constructor;\r\n\r\n    this.updateShadowStyle();\r\n\r\n    this.onChange(\"size\", this.updateForSizeChange);\r\n  }\r\n\r\n  static ExistingIdMessage(type, id) {\r\n    return `Can not set ${type}: There's already an element with id '${id}' in this document'`;\r\n  }\r\n\r\n  updateShadowsProperty(prop, value) {\r\n    if (this.shadows == null) {\r\n      this.shadows = [];\r\n    }\r\n    if (this.shadows.filter((s) => s !== null).length === 0) {\r\n      this.shadows[0] = proxiedShadowValue(this, Framer.Defaults.Shadow);\r\n    }\r\n    for (var shadow of Array.from(this.shadows)) {\r\n      if (shadow != null) {\r\n        shadow[prop] = value;\r\n      }\r\n    }\r\n    return this.updateShadowStyle();\r\n  }\r\n\r\n  updateShadowStyle() {\r\n    if (this.__constructor) {\r\n      return;\r\n    }\r\n    this._element.style.boxShadow = LayerStyle[\"boxShadow\"](this);\r\n    this._element.style.textShadow = LayerStyle[\"textShadow\"](this);\r\n    return (this._element.style.webkitFilter =\r\n      LayerStyle[\"webkitFilter\"](this));\r\n  }\r\n\r\n  //#############################################################\r\n  // Geometry\r\n\r\n  _setGeometryValues(input, keys) {\r\n    // If this is a number, we set everything to that number\r\n    if (_.isNumber(input)) {\r\n      return (() => {\r\n        const result = [];\r\n        for (var k of Array.from(keys)) {\r\n          if (this[k] !== input) {\r\n            result.push((this[k] = input));\r\n          } else {\r\n            result.push(undefined);\r\n          }\r\n        }\r\n        return result;\r\n      })();\r\n    } else {\r\n      // If there is nothing to work with we exit\r\n      if (!input) {\r\n        return;\r\n      }\r\n\r\n      // Set every numeric value for eacht key\r\n      return (() => {\r\n        const result1 = [];\r\n        for (var k of Array.from(keys)) {\r\n          if (_.isNumber(input[k]) && this[k] !== input[k]) {\r\n            result1.push((this[k] = input[k]));\r\n          } else {\r\n            result1.push(undefined);\r\n          }\r\n        }\r\n        return result1;\r\n      })();\r\n    }\r\n  }\r\n\r\n  parentChanged(newParent, oldParent) {\r\n    if (oldParent != null) {\r\n      oldParent.off(\"change:width\", this.layout);\r\n      oldParent.off(\"change:height\", this.layout);\r\n    } else {\r\n      Screen.off(\"resize\", this.layout);\r\n    }\r\n    return (this.constraintValues = null);\r\n  }\r\n\r\n  setParentPreservingConstraintValues(parent) {\r\n    const tmp = this.constraintValues;\r\n    this.parent = parent;\r\n    this.constraintValues = tmp;\r\n    return this.layout();\r\n  }\r\n\r\n  _layoutX() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.x = Utils.calculateLayoutX(\r\n      parentFrame,\r\n      this.constraintValues,\r\n      this.width\r\n    );\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  _layoutY() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.y = Utils.calculateLayoutY(\r\n      parentFrame,\r\n      this.constraintValues,\r\n      this.height\r\n    );\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  layout() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.frame = Utils.calculateLayoutFrame(parentFrame, this);\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  convertPointToScreen(point) {\r\n    return Utils.convertPointToContext(point, this, false);\r\n  }\r\n\r\n  convertPointToCanvas(point) {\r\n    return Utils.convertPointToContext(point, this, true);\r\n  }\r\n\r\n  convertPointToLayer(point, layer, rootContext) {\r\n    if (rootContext == null) {\r\n      rootContext = true;\r\n    }\r\n    return Utils.convertPoint(point, this, layer, rootContext);\r\n  }\r\n\r\n  contentFrame() {\r\n    if (!this._children.length) {\r\n      return { x: 0, y: 0, width: 0, height: 0 };\r\n    }\r\n    return Utils.frameMerge(_.map(this._children, \"frame\"));\r\n  }\r\n\r\n  totalFrame() {\r\n    return Utils.frameMerge(this.frame, this.contentFrame());\r\n  }\r\n\r\n  centerFrame() {\r\n    // Get the centered frame for its parent\r\n    let frame;\r\n    if (this.parent) {\r\n      ({ frame } = this);\r\n      Utils.frameSetMidX(\r\n        frame,\r\n        parseInt(this.parent.width / 2.0 - this.parent.borderWidth)\r\n      );\r\n      Utils.frameSetMidY(\r\n        frame,\r\n        parseInt(this.parent.height / 2.0 - this.parent.borderWidth)\r\n      );\r\n      return frame;\r\n    } else {\r\n      ({ frame } = this);\r\n      Utils.frameSetMidX(frame, parseInt(this._context.innerWidth / 2.0));\r\n      Utils.frameSetMidY(frame, parseInt(this._context.innerHeight / 2.0));\r\n      return frame;\r\n    }\r\n  }\r\n\r\n  center() {\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.left = null;\r\n      this.constraintValues.right = null;\r\n      this.constraintValues.top = null;\r\n      this.constraintValues.bottom = null;\r\n      this.constraintValues.centerAnchorX = 0.5;\r\n      this.constraintValues.centerAnchorY = 0.5;\r\n      this._layoutX();\r\n      this._layoutY();\r\n    } else {\r\n      this.frame = this.centerFrame(); // Center  in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  centerX(offset) {\r\n    if (offset == null) {\r\n      offset = 0;\r\n    }\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.left = null;\r\n      this.constraintValues.right = null;\r\n      this.constraintValues.centerAnchorX = 0.5;\r\n      this._layoutX();\r\n    } else {\r\n      this.x = this.centerFrame().x + offset; // Center x in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  centerY(offset) {\r\n    if (offset == null) {\r\n      offset = 0;\r\n    }\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.top = null;\r\n      this.constraintValues.bottom = null;\r\n      this.constraintValues.centerAnchorY = 0.5;\r\n      this._layoutY();\r\n    } else {\r\n      this.y = this.centerFrame().y + offset; // Center y in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  pixelAlign() {\r\n    this.x = parseInt(this.x);\r\n    return (this.y = parseInt(this.y));\r\n  }\r\n\r\n  updateForDevicePixelRatioChange() {\r\n    return [\r\n      \"width\",\r\n      \"height\",\r\n      \"webkitTransform\",\r\n      \"boxShadow\",\r\n      \"textShadow\",\r\n      \"webkitFilter\",\r\n      \"borderRadius\",\r\n      \"borderWidth\",\r\n      \"fontSize\",\r\n      \"letterSpacing\",\r\n      \"wordSpacing\",\r\n      \"textIndent\",\r\n    ].map(\r\n      (cssProperty) =>\r\n        (this._element.style[cssProperty] = LayerStyle[cssProperty](this))\r\n    );\r\n  }\r\n\r\n  updateForSizeChange() {\r\n    return (this._elementBorder.style.borderWidth =\r\n      LayerStyle[\"borderWidth\"](this));\r\n  }\r\n\r\n  //#############################################################\r\n  // SCREEN GEOMETRY\r\n\r\n  // TODO: Rotation/Skew\r\n\r\n  // screenOriginX = ->\r\n  // \tif @_parentOrContext()\r\n  // \t\treturn @_parentOrContext().screenOriginX()\r\n  // \treturn @originX\r\n\r\n  // screenOriginY = ->\r\n  // \tif @_parentOrContext()\r\n  // \t\treturn @_parentOrContext().screenOriginY()\r\n  // \treturn @originY\r\n\r\n  canvasScaleX(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleX;\r\n    }\r\n    for (var parent of Array.from(this.containers(true))) {\r\n      scale *= parent.scale;\r\n      if (parent.scaleX != null) {\r\n        scale *= parent.scaleX;\r\n      }\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  canvasScaleY(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleY;\r\n    }\r\n    for (var parent of Array.from(this.containers(true))) {\r\n      scale *= parent.scale;\r\n      if (parent.scaleY != null) {\r\n        scale *= parent.scaleY;\r\n      }\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaleX(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleX;\r\n    }\r\n    for (var parent of Array.from(this.containers(false))) {\r\n      scale *= parent.scale * parent.scaleX;\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaleY(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleY;\r\n    }\r\n    for (var parent of Array.from(this.containers(false))) {\r\n      scale *= parent.scale * parent.scaleY;\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaledFrame() {\r\n    // TODO: Scroll position\r\n\r\n    const frame = {\r\n      x: 0,\r\n      y: 0,\r\n      width: this.width * this.screenScaleX(),\r\n      height: this.height * this.screenScaleY(),\r\n    };\r\n\r\n    const layers = this.containers(true);\r\n    layers.push(this);\r\n    layers.reverse();\r\n\r\n    for (var parent of Array.from(layers)) {\r\n      var left, left1, left2;\r\n      var p = parentOrContext(parent);\r\n      var factorX =\r\n        (left = __guardMethod__(p, \"screenScaleX\", (o) => o.screenScaleX())) !=\r\n        null\r\n          ? left\r\n          : 1;\r\n      var factorY =\r\n        (left1 = __guardMethod__(p, \"screenScaleY\", (o1) =>\r\n          o1.screenScaleY()\r\n        )) != null\r\n          ? left1\r\n          : 1;\r\n      var layerScaledFrame =\r\n        (left2 =\r\n          typeof parent.scaledFrame === \"function\"\r\n            ? parent.scaledFrame()\r\n            : undefined) != null\r\n          ? left2\r\n          : { x: 0, y: 0 };\r\n      frame.x += layerScaledFrame.x * factorX;\r\n      frame.y += layerScaledFrame.y * factorY;\r\n    }\r\n\r\n    return frame;\r\n  }\r\n\r\n  scaledFrame() {\r\n    // Get the scaled frame for a layer, taking into account\r\n    // the transform origins.\r\n\r\n    const { frame } = this;\r\n    const scaleX = this.scale * this.scaleX;\r\n    const scaleY = this.scale * this.scaleY;\r\n\r\n    frame.width *= scaleX;\r\n    frame.height *= scaleY;\r\n    frame.x += (1 - scaleX) * this.originX * this.width;\r\n    frame.y += (1 - scaleY) * this.originY * this.height;\r\n\r\n    return frame;\r\n  }\r\n\r\n  computedStyle() {\r\n    // This is an expensive operation\r\n\r\n    let { getComputedStyle } = document.defaultView;\r\n    if (getComputedStyle == null) {\r\n      ({ getComputedStyle } = window);\r\n    }\r\n\r\n    return getComputedStyle(this._element);\r\n  }\r\n\r\n  //#############################################################\r\n  // DOM ELEMENTS\r\n\r\n  _createElement() {\r\n    if (this._element != null) {\r\n      return;\r\n    }\r\n    this._element = document.createElement(\"div\");\r\n    return this._element.classList.add(\"framerLayer\");\r\n  }\r\n\r\n  _createBorderElement() {\r\n    if (this._elementBorder != null) {\r\n      return;\r\n    }\r\n    this._elementBorder = document.createElement(\"div\");\r\n    this._elementBorder.style.position = \"absolute\";\r\n    this._elementBorder.style.top = \"0\";\r\n    this._elementBorder.style.bottom = \"0\";\r\n    this._elementBorder.style.left = \"0\";\r\n    this._elementBorder.style.right = \"0\";\r\n    this._elementBorder.style.boxSizing = \"border-box\";\r\n    this._elementBorder.style.zIndex = \"1000\";\r\n    this._elementBorder.style.pointerEvents = \"none\";\r\n    return this._element.appendChild(this._elementBorder);\r\n  }\r\n\r\n  _insertElement() {\r\n    this.bringToFront();\r\n    return this._context.element.appendChild(this._element);\r\n  }\r\n\r\n  // This method is called as soon as the @_element is part of the DOM\r\n  // If layers are initialized before the DOM is complete,\r\n  // the contexts calls this methods on all Layers as soon as it appends itself to the document\r\n  elementInsertedIntoDocument() {}\r\n\r\n  _createHTMLElementIfNeeded() {\r\n    if (!this._elementHTML) {\r\n      this._elementHTML = document.createElement(\"div\");\r\n      return this._element.insertBefore(this._elementHTML, this._elementBorder);\r\n    }\r\n  }\r\n\r\n  _updateHTMLScale() {\r\n    if (this._elementHTML == null) {\r\n      return;\r\n    }\r\n\r\n    if (this.htmlIntrinsicSize == null) {\r\n      return (this._elementHTML.style.zoom = this.context.scale);\r\n    } else {\r\n      this._elementHTML.style.transformOrigin = \"0 0\";\r\n      this._elementHTML.style.transform = `scale(${\r\n        (this.context.scale * this.width) / this.htmlIntrinsicSize.width\r\n      }, ${\r\n        (this.context.scale * this.height) / this.htmlIntrinsicSize.height\r\n      })`;\r\n      this._elementHTML.style.width = `${this.htmlIntrinsicSize.width}px`;\r\n      return (this._elementHTML.style.height = `${this.htmlIntrinsicSize.height}px`);\r\n    }\r\n  }\r\n\r\n  querySelector(query) {\r\n    return this._element.querySelector(query);\r\n  }\r\n  querySelectorAll(query) {\r\n    return this._element.querySelectorAll(query);\r\n  }\r\n\r\n  selectChild(selector) {\r\n    return Utils.findLayer(this.descendants, selector);\r\n  }\r\n\r\n  selectAllChildren(selector) {\r\n    return Utils.filterLayers(this.descendants, selector);\r\n  }\r\n\r\n  static select(selector) {\r\n    return Framer.CurrentContext.selectLayer(selector);\r\n  }\r\n\r\n  static selectAll(selector) {\r\n    return Framer.CurrentContext.selectAllLayers(selector);\r\n  }\r\n\r\n  destroy() {\r\n    // Todo: check this\r\n\r\n    if (this.parent) {\r\n      this.parent._children = _.without(this.parent._children, this);\r\n    }\r\n\r\n    if (this._element.parentNode != null) {\r\n      this._element.parentNode.removeChild(this._element);\r\n    }\r\n    this.removeAllListeners();\r\n\r\n    this._context.removeLayer(this);\r\n    this._context.emit(\"layer:destroy\", this);\r\n    return this._context.domEventManager.remove(this._element);\r\n  }\r\n\r\n  //#############################################################\r\n  //# COPYING\r\n\r\n  copy() {\r\n    const layer = this.copySingle();\r\n\r\n    for (var child of Array.from(this._children)) {\r\n      var copiedChild = child.copy();\r\n      if (copiedChild !== null) {\r\n        copiedChild.parent = layer;\r\n      }\r\n    }\r\n\r\n    return layer;\r\n  }\r\n\r\n  copySingle() {\r\n    const copy = new this.constructor(this.props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n\r\n  //#############################################################\r\n  //# IMAGE\r\n\r\n  _cleanupImageLoader() {\r\n    if (this._imageEventManager != null) {\r\n      this._imageEventManager.removeAllListeners();\r\n    }\r\n    this._imageEventManager = null;\r\n    return (this._imageLoader = null);\r\n  }\r\n\r\n  addChild(layer) {\r\n    return (layer.parent = this);\r\n  }\r\n\r\n  removeChild(layer) {\r\n    if (!Array.from(this._children).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    return (layer.parent = null);\r\n  }\r\n\r\n  childrenWithName(name) {\r\n    return _.filter(this.children, (layer) => layer.name === name);\r\n  }\r\n\r\n  siblingsWithName(name) {\r\n    return _.filter(this.siblingLayers, (layer) => layer.name === name);\r\n  }\r\n\r\n  // Get all containers of this layer, including containing contexts\r\n  // `toRoot` specifies if you want to bubble up across contexts,\r\n  // so specifiying `false` will stop at the first context\r\n  // and thus the results will never contain any context\r\n  containers(toRoot, result) {\r\n    if (toRoot == null) {\r\n      toRoot = false;\r\n    }\r\n    if (result == null) {\r\n      result = [];\r\n    }\r\n    if (this.parent != null) {\r\n      result.push(this.parent);\r\n      return this.parent.containers(toRoot, result);\r\n    } else if (toRoot) {\r\n      result.push(this.context);\r\n      return this.context.containers(true, result);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  ancestors() {\r\n    return this.containers();\r\n  }\r\n\r\n  root() {\r\n    if (this.parent === null) {\r\n      return this;\r\n    }\r\n    return _.last(this.ancestors());\r\n  }\r\n\r\n  childrenAbove(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).y < point.y\r\n    );\r\n  }\r\n  childrenBelow(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).y > point.y\r\n    );\r\n  }\r\n  childrenLeft(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).x < point.x\r\n    );\r\n  }\r\n  childrenRight(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).x > point.x\r\n    );\r\n  }\r\n\r\n  _parentOrContext() {\r\n    if (this.parent) {\r\n      return this.parent;\r\n    }\r\n    if (this._context._parent) {\r\n      return this._context._parent;\r\n    }\r\n  }\r\n\r\n  addSubLayer(layer) {\r\n    return this.addChild(layer);\r\n  }\r\n  removeSubLayer(layer) {\r\n    return this.removeChild(layer);\r\n  }\r\n  subLayersByName(name) {\r\n    return this.childrenWithName(name);\r\n  }\r\n  siblingLayersByName(name) {\r\n    return this.siblingsWithName(name);\r\n  }\r\n  subLayersAbove(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenAbove(point, originX, originY);\r\n  }\r\n  subLayersBelow(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenBelow(point, originX, originY);\r\n  }\r\n  subLayersLeft(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenLeft(point, originX, originY);\r\n  }\r\n  subLayersRight(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenRight(point, originX, originY);\r\n  }\r\n\r\n  //#############################################################\r\n  //# ANIMATION\r\n\r\n  animate(properties, options) {\r\n    // If the properties are a string, we assume it's a state name\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (_.isString(properties)) {\r\n      const stateName = properties;\r\n\r\n      // Support options as an object\r\n      if (options.options != null) {\r\n        ({ options } = options);\r\n      }\r\n\r\n      return this.states.machine.switchTo(stateName, options);\r\n    }\r\n    // We need to clone the properties so we don't modify them unexpectedly\r\n    properties = _.clone(properties);\r\n\r\n    // Support the old properties syntax, we add all properties top level and\r\n    // move the options into an options property.\r\n    if (properties.properties != null) {\r\n      options = properties;\r\n      ({ properties } = options);\r\n      delete options.properties;\r\n    }\r\n\r\n    // With the new api we treat the properties as animatable properties, and use\r\n    // the special options keyword for animation options.\r\n    if (properties.options != null) {\r\n      options = _.defaults({}, options, properties.options);\r\n      delete properties.options;\r\n    }\r\n\r\n    // Merge the animation options with the default animation options for this layer\r\n    options = _.defaults({}, options, this.animationOptions);\r\n    if (options.start == null) {\r\n      options.start = true;\r\n    }\r\n\r\n    const animation = new Animation(this, properties, options);\r\n    if (options.start) {\r\n      animation.start();\r\n    }\r\n\r\n    return animation;\r\n  }\r\n\r\n  stateCycle(...args) {\r\n    let options;\r\n    const states = _.flatten(args);\r\n    if (_.isObject(_.last(states))) {\r\n      options = states.pop();\r\n    }\r\n    return this.animate(this.states.machine.next(states), options);\r\n  }\r\n\r\n  stateSwitch(stateName, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (stateName == null) {\r\n      throw new Error(\"Missing required argument 'stateName' in stateSwitch()\");\r\n    }\r\n    if (options.animate === true) {\r\n      return this.animate(stateName, options);\r\n    }\r\n    return this.animate(stateName, _.defaults({}, options, { instant: true }));\r\n  }\r\n\r\n  animations(includePending) {\r\n    // Current running animations on this layer\r\n    if (includePending == null) {\r\n      includePending = false;\r\n    }\r\n    return _.filter(this._context.animations, (animation) => {\r\n      if (animation.layer !== this) {\r\n        return false;\r\n      }\r\n      return includePending || !animation.isPending;\r\n    });\r\n  }\r\n\r\n  animatingProperties() {\r\n    const properties = {};\r\n\r\n    for (var animation of Array.from(this.animations())) {\r\n      for (var propertyName of Array.from(animation.animatingProperties())) {\r\n        properties[propertyName] = animation;\r\n      }\r\n    }\r\n\r\n    return properties;\r\n  }\r\n\r\n  animateStop() {\r\n    _.invokeMap(this.animations(), \"stop\");\r\n    return this._draggable != null ? this._draggable.animateStop() : undefined;\r\n  }\r\n\r\n  //#############################################################\r\n  //# INDEX ORDERING\r\n\r\n  bringToFront() {\r\n    let maxIndex = null;\r\n    const siblings =\r\n      (this.parent != null ? this.parent._children : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent._children\r\n          : undefined\r\n        : this.context._layers;\r\n    if (siblings.count <= 1) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(siblings)) {\r\n      if (layer === this) {\r\n        continue;\r\n      }\r\n      if (maxIndex == null) {\r\n        maxIndex = layer.index;\r\n      }\r\n      if (layer.index > maxIndex) {\r\n        maxIndex = layer.index;\r\n      }\r\n    }\r\n    if (maxIndex != null) {\r\n      return (this.index = maxIndex + 1);\r\n    }\r\n  }\r\n\r\n  sendToBack() {\r\n    let minIndex = null;\r\n    const siblings =\r\n      (this.parent != null ? this.parent._children : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent._children\r\n          : undefined\r\n        : this.context._layers;\r\n    if (siblings.count <= 1) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(siblings)) {\r\n      if (layer === this) {\r\n        continue;\r\n      }\r\n      if (minIndex == null) {\r\n        minIndex = layer.index;\r\n      }\r\n      if (layer.index < minIndex) {\r\n        minIndex = layer.index;\r\n      }\r\n    }\r\n    if (minIndex != null) {\r\n      return (this.index = minIndex - 1);\r\n    }\r\n  }\r\n\r\n  placeBefore(layer) {\r\n    if (!Array.from(this.siblingLayers).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    for (var l of Array.from(this.siblingLayers)) {\r\n      if (l.index <= layer.index) {\r\n        l.index -= 1;\r\n      }\r\n    }\r\n\r\n    return (this.index = layer.index + 1);\r\n  }\r\n\r\n  placeBehind(layer) {\r\n    if (!Array.from(this.siblingLayers).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    for (var l of Array.from(this.siblingLayers)) {\r\n      if (l.index >= layer.index) {\r\n        l.index += 1;\r\n      }\r\n    }\r\n\r\n    return (this.index = layer.index - 1);\r\n  }\r\n\r\n  emit(eventName, ...args) {\r\n    // If this layer has a parent draggable view and its position moved\r\n    // while dragging we automatically cancel click events. This is what\r\n    // you expect when you add a button to a scroll content layer. We only\r\n    // want to do this if this layer is not draggable itself because that\r\n    // would break nested ScrollComponents.\r\n\r\n    if (this._cancelClickEventInDragSession && !this._draggable) {\r\n      if (\r\n        [\r\n          Events.Click,\r\n          Events.Tap,\r\n          Events.TapStart,\r\n          Events.TapEnd,\r\n          Events.LongPress,\r\n          Events.LongPressStart,\r\n          Events.LongPressEnd,\r\n        ].includes(eventName)\r\n      ) {\r\n        // If we dragged any layer, we should cancel click events\r\n        if (LayerDraggable._globalDidDrag === true) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    // See if we need to convert coordinates for this event. Mouse events by\r\n    // default have the screen coordinates so we make sure that event.point and\r\n    // event.contextPoint always have the proper coordinates.\r\n\r\n    if (\r\n      (args[0] != null ? args[0].clientX : undefined) != null ||\r\n      (args[0] != null ? args[0].clientY : undefined) != null\r\n    ) {\r\n      const event = args[0];\r\n      let point = { x: event.clientX, y: event.clientY };\r\n\r\n      event.point = Utils.convertPointFromContext(point, this, true);\r\n      event.contextPoint = Utils.convertPointFromContext(\r\n        point,\r\n        this.context,\r\n        true\r\n      );\r\n\r\n      if (event.touches != null) {\r\n        for (var touch of Array.from(event.touches)) {\r\n          point = { x: touch.clientX, y: touch.clientY };\r\n          touch.point = Utils.convertPointFromContext(point, this, true);\r\n          touch.contextPoint = Utils.convertPointFromContext(\r\n            point,\r\n            this.context,\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    // Always scope the event this to the layer and pass the layer as\r\n    // last argument for every event.\r\n    return super.emit(eventName, ...Array.from(args), this);\r\n  }\r\n\r\n  once(eventName, listener) {\r\n    super.once(eventName, listener);\r\n    return this._addListener(eventName, listener);\r\n  }\r\n\r\n  addListener(eventName, listener) {\r\n    if (!eventName) {\r\n      throw Error(\"Layer.on needs a valid event name\");\r\n    }\r\n    if (!listener) {\r\n      throw Error(\"Layer.on needs an event listener\");\r\n    }\r\n    super.addListener(eventName, listener);\r\n    return this._addListener(eventName, listener);\r\n  }\r\n\r\n  removeListener(eventName, listener) {\r\n    if (!eventName) {\r\n      throw Error(\"Layer.off needs a valid event name\");\r\n    }\r\n    super.removeListener(eventName, listener);\r\n    return this._removeListener(eventName, listener);\r\n  }\r\n\r\n  _addListener(eventName, listener) {\r\n    // Make sure we stop ignoring events once we add a user event listener\r\n    let needle;\r\n    if (!_.startsWith(eventName, \"change:\")) {\r\n      this.ignoreEvents = false;\r\n    }\r\n\r\n    // If this is a dom event, we want the actual dom node to let us know\r\n    // when it gets triggered, so we can emit the event through the system.\r\n    if (\r\n      Utils.domValidEvent(this._element, eventName) ||\r\n      ((needle = eventName), Array.from(_.values(Gestures)).includes(needle))\r\n    ) {\r\n      if (!this._domEventManager.listeners(eventName).length) {\r\n        return this._domEventManager.addEventListener(eventName, (event) => {\r\n          return this.emit(eventName, event);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _removeListener(eventName, listener) {\r\n    // Do cleanup for dom events if this is the last one of it's type.\r\n    // We are assuming we're the only ones adding dom events to the manager.\r\n    if (!this.listeners(eventName).length) {\r\n      return this._domEventManager.removeAllListeners(eventName);\r\n    }\r\n  }\r\n\r\n  _parentDraggableLayer() {\r\n    for (var layer of Array.from(this.ancestors())) {\r\n      if (layer._draggable != null ? layer._draggable.enabled : undefined) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onClick(cb) {\r\n    return this.on(Events.Click, cb);\r\n  }\r\n  onDoubleClick(cb) {\r\n    return this.on(Events.DoubleClick, cb);\r\n  }\r\n  onScrollStart(cb) {\r\n    return this.on(Events.ScrollStart, cb);\r\n  }\r\n  onScroll(cb) {\r\n    return this.on(Events.Scroll, cb);\r\n  }\r\n  onScrollEnd(cb) {\r\n    return this.on(Events.ScrollEnd, cb);\r\n  }\r\n  onScrollAnimationDidStart(cb) {\r\n    return this.on(Events.ScrollAnimationDidStart, cb);\r\n  }\r\n  onScrollAnimationDidEnd(cb) {\r\n    return this.on(Events.ScrollAnimationDidEnd, cb);\r\n  }\r\n\r\n  onTouchStart(cb) {\r\n    return this.on(Events.TouchStart, cb);\r\n  }\r\n  onTouchEnd(cb) {\r\n    return this.on(Events.TouchEnd, cb);\r\n  }\r\n  onTouchMove(cb) {\r\n    return this.on(Events.TouchMove, cb);\r\n  }\r\n\r\n  onMouseUp(cb) {\r\n    return this.on(Events.MouseUp, cb);\r\n  }\r\n  onMouseDown(cb) {\r\n    return this.on(Events.MouseDown, cb);\r\n  }\r\n  onMouseOver(cb) {\r\n    return this.on(Events.MouseOver, cb);\r\n  }\r\n  onMouseOut(cb) {\r\n    return this.on(Events.MouseOut, cb);\r\n  }\r\n  onMouseEnter(cb) {\r\n    return this.on(Events.MouseEnter, cb);\r\n  }\r\n  onMouseLeave(cb) {\r\n    return this.on(Events.MouseLeave, cb);\r\n  }\r\n  onMouseMove(cb) {\r\n    return this.on(Events.MouseMove, cb);\r\n  }\r\n  onMouseWheel(cb) {\r\n    return this.on(Events.MouseWheel, cb);\r\n  }\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n  onAnimationDidStart(cb) {\r\n    return this.on(Events.AnimationDidStart, cb);\r\n  } // Deprecated\r\n  onAnimationDidStop(cb) {\r\n    return this.on(Events.AnimationDidStop, cb);\r\n  } // Deprecated\r\n  onAnimationDidEnd(cb) {\r\n    return this.on(Events.AnimationDidEnd, cb);\r\n  } // Deprecated\r\n\r\n  onImageLoaded(cb) {\r\n    return this.on(Events.ImageLoaded, cb);\r\n  }\r\n  onImageLoadError(cb) {\r\n    return this.on(Events.ImageLoadError, cb);\r\n  }\r\n  onImageLoadCancelled(cb) {\r\n    return this.on(Events.ImageLoadCancelled, cb);\r\n  }\r\n\r\n  onMove(cb) {\r\n    return this.on(Events.Move, cb);\r\n  }\r\n  onDragStart(cb) {\r\n    return this.on(Events.DragStart, cb);\r\n  }\r\n  onDragWillMove(cb) {\r\n    return this.on(Events.DragWillMove, cb);\r\n  }\r\n  onDragMove(cb) {\r\n    return this.on(Events.DragMove, cb);\r\n  }\r\n  onDragDidMove(cb) {\r\n    return this.on(Events.DragDidMove, cb);\r\n  }\r\n  onDrag(cb) {\r\n    return this.on(Events.Drag, cb);\r\n  }\r\n  onDragEnd(cb) {\r\n    return this.on(Events.DragEnd, cb);\r\n  }\r\n  onDragAnimationStart(cb) {\r\n    return this.on(Events.DragAnimationStart, cb);\r\n  }\r\n  onDragAnimationEnd(cb) {\r\n    return this.on(Events.DragAnimationEnd, cb);\r\n  }\r\n  onDirectionLockStart(cb) {\r\n    return this.on(Events.DirectionLockStart, cb);\r\n  }\r\n\r\n  onStateSwitchStart(cb) {\r\n    return this.on(Events.StateSwitchStart, cb);\r\n  }\r\n  onStateSwitchStop(cb) {\r\n    return this.on(Events.StateSwitchStop, cb);\r\n  }\r\n  onStateSwitchEnd(cb) {\r\n    return this.on(Events.StateSwitchEnd, cb);\r\n  }\r\n\r\n  onStateWillSwitch(cb) {\r\n    return this.on(Events.StateSwitchStart, cb);\r\n  } // Deprecated\r\n  onStateDidSwitch(cb) {\r\n    return this.on(Events.StateSwitchEnd, cb);\r\n  } // Deprecated\r\n\r\n  // Gestures\r\n\r\n  // Tap\r\n  onTap(cb) {\r\n    return this.on(Events.Tap, cb);\r\n  }\r\n  onTapStart(cb) {\r\n    return this.on(Events.TapStart, cb);\r\n  }\r\n  onTapEnd(cb) {\r\n    return this.on(Events.TapEnd, cb);\r\n  }\r\n  onDoubleTap(cb) {\r\n    return this.on(Events.DoubleTap, cb);\r\n  }\r\n\r\n  // Force Tap\r\n  onForceTap(cb) {\r\n    return this.on(Events.ForceTap, cb);\r\n  }\r\n  onForceTapChange(cb) {\r\n    return this.on(Events.ForceTapChange, cb);\r\n  }\r\n  onForceTapStart(cb) {\r\n    return this.on(Events.ForceTapStart, cb);\r\n  }\r\n  onForceTapEnd(cb) {\r\n    return this.on(Events.ForceTapEnd, cb);\r\n  }\r\n\r\n  // Press\r\n  onLongPress(cb) {\r\n    return this.on(Events.LongPress, cb);\r\n  }\r\n  onLongPressStart(cb) {\r\n    return this.on(Events.LongPressStart, cb);\r\n  }\r\n  onLongPressEnd(cb) {\r\n    return this.on(Events.LongPressEnd, cb);\r\n  }\r\n\r\n  // Swipe\r\n  onSwipe(cb) {\r\n    return this.on(Events.Swipe, cb);\r\n  }\r\n  onSwipeStart(cb) {\r\n    return this.on(Events.SwipeStart, cb);\r\n  }\r\n  onSwipeEnd(cb) {\r\n    return this.on(Events.SwipeEnd, cb);\r\n  }\r\n\r\n  onSwipeUp(cb) {\r\n    return this.on(Events.SwipeUp, cb);\r\n  }\r\n  onSwipeUpStart(cb) {\r\n    return this.on(Events.SwipeUpStart, cb);\r\n  }\r\n  onSwipeUpEnd(cb) {\r\n    return this.on(Events.SwipeUpEnd, cb);\r\n  }\r\n\r\n  onSwipeDown(cb) {\r\n    return this.on(Events.SwipeDown, cb);\r\n  }\r\n  onSwipeDownStart(cb) {\r\n    return this.on(Events.SwipeDownStart, cb);\r\n  }\r\n  onSwipeDownEnd(cb) {\r\n    return this.on(Events.SwipeDownEnd, cb);\r\n  }\r\n\r\n  onSwipeLeft(cb) {\r\n    return this.on(Events.SwipeLeft, cb);\r\n  }\r\n  onSwipeLeftStart(cb) {\r\n    return this.on(Events.SwipeLeftStart, cb);\r\n  }\r\n  onSwipeLeftEnd(cb) {\r\n    return this.on(Events.SwipeLeftEnd, cb);\r\n  }\r\n\r\n  onSwipeRight(cb) {\r\n    return this.on(Events.SwipeRight, cb);\r\n  }\r\n  onSwipeRightStart(cb) {\r\n    return this.on(Events.SwipeRightStart, cb);\r\n  }\r\n  onSwipeRightEnd(cb) {\r\n    return this.on(Events.SwipeRightEnd, cb);\r\n  }\r\n\r\n  // Pan\r\n  onPan(cb) {\r\n    return this.on(Events.Pan, cb);\r\n  }\r\n  onPanStart(cb) {\r\n    return this.on(Events.PanStart, cb);\r\n  }\r\n  onPanEnd(cb) {\r\n    return this.on(Events.PanEnd, cb);\r\n  }\r\n  onPanLeft(cb) {\r\n    return this.on(Events.PanLeft, cb);\r\n  }\r\n  onPanRight(cb) {\r\n    return this.on(Events.PanRight, cb);\r\n  }\r\n  onPanUp(cb) {\r\n    return this.on(Events.PanUp, cb);\r\n  }\r\n  onPanDown(cb) {\r\n    return this.on(Events.PanDown, cb);\r\n  }\r\n\r\n  // Pinch\r\n  onPinch(cb) {\r\n    return this.on(Events.Pinch, cb);\r\n  }\r\n  onPinchStart(cb) {\r\n    return this.on(Events.PinchStart, cb);\r\n  }\r\n  onPinchEnd(cb) {\r\n    return this.on(Events.PinchEnd, cb);\r\n  }\r\n\r\n  // Scale\r\n  onScale(cb) {\r\n    return this.on(Events.Scale, cb);\r\n  }\r\n  onScaleStart(cb) {\r\n    return this.on(Events.ScaleStart, cb);\r\n  }\r\n  onScaleEnd(cb) {\r\n    return this.on(Events.ScaleEnd, cb);\r\n  }\r\n\r\n  // Rotate\r\n  onRotate(cb) {\r\n    return this.on(Events.Rotate, cb);\r\n  }\r\n  onRotateStart(cb) {\r\n    return this.on(Events.RotateStart, cb);\r\n  }\r\n  onRotateEnd(cb) {\r\n    return this.on(Events.RotateEnd, cb);\r\n  }\r\n\r\n  //#############################################################\r\n  //# HINT\r\n\r\n  _showHint(targetLayer) {\r\n    // If this layer isnt visible we can just exit\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n    if (this.opacity === 0) {\r\n      return;\r\n    }\r\n\r\n    // If we don't need to show a hint exit but pass to children\r\n    if (!this.shouldShowHint(targetLayer)) {\r\n      for (var layer of Array.from(this.children)) {\r\n        layer._showHint(targetLayer);\r\n      }\r\n      return null;\r\n    }\r\n\r\n    // Figure out the frame we want to show the hint in, if any of the\r\n    // parent layers clip, we need to intersect the rectangle with it.\r\n    let frame = this.canvasFrame;\r\n\r\n    for (var parent of Array.from(this.ancestors())) {\r\n      if (parent.clip) {\r\n        frame = Utils.frameIntersection(frame, parent.canvasFrame);\r\n      }\r\n      if (!frame) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Show the actual hint\r\n    this.showHint(frame);\r\n\r\n    // Tell the children to show their hints\r\n    return _.invokeMap(this.children, \"_showHint\");\r\n  }\r\n\r\n  willSeemToDoSomething() {\r\n    if (this.ignoreEvents) {\r\n      return false;\r\n    }\r\n\r\n    if (this._draggable) {\r\n      if (\r\n        this._draggable.isDragging === false &&\r\n        this._draggable.isMoving === false\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  shouldShowHint() {\r\n    // Don't show hints if the layer is not interactive\r\n    if (this.ignoreEvents === true) {\r\n      return false;\r\n    }\r\n\r\n    // Don't show any hints while we are animating\r\n    if (this.isAnimating) {\r\n      return false;\r\n    }\r\n\r\n    for (var parent of Array.from(this.ancestors())) {\r\n      if (parent.isAnimating) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Don't show hints if there is a draggable that cannot be dragged.\r\n    if (\r\n      this._draggable &&\r\n      this._draggable.horizontal === false &&\r\n      this._draggable.vertical === false\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    // Don't show hint if this layer is invisible\r\n    if (this.opacity === 0) {\r\n      return false;\r\n    }\r\n\r\n    // If we don't ignore events on this layer, make sure the layer is listening to\r\n    // an interactive event so there is a decent change something is happening after\r\n    // we click it.\r\n\r\n    for (var eventName of Array.from(this.listenerEvents())) {\r\n      if (Events.isInteractive(eventName)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  showHint(highlightFrame) {\r\n    // Don't show anything if this element covers the entire screen\r\n    // if Utils.frameInFrame(@context.canvasFrame, highlightFrame)\r\n    //\treturn\r\n\r\n    // Start an animation with a rectangle fading out over time\r\n    const layer = new Layer({\r\n      frame: Utils.frameInset(highlightFrame, -1),\r\n      backgroundColor: null,\r\n      borderColor: Framer.Defaults.Hints.color,\r\n      borderRadius:\r\n        this.borderRadius *\r\n        Utils.average([this.canvasScaleX(), this.canvasScaleY()]),\r\n      borderWidth: 3,\r\n    });\r\n\r\n    // Only show outlines for draggables\r\n    if (this._draggable) {\r\n      layer.backgroundColor = null;\r\n    }\r\n\r\n    // Only show outlines if a highlight is fullscreen\r\n    if (Utils.frameInFrame(this.context.canvasFrame, highlightFrame)) {\r\n      layer.backgroundColor = null;\r\n    }\r\n\r\n    const animation = layer.animate({\r\n      properties: { opacity: 0 },\r\n      curve: \"ease-out\",\r\n      time: 0.5,\r\n    });\r\n\r\n    return animation.onAnimationEnd(() => layer.destroy());\r\n  }\r\n\r\n  //#############################################################\r\n  //# DESCRIPTOR\r\n\r\n  toName() {\r\n    if (this.name) {\r\n      return name;\r\n    }\r\n    return (\r\n      (this.__framerInstanceInfo != null\r\n        ? this.__framerInstanceInfo.name\r\n        : undefined) || \"\"\r\n    );\r\n  }\r\n\r\n  toInspect(constructor) {\r\n    if (constructor == null) {\r\n      constructor = this.constructor.name;\r\n    }\r\n    const name = this.name ? `name:${this.name} ` : \"\";\r\n    return `<${constructor} ${this.toName()} id:${this.id} ${name} \\\r\n(${Utils.roundWhole(this.x)}, ${Utils.roundWhole(this.y)}) \\\r\n${Utils.roundWhole(this.width)}x${Utils.roundWhole(this.height)}>`;\r\n  }\r\n}\r\n\r\nLayer.initClass();\r\n\r\nfunction __guardMethod__(obj, methodName, transform) {\r\n  if (\r\n    typeof obj !== \"undefined\" &&\r\n    obj !== null &&\r\n    typeof obj[methodName] === \"function\"\r\n  ) {\r\n    return transform(obj, methodName);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n","import { Layer } from \"./Layer\";\r\n\r\n`\\\r\nTodo: make it work in a parent layer\\\r\n`;\r\n\r\nexport class BackgroundLayer extends Layer {\r\n  constructor(options) {\r\n    this.layout = this.layout.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (options.backgroundColor == null) {\r\n      options.backgroundColor = \"#fff\";\r\n    }\r\n    console.warn(\r\n      `BackgroundLayer is deprecated, please use\\n\\nScreen.backgroundColor = \\\"${options.backgroundColor}\\\"\\n\\ninstead.`\r\n    );\r\n\r\n    super(options);\r\n\r\n    this.sendToBack();\r\n    this.layout();\r\n    this._context.domEventManager\r\n      .wrap(window)\r\n      .addEventListener(\"resize\", this.layout);\r\n    if (Framer.Device != null) {\r\n      Framer.Device.on(\"change:orientation\", this.layout);\r\n    }\r\n  }\r\n\r\n  layout() {\r\n    if (this.parent) {\r\n      return (this.frame = this.parent.frame);\r\n    } else {\r\n      return (this.frame = this._context.frame);\r\n    }\r\n  }\r\n}\r\n","import { Layer } from \"./Layer.js\";\r\n\r\nexport class VideoLayer extends Layer {\r\n  constructor(options = {}) {\r\n    // Create video element before adding options\r\n    super(options);\r\n\r\n    this.player = document.createElement(\"video\");\r\n    this.player.setAttribute(\"webkit-playsinline\", \"true\");\r\n    this.player.setAttribute(\"playsinline\", \"\");\r\n    this.player.style.width = \"100%\";\r\n    this.player.style.height = \"100%\";\r\n\r\n    // Wrap with DOM event manager for .on/.off\r\n    this.player.on = this._context?.domEventManager?.wrap(\r\n      this.player\r\n    ).addEventListener;\r\n    this.player.off = this._context?.domEventManager?.wrap(\r\n      this.player\r\n    ).removeEventListener;\r\n\r\n    // Set initial video if provided\r\n    if (options.video) this.video = options.video;\r\n\r\n    // Append player to the layer element\r\n    this._element.appendChild(this.player);\r\n  }\r\n}\r\n\r\nVideoLayer.define(\"video\", {\r\n  get() {\r\n    return this.player.src;\r\n  },\r\n  set(video) {\r\n    this.player.src = video;\r\n  },\r\n});\r\n","import { LayerStyle } from \"./LayerStyle\";\r\nimport { Layer, layerProperty } from \"./Layer\";\r\nimport Utils from \"./Utils\";\r\n\r\nlet _svgMeasureElement = null;\r\n\r\nconst denyCopy = () =>\r\n  Utils.throwInStudioOrWarnInProduction(\r\n    \"SVGGroup and SVGPath do not support the `copy` method\"\r\n  );\r\n\r\nconst getSVGMeasureElement = (constraints = {}) => {\r\n  if (!_svgMeasureElement) {\r\n    _svgMeasureElement = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    _svgMeasureElement.id = \"_svgMeasure\";\r\n    Object.assign(_svgMeasureElement.style, {\r\n      position: \"fixed\",\r\n      visibility: \"hidden\",\r\n      top: \"-10000px\",\r\n      left: \"-10000px\",\r\n    });\r\n\r\n    if (!document.body) {\r\n      document.write(_svgMeasureElement.outerHTML);\r\n      _svgMeasureElement = document.getElementById(\"_svgMeasure\");\r\n    } else {\r\n      document.body.appendChild(_svgMeasureElement);\r\n    }\r\n  }\r\n\r\n  while (_svgMeasureElement.firstChild) {\r\n    _svgMeasureElement.removeChild(_svgMeasureElement.lastChild);\r\n  }\r\n\r\n  return _svgMeasureElement;\r\n};\r\n\r\nconst originTransform = (value, layer, name) => {\r\n  const sizeProp =\r\n    name === \"originX\" ? \"width\" : name === \"originY\" ? \"height\" : null;\r\n  if (!sizeProp) return value;\r\n\r\n  const layerSize = layer[sizeProp];\r\n  const svgSize = layer._svgSize[sizeProp];\r\n  if (!(layerSize >= 0) || !(svgSize > 0)) return value;\r\n\r\n  return (layerSize / svgSize) * value;\r\n};\r\n\r\nexport class SVGBaseLayer extends Layer {\r\n  static initClass() {\r\n    this.define(\"parent\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        if (this._parent instanceof SVGLayer) return this._parent.parent;\r\n        return this._parent ?? null;\r\n      },\r\n    });\r\n\r\n    this.define(\"html\", { get: () => this._element.outerHTML || \"\" });\r\n\r\n    this.define(\"width\", { get: () => this._width });\r\n    this.define(\"height\", { get: () => this._height });\r\n    this.define(\r\n      \"originX\",\r\n      layerProperty(\r\n        this,\r\n        \"originX\",\r\n        \"webkitTransformOrigin\",\r\n        0.5,\r\n        Number.isFinite,\r\n        originTransform\r\n      )\r\n    );\r\n    this.define(\r\n      \"originY\",\r\n      layerProperty(\r\n        this,\r\n        \"originY\",\r\n        \"webkitTransformOrigin\",\r\n        0.5,\r\n        Number.isFinite,\r\n        originTransform\r\n      )\r\n    );\r\n\r\n    // Disabled properties\r\n    this.undefine([\r\n      \"label\",\r\n      \"blending\",\r\n      \"image\",\r\n      \"blur\",\r\n      \"brightness\",\r\n      \"saturate\",\r\n      \"hueRotate\",\r\n      \"contrast\",\r\n      \"invert\",\r\n      \"grayscale\",\r\n      \"sepia\",\r\n      \"backgroundBlur\",\r\n      \"backgroundBrightness\",\r\n      \"backgroundSaturate\",\r\n      \"backgroundHueRotate\",\r\n      \"backgroundContrast\",\r\n      \"backgroundInvert\",\r\n      \"backgroundGrayscale\",\r\n      \"backgroundSepia\",\r\n      ...Array.from({ length: 9 }, (_, i) => `shadow${i + 1}`),\r\n      \"shadows\",\r\n      \"borderRadius\",\r\n      \"cornerRadius\",\r\n      \"borderStyle\",\r\n      \"constraintValues\",\r\n      \"htmlIntrinsicSize\",\r\n      \"gradient\",\r\n    ]);\r\n\r\n    // Aliases\r\n    this.alias(\"borderColor\", \"stroke\");\r\n    this.alias(\"strokeColor\", \"stroke\");\r\n    this.alias(\"borderWidth\", \"strokeWidth\");\r\n    this.alias(\"backgroundColor\", \"fill\");\r\n    this.alias(\"color\", \"fill\");\r\n\r\n    // Disabled layer tree functions\r\n    [\r\n      \"addChild\",\r\n      \"removeChild\",\r\n      \"addSubLayer\",\r\n      \"removeSubLayer\",\r\n      \"bringToFront\",\r\n      \"sendToBack\",\r\n      \"placeBefore\",\r\n      \"placeBehind\",\r\n    ].forEach((fn) => (this.prototype[fn] = undefined));\r\n  }\r\n\r\n  static alias(propName, proxiedName) {\r\n    return this.define(propName, {\r\n      get() {\r\n        return this[proxiedName];\r\n      },\r\n      set(value) {\r\n        if (!this.__applyingDefaults) this[proxiedName] = value;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.updateForDevicePixelRatioChange =\r\n      this.updateForDevicePixelRatioChange.bind(this);\r\n    this.resetViewbox = this.resetViewbox.bind(this);\r\n\r\n    const { element } = options;\r\n    this._element = element;\r\n    this._elementBorder = element;\r\n    this._elementHTML = element;\r\n    this._parent = options.parent;\r\n\r\n    delete options.parent;\r\n    delete options.element;\r\n\r\n    if (this._parent instanceof SVGLayer) {\r\n      this._stylesAppliedToParent = [\r\n        \"webkitTransform\",\r\n        \"webkitTransformOrigin\",\r\n      ];\r\n      [\r\n        \"x\",\r\n        \"y\",\r\n        \"z\",\r\n        \"scaleX\",\r\n        \"scaleY\",\r\n        \"scaleZ\",\r\n        \"scale\",\r\n        \"skewX\",\r\n        \"skewY\",\r\n        \"skew\",\r\n        \"rotationX\",\r\n        \"rotationY\",\r\n        \"rotationZ\",\r\n        \"force2d\",\r\n        \"originX\",\r\n        \"originY\",\r\n      ].forEach((prop) => {\r\n        if (options[prop] == null) options[prop] = this._parent[prop];\r\n      });\r\n    } else {\r\n      this._pixelMultiplierOverride = 1;\r\n    }\r\n\r\n    let svgLayer = this._parent;\r\n    while (svgLayer && !(svgLayer instanceof SVGLayer))\r\n      svgLayer = svgLayer._parent;\r\n\r\n    this._svgLayer = svgLayer;\r\n    this._svg = svgLayer.svg;\r\n    this._svgSize = svgLayer.size;\r\n\r\n    const pathProps = [\r\n      \"fill\",\r\n      \"stroke\",\r\n      \"stroke-width\",\r\n      \"stroke-linecap\",\r\n      \"stroke-linejoin\",\r\n      \"stroke-miterlimit\",\r\n      \"stroke-opacity\",\r\n      \"stroke-dasharray\",\r\n      \"stroke-dashoffset\",\r\n      \"name\",\r\n      \"opacity\",\r\n    ];\r\n\r\n    Object.assign(\r\n      options,\r\n      this.constructor.attributesFromElement(pathProps, element)\r\n    );\r\n\r\n    // Extract transforms\r\n    if (this._element.transform.baseVal.numberOfItems > 0) {\r\n      let transform,\r\n        indicesToRemove = [];\r\n      options.x ??= 0;\r\n      options.y ??= 0;\r\n      options.rotationZ ??= 0;\r\n\r\n      for (let i = 0; i < this._element.transform.baseVal.numberOfItems; i++) {\r\n        transform = this._element.transform.baseVal.getItem(i);\r\n        const { matrix } = transform;\r\n        switch (transform.type) {\r\n          case 2: // SVG_TRANSFORM_TRANSLATE\r\n            options.x += matrix.e;\r\n            options.y += matrix.f;\r\n            indicesToRemove.push(i);\r\n            break;\r\n          case 4: // SVG_TRANSFORM_ROTATE\r\n            options.rotationZ +=\r\n              -(Math.atan2(matrix.c, matrix.d) / Math.PI) * 180;\r\n            indicesToRemove.push(i);\r\n            break;\r\n        }\r\n      }\r\n\r\n      indicesToRemove\r\n        .reverse()\r\n        .forEach((i) => this._element.transform.baseVal.removeItem(i));\r\n    }\r\n\r\n    this.calculateSize();\r\n    super(options);\r\n    this.resetViewbox();\r\n\r\n    [\r\n      \"frame\",\r\n      \"stroke\",\r\n      \"strokeWidth\",\r\n      \"strokeLinecap\",\r\n      \"strokeLinejoin\",\r\n      \"strokeMiterlimit\",\r\n      \"strokeDasharray\",\r\n      \"strokeDashoffset\",\r\n      \"rotation\",\r\n      \"scale\",\r\n    ].forEach((prop) => this.on(`change:${prop}`, this.resetViewbox));\r\n  }\r\n\r\n  calculateSize() {\r\n    let parent,\r\n      reference,\r\n      measuredElement = null;\r\n    let scaleX = 1,\r\n      scaleY = 1;\r\n    let element = this._element;\r\n\r\n    if (typeof Framer !== \"undefined\" && Framer?.CurrentContext?.elementInDOM) {\r\n      scaleX = this._parent.canvasScaleX();\r\n      scaleY = this._parent.canvasScaleY();\r\n    } else {\r\n      parent = element.parentElement;\r\n      reference = element.nextSibling;\r\n      const svgMeasure = getSVGMeasureElement();\r\n      svgMeasure.appendChild(element);\r\n      measuredElement = svgMeasure.firstChild;\r\n      element = measuredElement;\r\n    }\r\n\r\n    const rect = element.getBoundingClientRect();\r\n    this._width = rect.width / scaleX;\r\n    this._height = rect.height / scaleY;\r\n\r\n    if (measuredElement) {\r\n      if (reference) parent.insertBefore(measuredElement, reference);\r\n      else parent.appendChild(measuredElement);\r\n    }\r\n  }\r\n\r\n  resetViewbox() {\r\n    this._svg.setAttribute(\"viewBox\", `0,0,${this.width},${this.height}`);\r\n    this._svg.removeAttribute(\"viewBox\");\r\n  }\r\n\r\n  updateForDevicePixelRatioChange() {\r\n    [\"width\", \"height\", \"webkitTransform\"].forEach((cssProp) => {\r\n      this._element.style[cssProp] = LayerStyle[cssProp](this);\r\n    });\r\n  }\r\n\r\n  copy() {\r\n    return denyCopy();\r\n  }\r\n  copySingle() {\r\n    return denyCopy();\r\n  }\r\n\r\n  static attributesFromElement(attributes, element) {\r\n    const options = {};\r\n    for (const attribute of attributes) {\r\n      const key = attribute.replace(/-([a-z])/g, (_, char) =>\r\n        char.toUpperCase()\r\n      );\r\n      options[key] = element.getAttribute(attribute);\r\n    }\r\n    return options;\r\n  }\r\n}\r\n\r\nSVGBaseLayer.initClass();\r\n","import { SVGBaseLayer } from \"./SVGBaseLayer\";\r\nimport { SVG } from \"./SVG\";\r\n\r\nconst dasharrayTransform = (value) => {\r\n  if (typeof value === \"string\") {\r\n    let values = value.includes(\",\") ? value.split(\",\") : value.split(\" \");\r\n    return values.map((v) => parseFloat(v.trim())).filter((v) => !isNaN(v));\r\n  }\r\n  return value;\r\n};\r\n\r\nconst dashoffsetTransform = (value) => {\r\n  const v = parseFloat(value);\r\n  return isNaN(v) ? null : v;\r\n};\r\n\r\nexport class SVGPath extends SVGBaseLayer {\r\n  static initClass() {\r\n    const defineProp = (name, validator, transformer, options = {}) =>\r\n      this.define(\r\n        name,\r\n        layerProperty(this, name, name, null, validator, transformer, options)\r\n      );\r\n\r\n    defineProp(\"fill\", SVG.validFill, SVG.toFill);\r\n    defineProp(\"stroke\", SVG.validFill, SVG.toFill);\r\n    defineProp(\"strokeWidth\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeLinecap\", (val) => typeof val === \"string\");\r\n    defineProp(\"strokeLinejoin\", (val) => typeof val === \"string\");\r\n    defineProp(\"strokeMiterlimit\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeOpacity\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeDasharray\", Array.isArray, dasharrayTransform);\r\n    defineProp(\"strokeDashoffset\", Number.isFinite, dashoffsetTransform);\r\n\r\n    // strokeLength\r\n    this.define(\r\n      \"strokeLength\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeLength\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (value, path) => Math.max(0, Math.min(value, path.length)),\r\n        {},\r\n        (path, value) => {\r\n          const strokeStart = path.strokeStart ?? 0;\r\n          let strokeEnd = strokeStart + value;\r\n          if (strokeEnd > path.length) strokeEnd -= path.length;\r\n          Object.assign(path._properties, {\r\n            strokeStart,\r\n            strokeEnd,\r\n            strokeFraction: value / path.length,\r\n          });\r\n          return path.updateStroke();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"strokeFraction\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeFraction\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (value, path) => Math.max(0, Math.min(value, 1)),\r\n        {},\r\n        (path, value) => (path.strokeLength = path.length * value)\r\n      )\r\n    );\r\n\r\n    const strokeStartEndUpdater = (path, value, isStart = true) => {\r\n      const strokeStart = path.strokeStart ?? 0;\r\n      const strokeEnd = path.strokeEnd ?? path.strokeLength;\r\n      if (isStart) {\r\n        const left = strokeEnd ?? path.length;\r\n        path.strokeLength =\r\n          left >= value ? left - value : path.length - value + left;\r\n      } else {\r\n        path.strokeLength =\r\n          value >= strokeStart\r\n            ? value - strokeStart\r\n            : path.length - strokeStart + value;\r\n      }\r\n    };\r\n\r\n    this.define(\r\n      \"strokeStart\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeStart\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (v, p) => Math.max(0, Math.min(v, p.length)),\r\n        {},\r\n        (p, v) => strokeStartEndUpdater(p, v, true)\r\n      )\r\n    );\r\n    this.define(\r\n      \"strokeEnd\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeEnd\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (v, p) => Math.max(0, Math.min(v, p.length)),\r\n        {},\r\n        (p, v) => strokeStartEndUpdater(p, v, false)\r\n      )\r\n    );\r\n\r\n    this.define(\"length\", {\r\n      get() {\r\n        return this._length;\r\n      },\r\n    });\r\n    this.define(\"reversed\", this.simpleProperty(\"reversed\", false));\r\n  }\r\n\r\n  constructor(path, options = {}) {\r\n    super({ element: path, ...options });\r\n\r\n    if (path instanceof SVGPath) path = path.element;\r\n\r\n    if (path instanceof SVGPathElement) {\r\n      this._path = path;\r\n    } else if (path instanceof SVGUseElement) {\r\n      const link = path.getAttribute(\"xlink:href\");\r\n      this._path = this._svg.querySelector(link);\r\n    }\r\n\r\n    this._length = this._path.getTotalLength();\r\n  }\r\n\r\n  updateStroke() {\r\n    const startLength = this.strokeStart ?? 0;\r\n    const endLength = this.strokeEnd ?? this.length;\r\n    let dasharray = [];\r\n    let remaining;\r\n\r\n    if (endLength === startLength) {\r\n      if (startLength) dasharray.push(0, startLength);\r\n      remaining = this.length - endLength;\r\n      if (remaining) dasharray.push(0, remaining);\r\n    } else if (endLength < startLength) {\r\n      const gap = startLength - endLength;\r\n      remaining = this.length - startLength;\r\n      dasharray.push(endLength, gap);\r\n      if (remaining) dasharray.push(remaining, 0);\r\n    } else {\r\n      const length = endLength - startLength;\r\n      remaining = this.length - endLength;\r\n      if (startLength) dasharray.push(0, startLength);\r\n      if (length !== this.length || length !== 0 || startLength === 0) {\r\n        dasharray.push(length);\r\n        if (length !== remaining && remaining) dasharray.push(remaining);\r\n      }\r\n    }\r\n\r\n    if (this.reversed) {\r\n      if (dasharray.length % 2 === 0) dasharray.push(0);\r\n      dasharray.reverse();\r\n    }\r\n\r\n    this.strokeDasharray = dasharray;\r\n  }\r\n\r\n  pointAtFraction(fraction) {\r\n    if (this.reversed) fraction = 1 - fraction;\r\n    return this._path.getPointAtLength(this.length * fraction);\r\n  }\r\n\r\n  rotationAtFraction(fraction, delta = 0.01) {\r\n    if (this.reversed) fraction = 1 - fraction;\r\n    delta = Math.max(delta, 0.01);\r\n    const from = this.pointAtFraction(Math.max(fraction - delta, 0));\r\n    const to = this.pointAtFraction(Math.min(fraction + delta, 1));\r\n    let angle = (Math.atan2(from.y - to.y, from.x - to.x) * 180) / Math.PI - 90;\r\n    if (this.reversed) angle = 360 - angle;\r\n    return angle;\r\n  }\r\n\r\n  start(relativeToLayer = null) {\r\n    const point = this.convertPointToLayer(\r\n      this.pointAtFraction(0),\r\n      relativeToLayer?.parent,\r\n      false\r\n    );\r\n    point.rotation = this.rotationAtFraction(0);\r\n    return point;\r\n  }\r\n\r\n  end(relativeToLayer = null) {\r\n    const point = this.convertPointToLayer(\r\n      this.pointAtFraction(1),\r\n      relativeToLayer?.parent,\r\n      false\r\n    );\r\n    point.rotation = this.rotationAtFraction(1);\r\n    return point;\r\n  }\r\n\r\n  valueUpdater(axis, target, offset) {\r\n    switch (axis) {\r\n      case \"horizontal\":\r\n        offset -= this.pointAtFraction(0).x;\r\n        return (key, value) =>\r\n          (target[key] = offset + this.pointAtFraction(value).x);\r\n      case \"vertical\":\r\n        offset -= this.pointAtFraction(0).y;\r\n        return (key, value) =>\r\n          (target[key] = offset + this.pointAtFraction(value).y);\r\n      case \"angle\":\r\n        offset -= this.rotationAtFraction(0);\r\n        return (key, value, delta = 0) => {\r\n          if (delta === 0) return;\r\n          target[key] = offset + this.rotationAtFraction(value, delta);\r\n        };\r\n    }\r\n  }\r\n}\r\n\r\nSVGPath.initClass();\r\n","import { SVG } from \"./SVG\";\r\nimport { SVGBaseLayer } from \"./SVGBaseLayer\";\r\nimport { SVGPath } from \"./SVGPath\";\r\nimport Utils from \"./Utils\";\r\n\r\nexport class SVGGroup extends SVGBaseLayer {\r\n  static initClass() {\r\n    this.defineGroupProxyProp(\"fill\");\r\n    this.defineGroupProxyProp(\"stroke\");\r\n    this.defineGroupProxyProp(\"strokeWidth\", Number.isFinite, parseInt);\r\n    this.defineGroupProxyProp(\r\n      \"strokeWidthMultiplier\",\r\n      Number.isFinite,\r\n      parseInt\r\n    );\r\n    this.defineGroupProxyProp(\r\n      \"ignoreEvents\",\r\n      (val) => typeof val === \"boolean\",\r\n      (val) => !!val\r\n    );\r\n  }\r\n\r\n  constructor(group, options = {}) {\r\n    options.element = group;\r\n    super(options);\r\n\r\n    const { children, targets } = SVG.constructSVGElements(\r\n      this,\r\n      this._element.childNodes,\r\n      SVGPath,\r\n      SVGGroup\r\n    );\r\n    this._children = children;\r\n    this.elements = targets;\r\n\r\n    SVG.updateGradientSVG(this);\r\n  }\r\n\r\n  static defineGroupProxyProp(\r\n    propertyName,\r\n    validator = SVG.validFill,\r\n    transformer = SVG.toFill\r\n  ) {\r\n    const privateProp = `_${propertyName}`;\r\n\r\n    return this.define(propertyName, {\r\n      get() {\r\n        // Return externally set value if exists\r\n        if (this[privateProp] != null) return this[privateProp];\r\n\r\n        // Check children's values for homogeneous value\r\n        let value = null;\r\n        for (const child of this._children) {\r\n          const childValue = child[propertyName];\r\n          if (value === null) {\r\n            value = childValue;\r\n          } else if (!Utils.equal(childValue, value)) {\r\n            return this[privateProp] ?? null;\r\n          }\r\n        }\r\n\r\n        return value;\r\n      },\r\n\r\n      set(value) {\r\n        if (!validator(value)) value = transformer(value);\r\n        this[privateProp] = validator(value) ? value : null;\r\n\r\n        const persistedValue = this[privateProp];\r\n        this._children.forEach(\r\n          (child) => (child[propertyName] = persistedValue)\r\n        );\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nSVGGroup.initClass();\r\n","import _ from \"./Underscore.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Layer, layerProperty, layerProxiedValue } from \"./Layer.js\";\r\nimport { SVG } from \"./SVG.js\";\r\nimport { SVGGroup } from \"./SVGGroup.js\";\r\nimport { SVGPath } from \"./SVGPath.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\nconst updateIdsToBeUnique = function (htmlString) {\r\n  const ids = Utils.getIdAttributesFromString(htmlString);\r\n  for (var id of Array.from(ids)) {\r\n    var uniqueId = Utils.getUniqueId(id);\r\n    if (id !== uniqueId) {\r\n      id = Utils.escapeForRegex(id);\r\n      htmlString = htmlString.replace(\r\n        new RegExp(`((id|xlink:href)=[\"'']\\\\#?)${id}([\"'])`, \"g\"),\r\n        `$1${uniqueId}$3`\r\n      );\r\n      htmlString = htmlString.replace(\r\n        new RegExp(`([\"'']url\\\\(\\\\#)${id}(\\\\)[\"'])`, \"g\"),\r\n        `$1${uniqueId}$2`\r\n      );\r\n    }\r\n  }\r\n  return htmlString;\r\n};\r\n\r\nexport class SVGLayer extends Layer {\r\n  static initClass() {\r\n    this.define(\"elements\", this.simpleProperty(\"elements\", {}));\r\n\r\n    this.define(\r\n      \"fill\",\r\n      layerProperty(this, \"fill\", \"fill\", null, SVG.validFill, SVG.toFill)\r\n    );\r\n    this.define(\r\n      \"stroke\",\r\n      layerProperty(this, \"stroke\", \"stroke\", null, SVG.validFill, SVG.toFill)\r\n    );\r\n    this.define(\r\n      \"strokeWidthMultiplier\",\r\n      layerProperty(this, \"strokeWidthMultiplier\", null, null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"strokeWidth\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeWidth\",\r\n        \"strokeWidth\",\r\n        null,\r\n        _.isNumber,\r\n        null,\r\n        { depends: [\"strokeWidthMultiplier\"] }\r\n      )\r\n    );\r\n    this.define(\r\n      \"color\",\r\n      layerProperty(\r\n        this,\r\n        \"color\",\r\n        \"color\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        (layer, value) => (layer.fill = value),\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    this.define(\"gradient\", {\r\n      get() {\r\n        if (Gradient.isGradientObject(this._gradient)) {\r\n          return layerProxiedValue(this._gradient, this, \"gradient\");\r\n        }\r\n        return null;\r\n      },\r\n      set(value) {\r\n        // Copy semantics!\r\n        if (Gradient.isGradient(value)) {\r\n          this._gradient = new Gradient(value);\r\n        } else if (!value && Gradient.isGradientObject(this._gradient)) {\r\n          this._gradient = null;\r\n        }\r\n        return SVG.updateGradientSVG(this);\r\n      },\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      get() {\r\n        return this._image;\r\n      },\r\n      set(value) {\r\n        this._image = value;\r\n        return SVG.updateImagePatternSVG(this);\r\n      },\r\n    });\r\n\r\n    this.define(\"imageSize\", {\r\n      importable: true,\r\n      exportable: true,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"imageSize\");\r\n      },\r\n      set(value) {\r\n        if (value === null) {\r\n          return this._setPropertyValue(\"imageSize\", value);\r\n        } else {\r\n          if (!_.isFinite(value.width) || !_.isFinite(value.height)) {\r\n            return;\r\n          }\r\n          this._setPropertyValue(\"imageSize\", {\r\n            width: value.width,\r\n            height: value.height,\r\n          });\r\n          return SVG.updateImagePatternSVG(this);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"svg\", {\r\n      get() {\r\n        const svgNode = _.first(\r\n          this._elementHTML != null ? this._elementHTML.children : undefined\r\n        );\r\n        if (svgNode instanceof SVGElement) {\r\n          return svgNode;\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      set(value) {\r\n        if (typeof value === \"string\") {\r\n          return (this.html = updateIdsToBeUnique(value));\r\n        } else if (value instanceof SVGElement) {\r\n          const idElements = value.querySelectorAll(\"[id]\");\r\n          for (var element of Array.from(idElements)) {\r\n            var existingElement = document.querySelector(\r\n              `[id='${element.id}']`\r\n            );\r\n            if (existingElement != null) {\r\n              Utils.throwInStudioOrWarnInProduction(\r\n                Layer.ExistingIdMessage(\"svg\", element.id)\r\n              );\r\n              return;\r\n            }\r\n          }\r\n          this._createHTMLElementIfNeeded();\r\n          while (this._elementHTML.firstChild) {\r\n            this._elementHTML.removeChild(this._elementHTML.firstChild);\r\n          }\r\n          if (value.parentNode != null) {\r\n            value = value.cloneNode(true);\r\n          }\r\n          return this._elementHTML.appendChild(value);\r\n        }\r\n      },\r\n    });\r\n  }\r\n  constructor(options) {\r\n    // Ugly: detect Vekter export with html intrinsic size\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (options.htmlIntrinsicSize != null && options.backgroundColor != null) {\r\n      // Backwards compatibility for old Vekter exporter that would\r\n      // set backgroundColor instead of color\r\n      if (options.color == null) {\r\n        options.color = options.backgroundColor;\r\n      }\r\n      options.backgroundColor = null;\r\n    }\r\n    if (options.clip == null) {\r\n      options.clip = false;\r\n    }\r\n    if (options.svg != null || options.html != null) {\r\n      if (options.backgroundColor == null) {\r\n        options.backgroundColor = null;\r\n      }\r\n    }\r\n    super(options);\r\n\r\n    const { svg } = this;\r\n    if (svg != null) {\r\n      const { targets, children } = SVG.constructSVGElements(\r\n        this,\r\n        svg.childNodes,\r\n        SVGPath,\r\n        SVGGroup\r\n      );\r\n      this.elements = targets;\r\n      this._children = children;\r\n    } else {\r\n      this.elements = [];\r\n    }\r\n\r\n    SVG.updateImagePatternSVG(this);\r\n    SVG.updateGradientSVG(this);\r\n\r\n    this.onChange(\"backgroundSize\", () => SVG.updateImagePatternSVG(this));\r\n    this.onChange(\"image\", () => SVG.updateImagePatternSVG(this));\r\n  }\r\n\r\n  copy() {\r\n    const layer = this.copySingle();\r\n    return layer;\r\n  }\r\n\r\n  copySingle() {\r\n    const { props } = this;\r\n    if (props.html != null && props.svg != null) {\r\n      delete props.svg;\r\n    }\r\n    props.html = updateIdsToBeUnique(props.html);\r\n    const copy = new this.constructor(props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n}\r\nSVGLayer.initClass();\r\n","let _measureElement = null;\r\n\r\nconst getMeasureElement = function (constraints) {\r\n  if (constraints == null) {\r\n    constraints = {};\r\n  }\r\n  const shouldCreateElement = !_measureElement;\r\n  if (shouldCreateElement) {\r\n    _measureElement = document.createElement(\"div\");\r\n    _measureElement.id = \"_measureElement\";\r\n    _measureElement.style.position = \"fixed\";\r\n    _measureElement.style.visibility = \"hidden\";\r\n    _measureElement.style.top = \"-10000px\";\r\n    _measureElement.style.left = \"-10000px\";\r\n\r\n    // This is a trick to call this function before the document ready event\r\n    if (!window.document.body) {\r\n      document.write(_measureElement.outerHTML);\r\n      _measureElement = document.getElementById(\"_measureElement\");\r\n    } else {\r\n      window.document.body.appendChild(_measureElement);\r\n    }\r\n  }\r\n\r\n  while (_measureElement.hasChildNodes()) {\r\n    _measureElement.removeChild(_measureElement.lastChild);\r\n  }\r\n\r\n  _measureElement.style.width = \"10000px\";\r\n  if (constraints.max) {\r\n    if (constraints.width) {\r\n      _measureElement.style.maxWidth = `${constraints.width}px`;\r\n    }\r\n    if (constraints.height) {\r\n      _measureElement.style.maxHeight = `${constraints.height}px`;\r\n    }\r\n  } else {\r\n    if (constraints.width) {\r\n      _measureElement.style.width = `${constraints.width}px`;\r\n    }\r\n    if (constraints.height) {\r\n      _measureElement.style.height = `${constraints.height}px`;\r\n    }\r\n  }\r\n\r\n  return _measureElement;\r\n};\r\n\r\nclass InlineStyle {\r\n  static initClass() {\r\n    this.prototype.startIndex = 0;\r\n    this.prototype.endIndex = 0;\r\n    this.prototype.css = null;\r\n    this.prototype.text = \"\";\r\n    this.prototype.element = null;\r\n  }\r\n\r\n  constructor(configuration, text) {\r\n    if (_.isString(configuration)) {\r\n      this.text = configuration;\r\n      this.startIndex = 0;\r\n      this.endIndex = this.text.length;\r\n      this.css = text;\r\n    } else {\r\n      this.startIndex = configuration.startIndex;\r\n      this.endIndex = configuration.endIndex;\r\n      this.css = configuration.css;\r\n      this.text = text.substring(this.startIndex, this.endIndex);\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    const c = new InlineStyle(this.text, this.css);\r\n    c.startIndex = this.startIndex;\r\n    c.endIndex = this.endIndex;\r\n    return c;\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      startIndex: this.startIndex,\r\n      endIndex: this.endIndex,\r\n      css: _.clone(this.css),\r\n    };\r\n  }\r\n\r\n  createElement(maybeLineBreak) {\r\n    const span = document.createElement(\"span\");\r\n    for (var prop in this.css) {\r\n      var value = this.css[prop];\r\n      span.style[prop] = value;\r\n    }\r\n    if (this.text === \"\" && maybeLineBreak) {\r\n      span.innerHTML = \"<br/>\";\r\n    } else {\r\n      span.textContent = this.text;\r\n    }\r\n    return span;\r\n  }\r\n\r\n  setText(text) {\r\n    this.text = text;\r\n    return (this.endIndex = this.startIndex + text.length);\r\n  }\r\n\r\n  resetStyle(style) {\r\n    delete this.css[style];\r\n    if (style === \"color\") {\r\n      return delete this.css[\"WebkitTextFillColor\"];\r\n    }\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    this.css[style] = value;\r\n    return this.element != null\r\n      ? (this.element.style[style] = value)\r\n      : undefined;\r\n  }\r\n\r\n  getStyle(style) {\r\n    if (style === \"color\") {\r\n      return this.css[\"color\"] != null\r\n        ? this.css[\"color\"]\r\n        : this.css[\"WebkitTextFillColor\"];\r\n    }\r\n    return this.css[style];\r\n  }\r\n\r\n  measure() {\r\n    const rect = this.element.getBoundingClientRect();\r\n    const size = {\r\n      width: rect.right - rect.left,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n    return size;\r\n  }\r\n\r\n  replaceText(search, replace) {\r\n    let regex = null;\r\n    if (_.isString(search)) {\r\n      regex = new RegExp(Utils.escapeForRegex(search), \"g\");\r\n    } else if (search instanceof RegExp) {\r\n      regex = search;\r\n    }\r\n    if (regex != null) {\r\n      this.text = this.text.replace(regex, replace);\r\n      return (this.endIndex = this.startIndex + this.text.length);\r\n    }\r\n  }\r\n\r\n  addRangesFrom(regex, block, inline, templateRanges) {\r\n    const { text } = this;\r\n    regex.lastIndex = 0;\r\n    while (true) {\r\n      var m = regex.exec(text);\r\n      if (!m) {\r\n        return;\r\n      }\r\n      var name = m[1];\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (templateRanges[name]) {\r\n        continue;\r\n      }\r\n      templateRanges[name] = {\r\n        block,\r\n        inline,\r\n        start: m.index,\r\n        length: m[0].length,\r\n        name,\r\n      };\r\n    }\r\n  }\r\n\r\n  replaceRange(start, length, text) {\r\n    this.text =\r\n      this.text.slice(0, start) + text + this.text.slice(start + length);\r\n    return (this.endIndex = this.startIndex + this.text.length);\r\n  }\r\n\r\n  validate() {\r\n    return (\r\n      this.startIndex !== this.endIndex &&\r\n      this.endIndex === this.startIndex + this.text.length\r\n    );\r\n  }\r\n}\r\nInlineStyle.initClass();\r\n\r\nclass StyledTextBlock {\r\n  static initClass() {\r\n    this.prototype.text = \"\";\r\n    this.prototype.inlineStyles = [];\r\n    this.prototype.element = null;\r\n  }\r\n\r\n  constructor(configuration) {\r\n    const { text } = configuration;\r\n    this.text = text;\r\n    if (configuration.inlineStyles != null) {\r\n      this.inlineStyles = configuration.inlineStyles.map(\r\n        (i) => new InlineStyle(i, text)\r\n      );\r\n    } else if (configuration.css != null) {\r\n      const inlineStyle = new InlineStyle(this.text, configuration.css);\r\n      this.inlineStyles = [inlineStyle];\r\n    } else {\r\n      throw new Error(\"Should specify inlineStyles or css\");\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    const c = new StyledTextBlock({ text: this.text, inlineStyles: [] });\r\n    c.inlineStyles = this.inlineStyles.map((inline) => inline.copy());\r\n    return c;\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      text: this.text,\r\n      inlineStyles: this.inlineStyles.map((i) => i.getOptions()),\r\n    };\r\n  }\r\n\r\n  createElement() {\r\n    const div = document.createElement(\"div\");\r\n    div.style.fontSize = \"1px\";\r\n    div.style.webkitFontSmoothing = \"antialiased\";\r\n    const maybeLineBreak = this.inlineStyles.length === 1;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      var span = style.createElement(maybeLineBreak);\r\n      style.element = span;\r\n      div.appendChild(span);\r\n    }\r\n    return div;\r\n  }\r\n\r\n  measure() {\r\n    let totalWidth = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      totalWidth += style.measure().width;\r\n    }\r\n    const rect = this.element.getBoundingClientRect();\r\n    const size = {\r\n      width: totalWidth,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n    return size;\r\n  }\r\n\r\n  clone() {\r\n    return new StyledTextBlock({\r\n      text: \"\",\r\n      css: _.clone(_.first(this.inlineStyles).css),\r\n    });\r\n  }\r\n\r\n  setText(text) {\r\n    this.text = text;\r\n    const firstStyle = _.first(this.inlineStyles);\r\n    firstStyle.setText(text);\r\n    return (this.inlineStyles = [firstStyle]);\r\n  }\r\n\r\n  setTextOverflow(textOverflow, maxLines) {\r\n    if (maxLines == null) {\r\n      maxLines = 1;\r\n    }\r\n    if ([\"ellipsis\", \"clip\"].includes(textOverflow)) {\r\n      this.setStyle(\"overflow\", \"hidden\");\r\n\r\n      const multiLineOverflow = textOverflow === \"ellipsis\";\r\n      if (multiLineOverflow) {\r\n        this.setStyle(\"WebkitLineClamp\", maxLines);\r\n        this.setStyle(\"WebkitBoxOrient\", \"vertical\");\r\n        return this.setStyle(\"display\", \"-webkit-box\");\r\n      } else {\r\n        this.resetStyle(\"WebkitLineClamp\");\r\n        this.resetStyle(\"WebkitBoxOrient\");\r\n        this.setStyle(\"display\", \"block\");\r\n        this.setStyle(\"whiteSpace\", \"nowrap\");\r\n        return this.setStyle(\"textOverflow\", textOverflow);\r\n      }\r\n    } else {\r\n      this.resetStyle(\"whiteSpace\");\r\n      this.resetStyle(\"textOverflow\");\r\n\r\n      this.resetStyle(\"display\");\r\n      this.resetStyle(\"overflow\");\r\n      this.resetStyle(\"WebkitLineClamp\");\r\n      return this.resetStyle(\"WebkitBoxOrient\");\r\n    }\r\n  }\r\n\r\n  resetStyle(style) {\r\n    return this.inlineStyles.map((inlineStyle) =>\r\n      inlineStyle.resetStyle(style)\r\n    );\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    return this.inlineStyles.map((inlineStyle) =>\r\n      inlineStyle.setStyle(style, value)\r\n    );\r\n  }\r\n\r\n  getStyle(style) {\r\n    return _.first(this.inlineStyles).getStyle(style);\r\n  }\r\n\r\n  getFonts() {\r\n    const fonts = [];\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      var font = style.getStyle(\"fontFamily\");\r\n      if (font != null) {\r\n        fonts.push(font);\r\n      }\r\n    }\r\n    return fonts;\r\n  }\r\n\r\n  replaceText(search, replace) {\r\n    let currentIndex = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      style.startIndex = currentIndex;\r\n      style.replaceText(search, replace);\r\n      currentIndex = style.endIndex;\r\n    }\r\n    const newText = this.inlineStyles.map((i) => i.text).join(\"\");\r\n    this.text = newText;\r\n    return newText !== this.text;\r\n  }\r\n\r\n  addRangesFrom(regex, block, templateRanges) {\r\n    return this.inlineStyles.forEach((inline, index) =>\r\n      inline.addRangesFrom(regex, block, index, templateRanges)\r\n    );\r\n  }\r\n\r\n  replaceRange(inline, start, length, text) {\r\n    let currentIndex = 0;\r\n    for (let index = 0; index < this.inlineStyles.length; index++) {\r\n      var style = this.inlineStyles[index];\r\n      style.startIndex = currentIndex;\r\n      if (index === inline) {\r\n        style.replaceRange(start, length, text);\r\n      }\r\n      currentIndex += style.text.length;\r\n      style.endIndex = currentIndex;\r\n    }\r\n    const newText = this.inlineStyles.map((i) => i.text).join(\"\");\r\n    return (this.text = newText);\r\n  }\r\n\r\n  validate() {\r\n    let combinedText = \"\";\r\n    let currentIndex = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      if (!(currentIndex === style.startIndex)) {\r\n        return false;\r\n      }\r\n      if (!style.validate()) {\r\n        return false;\r\n      }\r\n      currentIndex = style.endIndex;\r\n      combinedText += style.text;\r\n    }\r\n    return this.text === combinedText;\r\n  }\r\n}\r\nStyledTextBlock.initClass();\r\n\r\nexport class StyledText {\r\n  static initClass() {\r\n    this.prototype.blocks = null;\r\n    this.prototype.textAlign = null;\r\n    this.prototype.element = null;\r\n    this.prototype.autoWidth = false;\r\n    this.prototype.autoHeight = false;\r\n    this.prototype.textOverflow = null;\r\n\r\n    this.defaultStyles = {\r\n      fontStyle: \"normal\",\r\n      fontVariantCaps: \"normal\",\r\n      fontWeight: \"normal\",\r\n      fontSize: \"16px\",\r\n      lineHeight: \"normal\",\r\n      fontFamily: \"-apple-system, BlinkMacSystemFont\",\r\n      outline: \"none\",\r\n      whiteSpace: \"pre-wrap\",\r\n      wordWrap: \"break-word\",\r\n    };\r\n  }\r\n\r\n  constructor(configuration) {\r\n    this.textAlign =\r\n      (configuration != null ? configuration.alignment : undefined) != null\r\n        ? configuration != null\r\n          ? configuration.alignment\r\n          : undefined\r\n        : \"left\";\r\n    if ((configuration != null ? configuration.blocks : undefined) != null) {\r\n      this.blocks = configuration.blocks.map((b) => new StyledTextBlock(b));\r\n    } else {\r\n      this.blocks = [];\r\n    }\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      blocks: this.blocks.map((b) => b.getOptions()),\r\n      alignment: this.textAlign,\r\n    };\r\n  }\r\n\r\n  static isStyledText(styledText) {\r\n    return (\r\n      (styledText != null ? styledText.blocks : undefined) != null &&\r\n      (styledText != null ? styledText.alignment : undefined) != null &&\r\n      _.isArray(styledText.blocks) &&\r\n      _.isString(styledText.alignment)\r\n    );\r\n  }\r\n\r\n  setElement(element) {\r\n    let style;\r\n    if (element == null) {\r\n      return;\r\n    }\r\n    this.element = element;\r\n    for (style in StyledText.defaultStyles) {\r\n      var value = StyledText.defaultStyles[style];\r\n      if (!this.element.style[style]) {\r\n        this.element.style[style] = value;\r\n      }\r\n    }\r\n    if (this.textAlign != null && !this.element.style[\"textAlign\"]) {\r\n      return (this.element.style[\"textAlign\"] = this.textAlign);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.element == null) {\r\n      return;\r\n    }\r\n\r\n    while (this.element.hasChildNodes()) {\r\n      this.element.removeChild(this.element.lastChild);\r\n    }\r\n\r\n    return (() => {\r\n      const result = [];\r\n      for (var block of Array.from(this.blocks)) {\r\n        var blockDiv = block.createElement();\r\n        block.element = blockDiv;\r\n        result.push(this.element.appendChild(blockDiv));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  addBlock(text, css = null) {\r\n    let block;\r\n    if (css != null) {\r\n      block = new StyledTextBlock({\r\n        text,\r\n        css,\r\n      });\r\n    } else if (this.blocks.length > 0) {\r\n      block = _.last(this.blocks).clone();\r\n      block.setText(text);\r\n    } else {\r\n      block = new StyledTextBlock({\r\n        text,\r\n        css: {},\r\n      });\r\n    }\r\n\r\n    return this.blocks.push(block);\r\n  }\r\n\r\n  getText() {\r\n    return this.blocks.map((b) => b.text).join(\"\\n\");\r\n  }\r\n\r\n  setText(text) {\r\n    const values = text.split(\"\\n\");\r\n    this.blocks = this.blocks.slice(0, values.length);\r\n    return (() => {\r\n      const result = [];\r\n      for (let index = 0; index < values.length; index++) {\r\n        var value = values[index];\r\n        if (this.blocks[index] != null) {\r\n          var block = this.blocks[index];\r\n          result.push(block.setText(value));\r\n        } else {\r\n          result.push(this.addBlock(value));\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  setTextOverflow(textOverflow) {\r\n    return (this.textOverflow = textOverflow);\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    return this.blocks.map((block) => block.setStyle(style, value));\r\n  }\r\n\r\n  resetStyle(style) {\r\n    return this.blocks.map((block) => block.resetStyle(style));\r\n  }\r\n\r\n  getStyle(style, block = null) {\r\n    let left;\r\n    return (left = __guard__(\r\n      block != null ? block : _.first(this.blocks),\r\n      (x) => x.getStyle(style)\r\n    )) != null\r\n      ? left\r\n      : this.element != null\r\n      ? this.element.style[style]\r\n      : undefined;\r\n  }\r\n\r\n  getFonts() {\r\n    let fonts = [];\r\n    const elementFont =\r\n      this.element != null ? this.element.style[\"fontFamily\"] : undefined;\r\n    if (elementFont != null) {\r\n      fonts.push(elementFont);\r\n    }\r\n    for (var block of Array.from(this.blocks)) {\r\n      fonts = fonts.concat(block.getFonts());\r\n    }\r\n    return _.uniq(fonts);\r\n  }\r\n\r\n  measure(currentSize) {\r\n    const constraints = {};\r\n    constraints.width = currentSize.width * currentSize.multiplier;\r\n    constraints.height = currentSize.height * currentSize.multiplier;\r\n    const m = getMeasureElement(constraints);\r\n    let measuredWidth = 0;\r\n    let measuredHeight = 0;\r\n    const parent = this.element.parentNode;\r\n    m.appendChild(this.element);\r\n    for (var block of Array.from(this.blocks)) {\r\n      var size = block.measure();\r\n      measuredWidth = Math.max(measuredWidth, size.width);\r\n      var constrainedHeight =\r\n        constraints.height != null\r\n          ? constraints.height / currentSize.multiplier\r\n          : null;\r\n      if (\r\n        !this.autoWidth &&\r\n        this.textOverflow != null &&\r\n        [\"clip\", \"ellipsis\"].includes(this.textOverflow) &&\r\n        constrainedHeight != null &&\r\n        measuredHeight + size.height > constrainedHeight\r\n      ) {\r\n        var fontSize = parseFloat(this.getStyle(\"fontSize\", block));\r\n        var lineHeight = parseFloat(this.getStyle(\"lineHeight\", block));\r\n        var availableHeight = constrainedHeight - measuredHeight;\r\n        if (availableHeight > 0) {\r\n          var visibleLines = Math.max(\r\n            1,\r\n            Math.floor(availableHeight / (fontSize * lineHeight))\r\n          );\r\n          block.setTextOverflow(this.textOverflow, visibleLines);\r\n        } else {\r\n          block.setStyle(\"visibility\", \"hidden\");\r\n        }\r\n        size.height = availableHeight;\r\n      } else {\r\n        block.setTextOverflow(null);\r\n      }\r\n      measuredHeight += size.height;\r\n    }\r\n\r\n    m.removeChild(this.element);\r\n    if (parent != null) {\r\n      parent.appendChild(this.element);\r\n    }\r\n    const result = {};\r\n    if (this.autoWidth) {\r\n      result.width = Math.ceil(measuredWidth);\r\n    }\r\n    if (this.autoHeight) {\r\n      result.height = Math.ceil(measuredHeight);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  textReplace(search, replace) {\r\n    return this.blocks.map((b) => b.replaceText(search, replace));\r\n  }\r\n\r\n  // must be called first, calling it repeatedly does nothing, returns the first name from the templates\r\n  buildTemplate() {\r\n    if (this._templateRanges) {\r\n      return this._firstTemplateName;\r\n    }\r\n\r\n    // find all \"{name}\"\" text ranges, building a name->{blocks.index,inlines.index,start,length,start} index\r\n    const regex = /\\{\\s*(\\w+)\\s*\\}/g;\r\n    const templateRanges = {};\r\n    this.blocks.forEach((b, index) =>\r\n      b.addRangesFrom(regex, index, templateRanges)\r\n    );\r\n\r\n    // turn that into a reverse sorted list of ranges\r\n    this._templateRanges = Object.keys(templateRanges)\r\n      .map((k) => templateRanges[k])\r\n      .sort(function (l, r) {\r\n        const b = r.block - l.block;\r\n        if (b !== 0) {\r\n          return b;\r\n        }\r\n        const i = r.inline - l.inline;\r\n        if (i !== 0) {\r\n          return i;\r\n        }\r\n        return r.start - l.start;\r\n      });\r\n    const firstRange = this._templateRanges[this._templateRanges.length - 1];\r\n    this._firstTemplateName = firstRange ? firstRange.name : null;\r\n\r\n    // we store the initial template data, so template() can be called more than once\r\n    this._templateBlocks = this.blocks.map((b) => b.copy());\r\n    return this._firstTemplateName;\r\n  }\r\n\r\n  template(data) {\r\n    // restore the original template\r\n    this.blocks = this._templateBlocks.map((b) => b.copy());\r\n\r\n    // replace all ranges that are in data; @_templateRanges is reverse sorted, so ranges stay valid throughout\r\n    return (() => {\r\n      const result = [];\r\n      for (var range of Array.from(this._templateRanges)) {\r\n        var text = data[range.name];\r\n        if (text == null) {\r\n          continue;\r\n        }\r\n        if (_.isFunction(range.formatter)) {\r\n          text = range.formatter.call(this, text);\r\n        }\r\n        var block = this.blocks[range.block];\r\n        result.push(\r\n          block.replaceRange(range.inline, range.start, range.length, text)\r\n        );\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  templateFormatter(data) {\r\n    return (() => {\r\n      const result = [];\r\n      for (var range of Array.from(this._templateRanges)) {\r\n        var formatter = data[range.name];\r\n        if (formatter == null) {\r\n          continue;\r\n        }\r\n        result.push((range.formatter = formatter));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  validate() {\r\n    for (var block of Array.from(this.blocks)) {\r\n      if (!block.validate()) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\nStyledText.initClass();\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { Layer, layerProperty } from \"./Layer\";\r\nimport { LayerStyle } from \"./LayerStyle\";\r\nimport { StyledText } from \"./StyledText\";\r\n\r\nconst validateFont = (arg) => _.isString(arg) || _.isObject(arg);\r\n\r\nconst fontFamilyFromObject = function (font) {\r\n  if (_.isObject(font)) {\r\n    return font.fontFamily;\r\n  } else {\r\n    return font;\r\n  }\r\n};\r\n\r\nconst textProperty = (obj, name, fallback, validator, transformer, set) =>\r\n  layerProperty(\r\n    obj,\r\n    name,\r\n    name,\r\n    fallback,\r\n    validator,\r\n    transformer,\r\n    {},\r\n    set,\r\n    \"_elementHTML\"\r\n  );\r\n\r\nconst asPadding = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n  const result = {};\r\n  let isValidObject = false;\r\n  if (value.horizontal != null) {\r\n    if (value.left == null) {\r\n      value.left = value.horizontal;\r\n    }\r\n    if (value.right == null) {\r\n      value.right = value.horizontal;\r\n    }\r\n  }\r\n  if (value.vertical != null) {\r\n    if (value.top == null) {\r\n      value.top = value.vertical;\r\n    }\r\n    if (value.bottom == null) {\r\n      value.bottom = value.vertical;\r\n    }\r\n  }\r\n  for (var key of [\"left\", \"right\", \"bottom\", \"top\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nexport class TextLayer extends Layer {\r\n  static initClass() {\r\n    this._textProperties = [\r\n      \"text\",\r\n      \"fontFamily\",\r\n      \"fontSize\",\r\n      \"fontWeight\",\r\n      \"fontStyle\",\r\n      \"lineHeight\",\r\n      \"letterSpacing\",\r\n      \"wordSpacing\",\r\n      \"textAlign\",\r\n      \"textTransform\",\r\n      \"textIndent\",\r\n      \"textDecoration\",\r\n      \"textOverflow\",\r\n      \"whiteSpace\",\r\n      \"direction\",\r\n      \"font\",\r\n      \"borderWidth\",\r\n      \"padding\",\r\n    ];\r\n\r\n    this._textStyleProperties = _.pull(\r\n      _.clone(TextLayer._textProperties),\r\n      \"text\"\r\n    ).concat([\"color\", \"shadowX\", \"shadowY\", \"shadowBlur\", \"shadowColor\"]);\r\n\r\n    this.define(\"_styledText\", {\r\n      get() {\r\n        if (this.__styledText == null) {\r\n          this.__styledText = new StyledText();\r\n        }\r\n        return this.__styledText;\r\n      },\r\n      set(value) {\r\n        if (!(value instanceof StyledText)) {\r\n          return;\r\n        }\r\n        return (this.__styledText = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"styledTextOptions\", {\r\n      get() {\r\n        return this._styledText != null\r\n          ? this._styledText.getOptions()\r\n          : undefined;\r\n      },\r\n      set(value) {\r\n        this._styledText = new StyledText(value);\r\n        this._styledText.setElement(this._elementHTML);\r\n        const fonts = this._styledText.getFonts();\r\n        const promise = Utils.isFontFamilyLoaded(fonts);\r\n        if (_.isObject(promise)) {\r\n          return promise.then(() => {\r\n            return this.renderText();\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    //Vekter properties\r\n    this.define(\r\n      \"autoWidth\",\r\n      this.proxyProperty(\"_styledText.autoWidth\", {\r\n        didSet(layer, value) {\r\n          return layer.renderText();\r\n        },\r\n      })\r\n    );\r\n    this.define(\r\n      \"autoHeight\",\r\n      this.proxyProperty(\"_styledText.autoHeight\", {\r\n        didSet(layer, value) {\r\n          return layer.renderText();\r\n        },\r\n      })\r\n    );\r\n\r\n    this.define(\"autoSize\", {\r\n      get() {\r\n        return this.autoWidth && this.autoHeight;\r\n      },\r\n      set(value) {\r\n        this.autoWidth = value;\r\n        this.autoHeight = value;\r\n        return this.renderText();\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"fontFamily\",\r\n      textProperty(\r\n        this,\r\n        \"fontFamily\",\r\n        null,\r\n        _.isString,\r\n        fontFamilyFromObject,\r\n        function (layer, value) {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          layer.font = value;\r\n          const promise = Utils.isFontFamilyLoaded(value);\r\n          if (_.isObject(promise)) {\r\n            return promise.then(() => setTimeout(layer.renderText, 0));\r\n          }\r\n        }\r\n      )\r\n    );\r\n    this.define(\"fontWeight\", textProperty(this, \"fontWeight\", null));\r\n    this.define(\r\n      \"fontStyle\",\r\n      textProperty(this, \"fontStyle\", \"normal\", _.isString)\r\n    );\r\n    this.define(\r\n      \"textDecoration\",\r\n      textProperty(this, \"textDecoration\", null, _.isString)\r\n    );\r\n    this.define(\r\n      \"fontSize\",\r\n      textProperty(\r\n        this,\r\n        \"fontSize\",\r\n        null,\r\n        _.isNumber,\r\n        null,\r\n        function (layer, value) {\r\n          if (value === null || layer.__constructor) {\r\n            return;\r\n          }\r\n          const style = LayerStyle[\"fontSize\"](layer);\r\n          return layer._styledText.setStyle(\"fontSize\", style);\r\n        }\r\n      )\r\n    );\r\n    this.define(\"textAlign\", textProperty(this, \"textAlign\", null));\r\n    this.define(\r\n      \"letterSpacing\",\r\n      textProperty(this, \"letterSpacing\", null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"lineHeight\",\r\n      textProperty(this, \"lineHeight\", null, _.isNumber)\r\n    );\r\n\r\n    //Custom properties\r\n    this.define(\r\n      \"wordSpacing\",\r\n      textProperty(this, \"wordSpacing\", null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"textTransform\",\r\n      textProperty(this, \"textTransform\", \"none\", _.isString)\r\n    );\r\n    this.define(\r\n      \"textIndent\",\r\n      textProperty(this, \"textIndent\", null, _.isNumber)\r\n    );\r\n    this.define(\"wordWrap\", textProperty(this, \"wordWrap\", null, _.isString));\r\n\r\n    this.define(\"textOverflow\", {\r\n      get() {\r\n        return this._styledText.textOverflow;\r\n      },\r\n      set(value) {\r\n        this.clip = _.isString(value);\r\n        this._styledText.setTextOverflow(value);\r\n        return this.renderText(true);\r\n      },\r\n    });\r\n\r\n    this.define(\"truncate\", {\r\n      get() {\r\n        return this.textOverflow === \"ellipsis\";\r\n      },\r\n      set(truncate) {\r\n        if (truncate) {\r\n          this.autoSize = false;\r\n          return (this.textOverflow = \"ellipsis\");\r\n        } else {\r\n          return (this.textOverflow = null);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"whiteSpace\",\r\n      textProperty(this, \"whiteSpace\", null, _.isString)\r\n    );\r\n    this.define(\"direction\", textProperty(this, \"direction\", null, _.isString));\r\n\r\n    this.define(\"html\", {\r\n      get() {\r\n        return (\r\n          (this._elementHTML != null\r\n            ? this._elementHTML.innerHTML\r\n            : undefined) || \"\"\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"font\",\r\n      layerProperty(\r\n        this,\r\n        \"font\",\r\n        null,\r\n        null,\r\n        validateFont,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          if (_.isObject(value)) {\r\n            layer.fontFamily = value.fontFamily;\r\n            layer.fontWeight = value.fontWeight;\r\n            return;\r\n          }\r\n          // Check if value contains number. We then assume proper use of font.\r\n          // Otherwise, we default to setting the fontFamily.\r\n          if (/\\d/.test(value)) {\r\n            return layer._styledText.setStyle(\"font\", value);\r\n          } else {\r\n            return (layer.fontFamily = value);\r\n          }\r\n        },\r\n        \"_elementHTML\"\r\n      )\r\n    );\r\n\r\n    this.define(\"textDirection\", {\r\n      get() {\r\n        return this.direction;\r\n      },\r\n      set(value) {\r\n        return (this.direction = value);\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"padding\",\r\n      layerProperty(this, \"padding\", \"padding\", 0, null, asPadding)\r\n    );\r\n\r\n    this.define(\"text\", {\r\n      get() {\r\n        return this._styledText.getText();\r\n      },\r\n      set(value) {\r\n        if (!_.isString(value)) {\r\n          value = String(value);\r\n        }\r\n        this._styledText.setText(value);\r\n        this.renderText();\r\n        return this.emit(\"change:text\", value);\r\n      },\r\n    });\r\n\r\n    // we remember the template data, and merge it with new data\r\n    this.define(\"template\", {\r\n      get() {\r\n        return _.clone(this._templateData);\r\n      },\r\n      set(data) {\r\n        if (!this._templateData) {\r\n          this._templateData = {};\r\n        }\r\n\r\n        const firstName = this._styledText.buildTemplate();\r\n        if (!_.isObject(data)) {\r\n          if (!firstName) {\r\n            return;\r\n          }\r\n          this._templateData[firstName] = data;\r\n        } else {\r\n          _.assign(this._templateData, data);\r\n        }\r\n\r\n        const oldText = this.text;\r\n        this._styledText.template(this._templateData);\r\n        if (this.text !== oldText) {\r\n          this.renderText();\r\n          return this.emit(\"change:text\", this.text);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"templateFormatter\", {\r\n      get() {\r\n        return this._templateFormatter;\r\n      },\r\n      set(data) {\r\n        const firstName = this._styledText.buildTemplate();\r\n        if (_.isFunction(data) || !_.isObject(data)) {\r\n          if (!firstName) {\r\n            return;\r\n          }\r\n          const tmp = {};\r\n          tmp[firstName] = data;\r\n          data = tmp;\r\n        }\r\n        return this._styledText.templateFormatter(data);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    let fontWeight, lineHeight;\r\n    this.updateAutoWidth = this.updateAutoWidth.bind(this);\r\n    this.updateAutoHeight = this.updateAutoHeight.bind(this);\r\n    this.renderText = this.renderText.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      shadowType: \"text\",\r\n      clip: false,\r\n      createHTMLElement: true,\r\n    });\r\n    if (options.styledTextOptions != null) {\r\n      options.styledText = options.styledTextOptions;\r\n      delete options.styledTextOptions;\r\n    }\r\n    if (options.styledText != null) {\r\n      delete options.text;\r\n      this.styledTextOptions = options.styledText;\r\n      if (options.color == null) {\r\n        options.color = this._styledText.getStyle(\"color\");\r\n      }\r\n      if (options.fontSize == null) {\r\n        options.fontSize = parseFloat(this._styledText.getStyle(\"fontSize\"));\r\n      }\r\n      if (options.fontFamily == null) {\r\n        options.fontFamily = this._styledText.getStyle(\"fontFamily\");\r\n      }\r\n      if (options.letterSpacing == null) {\r\n        options.letterSpacing = parseFloat(\r\n          this._styledText.getStyle(\"letterSpacing\")\r\n        );\r\n      }\r\n      if (options.textAlign == null) {\r\n        options.textAlign = this._styledText.textAlign;\r\n      }\r\n      fontWeight = this._styledText.getStyle(\"fontWeight\");\r\n      if (fontWeight != null) {\r\n        options.fontWeight = parseFloat(fontWeight);\r\n      }\r\n\r\n      lineHeight = this._styledText.getStyle(\"lineHeight\");\r\n      if (lineHeight == null || lineHeight === \"normal\") {\r\n        lineHeight = 1.25;\r\n      } else {\r\n        lineHeight = parseFloat(lineHeight);\r\n      }\r\n      if (options.lineHeight == null) {\r\n        options.lineHeight = lineHeight;\r\n      }\r\n    } else {\r\n      _.defaults(options, {\r\n        backgroundColor: \"transparent\",\r\n        text: \"Hello World\",\r\n        color: \"#888\",\r\n        fontSize: 40,\r\n        fontWeight: 400,\r\n        lineHeight: 1.25,\r\n        padding: 0,\r\n      });\r\n      if (options.font == null && options.fontFamily == null) {\r\n        options.fontFamily = this.defaultFont();\r\n      }\r\n\r\n      let { text } = options;\r\n      if (!_.isString(text)) {\r\n        text = String(text);\r\n      }\r\n      this._styledText.addBlock(text, { fontSize: `${options.fontSize}px` });\r\n    }\r\n\r\n    super(options);\r\n    this.__constructor = true;\r\n\r\n    // the goal is:\r\n    // - autoSize elements should not soft wrap, only hard wrap (based on newlines)\r\n    // - fixed (given a box) elements should soft wrap\r\n    // - when the height is not fixed, it should be allowed to grow\r\n\r\n    if (options.autoSize) {\r\n      this.autoWidth = true;\r\n      this.autoHeight = true;\r\n    } else if (options.autoSize !== false && !options.truncate) {\r\n      // if not explicitly disabled auto sizing, auto size width/height, unless they were explicitly set\r\n      if (options.autoWidth == null) {\r\n        const explicitWidth =\r\n          options.width != null ||\r\n          _.isNumber(options.size) ||\r\n          (options.size != null ? options.size.width : undefined) != null ||\r\n          (options.frame != null ? options.frame.width : undefined) != null;\r\n        this.autoWidth = !explicitWidth;\r\n      }\r\n      if (options.autoHeight == null) {\r\n        const explicitHeight =\r\n          options.height != null ||\r\n          _.isNumber(options.size) ||\r\n          (options.size != null ? options.size.height : undefined) != null ||\r\n          (options.frame != null ? options.frame.height : undefined) != null;\r\n        this.autoHeight = !explicitHeight;\r\n      }\r\n    }\r\n\r\n    // if constraints from design, autoHeight depends on if the element is allowed to grow in height\r\n    const { constraintValues } = options;\r\n    if (constraintValues) {\r\n      const topAndBottom =\r\n        _.isNumber(constraintValues.top) && _.isNumber(constraintValues.bottom);\r\n      const heightFactor = _.isNumber(constraintValues.heightFactor);\r\n      this.autoHeight = !(heightFactor || topAndBottom);\r\n    }\r\n\r\n    if (options.styledText == null) {\r\n      if (this.font == null) {\r\n        this.font = this.fontFamily;\r\n      }\r\n    }\r\n\r\n    this._styledText.setElement(this._elementHTML);\r\n\r\n    delete this.__constructor;\r\n\r\n    this.renderText();\r\n\r\n    // Executing function properties like Align.center again\r\n    for (var key in options) {\r\n      var value = options[key];\r\n      if (_.isFunction(value) && this[key] != null) {\r\n        this[key] = value;\r\n      }\r\n    }\r\n\r\n    for (var property of Array.from(TextLayer._textStyleProperties)) {\r\n      ((property) => {\r\n        return this.on(`change:${property}`, (value) => {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          // make an exception for fontSize, as it needs to be set on the inner style\r\n          if (![\"fontSize\", \"font\"].includes(property)) {\r\n            this._styledText.resetStyle(property);\r\n          }\r\n          return this.renderText();\r\n        });\r\n      })(property);\r\n    }\r\n\r\n    this.on(\"change:width\", this.updateAutoWidth);\r\n    this.on(\"change:height\", this.updateAutoHeight);\r\n    this.on(\"change:parent\", this.renderText);\r\n  }\r\n\r\n  updateAutoWidth(value) {\r\n    if (this.disableAutosizeUpdating) {\r\n      return;\r\n    }\r\n    return (this.autoWidth = false);\r\n  }\r\n\r\n  updateAutoHeight(value) {\r\n    if (this.disableAutosizeUpdating) {\r\n      return;\r\n    }\r\n    return (this.autoHeight = false);\r\n  }\r\n\r\n  copySingle() {\r\n    const { props } = this;\r\n    if (this.autoWidth) {\r\n      delete props[\"width\"];\r\n    }\r\n    if (this.autoHeight) {\r\n      delete props[\"height\"];\r\n    }\r\n    const copy = new this.constructor(props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n\r\n  renderText(forceRender) {\r\n    let constrainedHeight, constrainedWidth;\r\n    if (forceRender == null) {\r\n      forceRender = false;\r\n    }\r\n    if (this.__constructor) {\r\n      return;\r\n    }\r\n    this._styledText.render();\r\n    this._updateHTMLScale();\r\n    if (!this.autoSize) {\r\n      if (\r\n        this.width < this._elementHTML.clientWidth ||\r\n        this.height < this._elementHTML.clientHeight\r\n      ) {\r\n        this.clip = true;\r\n      }\r\n    }\r\n    if (\r\n      !forceRender &&\r\n      !this.autoHeight &&\r\n      !this.autoWidth &&\r\n      this.textOverflow === null\r\n    ) {\r\n      return;\r\n    }\r\n    const padding = Utils.rectZero(Utils.parseRect(this.padding));\r\n    if (this.autoWidth) {\r\n      constrainedWidth = null;\r\n    } else {\r\n      constrainedWidth = this.size.width - (padding.left + padding.right);\r\n    }\r\n    if (this.autoHeight) {\r\n      constrainedHeight = null;\r\n    } else {\r\n      constrainedHeight = this.size.height - (padding.top + padding.bottom);\r\n    }\r\n    const constraints = {\r\n      width: constrainedWidth,\r\n      height: constrainedHeight,\r\n      multiplier: this.context.pixelMultiplier,\r\n    };\r\n\r\n    const calculatedSize = this._styledText.measure(constraints);\r\n    this.disableAutosizeUpdating = true;\r\n    if (calculatedSize.width != null) {\r\n      this.width = calculatedSize.width + padding.left + padding.right;\r\n    }\r\n    if (calculatedSize.height != null) {\r\n      this.height = calculatedSize.height + padding.top + padding.bottom;\r\n    }\r\n    return (this.disableAutosizeUpdating = false);\r\n  }\r\n\r\n  defaultFont() {\r\n    return Utils.deviceFont(Framer.Device.platform());\r\n  }\r\n\r\n  textReplace(search, replace) {\r\n    const oldText = this.text;\r\n    this._styledText.textReplace(search, replace);\r\n    if (this.text !== oldText) {\r\n      this.renderText();\r\n      return this.emit(\"change:text\", this.text);\r\n    }\r\n  }\r\n}\r\nTextLayer.initClass();\r\n","import { BaseClass } from \"./BaseClass\";\r\nimport { Events } from \"./Events\";\r\nimport { Utils } from \"./Utils\";\r\n\r\nexport class AnimationGroup extends BaseClass {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this._animations = args.flat();\r\n    this.stopAnimations = true;\r\n    this.stop();\r\n  }\r\n\r\n  start() {\r\n    return this._start(this._animations);\r\n  }\r\n\r\n  stop() {\r\n    this._stop();\r\n    this._started = [];\r\n    this._halted = [];\r\n    this._stopped = [];\r\n    this._ended = [];\r\n  }\r\n\r\n  _start(animations) {\r\n    this.stop();\r\n    this._onStart();\r\n\r\n    return animations.map((animation) => {\r\n      this._started.push(animation);\r\n\r\n      animation.onAnimationHalt(() => {\r\n        this._halted.push(animation);\r\n        if (this._halted.length > 1) return;\r\n        this._stop();\r\n        this._onHalt();\r\n      });\r\n\r\n      animation.onAnimationStop(() => {\r\n        this._stopped.push(animation);\r\n        if (this._stopped.length === this._started.length) this._onStop();\r\n      });\r\n\r\n      animation.onAnimationEnd(() => {\r\n        this._ended.push(animation);\r\n        if (this._ended.length === this._started.length) this._onEnd();\r\n      });\r\n\r\n      return animation.start();\r\n    });\r\n  }\r\n\r\n  _stop() {\r\n    if (!this._started || !this.stopAnimations) return;\r\n    return this._started.map((a) => (a.isAnimating ? a.stop() : undefined));\r\n  }\r\n\r\n  _onStart() {\r\n    this.emit(Events.AnimationStart);\r\n  }\r\n  _onHalt() {\r\n    this.emit(Events.AnimationHalt);\r\n  }\r\n  _onStop() {\r\n    this.emit(Events.AnimationStop);\r\n  }\r\n  _onEnd() {\r\n    this.emit(Events.AnimationEnd);\r\n  }\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationHalt(cb) {\r\n    return this.on(Events.AnimationHalt, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n\r\n  onStart(cb) {\r\n    return this.onAnimationStart(cb);\r\n  }\r\n  onHalt(cb) {\r\n    return this.onAnimationHalt(cb);\r\n  }\r\n  onStop(cb) {\r\n    return this.onAnimationStop(cb);\r\n  }\r\n  onEnd(cb) {\r\n    return this.onAnimationEnd(cb);\r\n  }\r\n}\r\n\r\nexport class AnimationStateGroup extends AnimationGroup {\r\n  static initClass() {\r\n    this.define(\"state\", { get: () => this._state });\r\n\r\n    this.define(\"states\", {\r\n      get() {\r\n        const states = [];\r\n        for (const layer of this._layers ?? []) {\r\n          for (const state of Object.keys(layer.states ?? {})) {\r\n            if (!states.includes(state)) states.push(state);\r\n          }\r\n        }\r\n        return states;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(...layers) {\r\n    super(...layers);\r\n    this._layers = layers.flat();\r\n    this._state = \"default\";\r\n  }\r\n\r\n  animate(state) {\r\n    const animations = [];\r\n    for (const layer of this._layers) {\r\n      if (layer.states?.[state]) {\r\n        animations.push(layer.animate(state, { start: false }));\r\n      }\r\n    }\r\n    if (!animations.length) return;\r\n    this._start(animations);\r\n    this._state = state;\r\n  }\r\n\r\n  stateCycle(...args) {\r\n    let states = args.flat();\r\n    if (!states.length) states = this.states;\r\n    return this.animate(Utils.arrayNext(states, this.state));\r\n  }\r\n}\r\n\r\nAnimationStateGroup.initClass();\r\n","import { BaseClass } from \"./BaseClass\";\r\n\r\nexport class ScreenClass extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"width\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.screenSize.width;\r\n        }\r\n        return Canvas.width;\r\n      },\r\n    });\r\n    this.define(\"height\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.screenSize.height;\r\n        }\r\n        return Canvas.height;\r\n      },\r\n    });\r\n    this.define(\"canvasFrame\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.context.canvasFrame;\r\n        }\r\n        return this.frame;\r\n      },\r\n    });\r\n    this.define(\"midX\", {\r\n      get() {\r\n        return Utils.frameGetMidX(this.frame);\r\n      },\r\n    });\r\n    this.define(\"midY\", {\r\n      get() {\r\n        return Utils.frameGetMidY(this.frame);\r\n      },\r\n    });\r\n    this.define(\"size\", {\r\n      get() {\r\n        return Utils.size(this);\r\n      },\r\n    });\r\n    this.define(\"frame\", {\r\n      get() {\r\n        return Utils.frame(this);\r\n      },\r\n    });\r\n    this.define(\"device\", {\r\n      get() {\r\n        return Framer.CurrentContext.device;\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"backgroundColor\",\r\n      this.proxyProperty(\"device.screen.backgroundColor\")\r\n    );\r\n    this.define(\r\n      \"perspective\",\r\n      this.proxyProperty(\"device.context.perspective\")\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginX\",\r\n      this.proxyProperty(\"device.context.perspectiveOriginX\")\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginY\",\r\n      this.proxyProperty(\"device.context.perspectiveOriginY\")\r\n    );\r\n  }\r\n\r\n  toInspect() {\r\n    return `<Screen ${Utils.roundWhole(this.width)}x${Utils.roundWhole(\r\n      this.height\r\n    )}>`;\r\n  }\r\n\r\n  // Triggered from outside by Canvas and DeviceComponent\r\n  onResize(cb) {\r\n    return this.on(\"resize\", cb);\r\n  }\r\n\r\n  // Point Conversion\r\n\r\n  convertPointToLayer(point, layer) {\r\n    return Utils.convertPointFromContext(point, layer, false, true);\r\n  }\r\n\r\n  convertPointToCanvas(point) {\r\n    const ctx = Framer.Device.context;\r\n    return Utils.convertPointToContext(point, ctx, true, false);\r\n  }\r\n\r\n  // Edge Swipe\r\n\r\n  onEdgeSwipe(cb) {\r\n    return this.on(Events.EdgeSwipe, cb);\r\n  }\r\n  onEdgeSwipeStart(cb) {\r\n    return this.on(Events.EdgeSwipeStart, cb);\r\n  }\r\n  onEdgeSwipeEnd(cb) {\r\n    return this.on(Events.EdgeSwipeEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeTop(cb) {\r\n    return this.on(Events.EdgeSwipeTop, cb);\r\n  }\r\n  onEdgeSwipeTopStart(cb) {\r\n    return this.on(Events.EdgeSwipeTopStart, cb);\r\n  }\r\n  onEdgeSwipeTopEnd(cb) {\r\n    return this.on(Events.EdgeSwipeTopEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeRight(cb) {\r\n    return this.on(Events.EdgeSwipeRight, cb);\r\n  }\r\n  onEdgeSwipeRightStart(cb) {\r\n    return this.on(Events.EdgeSwipeRightStart, cb);\r\n  }\r\n  onEdgeSwipeRightEnd(cb) {\r\n    return this.on(Events.EdgeSwipeRightEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeBottom(cb) {\r\n    return this.on(Events.EdgeSwipeBottom, cb);\r\n  }\r\n  onEdgeSwipeBottomStart(cb) {\r\n    return this.on(Events.EdgeSwipeBottomStart, cb);\r\n  }\r\n  onEdgeSwipeBottomEnd(cb) {\r\n    return this.on(Events.EdgeSwipeBottomEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeLeft(cb) {\r\n    return this.on(Events.EdgeSwipeLeft, cb);\r\n  }\r\n  onEdgeSwipeLeftStart(cb) {\r\n    return this.on(Events.EdgeSwipeLeftStart, cb);\r\n  }\r\n  onEdgeSwipeLeftEnd(cb) {\r\n    return this.on(Events.EdgeSwipeLeftEnd, cb);\r\n  }\r\n}\r\nScreenClass.initClass();\r\n\r\n// We use this as a singleton\r\nexport const Screen = new ScreenClass();\r\n","const pixelRound = parseInt;\r\n\r\nconst center = (layer, property, offset = 0) => {\r\n  let parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n\r\n  const x = pixelRound(\r\n    parent.width / 2 - layer.width / 2 - borderWidth + offset\r\n  );\r\n  const y = pixelRound(\r\n    parent.height / 2 - layer.height / 2 - borderWidth + offset\r\n  );\r\n\r\n  if (property === \"x\") return x;\r\n  if (property === \"y\") return y;\r\n  if (property === \"point\") return { x, y };\r\n  return 0;\r\n};\r\n\r\nconst left = (layer, property, offset = 0) => {\r\n  if (property !== \"x\") throw new Error(\"Align.left only works for x\");\r\n  return pixelRound(offset);\r\n};\r\n\r\nconst right = (layer, property, offset = 0) => {\r\n  if (property !== \"x\") throw new Error(\"Align.right only works for x\");\r\n  const parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n  return pixelRound(parent.width - 2 * borderWidth - layer.width + offset);\r\n};\r\n\r\nconst top = (layer, property, offset = 0) => {\r\n  if (property !== \"y\") throw new Error(\"Align.top only works for y\");\r\n  return pixelRound(offset);\r\n};\r\n\r\nconst bottom = (layer, property, offset = 0) => {\r\n  if (property !== \"y\") throw new Error(\"Align.bottom only works for y\");\r\n  const parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n  return pixelRound(parent.height - 2 * borderWidth - layer.height + offset);\r\n};\r\n\r\n// Helper to wrap function or value for flexible usage\r\nconst wrapper = (f, name) => {\r\n  const align = (a, b) => {\r\n    if (a == null || typeof a === \"number\") {\r\n      return (layer, property) => f(layer, property, a ?? 0);\r\n    }\r\n    return f(a, b, 0);\r\n  };\r\n  align.toInspect = () => `Align.${name}`;\r\n  return align;\r\n};\r\n\r\nexport const Align = {\r\n  center: wrapper(center, \"center\"),\r\n  left: wrapper(left, \"left\"),\r\n  right: wrapper(right, \"right\"),\r\n  top: wrapper(top, \"top\"),\r\n  bottom: wrapper(bottom, \"bottom\"),\r\n};\r\n","export const Blending = {\r\n  normal: \"normal\",\r\n  multiply: \"multiply\",\r\n  screen: \"screen\",\r\n  overlay: \"overlay\",\r\n  darken: \"darken\",\r\n  lighten: \"lighten\",\r\n  colorDodge: \"color-dodge\",\r\n  colorBurn: \"color-burn\",\r\n  hardLight: \"hard-light\",\r\n  softLight: \"soft-light\",\r\n  difference: \"difference\",\r\n  exclusion: \"exclusion\",\r\n  hue: \"hue\",\r\n  saturation: \"saturation\",\r\n  color: \"color\",\r\n  luminosity: \"luminosity\",\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\nimport * as Utils from \"./Utils.js\";\r\n\r\nlet EventManagerIdCounter = 1;\r\n\r\nclass DOMEventManagerElement extends EventEmitter {\r\n  static initClass() {\r\n    // Keep the DOM API working\r\n    this.prototype.addEventListener = this.prototype.addListener;\r\n    this.prototype.removeEventListener = this.prototype.removeListener;\r\n\r\n    // Keep the Node API working\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n  }\r\n\r\n  constructor(element) {\r\n    super();\r\n    this.element = element;\r\n  }\r\n\r\n  addListener(eventName, listener, capture = false) {\r\n    listener.capture = capture; // store capture too\r\n    super.addListener(eventName, listener);\r\n    this.element.addEventListener(eventName, listener, capture);\r\n  }\r\n\r\n  removeListener(eventName, listener, capture = false) {\r\n    super.removeListener(eventName, listener);\r\n    this.element.removeEventListener(eventName, listener.capture);\r\n  }\r\n}\r\n\r\nDOMEventManagerElement.initClass();\r\n\r\nexport class DOMEventManager {\r\n  constructor() {\r\n    this.wrap = this.wrap.bind(this);\r\n    this.remove = this.remove.bind(this);\r\n    this._elements = {};\r\n  }\r\n\r\n  wrap(element) {\r\n    if (!element._eventManagerId) {\r\n      element._eventManagerId = EventManagerIdCounter++;\r\n    }\r\n\r\n    if (!this._elements[element._eventManagerId]) {\r\n      this._elements[element._eventManagerId] = new DOMEventManagerElement(\r\n        element\r\n      );\r\n    }\r\n\r\n    return this._elements[element._eventManagerId];\r\n  }\r\n\r\n  remove(element) {\r\n    if (!element._eventManagerId) return;\r\n    delete this._elements[element._eventManagerId];\r\n    element._eventManagerId = 0;\r\n  }\r\n\r\n  reset() {\r\n    for (const key in this._elements) {\r\n      this._elements[key].removeAllListeners();\r\n    }\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { DOMEventManager } from \"./DOMEventManager.js\";\r\n\r\nconst Contexts = [];\r\n\r\nexport class Context extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"parent\", {\r\n      get() {\r\n        return this._parent;\r\n      },\r\n    });\r\n\r\n    this.define(\"element\", {\r\n      get() {\r\n        return this._element;\r\n      },\r\n    });\r\n\r\n    this.define(\"devicePixelRatio\", {\r\n      get() {\r\n        return this._devicePixelRatio != null ? this._devicePixelRatio : 1;\r\n      },\r\n      set(value) {\r\n        if (value === this._devicePixelRatio) {\r\n          return;\r\n        }\r\n        this._devicePixelRatio = value;\r\n        return Array.from(this._layers).map((l) =>\r\n          l.updateForDevicePixelRatioChange()\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"renderUsingNativePixelRatio\",\r\n      this.simpleProperty(\"renderUsingNativePixelRatio\", false)\r\n    );\r\n    this.define(\"autoLayout\", this.simpleProperty(\"autoLayout\", true));\r\n\r\n    this.define(\"pixelMultiplier\", {\r\n      get() {\r\n        if (this.renderUsingNativePixelRatio) {\r\n          return 1;\r\n        } else {\r\n          return this.devicePixelRatio;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"scale\", {\r\n      get() {\r\n        return this.pixelMultiplier;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Collections\r\n\r\n    // Layers\r\n    this.define(\"layers\", {\r\n      get() {\r\n        return _.clone(this._layers);\r\n      },\r\n    });\r\n    this.define(\"layerCounter\", {\r\n      get() {\r\n        return this._layerCounter;\r\n      },\r\n    });\r\n    this.define(\"rootLayers\", {\r\n      get() {\r\n        return _.filter(this._layers, (layer) => layer.parent === null);\r\n      },\r\n    });\r\n\r\n    this.define(\"visible\", {\r\n      get() {\r\n        return this._visible || true;\r\n      },\r\n      set(value) {\r\n        if (value === this._visible) {\r\n          return;\r\n        }\r\n        if (this._element != null) {\r\n          this._element.style.visibility = value ? \"visible\" : \"hidden\";\r\n        }\r\n        return (this._visible = value);\r\n      },\r\n    });\r\n\r\n    // Animations\r\n    this.define(\"animations\", {\r\n      get() {\r\n        return _.clone(this._animations);\r\n      },\r\n    });\r\n\r\n    // Timers\r\n    this.define(\"timers\", {\r\n      get() {\r\n        return _.clone(this._timers);\r\n      },\r\n    });\r\n\r\n    // Intervals\r\n    this.define(\"intervals\", {\r\n      get() {\r\n        return _.clone(this._intervals);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Geometry\r\n\r\n    // Remember the context doesn't really have height. These are just a reference\r\n    // to it's parent or document.\r\n\r\n    this.define(\"width\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.width;\r\n        }\r\n        return window.innerWidth;\r\n      },\r\n    });\r\n\r\n    this.define(\"height\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.height;\r\n        }\r\n        return window.innerHeight;\r\n      },\r\n    });\r\n\r\n    this.define(\"innerWidth\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.width / this.devicePixelRatio;\r\n        }\r\n        return window.innerWidth;\r\n      },\r\n    });\r\n\r\n    this.define(\"innerHeight\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.height / this.devicePixelRatio;\r\n        }\r\n        return window.innerHeight;\r\n      },\r\n    });\r\n\r\n    this.define(\"frame\", {\r\n      get() {\r\n        return { x: 0, y: 0, width: this.width, height: this.height };\r\n      },\r\n    });\r\n    this.define(\"innerFrame\", {\r\n      get() {\r\n        return { x: 0, y: 0, width: this.innerWidth, height: this.innerHeight };\r\n      },\r\n    });\r\n    this.define(\"size\", {\r\n      get() {\r\n        return _.pick(this.frame, [\"width\", \"height\"]);\r\n      },\r\n    });\r\n    this.define(\"point\", {\r\n      get() {\r\n        return _.pick(this.frame, [\"x\", \"y\"]);\r\n      },\r\n    });\r\n    this.define(\"canvasFrame\", {\r\n      get() {\r\n        if (this.parent == null) {\r\n          return this.frame;\r\n        }\r\n        return this.parent.canvasFrame;\r\n      },\r\n    });\r\n\r\n    this.define(\"backgroundColor\", {\r\n      get() {\r\n        if (Color.isColor(this._backgroundColor)) {\r\n          return this._backgroundColor;\r\n        }\r\n        return \"transparent\";\r\n      },\r\n      set(value) {\r\n        if (Color.isColor(value)) {\r\n          this._backgroundColor = value;\r\n          return this._element != null\r\n            ? (this._element.style[\"backgroundColor\"] = new Color(\r\n                value.toString()\r\n              ))\r\n            : undefined;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspective\", {\r\n      get() {\r\n        return this._perspective;\r\n      },\r\n      set(value) {\r\n        const webkitPerspective = Utils.webkitPerspectiveForValue(value);\r\n        if (webkitPerspective != null) {\r\n          this._perspective = value;\r\n          return this._element != null\r\n            ? (this._element.style[\"webkitPerspective\"] = webkitPerspective)\r\n            : undefined;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspectiveOriginX\", {\r\n      get() {\r\n        if (_.isNumber(this._perspectiveOriginX)) {\r\n          return this._perspectiveOriginX;\r\n        }\r\n        return 0.5;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) {\r\n          this._perspectiveOriginX = value;\r\n          return this._updatePerspective();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspectiveOriginY\", {\r\n      get() {\r\n        if (_.isNumber(this._perspectiveOriginY)) {\r\n          return this._perspectiveOriginY;\r\n        }\r\n        return 0.5;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) {\r\n          this._perspectiveOriginY = value;\r\n          return this._updatePerspective();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"index\", {\r\n      get() {\r\n        return (\r\n          (this._element != null\r\n            ? this._element.style[\"z-index\"]\r\n            : undefined) ||\r\n          0 ||\r\n          0\r\n        );\r\n      },\r\n      set(value) {\r\n        if (!this._element) {\r\n          return;\r\n        }\r\n        return (this._element.style[\"z-index\"] = value);\r\n      },\r\n    });\r\n  }\r\n\r\n  static all() {\r\n    return _.clone(Contexts);\r\n  }\r\n\r\n  constructor(options) {\r\n    this.layout = this.layout.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options = Defaults.getDefaults(\"Context\", options);\r\n\r\n    super(...arguments);\r\n\r\n    if (!options.name) {\r\n      throw Error(\"Contexts need a name\");\r\n    }\r\n\r\n    this._parent = options.parent;\r\n    this._name = options.name;\r\n\r\n    this.perspective = options.perspective;\r\n    this.perspectiveOriginX = options.perspectiveOriginX;\r\n    this.perspectiveOriginY = options.perspectiveOriginY;\r\n\r\n    this.elementInDOM = false;\r\n    this.reset();\r\n\r\n    if (options.hasOwnProperty(\"index\")) {\r\n      this.index = options.index;\r\n    } else {\r\n      this.index = this.id;\r\n    }\r\n\r\n    Contexts.push(this);\r\n  }\r\n\r\n  reset() {\r\n    this._createDOMEventManager();\r\n    this._createRootElement();\r\n\r\n    this.resetFrozenEvents();\r\n    this.resetLayers();\r\n    this.resetAnimations();\r\n    this.resetTimers();\r\n    this.resetIntervals();\r\n\r\n    return this.emit(\"reset\", this);\r\n  }\r\n\r\n  destroy() {\r\n    this.reset();\r\n    this._destroyRootElement();\r\n    return _.remove(Contexts, this);\r\n  }\r\n\r\n  addLayer(layer) {\r\n    if (Array.from(this._layers).includes(layer)) {\r\n      return;\r\n    }\r\n    this._layerCounter++;\r\n    return this._layers.push(layer);\r\n  }\r\n\r\n  removeLayer(layer) {\r\n    return (this._layers = _.without(this._layers, layer));\r\n  }\r\n\r\n  resetLayers() {\r\n    this.resetGestures();\r\n    this._layers = [];\r\n    return (this._layerCounter = 0);\r\n  }\r\n\r\n  layerForId(layerId) {\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer.id === layerId) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _layerForElement(element) {\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer._element === element) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  layerForElement(element) {\r\n    // Returns the framer layer containing the element\r\n    if (!element) {\r\n      return null;\r\n    }\r\n    const layer = this._layerForElement(element);\r\n    if (layer) {\r\n      return layer;\r\n    }\r\n    return this.layerForElement(element.parentNode);\r\n  }\r\n\r\n  selectLayer(selector) {\r\n    return Utils.findLayer(this._layers, selector);\r\n  }\r\n\r\n  selectAllLayers(selector) {\r\n    return Utils.filterLayers(this._layers, selector);\r\n  }\r\n\r\n  layout() {\r\n    return this.rootLayers.map((l) => l.layout());\r\n  }\r\n\r\n  addAnimation(animation) {\r\n    if (Array.from(this._animations).includes(animation)) {\r\n      return;\r\n    }\r\n    return this._animations.push(animation);\r\n  }\r\n\r\n  removeAnimation(animation) {\r\n    return (this._animations = _.without(this._animations, animation));\r\n  }\r\n\r\n  resetAnimations() {\r\n    this.stopAnimations();\r\n    return (this._animations = []);\r\n  }\r\n\r\n  stopAnimations() {\r\n    if (!this._animations) {\r\n      return;\r\n    }\r\n    return this._animations.map((animation) => animation.stop(true));\r\n  }\r\n\r\n  resetFrozenEvents() {\r\n    return delete this._frozenEvents;\r\n  }\r\n\r\n  addTimer(timer) {\r\n    if (Array.from(this._timers).includes(timer)) {\r\n      return;\r\n    }\r\n    return this._timers.push(timer);\r\n  }\r\n\r\n  removeTimer(timer) {\r\n    window.clearTimeout(timer);\r\n    return (this._timers = _.without(this._timers, timer));\r\n  }\r\n\r\n  resetTimers() {\r\n    if (this._timers) {\r\n      this._timers.map(window.clearTimeout);\r\n    }\r\n    return (this._timers = []);\r\n  }\r\n\r\n  addInterval(interval) {\r\n    if (Array.from(this._intervals).includes(interval)) {\r\n      return;\r\n    }\r\n    return this._intervals.push(interval);\r\n  }\r\n\r\n  removeInterval(interval) {\r\n    return (this._intervals = _.without(this._intervals, interval));\r\n  }\r\n\r\n  resetIntervals() {\r\n    if (this._intervals) {\r\n      this._intervals.map(window.clearInterval);\r\n    }\r\n    return (this._intervals = []);\r\n  }\r\n\r\n  // Gestures\r\n  resetGestures() {\r\n    if (!this._layers) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer._gestures) {\r\n        layer._gestures.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  // Run\r\n\r\n  run(fn) {\r\n    const previousContext = Framer.CurrentContext;\r\n    Framer.CurrentContext = this;\r\n    fn();\r\n    return (Framer.CurrentContext = previousContext);\r\n  }\r\n\r\n  //#############################################################\r\n  // Freezing\r\n\r\n  freeze() {\r\n    if (this._frozenEvents != null) {\r\n      throw new Error(\"Context is already frozen\");\r\n    }\r\n\r\n    this._frozenEvents = {};\r\n\r\n    for (var layer of Array.from(this._layers)) {\r\n      var layerListeners = {};\r\n\r\n      for (var eventName of Array.from(layer.listenerEvents())) {\r\n        layerListeners[eventName] = layer.listeners(eventName);\r\n      }\r\n\r\n      layer.removeAllListeners();\r\n      var layerId = this._layers.indexOf(layer);\r\n\r\n      this._frozenEvents[layerId] = layerListeners;\r\n    }\r\n\r\n    this.stopAnimations();\r\n\r\n    // TODO: It would be nice to continue at least intervals after a resume\r\n    this.resetTimers();\r\n    return this.resetIntervals();\r\n  }\r\n\r\n  resume() {\r\n    if (this._frozenEvents == null) {\r\n      throw new Error(\"Context is not frozen, cannot resume\");\r\n    }\r\n\r\n    for (var layerId in this._frozenEvents) {\r\n      var events = this._frozenEvents[layerId];\r\n      var layer = this._layers[layerId];\r\n      for (var eventName in events) {\r\n        var listeners = events[eventName];\r\n        for (var listener of Array.from(listeners)) {\r\n          layer.on(eventName, listener);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.resetFrozenEvents();\r\n  }\r\n\r\n  //#############################################################\r\n  // DOM\r\n\r\n  _createDOMEventManager() {\r\n    // This manages all dom events for any node in this context centrally,\r\n    // so we can clean them up on a reset, avoiding memory leaks and whatnot.\r\n\r\n    if (this.domEventManager != null) {\r\n      this.domEventManager.reset();\r\n    }\r\n    return (this.domEventManager = new DOMEventManager());\r\n  }\r\n\r\n  _createRootElement() {\r\n    // Everything under the context lives in a single div that we either insert\r\n    // directly on the root, or attach to the parent layer. The element append\r\n    // can be pending if the document isn't ready yet.\r\n\r\n    this._destroyRootElement();\r\n\r\n    this._element = document.createElement(\"div\");\r\n    this._element.id = `FramerContextRoot-${this._name}`;\r\n    this._element.classList.add(\"framerContext\");\r\n    const webkitPerspective = Utils.webkitPerspectiveForValue(this.perspective);\r\n    if (webkitPerspective != null) {\r\n      this._element.style[\"webkitPerspective\"] = webkitPerspective;\r\n    }\r\n    this._element.style[\"backgroundColor\"] = this.backgroundColor;\r\n\r\n    this.__pendingElementAppend = () => {\r\n      let parentElement =\r\n        this._parent != null ? this._parent._element : undefined;\r\n      if (parentElement == null) {\r\n        parentElement = document.body;\r\n      }\r\n      parentElement.appendChild(this._element);\r\n      this.elementInDOM = true;\r\n      return this._layers != null\r\n        ? this._layers.map((l) => l.elementInsertedIntoDocument())\r\n        : undefined;\r\n    };\r\n\r\n    return Utils.domComplete(this.__pendingElementAppend);\r\n  }\r\n\r\n  _destroyRootElement() {\r\n    // This removes the context element and cancels async insertion if the\r\n    // document wasn't ready yet.\r\n\r\n    if (this._element != null ? this._element.parentNode : undefined) {\r\n      this._element.parentNode.removeChild(this._element);\r\n      this.elementInDOM = false;\r\n    }\r\n\r\n    if (this.__pendingElementAppend) {\r\n      Utils.domCompleteCancel(this.__pendingElementAppend);\r\n      this.__pendingElementAppend = null;\r\n    }\r\n\r\n    return (this._element = null);\r\n  }\r\n\r\n  _updatePerspective() {\r\n    return this._element != null\r\n      ? (this._element.style[\"webkitPerspectiveOrigin\"] = `${\r\n          this.perspectiveOriginX * 100\r\n        }% ${this.perspectiveOriginY * 100}%`)\r\n      : undefined;\r\n  }\r\n\r\n  containers(ignoredArgument, result) {\r\n    if (ignoredArgument == null) {\r\n      ignoredArgument = true;\r\n    }\r\n    if (result == null) {\r\n      result = [];\r\n    }\r\n    if (this._parent != null) {\r\n      result.push(this._parent);\r\n      return this._parent != null\r\n        ? this._parent.containers(true, result)\r\n        : undefined;\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  toInspect() {\r\n    const round = function (value) {\r\n      if (parseInt(value) === value) {\r\n        return parseInt(value);\r\n      }\r\n      return Utils.round(value, 1);\r\n    };\r\n\r\n    return `<${this.constructor.name} id:${this.id} name:${this._name} ${round(\r\n      this.width\r\n    )}x${round(this.height)}>`;\r\n  }\r\n}\r\nContext.initClass();\r\n","import { Utils } from \"./Utils\";\r\nimport { Context } from \"./Context\";\r\nimport { Layer } from \"./Layer\";\r\n\r\nclass Printer {\r\n  constructor() {\r\n    this.createLayer = this.createLayer.bind(this);\r\n    this.resize = this.resize.bind(this);\r\n    this.print = this.print.bind(this);\r\n    this.scrollToBottom = this.scrollToBottom.bind(this);\r\n\r\n    this._context = new Context({ name: \"PrintConsole\" });\r\n\r\n    this._context.run(() => {\r\n      window.addEventListener(\"resize\", this.resize);\r\n    });\r\n  }\r\n\r\n  createLayer() {\r\n    if (this._printLayer) return this._printLayer;\r\n\r\n    this._context.run(() => {\r\n      this._container = new Layer({\r\n        backgroundColor: null,\r\n      });\r\n      this._container.style.zIndex = 999; // Always on top\r\n\r\n      this._printLayer = new Layer({\r\n        parent: this._container,\r\n        scrollVertical: true,\r\n        ignoreEvents: false,\r\n        html: \"\",\r\n        style: {\r\n          font: \"12px/1.35em Menlo, Consolas, monospace\",\r\n          color: \"rgba(0, 0, 0, .7)\",\r\n          padding: \"8px\",\r\n          paddingBottom: \"30px\",\r\n          borderTop: \"1px solid #d9d9d9\",\r\n        },\r\n        opacity: 0.9,\r\n        visible: true,\r\n        backgroundColor: \"white\",\r\n      });\r\n\r\n      this._closeButton = new Layer({\r\n        parent: this._container,\r\n        html: `\r\n          <svg>\r\n            <g stroke=\"#B8B8B8\">\r\n              <path d=\"M1,1 L8,8\"></path>\r\n              <path d=\"M1,8 L8,1\"></path>\r\n            </g>\r\n          </svg>\r\n        `,\r\n        y: 9,\r\n        width: 9,\r\n        height: 9,\r\n        backgroundColor: null,\r\n        style: { cursor: \"auto\" },\r\n      });\r\n\r\n      this._closeButton.onClick(() => this.hide());\r\n    });\r\n\r\n    this.resize();\r\n    return this._printLayer;\r\n  }\r\n\r\n  resize() {\r\n    if (!this._printLayer) return;\r\n\r\n    this._container.width = window.innerWidth;\r\n    this._container.height = 160;\r\n    this._container.maxY = window.innerHeight;\r\n\r\n    this._printLayer.size = this._container.size;\r\n    this._closeButton.maxX = this._container.maxX - this._closeButton.y + 1;\r\n  }\r\n\r\n  hide() {\r\n    this._context.visible = false;\r\n  }\r\n\r\n  print(...args) {\r\n    this.createLayer();\r\n    this._context.visible = true;\r\n    const printPrefix = \" \";\r\n\r\n    const printNode = document.createElement(\"div\");\r\n    printNode.style.userSelect = \"text\";\r\n    printNode.style.cursor = \"auto\";\r\n    printNode.innerHTML =\r\n      Utils.escape(\r\n        printPrefix + args.map((obj) => Utils.inspect(obj)).join(\", \")\r\n      ) + \"<br>\";\r\n\r\n    this._printLayer._element.appendChild(printNode);\r\n    this.scrollToBottom();\r\n\r\n    // Ensure scroll after DOM updates\r\n    return Utils.delay(0, this.scrollToBottom);\r\n  }\r\n\r\n  scrollToBottom() {\r\n    if (!this._printLayer) return;\r\n    this._printLayer._element.scrollTop =\r\n      this._printLayer._element.scrollHeight;\r\n  }\r\n}\r\n\r\n// Singleton printer\r\nlet _printer = null;\r\n\r\nexport function print(...args) {\r\n  if (!_printer) _printer = new Printer();\r\n  return _printer.print(...args);\r\n}\r\n","import _ from \"../Underscore.js\";\r\nimport Utils from \"../Utils.js\";\r\n\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\n\r\n`\\\r\nScrollComponent\r\n\r\ncontent <Layer>\r\ncontentSize <{width:n, height:n}>\r\ncontentInset <{top:n, right:n, bottom:n, left:n}> TODO\r\ncontentOffset <{x:n, y:n}> TODO\r\nscrollFrame <{x:n, y:n, width:n, height:n}>\r\nscrollPoint <{x:n, y:n}>\r\nscrollHorizontal <bool>\r\nscrollVertical <bool>\r\nspeedX <number>\r\nspeedY <number>\r\ndelaysContentTouches <bool> TODO\r\nloadPreset(<\"ios\"|\"android\">) TODO\r\nscrollToPoint(<{x:n, y:n}>, animate=true, animationOptions={})\r\nscrollToLayer(contentLayer, originX=0, originY=0)\r\nscrollFrameForContentLayer(<x:n, y:n>) <{x:n, y:n, width:n, height:n}> TODO\r\nclosestContentLayer(<x:n, y:n>) <Layer> TODO\r\n\r\nScrollComponent Events\r\n\r\n(all of the draggable events)\r\nScrollStart -> DragStart\r\nScrollWillMove -> DragWillMove\r\nScrollDidMove -> DragDidMove\r\nscroll -> DragMove (html compat)\r\nScrollEnd -> DragEnd\\\r\n`;\r\n\r\n// Define new scroll-related events\r\nEvents.ScrollStart = \"scrollstart\";\r\nEvents.Scroll = \"scroll\";\r\nEvents.ScrollMove = Events.Scroll;\r\nEvents.ScrollEnd = \"scrollend\";\r\nEvents.ScrollAnimationDidStart = \"scrollanimationdidstart\";\r\nEvents.ScrollAnimationDidEnd = \"scrollanimationdidend\";\r\n\r\n// Map scroll events to drag events\r\nconst EventMappers = {};\r\nEventMappers[Events.Move] = Events.Move;\r\nEventMappers[Events.ScrollStart] = Events.DragStart;\r\nEventMappers[Events.ScrollMove] = Events.DragMove;\r\nEventMappers[Events.ScrollEnd] = Events.DragEnd;\r\nEventMappers[Events.ScrollAnimationDidStart] = Events.DragAnimationStart;\r\nEventMappers[Events.ScrollAnimationDidEnd] = Events.DragAnimationEnd;\r\nEventMappers[Events.DirectionLockStart] = Events.DirectionLockStart;\r\n\r\nexport class ScrollComponent extends Layer {\r\n  static initClass() {\r\n    // Proxy properties directly from the draggable\r\n    this.define(\r\n      \"velocity\",\r\n      this.proxyProperty(\"content.draggable.velocity\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"scrollHorizontal\",\r\n      this.proxyProperty(\"content.draggable.horizontal\")\r\n    );\r\n    this.define(\r\n      \"scrollVertical\",\r\n      this.proxyProperty(\"content.draggable.vertical\")\r\n    );\r\n    this.define(\"speedX\", this.proxyProperty(\"content.draggable.speedX\"));\r\n    this.define(\"speedY\", this.proxyProperty(\"content.draggable.speedY\"));\r\n    this.define(\r\n      \"isDragging\",\r\n      this.proxyProperty(\"content.draggable.isDragging\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"isMoving\",\r\n      this.proxyProperty(\"content.draggable.isMoving\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"isAnimating\",\r\n      this.proxyProperty(\"content.draggable.isAnimating\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"propagateEvents\",\r\n      this.proxyProperty(\"content.draggable.propagateEvents\")\r\n    );\r\n    this.define(\r\n      \"directionLock\",\r\n      this.proxyProperty(\"content.draggable.directionLock\")\r\n    );\r\n    this.define(\r\n      \"directionLockThreshold\",\r\n      this.proxyProperty(\"content.draggable.directionLockThreshold\")\r\n    );\r\n\r\n    this.define(\"content\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._content;\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"mouseWheelSpeedMultiplier\",\r\n      this.simpleProperty(\"mouseWheelSpeedMultiplier\", 1)\r\n    );\r\n\r\n    this.define(\"scroll\", {\r\n      exportable: false,\r\n      get() {\r\n        return this.scrollHorizontal === true || this.scrollVertical === true;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        if (value === false) {\r\n          this.content.animateStop();\r\n        }\r\n        return (this.scrollHorizontal = this.scrollVertical = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollX\", {\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return 0 - this.content.x + this.contentInset.left;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.content.draggable.animateStop();\r\n        return (this.content.x = this._calculateContentPoint({\r\n          x: value,\r\n          y: 0,\r\n        }).x);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollY\", {\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return 0 - this.content.y + this.contentInset.top;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.content.draggable.animateStop();\r\n        return (this.content.y = this._calculateContentPoint({\r\n          x: 0,\r\n          y: value,\r\n        }).y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollPoint\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        let point;\r\n        return (point = {\r\n          x: this.scrollX,\r\n          y: this.scrollY,\r\n        });\r\n      },\r\n      set(point) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.scrollX = point.x;\r\n        return (this.scrollY = point.y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        const rect = this.scrollPoint;\r\n        rect.width = this.width;\r\n        rect.height = this.height;\r\n        return rect;\r\n      },\r\n      set(value) {\r\n        return (this.scrollPoint = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"contentInset\", {\r\n      get() {\r\n        return _.clone(this._contentInset);\r\n      },\r\n      set(contentInset) {\r\n        this._contentInset = Utils.rectZero(Utils.parseRect(contentInset));\r\n\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n\r\n        // If we reset the content inset, we need to reset the content position\r\n        const contentFrame = this.calculateContentFrame();\r\n        contentFrame.x = contentFrame.x + this._contentInset.left;\r\n        contentFrame.y = contentFrame.y + this._contentInset.top;\r\n        this.content.frame = contentFrame;\r\n        return this.updateContent();\r\n      },\r\n    });\r\n\r\n    this.define(\"direction\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        const { direction } = this.content.draggable;\r\n        if (direction === \"down\") {\r\n          return \"up\";\r\n        }\r\n        if (direction === \"up\") {\r\n          return \"down\";\r\n        }\r\n        if (direction === \"right\") {\r\n          return \"left\";\r\n        }\r\n        if (direction === \"left\") {\r\n          return \"right\";\r\n        }\r\n        return direction;\r\n      },\r\n    });\r\n\r\n    this.define(\"angle\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return -this.content.draggable.angle;\r\n      },\r\n    });\r\n\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n\r\n    //#############################################################\r\n    // MouseWheel handling\r\n\r\n    this.define(\"mouseWheelEnabled\", {\r\n      get() {\r\n        return this._mouseWheelEnabled;\r\n      },\r\n      set(value) {\r\n        this._mouseWheelEnabled = value;\r\n        return this._enableMouseWheelHandling(value);\r\n      },\r\n    });\r\n\r\n    // Because there is no real scroll end event on a mousewheel, we use a timeout to see if\r\n    // events stop coming in, and throw a scroll event after. Better than nothing.\r\n    this.prototype._onMouseWheelEnd = Utils.debounce(0.3, function (event) {\r\n      this.emit(Events.ScrollEnd, event);\r\n      return (this._mouseWheelScrolling = false);\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this.updateContent = this.updateContent.bind(this);\r\n    this._onAnimationStart = this._onAnimationStart.bind(this);\r\n    this._onAnimationStep = this._onAnimationStep.bind(this);\r\n    this._onAnimationStop = this._onAnimationStop.bind(this);\r\n    this._onMouseWheel = this._onMouseWheel.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    super(Defaults.getDefaults(\"ScrollComponent\", options));\r\n\r\n    this._contentInset = options.contentInset || Utils.rectZero();\r\n    this.setContentLayer(new Layer());\r\n\r\n    // Only at this point we can set all the proxy properties, because before\r\n    // this the content layer did not exist. So we have to apply those again.\r\n    this._applyProxyDefaults(options);\r\n\r\n    this._enableMouseWheelHandling(options.mouseWheelEnabled);\r\n\r\n    if (options.hasOwnProperty(\"wrap\")) {\r\n      wrapComponent(this, options.wrap);\r\n    }\r\n  }\r\n\r\n  calculateContentFrame() {\r\n    let size;\r\n    if (!this.content) {\r\n      return Utils.rectZero();\r\n    }\r\n\r\n    // Calculates the size of the content. By default this returns the total\r\n    // size of all the content layers based on width and height. You can override\r\n    // this for example to take scaling into account.\r\n\r\n    const contentFrame = this.content.contentFrame();\r\n\r\n    return (size = {\r\n      x: 0,\r\n      y: 0,\r\n      width: Math.max(this.width, contentFrame.x + contentFrame.width),\r\n      height: Math.max(this.height, contentFrame.y + contentFrame.height),\r\n    });\r\n  }\r\n\r\n  setContentLayer(layer) {\r\n    // Sets the content layer if you happen to want to replace the default one\r\n    // yourself. Sets some sane defaults too.\r\n\r\n    if (this.content) {\r\n      this._onAnimationStop();\r\n      this.content.off(Events.AnimationStart, this._onAnimationStart);\r\n      this.content.off(Events.AnimationStop, this._onAnimationStop);\r\n      this._content.destroy();\r\n    }\r\n\r\n    this._content = layer;\r\n    this._content.parent = this;\r\n    this._content.name = \"content\";\r\n    this._content.clip = true;\r\n    this._content.draggable.enabled = true;\r\n    this._content.draggable.momentum = true;\r\n    this._content.on(\"change:children\", this.updateContent);\r\n\r\n    // Update the content view size on resizing the ScrollComponent\r\n    this.on(\"change:width\", this.updateContent);\r\n    this.on(\"change:height\", this.updateContent);\r\n\r\n    this.updateContent();\r\n\r\n    this.scrollPoint = { x: 0, y: 0 };\r\n\r\n    this.content.on(Events.AnimationStart, this._onAnimationStart);\r\n    this.content.on(Events.AnimationStop, this._onAnimationStop);\r\n\r\n    return this._content;\r\n  }\r\n\r\n  updateContent() {\r\n    // This function re-calculates the size of the content, updates the content layer\r\n    // size and the dragging constraints based on the content size and contentInset.\r\n    // It defaults to just the direct sub layers of the content, not recursive.\r\n\r\n    // This function automatically gets called when you add or remove content layers,\r\n    // but not when you change the size of the content layers. It's totally okay to\r\n    // call it yourself, but make sure you don't overdo it.\r\n\r\n    if (!this.content) {\r\n      return;\r\n    }\r\n\r\n    const contentFrame = this.calculateContentFrame();\r\n    this.content.width = contentFrame.width;\r\n    this.content.height = contentFrame.height;\r\n\r\n    let constraintsFrame = this.calculateContentFrame();\r\n    constraintsFrame = {\r\n      x: -constraintsFrame.width + this.width - this._contentInset.right,\r\n      y: -constraintsFrame.height + this.height - this._contentInset.bottom,\r\n      width:\r\n        constraintsFrame.width +\r\n        constraintsFrame.width -\r\n        this.width +\r\n        this._contentInset.left +\r\n        this._contentInset.right,\r\n      height:\r\n        constraintsFrame.height +\r\n        constraintsFrame.height -\r\n        this.height +\r\n        this._contentInset.top +\r\n        this._contentInset.bottom,\r\n    };\r\n\r\n    this.content.draggable.constraints = constraintsFrame;\r\n\r\n    // Reset the scroll points to the right postions, this is needed so it can calculate\r\n    // the new scroll points within the updated constraints for this new size.\r\n    this.scrollPoint = this.scrollPoint;\r\n\r\n    // Change the default background color if we added children. We keep the default\r\n    // color around until you set a content layer so you can see the ScrollComponent\r\n    // on your screen after creation.\r\n    if (this.content.children.length) {\r\n      if (\r\n        this.content.backgroundColor != null\r\n          ? this.content.backgroundColor.isEqual(\r\n              Framer.Defaults.Layer.backgroundColor\r\n            )\r\n          : undefined\r\n      ) {\r\n        return (this.content.backgroundColor = null);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calculateContentPoint(scrollPoint) {\r\n    scrollPoint = _.defaults(scrollPoint, { x: 0, y: 0 });\r\n    scrollPoint.x -= this.contentInset.left;\r\n    scrollPoint.y -= this.contentInset.top;\r\n    const point = this._pointInConstraints(scrollPoint);\r\n    return Utils.pointInvert(point);\r\n  }\r\n\r\n  scrollToPoint(point, animate, animationOptions) {\r\n    // We never let you scroll to a point that does not make sense (out of bounds). If you still\r\n    // would like to do that, access the .content.y directly.\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    const contentPoint = this._calculateContentPoint(point);\r\n    this.content.draggable.animateStop();\r\n\r\n    if (animate) {\r\n      point = {};\r\n      if (contentPoint.hasOwnProperty(\"x\")) {\r\n        point.x = contentPoint.x;\r\n      }\r\n      if (contentPoint.hasOwnProperty(\"y\")) {\r\n        point.y = contentPoint.y;\r\n      }\r\n      this.content.animateStop();\r\n      return this.content.animate(point, animationOptions);\r\n    } else {\r\n      return (this.content.point = contentPoint);\r\n    }\r\n  }\r\n\r\n  scrollToTop(animate, animationOptions) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    return this.scrollToPoint({ x: 0, y: 0 }, animate, animationOptions);\r\n  }\r\n\r\n  scrollToLayer(contentLayer, originX, originY, animate, animationOptions) {\r\n    let scrollPoint;\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    if (contentLayer && contentLayer.parent !== this.content) {\r\n      throw Error(\r\n        \"Can't scroll to this layer because it's not in the ScrollComponent. Add it to the content like layer.parent = scroll.content.\"\r\n      );\r\n    }\r\n\r\n    if (!contentLayer || this.content.children.length === 0) {\r\n      scrollPoint = { x: 0, y: 0 };\r\n    } else {\r\n      scrollPoint = this._scrollPointForLayer(contentLayer, originX, originY);\r\n      scrollPoint.x -= this.width * originX;\r\n      scrollPoint.y -= this.height * originY;\r\n    }\r\n\r\n    this.scrollToPoint(scrollPoint, animate, animationOptions);\r\n\r\n    return contentLayer;\r\n  }\r\n\r\n  scrollToClosestLayer(originX, originY, animate, animationOptions) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    const closestLayer = this.closestContentLayer(\r\n      originX,\r\n      originY,\r\n      animate,\r\n      animationOptions\r\n    );\r\n    if (closestLayer) {\r\n      this.scrollToLayer(closestLayer, originX, originY);\r\n      return closestLayer;\r\n    } else {\r\n      if (!closestLayer) {\r\n        this.scrollToPoint({ x: 0, y: 0 });\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n\r\n  closestContentLayer(originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    const scrollPoint = Utils.framePointForOrigin(\r\n      this.scrollFrame,\r\n      originX,\r\n      originY\r\n    );\r\n    return this.closestContentLayerForScrollPoint(\r\n      scrollPoint,\r\n      originX,\r\n      originY\r\n    );\r\n  }\r\n\r\n  closestContentLayerForScrollPoint(scrollPoint, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.head(\r\n      this._contentLayersSortedByDistanceForScrollPoint(\r\n        scrollPoint,\r\n        originX,\r\n        originY\r\n      )\r\n    );\r\n  }\r\n\r\n  _onAnimationStart(event) {\r\n    return this.content.on(\"change:frame\", this._onAnimationStep);\r\n  }\r\n\r\n  _onAnimationStep(event) {\r\n    this.content.emit(Events.Move, this.content.point);\r\n    return this.emit(Events.Scroll, event);\r\n  }\r\n\r\n  _onAnimationStop() {\r\n    return this.content.off(\"change:frame\", this._onAnimationStep);\r\n  }\r\n\r\n  _scrollPointForLayer(layer, originX, originY, clamp) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (clamp == null) {\r\n      clamp = true;\r\n    }\r\n    return Utils.framePointForOrigin(layer, originX, originY);\r\n  }\r\n\r\n  _contentLayersSortedByDistanceForScrollPoint(scrollPoint, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return Utils.frameSortByAbsoluteDistance(\r\n      scrollPoint,\r\n      this.content.children,\r\n      originX,\r\n      originY\r\n    );\r\n  }\r\n\r\n  _pointInConstraints(point) {\r\n    const { minX, maxX, minY, maxY } =\r\n      this.content.draggable._calculateConstraints(\r\n        this.content.draggable.constraints\r\n      );\r\n\r\n    point = {\r\n      x: -Utils.clamp(-point.x, minX, maxX),\r\n      y: -Utils.clamp(-point.y, minY, maxY),\r\n    };\r\n\r\n    return point;\r\n  }\r\n\r\n  //#############################################################\r\n  // Map scroll events to content.draggable\r\n\r\n  addListener(...args) {\r\n    const adjustedLength = Math.max(args.length, 1),\r\n      eventNames = args.slice(0, adjustedLength - 1),\r\n      listener = args[adjustedLength - 1];\r\n    super.addListener(...arguments);\r\n    return (() => {\r\n      const result = [];\r\n      for (var eventName of Array.from(eventNames)) {\r\n        var needle;\r\n        if (\r\n          ((needle = eventName),\r\n          Array.from(_.keys(EventMappers)).includes(needle))\r\n        ) {\r\n          result.push(this.content.on(EventMappers[eventName], listener));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  removeListener(...args) {\r\n    const adjustedLength = Math.max(args.length, 1),\r\n      eventNames = args.slice(0, adjustedLength - 1),\r\n      listener = args[adjustedLength - 1];\r\n    super.removeListener(...arguments);\r\n    return (() => {\r\n      const result = [];\r\n      for (var eventName of Array.from(eventNames)) {\r\n        var needle;\r\n        if (\r\n          ((needle = eventName),\r\n          Array.from(_.keys(EventMappers)).includes(needle))\r\n        ) {\r\n          result.push(this.content.off(EventMappers[eventName], listener));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _enableMouseWheelHandling(enable) {\r\n    if (enable) {\r\n      return this.on(Events.MouseWheel, this._onMouseWheel);\r\n    } else {\r\n      return this.off(Events.MouseWheel, this._onMouseWheel);\r\n    }\r\n  }\r\n\r\n  _onMouseWheel(event) {\r\n    let deltaX = 0;\r\n    let deltaY = 0;\r\n    if (this.scrollHorizontal) {\r\n      deltaX = event.wheelDeltaX;\r\n    }\r\n    if (this.scrollVertical) {\r\n      deltaY = event.wheelDeltaY;\r\n    }\r\n\r\n    if (deltaX === 0 && deltaY === 0) {\r\n      return;\r\n    }\r\n\r\n    if (!this._mouseWheelScrolling) {\r\n      this._mouseWheelScrolling = true;\r\n      this.emit(Events.ScrollStart, event);\r\n    }\r\n\r\n    this.content.animateStop();\r\n\r\n    const { minX, maxX, minY, maxY } =\r\n      this.content.draggable._calculateConstraints(\r\n        this.content.draggable.constraints\r\n      );\r\n\r\n    const point = {\r\n      x: Utils.clamp(\r\n        this.content.x + deltaX * this.mouseWheelSpeedMultiplier,\r\n        minX,\r\n        maxX\r\n      ),\r\n      y: Utils.clamp(\r\n        this.content.y + deltaY * this.mouseWheelSpeedMultiplier,\r\n        minY,\r\n        maxY\r\n      ),\r\n    };\r\n\r\n    this.content.point = point;\r\n\r\n    this.content.emit(Events.Move, point);\r\n    this.emit(Events.Scroll, event);\r\n    return this._onMouseWheelEnd(event);\r\n  }\r\n\r\n  //#############################################################\r\n  // Copying\r\n\r\n  copy() {\r\n    const copy = super.copy(...arguments);\r\n    const contentLayer = _.head(_.without(copy.children, copy.content));\r\n    copy.setContentLayer(contentLayer);\r\n    copy.props = this.props;\r\n    return copy;\r\n  }\r\n\r\n  //#############################################################\r\n  // Convenience function to make a single layer scrollable\r\n\r\n  static wrap(layer, options) {\r\n    return wrapComponent(new this(options), layer, options);\r\n  }\r\n}\r\nScrollComponent.initClass();\r\n\r\nvar wrapComponent = function (instance, layer, options) {\r\n  if (options == null) {\r\n    options = { correct: true };\r\n  }\r\n  if (!(layer instanceof Layer)) {\r\n    throw new Error(\r\n      `ScrollComponent.wrap expects a layer, not ${layer}. Are you sure the layer exists?`\r\n    );\r\n  }\r\n\r\n  // This function wraps the given layer into a scroll or page component. This is\r\n  // great for importing from Sketch or Photoshop.\r\n\r\n  const scroll = instance;\r\n\r\n  // Do some special case handling for the PageComponent subclass\r\n  // as this function is outside of the class scope so we cant simply\r\n  // override\r\n  const isPageComponent = instance.constructor.name === \"PageComponent\";\r\n\r\n  // If we actually forgot to add a sub layer, so for example if\r\n  // there is just one layer and we want to make it scrollable we\r\n  // correct that here.\r\n\r\n  if (options.correct === true) {\r\n    if (layer.children.length === 0 && !isPageComponent) {\r\n      const wrapper = new Layer();\r\n      wrapper.frame = layer.frame;\r\n      layer.parent = wrapper;\r\n      layer.x = layer.y = 0;\r\n      layer = wrapper;\r\n    }\r\n  }\r\n\r\n  // console.info \"Corrected the scroll component without sub layers\"\r\n\r\n  scroll.frame = layer.frame;\r\n  scroll.parent = layer.parent;\r\n  scroll.index = layer.index;\r\n\r\n  if (layer.name != null && !isPageComponent) {\r\n    scroll.name = layer.name;\r\n  }\r\n  if (scroll.__framerInstanceInfo == null) {\r\n    scroll.__framerInstanceInfo = {};\r\n  }\r\n  if (scroll.__framerInstanceInfo != null) {\r\n    scroll.__framerInstanceInfo.name = instance.constructor.name;\r\n  }\r\n\r\n  // If we have an image set, it makes way more sense to add it to the\r\n  // background of the wrapper then the content.\r\n  // Note: I ran into a situation where this had a weird result, maybe\r\n  // we should revise this in the future.\r\n  if (layer.image && !isPageComponent) {\r\n    scroll.image = layer.image;\r\n    layer.image = null;\r\n  }\r\n\r\n  if (isPageComponent) {\r\n    // Just add the layer as a page\r\n    scroll.addPage(layer);\r\n  } else {\r\n    // Set the original layer as the content layer for the scroll\r\n    scroll.setContentLayer(layer);\r\n  }\r\n\r\n  // https://github.com/motif/Company/issues/208\r\n\r\n  // This could potentially be smart to avoid an unexpected state if\r\n  // you forgot to add a mask in sketch or photoshop and the scroll\r\n  // component size becomes the same as it's content.\r\n\r\n  // This only makes sense if your scroll component is on the screen\r\n  // to begin with so we check that first. Because maybe you put it\r\n  // offscreen to move it onscreen later.\r\n\r\n  // You can turn this off by setting correct to false\r\n\r\n  if (options.correct === true) {\r\n    const { screenFrame } = scroll;\r\n\r\n    if (screenFrame.x < Screen.width) {\r\n      if (screenFrame.x + screenFrame.width > Screen.width) {\r\n        scroll.width = Screen.width - screenFrame.x;\r\n      }\r\n    }\r\n    // console.info \"Corrected the scroll width to #{scroll.width}\"\r\n\r\n    if (screenFrame.y < Screen.height) {\r\n      if (screenFrame.y + screenFrame.height > Screen.height) {\r\n        scroll.height = Screen.height - screenFrame.y;\r\n      }\r\n    }\r\n  }\r\n  // console.info \"Corrected the scroll height to #{scroll.height}\"\r\n\r\n  return scroll;\r\n};\r\n","import { Events } from \"../Events.js\";\r\nimport { ScrollComponent } from \"./ScrollComponent.js\";\r\n\r\n`\\\r\nPageComponent\r\n\r\noriginX <number>\r\noriginY <number>\r\n\r\nvelocityThreshold <number>\r\nanimationOptions <animationOptions={}>\r\ncurrentPage <Layer>\r\nclosestPage(<originX:n, originY:n>) <Layer>\r\n\r\nnextPage(direction=\"\", currentPage)\r\nsnapToNextPage(direction=\"\", animate, animationOptions={})\r\n\\\r\n`;\r\n\r\nexport class PageComponent extends ScrollComponent {\r\n  static initClass() {\r\n    this.define(\"originX\", this.simpleProperty(\"originX\", 0.5));\r\n    this.define(\"originY\", this.simpleProperty(\"originY\", 0.5));\r\n    this.define(\r\n      \"velocityThreshold\",\r\n      this.simpleProperty(\"velocityThreshold\", 0.1)\r\n    );\r\n\r\n    this.define(\"closestPage\", {\r\n      get() {\r\n        return this.closestContentLayerForScrollPoint(\r\n          this._originScrollPoint(),\r\n          this.originX,\r\n          this.originY\r\n        );\r\n      },\r\n    });\r\n    this.define(\"currentPage\", {\r\n      get() {\r\n        return _.last(this._previousPages);\r\n      },\r\n    });\r\n    this.define(\"previousPage\", {\r\n      get() {\r\n        return this._previousPages[this._previousPages.length - 2];\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._scrollStart = this._scrollStart.bind(this);\r\n    this._scrollMove = this._scrollMove.bind(this);\r\n    this._scrollEnd = this._scrollEnd.bind(this);\r\n    this._resetHistory = this._resetHistory.bind(this);\r\n    super(\r\n      _.defaults(options, {\r\n        animationOptions: {\r\n          curve: \"spring(500, 50, 0)\",\r\n        },\r\n      })\r\n    );\r\n\r\n    this.content.draggable.momentum = false;\r\n    this.content.draggable.bounce = false;\r\n\r\n    this.content.on(Events.DragSessionStart, this._scrollStart);\r\n    this.content.on(Events.DragSessionEnd, this._scrollEnd);\r\n\r\n    this.content.on(\"change:frame\", _.debounce(this._scrollMove, 16));\r\n    this.content.on(\"change:children\", this._resetHistory);\r\n\r\n    this._resetHistory();\r\n  }\r\n\r\n  nextPage(direction, currentPage = null, withoutCurrentPage) {\r\n    let layers;\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    if (withoutCurrentPage == null) {\r\n      withoutCurrentPage = true;\r\n    }\r\n    if (currentPage == null) {\r\n      ({ currentPage } = this);\r\n    }\r\n\r\n    // Figure out the point from where to look for next layers in a direction\r\n    let point = { x: 0, y: 0 };\r\n    if (currentPage) {\r\n      point = Utils.framePointForOrigin(\r\n        currentPage,\r\n        this.originX,\r\n        this.originY\r\n      );\r\n    }\r\n    if (!withoutCurrentPage) {\r\n      point = {\r\n        x: this.scrollX + this.originX * this.width,\r\n        y: this.scrollY + this.originY * this.height,\r\n      };\r\n    }\r\n\r\n    if ([\"up\", \"top\", \"north\"].includes(direction)) {\r\n      layers = this.content.childrenAbove(point, this.originX, this.originY);\r\n    }\r\n    if ([\"down\", \"bottom\", \"south\"].includes(direction)) {\r\n      layers = this.content.childrenBelow(point, this.originX, this.originY);\r\n    }\r\n    if ([\"left\", \"west\"].includes(direction)) {\r\n      layers = this.content.childrenLeft(point, this.originX, this.originY);\r\n    }\r\n    if ([\"right\", \"east\"].includes(direction)) {\r\n      layers = this.content.childrenRight(point, this.originX, this.originY);\r\n    }\r\n\r\n    // See if there is one close by that we should go to\r\n    if (withoutCurrentPage) {\r\n      layers = _.without(layers, currentPage);\r\n    }\r\n\r\n    layers = Utils.frameSortByAbsoluteDistance(\r\n      point,\r\n      layers,\r\n      this.originX,\r\n      this.originY\r\n    );\r\n\r\n    return _.head(layers);\r\n  }\r\n\r\n  snapToPage(page, animate, animationOptions = null) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    this.scrollToLayer(\r\n      page,\r\n      this.originX,\r\n      this.originY,\r\n      animate,\r\n      animationOptions\r\n    );\r\n\r\n    if (this.currentPage !== page) {\r\n      this._previousPages.push(page);\r\n      this.emit(\"change:previousPage\", this.previousPage);\r\n      return this.emit(\"change:currentPage\", this.currentPage);\r\n    }\r\n  }\r\n\r\n  snapToNextPage(direction, animate, animationOptions = null) {\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      ({ animationOptions } = this);\r\n    }\r\n    let nextPage = this.nextPage(direction);\r\n    if (nextPage == null) {\r\n      nextPage = this.closestPage;\r\n    }\r\n    return this.snapToPage(nextPage, animate, animationOptions);\r\n  }\r\n\r\n  snapToPreviousPage(animate, animationOptions = null) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (!this.previousPage) {\r\n      return;\r\n    }\r\n    if (animationOptions == null) {\r\n      ({ animationOptions } = this);\r\n    }\r\n    this.snapToPage(this.previousPage, animate, animationOptions);\r\n\r\n    // Modify the previous page stack so we don\"t end up in a loop\r\n    return (this._previousPages = this._previousPages.slice(\r\n      0,\r\n      +(this._previousPages.length - 3) + 1 || undefined\r\n    ));\r\n  }\r\n\r\n  addPage(page, direction) {\r\n    // We only allow adding pages to the right and bottom for now, because it shouldn\"t\r\n    // be hard to insert them in the right order, and if we need to manage that for you\r\n    // we\"d have to change the position of every content layer so the new page fits.\r\n    // Ergo: too much magic.\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    const directions = [\"down\", \"bottom\", \"south\"] + [\"right\", \"east\"];\r\n\r\n    if (Array.from(directions).includes(!direction)) {\r\n      direction = \"right\";\r\n      throw new Error(`${direction} should be in ${directions}`);\r\n    }\r\n\r\n    // If you add pages it makes sense they end up in the default place .\r\n    const point = { x: 0, y: 0 };\r\n\r\n    if (this.content.children.length) {\r\n      if ([\"right\", \"east\"].includes(direction)) {\r\n        point.x = Utils.frameGetMaxX(this.content.contentFrame());\r\n      }\r\n      if ([\"down\", \"bottom\", \"south\"].includes(direction)) {\r\n        point.y = Utils.frameGetMaxY(this.content.contentFrame());\r\n      }\r\n    }\r\n\r\n    page.point = point;\r\n\r\n    if (page.parent !== this.content) {\r\n      return (page.parent = this.content);\r\n    } else {\r\n      return this.updateContent();\r\n    }\r\n  }\r\n\r\n  horizontalPageIndex(page) {\r\n    return _.sortBy(this.content.children, (l) => l.x).indexOf(page);\r\n  }\r\n\r\n  verticalPageIndex(page) {\r\n    return _.sortBy(this.content.children, (l) => l.y).indexOf(page);\r\n  }\r\n\r\n  _scrollStart() {\r\n    return (this._currentPage = this.currentPage);\r\n  }\r\n\r\n  _scrollMove() {\r\n    let needle;\r\n    const { currentPage } = this;\r\n\r\n    if (\r\n      ((needle = currentPage),\r\n      ![_.last(this._previousPages), undefined].includes(needle))\r\n    ) {\r\n      this._previousPages.push(currentPage);\r\n      return this.emit(\"change:currentPage\", {\r\n        old: this.previousPage,\r\n        new: currentPage,\r\n      });\r\n    }\r\n  }\r\n\r\n  _scrollEnd() {\r\n    if (this.content.isAnimating) {\r\n      return;\r\n    }\r\n\r\n    const { velocity } = this.content.draggable;\r\n\r\n    // See if we meet the minimum velocity to scroll to the next page. If not we snap\r\n    // to the layer closest to the scroll point.\r\n\r\n    const xDisabled =\r\n      !this.scrollHorizontal &&\r\n      (this.direction === \"right\" || this.direction === \"left\");\r\n    const yDisabled =\r\n      !this.scrollVertical &&\r\n      (this.direction === \"down\" || this.direction === \"up\");\r\n\r\n    const xLock =\r\n      this.content.draggable._directionLockEnabledX &&\r\n      (this.direction === \"right\" || this.direction === \"left\");\r\n    const yLock =\r\n      this.content.draggable._directionLockEnabledY &&\r\n      (this.direction === \"down\" || this.direction === \"up\");\r\n\r\n    const maximumVelocity = Math.max(\r\n      Math.abs(velocity.x),\r\n      Math.abs(velocity.y)\r\n    );\r\n\r\n    if (\r\n      maximumVelocity < this.velocityThreshold ||\r\n      xLock ||\r\n      yLock ||\r\n      xDisabled ||\r\n      yDisabled\r\n    ) {\r\n      return this.snapToPage(this.closestPage, true, this.animationOptions);\r\n    }\r\n\r\n    // Figure out which direction we are scrolling to and make a sorted list of\r\n    // layers on that side, sorted by absolute distance so we can pick the first.\r\n    let nextPage = this.nextPage(this.direction, this._currentPage, false);\r\n\r\n    // If not, we scroll to the closest layer that we have available, often the one\r\n    // that we are already at.\r\n    if (nextPage == null) {\r\n      nextPage = this.closestPage;\r\n    }\r\n\r\n    // print @content, maximumVelocity, @velocityThreshold\r\n    // print @direction, nextPage\r\n\r\n    return this.snapToPage(nextPage, true, this.animationOptions);\r\n  }\r\n\r\n  _originScrollPoint() {\r\n    const { scrollPoint } = this;\r\n    scrollPoint.x += this.width * this.originX;\r\n    scrollPoint.y += this.height * this.originY;\r\n    return scrollPoint;\r\n  }\r\n\r\n  _resetHistory() {\r\n    this._currentPage = this.closestPage;\r\n    return (this._previousPages = [this._currentPage]);\r\n  }\r\n}\r\nPageComponent.initClass();\r\n","const Utils = require(\"../Utils\");\r\nconst { Layer } = require(\"../Layer\");\r\nconst { Events } = require(\"../Events\");\r\n\r\n`\\\r\nSliderComponent\r\n\r\nknob <layer>\r\nknobSize <width, height>\r\nfill <layer>\r\nmin <number>\r\nmax <number>\r\n\r\npointForValue(<n>)\r\nvalueForPoint(<n>)\r\n\r\nanimateToValue(value, animationOptions={})\\\r\n`;\r\n\r\nEvents.SliderValueChange = \"sliderValueChange\";\r\n\r\nclass Knob extends Layer {\r\n  constructor(options) {\r\n    super(options);\r\n  }\r\n}\r\n\r\nexport class SliderComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"constrained\", this.simpleProperty(\"constrained\", false));\r\n\r\n    this.define(\"knobSize\", {\r\n      get() {\r\n        return this._knobSize;\r\n      },\r\n      set(value) {\r\n        const isRound = this.knob.borderRadius * 2 === this._knobSize;\r\n        this._knobSize = value;\r\n        this.knob.width = this._knobSize;\r\n        this.knob.height = this._knobSize;\r\n        if (isRound) {\r\n          this.knob.borderRadius = this._knobSize / 2;\r\n        }\r\n        return this._updateFrame();\r\n      },\r\n    });\r\n\r\n    this.define(\"hitArea\", {\r\n      get() {\r\n        return this._hitArea;\r\n      },\r\n      set(value) {\r\n        this._hitArea = value;\r\n        if (this.width > this.height) {\r\n          this.sliderOverlay.width = this.width + this.hitArea;\r\n          return (this.sliderOverlay.height = this.hitArea);\r\n        } else {\r\n          this.sliderOverlay.width = this.hitArea;\r\n          return (this.sliderOverlay.height = this.height + this.hitArea);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"min\", {\r\n      get() {\r\n        return this._min || 0;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._min = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"max\", {\r\n      get() {\r\n        return this._max || 1;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._max = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"value\", {\r\n      get() {\r\n        return this._value;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n\r\n        this._value = Utils.clamp(value, this.min, this.max);\r\n\r\n        if (this.width > this.height) {\r\n          this.knob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.knob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._tapStart = this._tapStart.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._updateFill = this._updateFill.bind(this);\r\n    this._updateKnob = this._updateKnob.bind(this);\r\n    this._updateFrame = this._updateFrame.bind(this);\r\n    this._setRadius = this._setRadius.bind(this);\r\n    this._knobDidMove = this._knobDidMove.bind(this);\r\n    this._updateValue = this._updateValue.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#ccc\",\r\n      borderRadius: 50,\r\n      clip: false,\r\n      width: 300,\r\n      height: 10,\r\n      value: 0,\r\n      knobSize: 30,\r\n    });\r\n\r\n    // Set some sensible default for the hit area\r\n    if (options.hitArea == null) {\r\n      options.hitArea = options.knobSize;\r\n    }\r\n\r\n    this.knob = new Knob({\r\n      backgroundColor: \"#fff\",\r\n      shadowY: 2,\r\n      shadowBlur: 4,\r\n      shadowColor: \"rgba(0, 0, 0, 0.3)\",\r\n      name: \"knob\",\r\n    });\r\n\r\n    this.fill = new Layer({\r\n      backgroundColor: \"#333\",\r\n      width: 0,\r\n      force2d: true,\r\n      name: \"fill\",\r\n    });\r\n\r\n    this.sliderOverlay = new Layer({\r\n      backgroundColor: null,\r\n      name: \"sliderOverlay\",\r\n    });\r\n\r\n    super(options);\r\n\r\n    this.knobSize = options.knobSize;\r\n    this.knob.parent = this.fill.parent = this.sliderOverlay.parent = this;\r\n\r\n    // Set fill initially\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n    } else {\r\n      this.fill.width = this.width;\r\n    }\r\n\r\n    this.fill.borderRadius = this.sliderOverlay.borderRadius =\r\n      this.borderRadius;\r\n\r\n    this.knob.draggable.enabled = true;\r\n    this.knob.draggable.overdrag = false;\r\n    this.knob.draggable.momentum = true;\r\n    this.knob.draggable.momentumOptions = { friction: 5, tolerance: 0.25 };\r\n    this.knob.draggable.bounce = false;\r\n    this.knob.borderRadius = this.knobSize / 2;\r\n\r\n    this._updateFrame();\r\n    this._updateKnob();\r\n    this._updateFill();\r\n\r\n    this.on(\"change:frame\", this._updateFrame);\r\n    this.on(\"change:borderRadius\", this._setRadius);\r\n    this.knob.on(\"change:size\", this._updateKnob);\r\n    this.knob.on(\"change:frame\", this._updateFill);\r\n    this.knob.on(\"change:frame\", this._knobDidMove);\r\n\r\n    this.sliderOverlay.on(Events.TapStart, this._tapStart);\r\n    this.sliderOverlay.on(Events.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  _tapStart(event) {\r\n    event.preventDefault();\r\n\r\n    if (this.width > this.height) {\r\n      const touchX = Events.touchEvent(event).clientX - Screen.canvasFrame.x;\r\n      const scaleX = this.canvasScaleX();\r\n      this.value = this.valueForPoint(touchX / scaleX - this.screenFrame.x);\r\n    } else {\r\n      const touchY = Events.touchEvent(event).clientY - Screen.canvasFrame.y;\r\n      const scaleY = this.canvasScaleY();\r\n      this.value = this.valueForPoint(touchY / scaleY - this.screenFrame.y);\r\n    }\r\n\r\n    this.knob.draggable._panStart(event);\r\n    return this._updateValue();\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._updateValue();\r\n  }\r\n\r\n  _updateFill() {\r\n    if (this.width > this.height) {\r\n      return (this.fill.width = this.knob.midX);\r\n    } else {\r\n      return (this.fill.height = this.knob.midY);\r\n    }\r\n  }\r\n\r\n  _updateKnob() {\r\n    if (this.width > this.height) {\r\n      this.knob.midX = this.fill.width;\r\n      return this.knob.centerY();\r\n    } else {\r\n      this.knob.midY = this.fill.height;\r\n      return this.knob.centerX();\r\n    }\r\n  }\r\n\r\n  _updateFrame() {\r\n    this.knob.draggable.constraints = {\r\n      x: -this.knob.width / 2,\r\n      y: -this.knob.height / 2,\r\n      width: this.width + this.knob.width,\r\n      height: this.height + this.knob.height,\r\n    };\r\n\r\n    if (this.constrained) {\r\n      this.knob.draggable.constraints = {\r\n        x: 0,\r\n        y: 0,\r\n        width: this.width,\r\n        height: this.height,\r\n      };\r\n    }\r\n\r\n    this.hitArea = this.hitArea;\r\n\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n      this.knob.midX = this.pointForValue(this.value);\r\n      this.knob.centerY();\r\n    } else {\r\n      this.fill.width = this.width;\r\n      this.knob.midY = this.pointForValue(this.value);\r\n      this.knob.centerX();\r\n    }\r\n\r\n    if (this.width > this.height) {\r\n      this.knob.draggable.speedY = 0;\r\n      this.knob.draggable.speedX = 1;\r\n    } else {\r\n      this.knob.draggable.speedX = 0;\r\n      this.knob.draggable.speedY = 1;\r\n    }\r\n\r\n    return this.sliderOverlay.center();\r\n  }\r\n\r\n  _setRadius() {\r\n    const radius = this.borderRadius;\r\n    return (this.fill.borderRadius = {\r\n      topLeft: radius,\r\n      bottomLeft: radius,\r\n    });\r\n  }\r\n\r\n  _knobDidMove() {\r\n    if (this.width > this.height) {\r\n      return (this.value = this.valueForPoint(this.knob.midX));\r\n    } else {\r\n      return (this.value = this.valueForPoint(this.knob.midY));\r\n    }\r\n  }\r\n\r\n  _updateValue() {\r\n    if (this._lastUpdatedValue === this.value) {\r\n      return;\r\n    }\r\n\r\n    this._lastUpdatedValue = this.value;\r\n    this.emit(\"change:value\", this.value);\r\n    return this.emit(Events.SliderValueChange, this.value);\r\n  }\r\n\r\n  pointForValue(value) {\r\n    if (this.width > this.height) {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0 + this.knob.width / 2, this.width - this.knob.width / 2],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0, this.width],\r\n          true\r\n        );\r\n      }\r\n    } else {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0 + this.knob.height / 2, this.height - this.knob.height / 2],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0, this.height],\r\n          true\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  valueForPoint(value) {\r\n    if (this.width > this.height) {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [0 + this.knob.width / 2, this.width - this.knob.width / 2],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [0, this.width],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      }\r\n    } else {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [0 + this.knob.height / 2, this.height - this.knob.height / 2],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [0, this.height],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  animateToValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(300, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.knob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.knob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.knob.animate(animationOptions);\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.SliderValueChange, cb);\r\n  }\r\n}\r\nSliderComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\n`\\\r\nRangeSliderComponent\r\n\r\nminKnob <layer>\r\nmaxKnob <layer>\r\nknobSize <width, height>\r\nfill <layer>\r\n\r\nmin <number>\r\nmax <number>\r\nminValue <number>\r\nmaxValue <number>\r\n\r\npointForValue(<n>)\r\nvalueForPoint(<n>)\r\n\r\nanimateToMinValue(value, animationOptions={})\r\nanimateToMaxValue(value, animationOptions={})\\\r\n`;\r\n\r\nEvents.SliderValueChange = \"sliderValueChange\";\r\nEvents.SliderMinValueChange = \"sliderMinValueChange\";\r\nEvents.SliderMaxValueChange = \"sliderMaxValueChange\";\r\n\r\nclass Knob extends Layer {\r\n  constructor(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#fff\",\r\n      shadowY: 2,\r\n      shadowBlur: 4,\r\n      shadowColor: \"rgba(0, 0, 0, 0.3)\",\r\n    });\r\n\r\n    super(options);\r\n  }\r\n}\r\nexport class RangeSliderComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"constrained\", this.simpleProperty(\"constrained\", false));\r\n\r\n    this.define(\"knobSize\", {\r\n      get() {\r\n        return this._knobSize;\r\n      },\r\n      set(value) {\r\n        for (var knob of [this.minKnob, this.maxKnob]) {\r\n          var isRound = knob.borderRadius * 2 === this._knobSize;\r\n          this._knobSize = value;\r\n          knob.size = this._knobSize;\r\n          if (isRound) {\r\n            knob.borderRadius = this._knobSize / 2;\r\n          }\r\n        }\r\n\r\n        return this._updateFrame();\r\n      },\r\n    });\r\n\r\n    this.define(\"hitArea\", {\r\n      get() {\r\n        return this._hitArea;\r\n      },\r\n      set(value) {\r\n        this._hitArea = value;\r\n        if (this.width > this.height) {\r\n          this.sliderOverlay.width = this.width + this.hitArea;\r\n          return (this.sliderOverlay.height = this.hitArea);\r\n        } else {\r\n          this.sliderOverlay.width = this.hitArea;\r\n          return (this.sliderOverlay.height = this.height + this.hitArea);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"min\", {\r\n      get() {\r\n        return this._min || 0;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._min = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"max\", {\r\n      get() {\r\n        return this._max || 1;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._max = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"minValue\", {\r\n      get() {\r\n        return this._minValue || 0;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n        this._minValue = value;\r\n\r\n        if (this.width > this.height) {\r\n          this.minKnob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.minKnob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n\r\n    this.define(\"maxValue\", {\r\n      get() {\r\n        return this._maxValue || 0.5;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n        this._maxValue = value;\r\n\r\n        if (this.width > this.height) {\r\n          this.maxKnob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.maxKnob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._tapStart = this._tapStart.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._styleKnob = this._styleKnob.bind(this);\r\n    this._updateFill = this._updateFill.bind(this);\r\n    this._updateKnob = this._updateKnob.bind(this);\r\n    this._updateFrame = this._updateFrame.bind(this);\r\n    this._setRadius = this._setRadius.bind(this);\r\n    this._knobDidMove = this._knobDidMove.bind(this);\r\n    this._updateValue = this._updateValue.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#ccc\",\r\n      borderRadius: 50,\r\n      clip: false,\r\n      width: 300,\r\n      height: 10,\r\n      value: 0,\r\n      knobSize: 30,\r\n    });\r\n\r\n    // Set some sensible default for the hit area\r\n    if (options.hitArea == null) {\r\n      options.hitArea = options.knobSize;\r\n    }\r\n\r\n    this.minKnob = new Knob({\r\n      name: \"minKnob\",\r\n      size: this.knobSize || 30,\r\n    });\r\n\r\n    this.maxKnob = new Knob({\r\n      name: \"maxKnob\",\r\n      size: this.knobSize || 30,\r\n    });\r\n\r\n    this.fill = new Layer({\r\n      backgroundColor: \"#333\",\r\n      width: 0,\r\n      force2d: true,\r\n      name: \"fill\",\r\n    });\r\n\r\n    this.sliderOverlay = new Layer({\r\n      backgroundColor: null,\r\n      name: \"sliderOverlay\",\r\n    });\r\n\r\n    super(options);\r\n\r\n    // Set fill initially\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n    } else {\r\n      this.fill.width = this.width;\r\n    }\r\n\r\n    this.fill.borderRadius = this.sliderOverlay.borderRadius =\r\n      this.borderRadius;\r\n    this.knobSize = options.knobSize;\r\n\r\n    this._styleKnob(this.minKnob);\r\n    this._styleKnob(this.maxKnob);\r\n    this._updateFrame();\r\n    this._updateFill();\r\n    this._updateKnob();\r\n\r\n    this.on(\"change:frame\", this._updateFrame);\r\n    this.on(\"change:borderRadius\", this._setRadius);\r\n\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      knob.on(\"change:size\", this._updateKnob);\r\n      knob.on(\"change:frame\", this._updateFill);\r\n      knob.on(\"change:frame\", this._knobDidMove);\r\n      knob.on(\"change:frame\", this._updateFrame);\r\n    }\r\n\r\n    this.sliderOverlay.on(Events.TapStart, this._tapStart);\r\n    this.sliderOverlay.on(Events.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  _tapStart(event) {\r\n    let clickedValue;\r\n    event.preventDefault();\r\n\r\n    if (this.width > this.height) {\r\n      const touchX = Events.touchEvent(event).clientX - Screen.canvasFrame.x;\r\n      const scaleX = this.canvasScaleX();\r\n      clickedValue = this.valueForPoint(touchX / scaleX - this.x);\r\n\r\n      if (clickedValue > this.maxValue) {\r\n        this.maxValue = clickedValue;\r\n        this.maxKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n      }\r\n\r\n      if (clickedValue < this.minValue) {\r\n        this.minValue = clickedValue;\r\n        this.minKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMinValueChange, this.minValue);\r\n      }\r\n    } else {\r\n      const touchY = Events.touchEvent(event).clientY - Screen.canvasFrame.y;\r\n      const scaleY = this.canvasScaleY();\r\n      clickedValue = this.valueForPoint(touchY / scaleY - this.y);\r\n\r\n      if (clickedValue > this.maxValue) {\r\n        this.maxValue = clickedValue;\r\n        this.maxKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n      }\r\n\r\n      if (clickedValue < this.minValue) {\r\n        this.minValue = clickedValue;\r\n        this.minKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMinValueChange, this.minValue);\r\n      }\r\n    }\r\n\r\n    return this._updateValue();\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._updateValue();\r\n  }\r\n\r\n  _styleKnob(knob) {\r\n    knob.parent = this.fill.parent = this.sliderOverlay.parent = this;\r\n    knob.borderRadius = this.knobSize / 2;\r\n\r\n    return _.extend(knob.draggable, {\r\n      enabled: true,\r\n      overdrag: false,\r\n      momentum: true,\r\n      bounce: false,\r\n      momentumOptions: { friction: 5, tolerance: 0.25 },\r\n    });\r\n  }\r\n\r\n  _updateFill() {\r\n    if (this.width > this.height) {\r\n      this.fill.x = this.minKnob.midX;\r\n      return (this.fill.width = this.maxKnob.midX - this.minKnob.midX);\r\n    } else {\r\n      this.fill.y = this.minKnob.midY;\r\n      return (this.fill.height = this.maxKnob.midY - this.minKnob.midY);\r\n    }\r\n  }\r\n\r\n  _updateKnob() {\r\n    if (this.width > this.height) {\r\n      this.minKnob.midX = this.fill.x;\r\n      this.minKnob.centerY();\r\n\r\n      this.maxKnob.midX = this.fill.x + this.fill.width;\r\n      return this.maxKnob.centerY();\r\n    } else {\r\n      this.minKnob.midY = this.fill.y;\r\n      this.minKnob.centerX();\r\n\r\n      this.maxKnob.midY = this.fill.y + this.fill.height;\r\n      return this.maxKnob.centerX();\r\n    }\r\n  }\r\n\r\n  _updateFrame() {\r\n    let knob;\r\n    this.minKnob.draggable.constraints = {\r\n      x: -this.minKnob.width / 2,\r\n      y: -this.minKnob.height / 2,\r\n      width: this.maxKnob.midX,\r\n      height: this.maxKnob.midY,\r\n    };\r\n\r\n    this.maxKnob.draggable.constraints = {\r\n      x: this.minKnob.maxX,\r\n      y: this.minKnob.maxY,\r\n      width: this.width + this.maxKnob.width,\r\n      height: this.height + this.maxKnob.height,\r\n    };\r\n\r\n    this.hitArea = this.hitArea;\r\n\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n      this.minKnob.midX = this.pointForValue(this.minValue);\r\n      this.maxKnob.midX = this.pointForValue(this.maxValue);\r\n      this.minKnob.centerY();\r\n    } else {\r\n      this.fill.width = this.width;\r\n      this.minKnob.midY = this.pointForValue(this.minValue);\r\n      this.maxKnob.midY = this.pointForValue(this.maxValue);\r\n      this.minKnob.centerX();\r\n    }\r\n\r\n    if (this.width > this.height) {\r\n      for (knob of [this.minKnob, this.maxKnob]) {\r\n        knob.draggable.speedY = 0;\r\n        knob.draggable.speedX = 1;\r\n      }\r\n    } else {\r\n      for (knob of [this.minKnob, this.maxKnob]) {\r\n        knob.draggable.speedX = 0;\r\n        knob.draggable.speedY = 1;\r\n      }\r\n    }\r\n\r\n    return this.sliderOverlay.center();\r\n  }\r\n\r\n  _setRadius() {\r\n    const radius = this.borderRadius;\r\n    return (this.fill.borderRadius = {\r\n      topLeft: radius,\r\n      bottomLeft: radius,\r\n    });\r\n  }\r\n\r\n  _knobDidMove() {\r\n    if (this.width > this.height) {\r\n      this.minValue = this.valueForPoint(this.minKnob.midX);\r\n      return (this.maxValue = this.valueForPoint(this.maxKnob.midX));\r\n    } else {\r\n      this.minValue = this.valueForPoint(this.minKnob.midY);\r\n      return (this.maxValue = this.valueForPoint(this.maxKnob.midY));\r\n    }\r\n  }\r\n\r\n  _updateValue() {\r\n    this.emit(Events.SliderValueChange);\r\n\r\n    if (this.minKnob.draggable.isMoving) {\r\n      this.emit(Events.SliderMinValueChange, this.minValue);\r\n    }\r\n\r\n    if (this.maxKnob.draggable.isMoving) {\r\n      return this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n    }\r\n  }\r\n\r\n  // Retrieve the point (x or y coordinate) of a certain numeric value.\r\n  pointForValue(value) {\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      // For horizontal (default) sliders.\r\n      if (this.width > this.height) {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0 + knob.width / 2, this.width - knob.width / 2],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0, this.width],\r\n            true\r\n          );\r\n        }\r\n\r\n        // For vertical sliders.\r\n      } else {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0 + knob.height / 2, this.height - knob.height / 2],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0, this.height],\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Retrieve the numeric value of a certain point (x or y coordinate).\r\n  valueForPoint(value) {\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      // For horizontal (default) sliders.\r\n      if (this.width > this.height) {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [0 + knob.width / 2, this.width - knob.width / 2],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [0, this.width],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        }\r\n\r\n        // For vertical sliders.\r\n      } else {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [0 + knob.height / 2, this.height - knob.height / 2],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [0, this.height],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  animateToMinValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(250, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.minKnob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.minKnob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.minKnob.animate(animationOptions);\r\n  }\r\n\r\n  animateToMaxValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(250, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.maxKnob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.maxKnob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.maxKnob.animate(animationOptions);\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.SliderValueChange, cb);\r\n  }\r\n  onMinValueChange(cb) {\r\n    return this.on(Events.SliderMinValueChange, cb);\r\n  }\r\n  onMaxValueChange(cb) {\r\n    return this.on(Events.SliderMaxValueChange, cb);\r\n  }\r\n}\r\nRangeSliderComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport _ from \"../Underscore.js\";\r\n\r\nimport { BaseClass } from \"../BaseClass.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\nimport { Events } from \"../Events.js\";\r\n\r\nexport const centerLayer = (layer, snapToPixels = false) => {\r\n  const { frame } = layer;\r\n\r\n  if (layer.parent) {\r\n    Utils.frameSetMidX(\r\n      frame,\r\n      layer.parent.width / 2.0 - layer.parent.borderWidth\r\n    );\r\n    Utils.frameSetMidY(\r\n      frame,\r\n      layer.parent.height / 2.0 - layer.parent.borderWidth\r\n    );\r\n  } else {\r\n    Utils.frameSetMidX(frame, layer._context.innerWidth / 2.0);\r\n    Utils.frameSetMidY(frame, layer._context.innerHeight / 2.0);\r\n  }\r\n\r\n  if (snapToPixels) {\r\n    frame.x = Math.round(frame.x);\r\n    frame.y = Math.round(frame.y);\r\n  }\r\n\r\n  layer.frame = frame;\r\n  return layer.frame;\r\n};\r\n\r\nexport class DeviceComponent extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"context\", {\r\n      get() {\r\n        return this._context;\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // FULLSCREEN\r\n\r\n    this.define(\"fullScreen\", {\r\n      get() {\r\n        return this._fullScreen;\r\n      },\r\n      set(fullScreen) {\r\n        return this._setFullScreen(fullScreen);\r\n      },\r\n    });\r\n\r\n    this.define(\"screenSize\", {\r\n      get() {\r\n        let size;\r\n        if (this._shouldRenderFullScreen()) {\r\n          ({ size } = Canvas);\r\n        } else if (this.isLandscape) {\r\n          size = {\r\n            width: this._device.screenHeight,\r\n            height: this._device.screenWidth,\r\n          };\r\n        } else {\r\n          size = {\r\n            width: this._device.screenWidth,\r\n            height: this._device.screenHeight,\r\n          };\r\n        }\r\n        size.width /= this._context.devicePixelRatio;\r\n        size.height /= this._context.devicePixelRatio;\r\n        return size;\r\n      },\r\n    });\r\n\r\n    this.define(\"deviceType\", {\r\n      get() {\r\n        return this._deviceType;\r\n      },\r\n      set(deviceType) {\r\n        if (deviceType === this._deviceType && deviceType !== \"custom\") {\r\n          return;\r\n        }\r\n\r\n        let device = null;\r\n\r\n        if (_.isString(deviceType)) {\r\n          const lDevicetype = deviceType.toLowerCase();\r\n          for (var key of Array.from(_.keys(Devices))) {\r\n            var lKey = key.toLowerCase();\r\n            if (lDevicetype === lKey) {\r\n              device = Devices[key];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!device) {\r\n          throw Error(\r\n            `No device named ${deviceType}. Options are: ${_.keys(Devices)}`\r\n          );\r\n        }\r\n\r\n        if (this._device === device) {\r\n          return;\r\n        }\r\n\r\n        // If we switch from fullscreen to a device, we should zoom to fit\r\n        const shouldZoomToFit = this._deviceType === \"fullscreen\";\r\n\r\n        this.screen.backgroundColor = \"black\";\r\n        if (device.backgroundColor != null) {\r\n          this.screen.backgroundColor = device.backgroundColor;\r\n        }\r\n\r\n        if (device.deviceType === \"computer\") {\r\n          Utils.domComplete(() => (document.body.style.cursor = \"auto\"));\r\n        }\r\n\r\n        this._device = _.clone(device);\r\n        this._deviceType = deviceType;\r\n        this.fullscreen = false;\r\n        this._updateDeviceImage();\r\n        this._updateMaskImage();\r\n        this._update();\r\n        this.emit(\"change:deviceType\");\r\n\r\n        this.viewport.point = this._viewportOrientationOffset();\r\n\r\n        if (shouldZoomToFit) {\r\n          return (this.deviceScale = \"fit\");\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"hideBezel\", {\r\n      get() {\r\n        if (this._forceHideBezel) {\r\n          return true;\r\n        }\r\n        if (!Utils.isFramerStudio() && this._forceHide) {\r\n          return false;\r\n        }\r\n        return this._hideBezel != null ? this._hideBezel : false;\r\n      },\r\n      set(hideBezel) {\r\n        if (!Utils.isFramerStudio()) {\r\n          return;\r\n        }\r\n        this._hideBezel = hideBezel;\r\n        return this._update();\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // DEVICE ZOOM\r\n\r\n    this.define(\"deviceScale\", {\r\n      get() {\r\n        if (this._shouldRenderFullScreen()) {\r\n          return 1;\r\n        }\r\n        return this._deviceScale || 1;\r\n      },\r\n      set(deviceScale) {\r\n        return this.setDeviceScale(deviceScale, false);\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // CONTENT SCALE\r\n\r\n    this.define(\"contentScale\", {\r\n      get() {\r\n        return this._contentScale || 1;\r\n      },\r\n      set(contentScale) {\r\n        return this.setContentScale(contentScale, false);\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // PHONE ORIENTATION\r\n\r\n    this.define(\"orientation\", {\r\n      get() {\r\n        if (Utils.isMobile()) {\r\n          return window.orientation;\r\n        }\r\n        return this._orientation || 0;\r\n      },\r\n\r\n      set(orientation) {\r\n        return this.setOrientation(orientation, false);\r\n      },\r\n    });\r\n\r\n    this.define(\"isPortrait\", {\r\n      get() {\r\n        return Math.abs(this.orientation) % 180 === 0;\r\n      },\r\n    });\r\n    this.define(\"isLandscape\", {\r\n      get() {\r\n        return !this.isPortrait;\r\n      },\r\n    });\r\n\r\n    this.define(\"orientationName\", {\r\n      get() {\r\n        if (this.isPortrait) {\r\n          return \"portrait\";\r\n        }\r\n        if (this.isLandscape) {\r\n          return \"landscape\";\r\n        }\r\n      },\r\n      set(orientationName) {\r\n        return this.setOrientation(orientationName, false);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._update = this._update.bind(this);\r\n    this.customize = this.customize.bind(this);\r\n    this._updateDeviceImage = this._updateDeviceImage.bind(this);\r\n    this._updateMaskImage = this._updateMaskImage.bind(this);\r\n    this.forceHideBezel = this.forceHideBezel.bind(this);\r\n    this._viewportOrientationOffset =\r\n      this._viewportOrientationOffset.bind(this);\r\n    this._orientationChange = this._orientationChange.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    let defaults = Defaults.getDefaults(\"DeviceComponent\", options);\r\n\r\n    // If we have defaults for DeviceView, we are likely using an older version of\r\n    // Framer Studio. It's best to default to those then for now.\r\n    if (Framer.Defaults.hasOwnProperty(\"DeviceView\")) {\r\n      defaults = _.extend(defaults, Framer.Defaults.DeviceView);\r\n    }\r\n\r\n    this._setup();\r\n\r\n    this.animationOptions = defaults.animationOptions;\r\n    this.deviceType = defaults.deviceType;\r\n\r\n    _.extend(this, _.defaults(options, defaults));\r\n\r\n    this.Type = {\r\n      Tablet: \"tablet\",\r\n      Phone: \"phone\",\r\n      Computer: \"computer\",\r\n    };\r\n  }\r\n\r\n  _setup() {\r\n    if (this._setupDone) {\r\n      return;\r\n    }\r\n\r\n    this._setupDone = true;\r\n\r\n    this.background = new Layer();\r\n    this.background.clip = true;\r\n    this.background.backgroundColor = \"transparent\";\r\n    this.background.classList.add(\"DeviceBackground\");\r\n\r\n    this.hands = new Layer({ name: \"hands\" });\r\n    this.handsImageLayer = new Layer({\r\n      parent: this.hands,\r\n      name: \"handsImage\",\r\n    });\r\n    this.phone = new Layer({ parent: this.hands, name: \"phone\" });\r\n    // This background is made slightly bigger than the screen to prevent the background shining through cracks\r\n    this.screenBackground = new Layer({\r\n      parent: this.hands,\r\n      name: \"screenBackground\",\r\n      backgroundColor: \"black\",\r\n    });\r\n    this.screen = new Layer({ parent: this.hands, name: \"phone\" });\r\n    this.viewport = new Layer({ parent: this.screen, name: \"screen\" });\r\n    this.content = new Layer({ parent: this.viewport, name: \"viewport\" });\r\n    this.screenMask = new Layer({\r\n      parent: this.screen,\r\n      name: \"mask\",\r\n      backgroundColor: null,\r\n    });\r\n\r\n    this.content.classList.add(\"DeviceContent\");\r\n\r\n    this.hands.backgroundColor = \"transparent\";\r\n    this.hands._alwaysUseImageCache = true;\r\n    this.handsImageLayer.backgroundColor = \"transparent\";\r\n    this.hands.classList.add(\"DeviceHands\");\r\n\r\n    this.phone.backgroundColor = \"transparent\";\r\n    this.phone.classList.add(\"DevicePhone\");\r\n\r\n    this.screen.classList.add(\"DeviceScreen\");\r\n    this.screen.clip = true;\r\n\r\n    this.viewport.backgroundColor = \"transparent\";\r\n    this.viewport.classList.add(\"DeviceComponentPort\");\r\n\r\n    this.content.backgroundColor = \"transparent\";\r\n    this.content.classList.add(\"DeviceContent\");\r\n\r\n    this.content.originX = 0;\r\n    this.content.originY = 0;\r\n\r\n    if (!Utils.isMobile()) {\r\n      Framer.CurrentContext.domEventManager\r\n        .wrap(window)\r\n        .addEventListener(\"resize\", this._update);\r\n    }\r\n    if (Utils.isMobile()) {\r\n      Framer.CurrentContext.domEventManager\r\n        .wrap(window)\r\n        .addEventListener(\"resize\", this._orientationChange);\r\n    }\r\n\r\n    // This avoids rubber banding on mobile\r\n    for (var layer of [\r\n      this.background,\r\n      this.phone,\r\n      this.viewport,\r\n      this.content,\r\n      this.screen,\r\n      this.screenMask,\r\n    ]) {\r\n      layer.on(\"touchmove\", (event) => event.preventDefault());\r\n    }\r\n\r\n    this.screenMask.ignoreEvents = true;\r\n    this.phone.ignoreEvents = true;\r\n\r\n    this._context = new Framer.Context({\r\n      parent: this.content,\r\n      name: \"DeviceScreen\",\r\n    });\r\n    this._context.perspective = 1200;\r\n    this._context.device = this;\r\n    return this.on(\"change:orientation\", function () {\r\n      if (Screen.size !== Screen.height) {\r\n        return Screen.emit(\"resize\");\r\n      }\r\n    });\r\n  }\r\n\r\n  _update() {\r\n    // Todo: pixel align at zoom level 1, 0.5\r\n\r\n    let height, width;\r\n    let contentScaleFactor = this.contentScale;\r\n    if (contentScaleFactor > 1) {\r\n      contentScaleFactor = 1;\r\n    }\r\n    let screenSizeChanged = false;\r\n    if (this._shouldRenderFullScreen()) {\r\n      const { clientWidth } = document.documentElement;\r\n      const { clientHeight } = document.documentElement;\r\n      if (Utils.isMobile()) {\r\n        // This uses the actual screen size, which only make sense if the prototype\r\n        // takes up the whole screen of the device\r\n        width = screen.width * window.devicePixelRatio;\r\n        height = screen.height * window.devicePixelRatio;\r\n        // If the width and height don't match up with the client width and height\r\n        // the device is rotated, so flip them\r\n        if (\r\n          (clientWidth < clientHeight && width > height) ||\r\n          (clientWidth > clientHeight && width < height)\r\n        ) {\r\n          const newHeight = width;\r\n          width = height;\r\n          height = newHeight;\r\n        }\r\n      } else {\r\n        width = clientWidth / contentScaleFactor;\r\n        height = clientHeight / contentScaleFactor;\r\n      }\r\n      screenSizeChanged =\r\n        this.content.width !== width || this.content.height !== height;\r\n      for (var layer of [\r\n        this.background,\r\n        this.hands,\r\n        this.phone,\r\n        this.viewport,\r\n        this.content,\r\n        this.screen,\r\n        this.screenMask,\r\n      ]) {\r\n        layer.x = layer.y = 0;\r\n        layer.width = width;\r\n        layer.height = height;\r\n        layer.scale = 1;\r\n      }\r\n\r\n      this.content.scale = contentScaleFactor;\r\n      if (this.deviceType !== \"fullscreen\" || Utils.isMobile()) {\r\n        screenSizeChanged =\r\n          screenSizeChanged ||\r\n          this._context.devicePixelRatio !== window.devicePixelRatio;\r\n        this._context.devicePixelRatio = window.devicePixelRatio;\r\n      }\r\n      this.screenBackground.visible = this.deviceType !== \"fullscreen\";\r\n\r\n      if (Utils.isMobile()) {\r\n        this.screenMask.visible = false;\r\n      } else {\r\n        this._updateMaskImage();\r\n      }\r\n    } else {\r\n      const backgroundOverlap = 100;\r\n\r\n      this.background.x = 0 - backgroundOverlap;\r\n      this.background.y = 0 - backgroundOverlap;\r\n      this.background.width = window.innerWidth + 2 * backgroundOverlap;\r\n      this.background.height = window.innerHeight + 2 * backgroundOverlap;\r\n      if (this.disableSizeUpdates) {\r\n        return;\r\n      }\r\n      this._updateDeviceImage();\r\n      this._updateMaskImage();\r\n      this.screenMask.visible = this.hideBezel;\r\n      this.hands.scale = this._calculatePhoneScale();\r\n      centerLayer(this.hands, true);\r\n      centerLayer(this.phone);\r\n\r\n      [width, height] = Array.from(\r\n        this._getOrientationDimensions(\r\n          this._device.screenWidth / contentScaleFactor,\r\n          this._device.screenHeight / contentScaleFactor\r\n        )\r\n      );\r\n\r\n      this.screenMask.width =\r\n        this.screen.width =\r\n        this.viewport.width =\r\n          this._device.screenWidth;\r\n      this.screenMask.height =\r\n        this.screen.height =\r\n        this.viewport.height =\r\n          this._device.screenHeight;\r\n      screenSizeChanged =\r\n        this.content.width !== width || this.content.height !== height;\r\n      this.content.width = width;\r\n      this.content.height = height;\r\n      this.screenBackground.width = this.screen.width + 40;\r\n      this.screenBackground.height = this.screen.height + 40;\r\n      if (this.selectedHand && this._orientation === 0) {\r\n        this.setHand(this.selectedHand);\r\n      }\r\n      centerLayer(this.screenBackground, true);\r\n      centerLayer(this.screen, true);\r\n      centerLayer(this.screenMask, true);\r\n\r\n      const pixelRatio =\r\n        this._device.devicePixelRatio != null\r\n          ? this._device.devicePixelRatio\r\n          : 1;\r\n      screenSizeChanged =\r\n        screenSizeChanged || this._context.devicePixelRatio !== pixelRatio;\r\n      this._context.devicePixelRatio = pixelRatio;\r\n      if (window.devicePixelRatio === pixelRatio && Utils.isDesktop()) {\r\n        // On desktop rendering natively without scaling looks better, so do that\r\n        this._context.renderUsingNativePixelRatio = true;\r\n        this.content.scale = pixelRatio;\r\n      } else {\r\n        this._context.renderUsingNativePixelRatio = false;\r\n        this.content.scale = 1;\r\n      }\r\n    }\r\n\r\n    if (screenSizeChanged) {\r\n      return Screen.emit(\"resize\");\r\n    }\r\n  }\r\n\r\n  _shouldRenderFullScreen() {\r\n    if (!this._device) {\r\n      return true;\r\n    }\r\n\r\n    if (this.fullScreen === true) {\r\n      return true;\r\n    }\r\n\r\n    if (this.deviceType === \"fullscreen\") {\r\n      return true;\r\n    }\r\n\r\n    if (Utils.isInsideIframe()) {\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"phone\" &&\r\n      Utils.deviceType() === this._device.deviceType\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"tablet\" &&\r\n      Utils.deviceType() === this._device.deviceType\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"phone\" &&\r\n      this._device.deviceType === \"tablet\"\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  setupContext() {\r\n    // Sets this device up as the default context so everything renders\r\n    // into the device screen\r\n    return (Framer.CurrentContext = this._context);\r\n  }\r\n\r\n  platform() {\r\n    if (/google|nexus|htc|samsung|sony-smartwatch/.test(this.deviceType)) {\r\n      return \"Android\";\r\n    }\r\n    if (/iphone|ipad/.test(this.deviceType)) {\r\n      return \"iOS\";\r\n    }\r\n    if (/apple-watch|applewatch/.test(this.deviceType)) {\r\n      return \"watchOS\";\r\n    }\r\n    if (/apple|safari/.test(this.deviceType)) {\r\n      return \"macOS\";\r\n    }\r\n    if (/microsoft|dell/.test(this.deviceType)) {\r\n      return \"Windows\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _setFullScreen(fullScreen) {\r\n    if (this._deviceType === \"fullscreen\") {\r\n      return;\r\n    }\r\n\r\n    if (!_.isBoolean(fullScreen)) {\r\n      return;\r\n    }\r\n\r\n    if (fullScreen === this._fullScreen) {\r\n      return;\r\n    }\r\n\r\n    this._fullScreen = fullScreen;\r\n\r\n    if (fullScreen === true) {\r\n      this.phone.image = \"\";\r\n      this.hands.image = \"\";\r\n    } else {\r\n      this._updateDeviceImage();\r\n    }\r\n    this._updateMaskImage();\r\n\r\n    this._update();\r\n    return this.emit(\"change:fullScreen\");\r\n  }\r\n\r\n  //##########################################################################\r\n  // DEVICE TYPE\r\n\r\n  customize(deviceProps) {\r\n    Devices.custom = _.defaults(deviceProps, Devices.custom);\r\n    this.deviceType = \"custom\";\r\n    return this._update();\r\n  }\r\n\r\n  _updateDeviceImage() {\r\n    if (/PhantomJS/.test(navigator.userAgent)) {\r\n      return;\r\n    }\r\n\r\n    if (this._shouldRenderFullScreen() || this.hideBezel) {\r\n      this.phone.image = \"\";\r\n      return (this.hands.image = \"\");\r\n    } else if (!this._deviceImageUrl(this._deviceImageName())) {\r\n      return (this.phone.image = \"\");\r\n    } else {\r\n      this.phone._alwaysUseImageCache = true;\r\n      this.phone.image = this._deviceImageUrl(this._deviceImageName());\r\n      this.phone.width = this._device.deviceImageWidth;\r\n      this.phone.height = this._device.deviceImageHeight;\r\n      this.hands.width = this.phone.width;\r\n      return (this.hands.height = this.phone.height);\r\n    }\r\n  }\r\n\r\n  _updateMaskImage() {\r\n    if (this._device.screenMask) {\r\n      this.phone.bringToFront();\r\n      this.screenMask.image = this._deviceImageUrl(this._device.screenMask);\r\n      return (this.screenMask.visible = true);\r\n    } else {\r\n      this.screenMask.image = null;\r\n      this.screenMask.visible = false;\r\n      return this.phone.placeBehind(this.screen);\r\n    }\r\n  }\r\n\r\n  _deviceImageName() {\r\n    if (this._device.hasOwnProperty(\"deviceImage\")) {\r\n      return this._device.deviceImage;\r\n    }\r\n    return `${this._deviceType}.png`;\r\n  }\r\n\r\n  _deviceImageUrl(name) {\r\n    if (!name) {\r\n      return null;\r\n    }\r\n\r\n    // If the image is externally hosted, we'd like to use that\r\n    if (_.startsWith(name, \"http://\") || _.startsWith(name, \"https://\")) {\r\n      return name;\r\n    }\r\n\r\n    // If this device is added by the user we use the name as it is\r\n    if (\r\n      !Array.from(BuiltInDevices).includes(this._deviceType) ||\r\n      this._deviceType === \"custom\"\r\n    ) {\r\n      return name;\r\n    }\r\n\r\n    // We want to get these image from our public resources server\r\n    let resourceUrl = \"//resources.framerjs.com/static/DeviceResources\";\r\n\r\n    // If we are running a local copy of Framer from the drive, get the resource online\r\n    if (Utils.isFileUrl(window.location.href)) {\r\n      resourceUrl = `http:${resourceUrl}`;\r\n    }\r\n\r\n    // If we're running Framer Studio and have local files, we'd like to use those.\r\n    // For now we always use jp2 inside framer stusio\r\n    if (Utils.isFramerStudio() && window.FramerStudioInfo) {\r\n      if (\r\n        (this._device.minStudioVersion &&\r\n          Utils.framerStudioVersion() >= this._device.minStudioVersion) ||\r\n        !this._device.minStudioVersion\r\n      ) {\r\n        if (\r\n          (this._device.maxStudioVersion &&\r\n            Utils.framerStudioVersion() <= this._device.maxStudioVersion) ||\r\n          !this._device.maxStudioVersion\r\n        ) {\r\n          resourceUrl = window.FramerStudioInfo.deviceImagesUrl;\r\n          return `${resourceUrl}/${name.replace(\".png\", \".jp2\")}`;\r\n        }\r\n      }\r\n    }\r\n\r\n    // We'd like to use jp2/webp if possible, or check if we don't for this specific device\r\n    if (this._device.deviceImageCompression === true) {\r\n      if (Utils.isWebPSupported()) {\r\n        return `${resourceUrl}/${name.replace(\".png\", \".webp\")}`;\r\n      }\r\n      if (Utils.isJP2Supported()) {\r\n        return `${resourceUrl}/${name.replace(\".png\", \".jp2\")}`;\r\n      }\r\n    }\r\n\r\n    return `${resourceUrl}/${name}`;\r\n  }\r\n\r\n  forceHideBezel(forceHide) {\r\n    if (forceHide == null) {\r\n      forceHide = true;\r\n    }\r\n    this._forceHideBezel = forceHide;\r\n    return this._update();\r\n  }\r\n\r\n  setDeviceScale(deviceScale, animate) {\r\n    let phoneScale;\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    if (deviceScale === \"fit\" || deviceScale < 0) {\r\n      deviceScale = \"fit\";\r\n    } else {\r\n      deviceScale = parseFloat(deviceScale);\r\n    }\r\n\r\n    if (deviceScale === this._deviceScale) {\r\n      return;\r\n    }\r\n\r\n    this._deviceScale = deviceScale;\r\n\r\n    if (this._shouldRenderFullScreen()) {\r\n      return;\r\n    }\r\n\r\n    if (deviceScale === \"fit\") {\r\n      phoneScale = this._calculatePhoneScale();\r\n    } else {\r\n      phoneScale = deviceScale;\r\n    }\r\n\r\n    this.hands.animateStop();\r\n\r\n    if (animate) {\r\n      this.hands.animate(\r\n        _.extend(this.animationOptions, { properties: { scale: phoneScale } })\r\n      );\r\n    } else {\r\n      this.hands.scale = phoneScale;\r\n      centerLayer(this.hands, true);\r\n    }\r\n\r\n    return this.emit(\"change:deviceScale\");\r\n  }\r\n\r\n  _calculatePhoneScale(windowWidth, windowHeight) {\r\n    // Calculates a phone scale that fits the screen unless a fixed value is set\r\n    let padding;\r\n    const dimension = this.hideBezel ? this.screen : this.phone;\r\n\r\n    const [width, height] = Array.from(\r\n      this._getOrientationDimensions(dimension.width, dimension.height)\r\n    );\r\n\r\n    if (this.hideBezel) {\r\n      padding = 0;\r\n    } else {\r\n      const paddingOffset =\r\n        (this._device != null ? this._device.paddingOffset : undefined) || 0;\r\n      padding = (this.padding + paddingOffset) * 2;\r\n    }\r\n\r\n    if (windowWidth == null) {\r\n      windowWidth = window.innerWidth;\r\n    }\r\n    if (windowHeight == null) {\r\n      windowHeight = window.innerHeight;\r\n    }\r\n    let phoneScale = _.min([\r\n      (windowWidth - padding) / width,\r\n      (windowHeight - padding) / height,\r\n    ]);\r\n\r\n    // Only scale in fixed steps, to reduce blurriness, and pixel cracks\r\n    phoneScale = Math.floor(phoneScale * 1024.0) / 1024.0;\r\n    if (phoneScale < 1 / 64.0) {\r\n      phoneScale = 1 / 64.0;\r\n    }\r\n\r\n    if (!Utils.isFramerStudio() || !this.hideBezel) {\r\n      // If close to a nice round scaling, snap to it\r\n      if (30 / 64 < phoneScale && phoneScale < 35 / 64) {\r\n        phoneScale = 32 / 64;\r\n      } else if (15 / 64 < phoneScale && phoneScale < 18 / 64) {\r\n        phoneScale = 16 / 64;\r\n      }\r\n    }\r\n\r\n    // Never scale the phone beyond 100%\r\n    if (phoneScale > 1 && !this.hideBezel) {\r\n      phoneScale = 1;\r\n    }\r\n\r\n    this.emit(\"change:phoneScale\", phoneScale);\r\n\r\n    // If the device has a set scale we use that one\r\n    if (this._deviceScale && this._deviceScale !== \"fit\") {\r\n      return this._deviceScale;\r\n    }\r\n\r\n    return phoneScale;\r\n  }\r\n\r\n  setContentScale(contentScale, animate) {\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    contentScale = parseFloat(contentScale);\r\n\r\n    if (contentScale <= 0) {\r\n      return;\r\n    }\r\n\r\n    if (contentScale === this._contentScale) {\r\n      return;\r\n    }\r\n\r\n    this._contentScale = contentScale;\r\n\r\n    if (animate) {\r\n      this.content.animate(\r\n        _.extend(this.animationOptions, {\r\n          properties: { scale: this._contentScale },\r\n        })\r\n      );\r\n    } else {\r\n      this.content.scale = this._contentScale;\r\n    }\r\n\r\n    this._update();\r\n\r\n    return this.emit(\"change:contentScale\");\r\n  }\r\n\r\n  setOrientation(orientation, animate, suggestedSize = null) {\r\n    let scale;\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    if (Utils.framerStudioVersion() === oldDeviceMaxVersion) {\r\n      orientation *= -1;\r\n    }\r\n\r\n    if (orientation === \"portrait\") {\r\n      orientation = 0;\r\n    }\r\n\r\n    if (orientation === \"landscape\") {\r\n      orientation = 90;\r\n    }\r\n\r\n    if (this._shouldRenderFullScreen()) {\r\n      return;\r\n    }\r\n\r\n    orientation = parseInt(orientation);\r\n\r\n    if (![0, 90, -90].includes(orientation)) {\r\n      return;\r\n    }\r\n\r\n    if (orientation === this._orientation) {\r\n      return;\r\n    }\r\n\r\n    this._orientation = orientation;\r\n\r\n    // Calculate properties for the phone\r\n    const handsProperties = { rotationZ: -this._orientation };\r\n\r\n    const options = _.clone(this.animationOptions);\r\n    if (suggestedSize != null) {\r\n      scale = this._calculatePhoneScale(\r\n        suggestedSize.width,\r\n        suggestedSize.height\r\n      );\r\n      handsProperties.x = suggestedSize.width / 2 - this.hands.width / 2.0;\r\n      handsProperties.y = suggestedSize.height / 2 - this.hands.height / 2.0;\r\n      options.time = null;\r\n      // Converted with Origami from Bounciness 5, Speed 12\r\n      options.curve = Spring({ tension: 342.10059, friction: 28.97662 });\r\n    } else {\r\n      scale = this._calculatePhoneScale();\r\n    }\r\n\r\n    handsProperties.scale = scale;\r\n    const contentProperties = this._viewportOrientationOffset();\r\n\r\n    this.hands.animateStop();\r\n    this.viewport.animateStop();\r\n\r\n    if (animate) {\r\n      const previousBackgroundColor = this.background.backgroundColor;\r\n      const previousScreenBackgroundVisiblity = this.screenBackground.visible;\r\n      if (this.hideBezel) {\r\n        this.screenBackground.visible = false;\r\n        this.background.backgroundColor = this.screen.backgroundColor;\r\n        this.disableSizeUpdates = true;\r\n      }\r\n      const animation = this.hands.animate(\r\n        _.extend(options, { properties: handsProperties })\r\n      );\r\n      this.viewport.animate(\r\n        _.extend(options, { properties: contentProperties })\r\n      );\r\n\r\n      animation.on(Events.AnimationEnd, () => {\r\n        return this._update();\r\n      });\r\n\r\n      animation.on(Events.AnimationStop, () => {\r\n        this.disableSizeUpdates = false;\r\n        this.background.backgroundColor = previousBackgroundColor;\r\n        return (this.screenBackground.visible =\r\n          previousScreenBackgroundVisiblity);\r\n      });\r\n    } else {\r\n      this.hands.props = handsProperties;\r\n      this.viewport.props = contentProperties;\r\n      this._update();\r\n    }\r\n\r\n    if (this._orientation !== 0) {\r\n      this.handsImageLayer.image = \"\";\r\n    }\r\n\r\n    return this.emit(\"change:orientation\", this._orientation);\r\n  }\r\n\r\n  _viewportOrientationOffset() {\r\n    let contentProperties;\r\n    const [width, height] = Array.from(\r\n      this._getOrientationDimensions(\r\n        this._device.screenWidth,\r\n        this._device.screenHeight\r\n      )\r\n    );\r\n\r\n    this.content.width = width;\r\n    this.content.height = height;\r\n\r\n    let offset = (this.screen.width - width) / 2;\r\n    if (this._orientation === -90) {\r\n      offset *= -1;\r\n    }\r\n\r\n    let [x, y] = Array.from([0, 0]);\r\n\r\n    if (this.isLandscape) {\r\n      x = offset;\r\n      y = offset;\r\n    }\r\n\r\n    return (contentProperties = {\r\n      rotationZ: this._orientation,\r\n      x,\r\n      y,\r\n    });\r\n  }\r\n\r\n  _orientationChange() {\r\n    this._orientation = window.orientation;\r\n    this._update();\r\n    return this.emit(\"change:orientation\", window.orientation);\r\n  }\r\n\r\n  rotateLeft(animate) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (this.orientation === 90) {\r\n      return;\r\n    }\r\n    return this.setOrientation(this.orientation + 90, animate);\r\n  }\r\n\r\n  rotateRight(animate) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (this.orientation === -90) {\r\n      return;\r\n    }\r\n    return this.setOrientation(this.orientation - 90, animate);\r\n  }\r\n\r\n  _getOrientationDimensions(width, height) {\r\n    if (this.isLandscape) {\r\n      return [height, width];\r\n    } else {\r\n      return [width, height];\r\n    }\r\n  }\r\n\r\n  //##########################################################################\r\n  // HANDS\r\n\r\n  handSwitchingSupported() {\r\n    return this._device.hands !== undefined && !this.hideBezel;\r\n  }\r\n\r\n  nextHand() {\r\n    if (this.hands.rotationZ !== 0) {\r\n      return;\r\n    }\r\n    if (this.handSwitchingSupported()) {\r\n      const hands = _.keys(this._device.hands);\r\n      if (hands.length > 0) {\r\n        const nextHandIndex = hands.indexOf(this.selectedHand) + 1;\r\n        let nextHand = \"\";\r\n        if (nextHandIndex < hands.length) {\r\n          nextHand = hands[nextHandIndex];\r\n        }\r\n        const hand = this.setHand(nextHand);\r\n        this._update();\r\n        return hand;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setHand(hand) {\r\n    this.selectedHand = hand;\r\n    if (!hand || !this.handSwitchingSupported()) {\r\n      return (this.handsImageLayer.image = \"\");\r\n    }\r\n\r\n    const handData = this._device.hands[hand];\r\n    if (handData) {\r\n      this.hands.width = handData.width;\r\n      this.hands.height = handData.height;\r\n      centerLayer(this.hands, true);\r\n      centerLayer(this.phone);\r\n      this.handsImageLayer.size = this.hands.size;\r\n      this.handsImageLayer.y = 0;\r\n      if (handData.offset) {\r\n        this.handsImageLayer.y = handData.offset;\r\n      }\r\n      this.handsImageLayer.image = this.handImageUrl(hand);\r\n      return hand;\r\n    }\r\n  }\r\n\r\n  handImageUrl(hand) {\r\n    // We want to get these image from our public resources server\r\n    let resourceUrl = \"//resources.framerjs.com/static/DeviceResources\";\r\n\r\n    // If we are running a local copy of Framer from the drive, get the resource online\r\n    if (Utils.isFileUrl(window.location.href)) {\r\n      resourceUrl = `http://${resourceUrl}`;\r\n    }\r\n\r\n    // If we're running Framer Studio and have local files, we'd like to use those\r\n    if (\r\n      Utils.isFramerStudio() &&\r\n      window.FramerStudioInfo &&\r\n      Utils.framerStudioVersion() >= newDeviceMinVersion\r\n    ) {\r\n      resourceUrl = window.FramerStudioInfo.deviceImagesUrl;\r\n      return `${resourceUrl}/${hand}.png`;\r\n    }\r\n\r\n    if (Utils.isWebPSupported()) {\r\n      return `${resourceUrl}/${hand}.webp`;\r\n    }\r\n    if (Utils.isJP2Supported()) {\r\n      return `${resourceUrl}/${hand}.jp2`;\r\n    }\r\n\r\n    return `${resourceUrl}/${hand}.png`;\r\n  }\r\n\r\n  toInspect() {\r\n    return `<Device '${this.deviceType}' ${this.screenSize.width}x${this.screenSize.height}>`;\r\n  }\r\n\r\n  prepareForSnapshot() {\r\n    this.hideBezel = true;\r\n    this.setDeviceScale(-1, true);\r\n    this.screenMask.visible = false;\r\n    this.screenBackground.visible = false;\r\n    return (this.background.backgroundColor = null);\r\n  }\r\n}\r\nDeviceComponent.initClass();\r\n\r\n//##########################################################################\r\n// DEVICE CONFIGURATIONS\r\n\r\nconst iPhoneXReleaseVersion = 105;\r\nconst googlePixelReleaseVersion = 75;\r\nconst desktopReleaseVersion = 70;\r\nvar newDeviceMinVersion = 53;\r\nvar oldDeviceMaxVersion = 52;\r\nconst redesignMaxVersion = 92;\r\n\r\nconst iPadAir2BaseDevice = {\r\n  deviceImageWidth: 1856,\r\n  deviceImageHeight: 2608,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPadMini4BaseDevice = {\r\n  deviceImageWidth: 1936,\r\n  deviceImageHeight: 2688,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPadProBaseDevice = {\r\n  deviceImageWidth: 2448,\r\n  deviceImageHeight: 3432,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2048,\r\n  screenHeight: 2732,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPhoneXBaseDevice = {\r\n  deviceImageWidth: 1405,\r\n  deviceImageHeight: 2796,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1125,\r\n  screenHeight: 2436,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"apple-iphone-x-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3567,\r\n      height: 5558,\r\n      offset: -15,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3567,\r\n      height: 5558,\r\n      offset: -15,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone8BaseDevice = {\r\n  deviceImageWidth: 871,\r\n  deviceImageHeight: 1776,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2399,\r\n      height: 3738,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2399,\r\n      height: 3738,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone8PlusBaseDevice = {\r\n  deviceImageWidth: 1436,\r\n  deviceImageHeight: 2876,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3949,\r\n      height: 6154,\r\n      offset: -15,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3949,\r\n      height: 6154,\r\n      offset: -15,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone7BaseDevice = {\r\n  deviceImageWidth: 874,\r\n  deviceImageHeight: 1792,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: 71,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone7PlusBaseDevice = {\r\n  deviceImageWidth: 1452,\r\n  deviceImageHeight: 2968,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: 71,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone6BaseDevice = {\r\n  deviceImageWidth: 874,\r\n  deviceImageHeight: 1792,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone6PlusBaseDevice = {\r\n  deviceImageWidth: 1452,\r\n  deviceImageHeight: 2968,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhoneSEBaseDevice = {\r\n  deviceImageWidth: 768,\r\n  deviceImageHeight: 1610,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone5BaseDevice = {\r\n  deviceImageWidth: 768,\r\n  deviceImageHeight: 1612,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone5CBaseDevice = {\r\n  deviceImageWidth: 776,\r\n  deviceImageHeight: 1620,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 28,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 28,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus4BaseDevice = {\r\n  deviceImageWidth: 860,\r\n  deviceImageHeight: 1668,\r\n  deviceImageCompression: true,\r\n  screenWidth: 768,\r\n  screenHeight: 1280,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2362,\r\n      height: 3681,\r\n      offset: -52,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2362,\r\n      height: 3681,\r\n      offset: -52,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus5BaseDevice = {\r\n  deviceImageWidth: 1204,\r\n  deviceImageHeight: 2432,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3292,\r\n      height: 5130,\r\n      offset: 8,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3292,\r\n      height: 5130,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus6BaseDevice = {\r\n  deviceImageWidth: 1576,\r\n  deviceImageHeight: 3220,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 3.5,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4304,\r\n      height: 6707,\r\n      offset: 8,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4304,\r\n      height: 6707,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nconst PixelBaseDevice = {\r\n  deviceImageWidth: 1224,\r\n  deviceImageHeight: 2492,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 2.627,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: googlePixelReleaseVersion,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3344,\r\n      height: 5211,\r\n      offset: 23,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3344,\r\n      height: 5211,\r\n      offset: 23,\r\n    },\r\n  },\r\n};\r\n\r\nconst Pixel2BaseDevice = {\r\n  deviceImageWidth: 1210,\r\n  deviceImageHeight: 2513,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 2.627,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3316,\r\n      height: 5167,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3316,\r\n      height: 5167,\r\n    },\r\n  },\r\n};\r\n\r\nconst Pixel2XLBaseDevice = {\r\n  deviceImageWidth: 1650,\r\n  deviceImageHeight: 3364,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2880,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"google-pixel-2-xl-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4530,\r\n      height: 7059,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4521,\r\n      height: 7045,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus9BaseDevice = {\r\n  deviceImageWidth: 1896,\r\n  deviceImageHeight: 2648,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst HTCa9BaseDevice = {\r\n  deviceImageWidth: 1252,\r\n  deviceImageHeight: 2592,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 36,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 36,\r\n    },\r\n  },\r\n};\r\n\r\nconst HTCm8BaseDevice = {\r\n  deviceImageWidth: 1232,\r\n  deviceImageHeight: 2572,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 12,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 12,\r\n    },\r\n  },\r\n};\r\n\r\nconst MSFTLumia950BaseDevice = {\r\n  deviceImageWidth: 1660,\r\n  deviceImageHeight: 3292,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4494,\r\n      height: 7003,\r\n      offset: -84,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4494,\r\n      height: 7003,\r\n      offset: -84,\r\n    },\r\n  },\r\n};\r\n\r\nconst SamsungGalaxyNote5BaseDevice = {\r\n  deviceImageWidth: 1572,\r\n  deviceImageHeight: 3140,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4279,\r\n      height: 6668,\r\n      offset: -24,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4279,\r\n      height: 6668,\r\n      offset: -84,\r\n    },\r\n  },\r\n};\r\n\r\nconst SamsungGalaxyS8BaseDevice = {\r\n  deviceImageWidth: 1536,\r\n  deviceImageHeight: 3334,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2960,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"samsung-galaxy-s8-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4210,\r\n      height: 6560,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4210,\r\n      height: 6560,\r\n    },\r\n  },\r\n};\r\n\r\nconst AppleWatchSeries242Device = {\r\n  deviceImageWidth: 512,\r\n  deviceImageHeight: 990,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: 71,\r\n};\r\n\r\nconst AppleWatchSeries238Device = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 772,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: 71,\r\n};\r\n\r\nconst AppleWatch42Device = {\r\n  deviceImageWidth: 512,\r\n  deviceImageHeight: 990,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst AppleWatch38Device = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 772,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst AppleWatch38BlackLeatherDevice = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 796,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst SonySmartwatch3Base = {\r\n  deviceImageWidth: 444,\r\n  deviceImageHeight: 780,\r\n  deviceImageCompression: true,\r\n  screenWidth: 320,\r\n  screenHeight: 320,\r\n  devicePixelRatio: 1.5,\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst AppleMacBook = {\r\n  deviceImageWidth: 3084,\r\n  deviceImageHeight: 1860,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2304,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleMacBookAir = {\r\n  deviceImageWidth: 2000,\r\n  deviceImageHeight: 1220,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 900,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleMacBookPro = {\r\n  deviceImageWidth: 3820,\r\n  deviceImageHeight: 2320,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2880,\r\n  screenHeight: 1800,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleIMac = {\r\n  deviceImageWidth: 5600,\r\n  deviceImageHeight: 5880,\r\n  deviceImageCompression: true,\r\n  screenWidth: 5120,\r\n  screenHeight: 2880,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleThunderboltDisplay = {\r\n  deviceImageWidth: 2788,\r\n  deviceImageHeight: 2580,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2560,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst DellXPS = {\r\n  deviceImageWidth: 5200,\r\n  deviceImageHeight: 3040,\r\n  deviceImageCompression: true,\r\n  screenWidth: 3840,\r\n  screenHeight: 2160,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst SonyW85OC = {\r\n  deviceImageWidth: 1320,\r\n  deviceImageHeight: 860,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1280,\r\n  screenHeight: 720,\r\n  devicePixelRatio: 1,\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfaceBook = {\r\n  deviceImageWidth: 4102,\r\n  deviceImageHeight: 2474,\r\n  deviceImageCompression: true,\r\n  screenWidth: 3000,\r\n  screenHeight: 2000,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfacePro3 = {\r\n  deviceImageWidth: 2472,\r\n  deviceImageHeight: 1704,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2160,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 1.5,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfacePro4 = {\r\n  deviceImageWidth: 3064,\r\n  deviceImageHeight: 2120,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2736,\r\n  screenHeight: 1824,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\n//##########################################################################\r\n// OLD DEVICE CONFIGURATIONS\r\n\r\nconst old_iPhone6BaseDevice = {\r\n  deviceImageWidth: 870,\r\n  deviceImageHeight: 1738,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone6BaseDeviceHand = _.extend({}, old_iPhone6BaseDevice, {\r\n  deviceImageWidth: 1988,\r\n  deviceImageHeight: 2368,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -150,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone6PlusBaseDevice = {\r\n  deviceImageWidth: 1460,\r\n  deviceImageHeight: 2900,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone6PlusBaseDeviceHand = _.extend({}, old_iPhone6PlusBaseDevice, {\r\n  deviceImageWidth: 3128,\r\n  deviceImageHeight: 3487,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -150,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone5BaseDevice = {\r\n  deviceImageWidth: 780,\r\n  deviceImageHeight: 1608,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone5BaseDeviceHand = _.extend({}, old_iPhone5BaseDevice, {\r\n  deviceImageWidth: 1884,\r\n  deviceImageHeight: 2234,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -200,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone5CBaseDevice = {\r\n  deviceImageWidth: 776,\r\n  deviceImageHeight: 1612,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone5CBaseDeviceHand = _.extend({}, old_iPhone5CBaseDevice, {\r\n  deviceImageWidth: 1894,\r\n  deviceImageHeight: 2244,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -200,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPadMiniBaseDevice = {\r\n  deviceImageWidth: 872,\r\n  deviceImageHeight: 1292,\r\n  deviceImageCompression: true,\r\n  screenWidth: 768,\r\n  screenHeight: 1024,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPadMiniBaseDeviceHand = _.extend({}, old_iPadMiniBaseDevice, {\r\n  deviceImageWidth: 1380,\r\n  deviceImageHeight: 2072,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPadAirBaseDevice = {\r\n  deviceImageWidth: 1769,\r\n  deviceImageHeight: 2509,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPadAirBaseDeviceHand = _.extend({}, old_iPadAirBaseDevice, {\r\n  deviceImageWidth: 4744,\r\n  deviceImageHeight: 4101,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_Nexus5BaseDevice = {\r\n  deviceImageWidth: 1208,\r\n  deviceImageHeight: 2440,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_Nexus5BaseDeviceHand = _.extend({}, old_Nexus5BaseDevice, {\r\n  // 26922996\r\n  deviceImageWidth: 2692,\r\n  deviceImageHeight: 2996,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_Nexus9BaseDevice = {\r\n  deviceImageWidth: 1733,\r\n  deviceImageHeight: 2575,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_AppleWatch42Device = {\r\n  deviceImageWidth: 552,\r\n  deviceImageHeight: 938,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_AppleWatch38Device = {\r\n  deviceImageWidth: 508,\r\n  deviceImageHeight: 900,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nvar Devices = {\r\n  fullscreen: {\r\n    name: \"Fullscreen\",\r\n    deviceType: \"desktop\",\r\n    backgroundColor: \"transparent\",\r\n  },\r\n\r\n  custom: {\r\n    name: \"Custom\",\r\n    deviceImageWidth: 874,\r\n    deviceImageHeight: 1792,\r\n    screenWidth: 750,\r\n    screenHeight: 1334,\r\n    devicePixelRatio: 2,\r\n    deviceType: \"phone\",\r\n  },\r\n\r\n  // iPad Air\r\n  \"apple-ipad-air-2-silver\": _.clone(iPadAir2BaseDevice),\r\n  \"apple-ipad-air-2-gold\": _.clone(iPadAir2BaseDevice),\r\n  \"apple-ipad-air-2-space-gray\": _.clone(iPadAir2BaseDevice),\r\n\r\n  // iPad Mini\r\n  \"apple-ipad-mini-4-silver\": _.clone(iPadMini4BaseDevice),\r\n  \"apple-ipad-mini-4-gold\": _.clone(iPadMini4BaseDevice),\r\n  \"apple-ipad-mini-4-space-gray\": _.clone(iPadMini4BaseDevice),\r\n\r\n  // iPad Pro\r\n  \"apple-ipad-pro-silver\": _.clone(iPadProBaseDevice),\r\n  \"apple-ipad-pro-gold\": _.clone(iPadProBaseDevice),\r\n  \"apple-ipad-pro-space-gray\": _.clone(iPadProBaseDevice),\r\n\r\n  // iPhone X\r\n  \"apple-iphone-x-silver\": _.clone(iPhoneXBaseDevice),\r\n  \"apple-iphone-x-space-gray\": _.clone(iPhoneXBaseDevice),\r\n\r\n  // iPhone 8\r\n  \"apple-iphone-8-silver\": _.clone(iPhone8BaseDevice),\r\n  \"apple-iphone-8-gold\": _.clone(iPhone8BaseDevice),\r\n  \"apple-iphone-8-space-gray\": _.clone(iPhone8BaseDevice),\r\n\r\n  // iPhone 8 Plus\r\n  \"apple-iphone-8-plus-silver\": _.clone(iPhone8PlusBaseDevice),\r\n  \"apple-iphone-8-plus-gold\": _.clone(iPhone8PlusBaseDevice),\r\n  \"apple-iphone-8-plus-space-gray\": _.clone(iPhone8PlusBaseDevice),\r\n\r\n  // iPhone 7\r\n  \"apple-iphone-7-gold\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-rose-gold\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-silver\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-black\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-jet-black\": _.clone(iPhone7BaseDevice),\r\n\r\n  // iPhone 7 Plus\r\n  \"apple-iphone-7-plus-gold\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-rose-gold\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-silver\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-black\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-jet-black\": _.clone(iPhone7PlusBaseDevice),\r\n\r\n  // iPhone 6s\r\n  \"apple-iphone-6s-gold\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-rose-gold\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-silver\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-space-gray\": _.clone(iPhone6BaseDevice),\r\n\r\n  // iPhone 6s Plus\r\n  \"apple-iphone-6s-plus-gold\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-rose-gold\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-silver\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-space-gray\": _.clone(iPhone6PlusBaseDevice),\r\n\r\n  // iPhone SE\r\n  \"apple-iphone-se-gold\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-silver\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-space-gray\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-rose-gold\": _.clone(iPhoneSEBaseDevice),\r\n\r\n  // iPhone 5S\r\n  \"apple-iphone-5s-gold\": _.clone(iPhone5BaseDevice),\r\n  \"apple-iphone-5s-silver\": _.clone(iPhone5BaseDevice),\r\n  \"apple-iphone-5s-space-gray\": _.clone(iPhone5BaseDevice),\r\n\r\n  // iPhone 5C\r\n  \"apple-iphone-5c-blue\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-green\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-red\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-white\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-yellow\": _.clone(iPhone5CBaseDevice),\r\n\r\n  // Apple Watch Series 2 38mm\r\n  \"apple-watch-series-2-38mm-black-steel-black\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-edition\": _.clone(AppleWatchSeries238Device),\r\n  \"apple-watch-series-2-38mm-rose-gold-aluminum-midnight-blue\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-cocoa\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-concrete\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-ocean-blue\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-red\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-turquoise\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-white\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-yellow\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-space-gray-aluminum-black\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-sport-aluminum-walnut\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-steel-white\": _.clone(AppleWatchSeries238Device),\r\n\r\n  // Apple Watch Series 2 42mm\r\n  \"apple-watch-series-2-42mm-edition\": _.clone(AppleWatchSeries242Device),\r\n  \"apple-watch-series-2-42mm-gold-aluminum-cocoa\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-rose-gold-aluminum-midnight-blue\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-concrete\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-green\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-light-pink\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-ocean-blue\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-pink-sand\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-red\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-turquoise\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-white\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-yellow\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-space-black-steel-black\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-space-gray-aluminum-black\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-steel-white\": _.clone(AppleWatchSeries242Device),\r\n\r\n  // Apple Watch Nike+ 38mm\r\n  \"apple-watch-nike-plus-38mm-silver-aluminum-flat-silver-volt\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-silver-aluminum-flat-silver-white\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-space-gray-aluminum-black-cool-gray\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-space-gray-aluminum-black-volt\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n\r\n  // Apple Watch Nike+ 42mm\r\n  \"apple-watch-nike-plus-42mm-silver-aluminum-flat-silver-volt\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-silver-aluminum-flat-silver-white\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-space-gray-aluminum-black-cool-gray\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-space-gray-aluminum-black-volt\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n\r\n  // Apple Watch 38mm\r\n\r\n  \"apple-watch-38mm-gold-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n  \"apple-watch-38mm-rose-gold-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n  \"apple-watch-38mm-stainless-steel-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n\r\n  \"apple-watch-38mm-black-steel-black-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-gold-midnight-blue-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-rose-gold-lavender-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-blue-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-fog-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-green-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-red-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-walnut-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-white-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-gold-antique-white-closed\":\r\n    _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-rose-gold-stone-closed\":\r\n    _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-space-gray-black-closed\": _.clone(AppleWatch38Device),\r\n\r\n  // Apple Watch 42mm\r\n  \"apple-watch-42mm-black-steel-black-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-gold-black-leather-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-gold-midnight-blue-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-rose-gold-black-leather-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-rose-gold-lavender-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-blue-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-fog-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-green-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-red-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-walnut-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-white-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-gold-antique-white-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-rose-gold-stone-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-space-gray-black-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-stainless-steel-black-leather-closed\":\r\n    _.clone(AppleWatch42Device),\r\n\r\n  // Sony SmartWatch 3\r\n  \"sony-smartwatch-3-black\": _.clone(SonySmartwatch3Base),\r\n  \"sony-smartwatch-3-white\": _.clone(SonySmartwatch3Base),\r\n\r\n  // NEXUS\r\n  \"google-nexus-4\": _.clone(Nexus4BaseDevice),\r\n  \"google-nexus-5x\": _.clone(Nexus5BaseDevice),\r\n  \"google-nexus-6p\": _.clone(Nexus6BaseDevice),\r\n  \"google-nexus-9\": _.clone(Nexus9BaseDevice),\r\n\r\n  // Pixel\r\n  \"google-pixel-quite-black\": _.clone(PixelBaseDevice),\r\n  \"google-pixel-really-blue\": _.clone(PixelBaseDevice),\r\n  \"google-pixel-very-silver\": _.clone(PixelBaseDevice),\r\n\r\n  // Pixel 2\r\n  \"google-pixel-2-clearly-white\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-just-black\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-kinda-blue\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-xl-black-and-white\": _.clone(Pixel2XLBaseDevice),\r\n  \"google-pixel-2-xl-just-black\": _.clone(Pixel2XLBaseDevice),\r\n\r\n  // HTC ONE A9\r\n  \"htc-one-a9-black\": _.clone(HTCa9BaseDevice),\r\n  \"htc-one-a9-white\": _.clone(HTCa9BaseDevice),\r\n\r\n  // HTC ONE M8\r\n  \"htc-one-m8-black\": _.clone(HTCm8BaseDevice),\r\n  \"htc-one-m8-gold\": _.clone(HTCm8BaseDevice),\r\n  \"htc-one-m8-silver\": _.clone(HTCm8BaseDevice),\r\n\r\n  // MICROSOFT LUMIA 950\r\n  \"microsoft-lumia-950-black\": _.clone(MSFTLumia950BaseDevice),\r\n  \"microsoft-lumia-950-white\": _.clone(MSFTLumia950BaseDevice),\r\n\r\n  // SAMSUNG NOTE 5\r\n  \"samsung-galaxy-note-5-black\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-gold\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-pink\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-silver-titanium\": _.clone(\r\n    SamsungGalaxyNote5BaseDevice\r\n  ),\r\n  \"samsung-galaxy-note-5-white\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n\r\n  //Samsug Galaxy S8\r\n  \"samsung-galaxy-s8-orchid-gray\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-midnight-black\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-maple-gold\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-coral-blue\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-arctic-silver\": _.clone(SamsungGalaxyS8BaseDevice),\r\n\r\n  // Notebooks\r\n  \"apple-macbook\": _.clone(AppleMacBook),\r\n  \"apple-macbook-air\": _.clone(AppleMacBookAir),\r\n  \"apple-macbook-pro\": _.clone(AppleMacBookPro),\r\n  \"dell-xps\": _.clone(DellXPS),\r\n\r\n  // Desktops\r\n  \"apple-imac\": _.clone(AppleIMac),\r\n  \"apple-thunderbolt-display\": _.clone(AppleThunderboltDisplay),\r\n  \"microsoft-surface-book\": _.clone(MicrosoftSurfaceBook),\r\n  \"microsoft-surface-pro-3\": _.clone(MicrosoftSurfacePro3),\r\n  \"microsoft-surface-pro-4\": _.clone(MicrosoftSurfacePro4),\r\n\r\n  // TV\r\n  \"sony-w85Oc\": _.clone(SonyW85OC),\r\n\r\n  // OLD DEVICES\r\n  \"desktop-safari-1024-600\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1024 x 600\",\r\n    screenWidth: 1024,\r\n    screenHeight: 600,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1136,\r\n    deviceImageHeight: 760,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n  \"desktop-safari-1280-800\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1280 x 800\",\r\n    screenWidth: 1280,\r\n    screenHeight: 800,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1392,\r\n    deviceImageHeight: 960,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n  \"desktop-safari-1440-900\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1440 x 900\",\r\n    screenWidth: 1440,\r\n    screenHeight: 900,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1552,\r\n    deviceImageHeight: 1060,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n\r\n  // iPhone 6\r\n  \"iphone-6-spacegray\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-spacegray-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n  \"iphone-6-silver\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-silver-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n  \"iphone-6-gold\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-gold-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n\r\n  // iPhone 6+\r\n  \"iphone-6plus-spacegray\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-spacegray-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n  \"iphone-6plus-silver\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-silver-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n  \"iphone-6plus-gold\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-gold-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n\r\n  // iPhone 5S\r\n  \"iphone-5s-spacegray\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-spacegray-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n  \"iphone-5s-silver\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-silver-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n  \"iphone-5s-gold\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-gold-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n\r\n  // iPhone 5C\r\n  \"iphone-5c-green\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-green-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-blue\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-blue-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-pink\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-pink-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-white\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-white-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-yellow\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-yellow-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n\r\n  // iPad Mini\r\n  \"ipad-mini-spacegray\": _.clone(old_iPadMiniBaseDevice),\r\n  \"ipad-mini-spacegray-hand\": _.clone(old_iPadMiniBaseDeviceHand),\r\n  \"ipad-mini-silver\": _.clone(old_iPadMiniBaseDevice),\r\n  \"ipad-mini-silver-hand\": _.clone(old_iPadMiniBaseDeviceHand),\r\n\r\n  // iPad Air\r\n  \"ipad-air-spacegray\": _.clone(old_iPadAirBaseDevice),\r\n  \"ipad-air-spacegray-hand\": _.clone(old_iPadAirBaseDeviceHand),\r\n  \"ipad-air-silver\": _.clone(old_iPadAirBaseDevice),\r\n  \"ipad-air-silver-hand\": _.clone(old_iPadAirBaseDeviceHand),\r\n\r\n  // Nexus 5\r\n  \"nexus-5-black\": _.clone(old_Nexus5BaseDevice),\r\n  \"nexus-5-black-hand\": _.clone(old_Nexus5BaseDeviceHand),\r\n\r\n  // Nexus 9\r\n  \"nexus-9\": _.clone(old_Nexus9BaseDevice),\r\n\r\n  // Apple Watch 38mm\r\n  \"applewatchsport-38-aluminum-sportband-black\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatchsport-38-aluminum-sportband-blue\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchsport-38-aluminum-sportband-green\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatchsport-38-aluminum-sportband-pink\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchsport-38-aluminum-sportband-white\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatch-38-black-bracelet\": _.clone(old_AppleWatch38Device),\r\n  \"applewatch-38-steel-bracelet\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-blue\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-gray\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-red\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-sportband-black\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-sportband-white\": _.clone(old_AppleWatch38Device),\r\n\r\n  // Apple Watch 42mm\r\n  \"applewatchsport-42-aluminum-sportband-black\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatchsport-42-aluminum-sportband-blue\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchsport-42-aluminum-sportband-green\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatchsport-42-aluminum-sportband-pink\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchsport-42-aluminum-sportband-white\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatch-42-black-bracelet\": _.clone(old_AppleWatch42Device),\r\n  \"applewatch-42-steel-bracelet\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-blue\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-gray\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-red\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-sportband-black\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-sportband-white\": _.clone(old_AppleWatch42Device),\r\n};\r\n\r\nexports.DeviceComponent.Devices = Devices;\r\n\r\nvar BuiltInDevices = _.keys(Devices);\r\n","import _ from \"../Underscore.js\";\r\nimport Utils from \"../Utils.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\nimport { Layer } from \"../Layer.js\";\r\n\r\nexport class GridComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"rows\", {\r\n      get: () => this._rows,\r\n      set: function (value) {\r\n        this._rows = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"columns\", {\r\n      get: () => this._columns,\r\n      set: function (value) {\r\n        this._columns = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"spacing\", {\r\n      get: function () {\r\n        return this._spacing || { horizontal: 0, vertical: 0 };\r\n      },\r\n      set: function (value) {\r\n        if (_.isNumber(value)) {\r\n          value = { horizontal: value, vertical: value };\r\n        }\r\n        this._spacing = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"renderCell\", {\r\n      get: function () {\r\n        return this._renderCell || this._defaultRenderCell;\r\n      },\r\n      set: function (f) {\r\n        if (f === this._renderCell) return;\r\n        if (!_.isFunction(f))\r\n          throw new Error(\r\n            `GridComponent.renderCell should be a function, not ${typeof f}`\r\n          );\r\n        this._renderCell = f;\r\n        this.render();\r\n      },\r\n    });\r\n\r\n    this.define(\"cellWidth\", {\r\n      get: function () {\r\n        return (\r\n          (this.width - this.spacing.horizontal * (this.columns - 1)) /\r\n          this.columns\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"cellHeight\", {\r\n      get: function () {\r\n        return (\r\n          (this.height - this.spacing.vertical * (this.rows - 1)) / this.rows\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"cells\", {\r\n      get: function () {\r\n        return _.values(this._cells);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(Defaults.getDefaults(\"GridComponent\", options));\r\n  }\r\n\r\n  cellX(column) {\r\n    return column * (this.cellWidth + this.spacing.horizontal);\r\n  }\r\n\r\n  cellY(row) {\r\n    return row * (this.cellHeight + this.spacing.vertical);\r\n  }\r\n\r\n  cellFrame(column, row) {\r\n    return {\r\n      x: this.cellX(column),\r\n      y: this.cellY(row),\r\n      width: this.cellWidth,\r\n      height: this.cellHeight,\r\n    };\r\n  }\r\n\r\n  cell(column, row) {\r\n    return this._cells[`${column}:${row}`];\r\n  }\r\n\r\n  render() {\r\n    return this._render();\r\n  }\r\n\r\n  _render() {\r\n    this._reset();\r\n\r\n    for (let row = 0; row < this.rows; row++) {\r\n      for (let column = 0; column < this.columns; column++) {\r\n        const frame = this.cellFrame(column, row);\r\n        const cell = new Layer({\r\n          parent: this,\r\n          frame,\r\n          name: `Cell ${column}:${row}`,\r\n        });\r\n\r\n        this.renderCell(cell, row, column);\r\n        this._cells[`${column}:${row}`] = cell;\r\n      }\r\n    }\r\n\r\n    return this._cells;\r\n  }\r\n\r\n  _defaultRenderCell(cell, row, column) {\r\n    cell.backgroundColor = \"#28affa\";\r\n    cell.hueRotate =\r\n      column * 20 + (row % this.columns) * (20 / (this.columns + 1));\r\n    Utils.labelLayer(cell, `${row}:${column}`);\r\n    cell.style.fontSize = \"30px\";\r\n    return cell;\r\n  }\r\n\r\n  _reset() {\r\n    _.invokeMap(this.cells, \"destroy\");\r\n    this._cells = {};\r\n  }\r\n}\r\n\r\nGridComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { AnimationGroup } from \"../AnimationGroup.js\";\r\n\r\nEvents.TransitionStart = \"transitionstart\";\r\nEvents.TransitionHalt = \"transitionhalt\";\r\nEvents.TransitionStop = \"transitionstop\";\r\nEvents.TransitionEnd = \"transitionend\";\r\n\r\nexport class FlowComponent extends Layer {\r\n  static initClass() {\r\n    // @define \"isTransitioning\",\r\n    // \tget: -> @_runningTransition\r\n\r\n    this.define(\"isModal\", {\r\n      get() {\r\n        return this._isModal;\r\n      },\r\n    });\r\n\r\n    this.define(\"stack\", {\r\n      get() {\r\n        return this._stack.map((item) => item.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"current\", {\r\n      get() {\r\n        return __guard__(this._stack[this._stack.length - 1], (x) => x.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"previous\", {\r\n      get() {\r\n        return __guard__(this._stack[this._stack.length - 2], (x) => x.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"scroll\", {\r\n      get() {\r\n        return this.current != null ? this.current._flowScroll : undefined;\r\n      },\r\n    });\r\n\r\n    this.define(\"mouseWheelEnabled\", {\r\n      default: false,\r\n      get() {\r\n        return this._mouseWheelEnabled;\r\n      },\r\n      set(value) {\r\n        return (this._mouseWheelEnabled = value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Header and footer\r\n\r\n    this.define(\"header\", {\r\n      get() {\r\n        return this._header;\r\n      },\r\n      set(layer) {\r\n        if (!(layer instanceof Layer)) {\r\n          return;\r\n        }\r\n        this._header = layer;\r\n        this._header.name = \"header\";\r\n        this._header.width = this.width;\r\n        this._header.setParentPreservingConstraintValues(this);\r\n        if (this._header.constraintValues == null) {\r\n          this._header.x = Align.center;\r\n          this._header.y = Align.top;\r\n        }\r\n        if (this.current) {\r\n          return this._wrapLayer(this.current);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"footer\", {\r\n      get() {\r\n        return this._footer;\r\n      },\r\n      set(layer) {\r\n        if (!(layer instanceof Layer)) {\r\n          return;\r\n        }\r\n        this._footer = layer;\r\n        this._footer.name = \"footer\";\r\n        this._footer.width = this.width;\r\n        this._footer.setParentPreservingConstraintValues(this);\r\n        if (this._footer.constraintValues == null) {\r\n          this._footer.x = Align.center;\r\n          this._footer.y = Align.bottom;\r\n        }\r\n        if (this.current) {\r\n          return this._wrapLayer(this.current);\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layerOrOptions, options) {\r\n    this.showPrevious = this.showPrevious.bind(this);\r\n    this._handleOverlayTap = this._handleOverlayTap.bind(this);\r\n    this._forwardScrollEvents = this._forwardScrollEvents.bind(this);\r\n    this._runTransition = this._runTransition.bind(this);\r\n    if (layerOrOptions == null) {\r\n      layerOrOptions = {};\r\n    }\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    let layer = null;\r\n\r\n    if (layerOrOptions instanceof Layer) {\r\n      layer = layerOrOptions;\r\n      options = options;\r\n    } else {\r\n      options = layerOrOptions;\r\n    }\r\n\r\n    options = _.defaults({}, options, { backgroundColor: \"black\" });\r\n\r\n    if (!options.size) {\r\n      if (options.width == null) {\r\n        options.width = Screen.width;\r\n      }\r\n      if (options.height == null) {\r\n        options.height = Screen.height;\r\n      }\r\n    }\r\n\r\n    if (options.clip == null) {\r\n      options.clip = true;\r\n    }\r\n\r\n    super(options);\r\n\r\n    this.reset();\r\n\r\n    this.overlay = new Layer({\r\n      name: \"overlay\",\r\n      parent: this,\r\n      size: 0,\r\n      backgroundColor: \"black\",\r\n      visible: false,\r\n    });\r\n\r\n    this.overlay.onTap(this._handleOverlayTap);\r\n\r\n    if (layer) {\r\n      this.showNext(layer);\r\n    } else {\r\n      this._tempScroll = new ScrollComponent({\r\n        name: \"scrollComponent\",\r\n        parent: this,\r\n        width: this.width,\r\n        height: this.height,\r\n      });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    if (this._stack) {\r\n      for (var item of Array.from(this._stack)) {\r\n        if (item.layer !== this._initial) {\r\n          item.layer.visible = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._stack = [];\r\n    this._seen = [];\r\n    this._current = null;\r\n    this._isModal = false;\r\n\r\n    if (this._initial) {\r\n      return this.showNext(this._initial, { animate: false });\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  // Transitions\r\n\r\n  transition(layer, transitionFunction, options) {\r\n    // Transition over to a new layer using a specific transtition function.\r\n\r\n    // Some basic error checking\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (!(layer instanceof Layer)) {\r\n      throw new Error(\"FlowComponent.transition expects a layer\");\r\n    }\r\n    if (!transitionFunction) {\r\n      throw new Error(\"FlowComponent.transition expects transitionFunction\");\r\n    }\r\n\r\n    if (layer === this.current) {\r\n      return;\r\n    }\r\n\r\n    // Remove the temporary scroll component when the first layer gets added\r\n    if (this._tempScroll != null) {\r\n      this._tempScroll.destroy();\r\n    }\r\n\r\n    // Set the default values so we get some expected results (visibility,\r\n    // correct parent, events, wrapping, etcetera).\r\n\r\n    // If this is the first layer we navigate to, we skip the animation\r\n\r\n    options = _.defaults({}, options, {\r\n      animate: this._firstTransition === true ? true : false,\r\n      scroll: true,\r\n      wrap: true,\r\n      modal: false,\r\n    });\r\n\r\n    // Deal with modal transitions, where a click on the overlay goes back\r\n    this._isModal = options.modal;\r\n\r\n    // Make sure the layer is visible\r\n    layer.visible = true;\r\n    layer.opacity = 1;\r\n\r\n    // We want the layer to block events so you can't click on layers\r\n    // that end up behind it without knowing it.\r\n    layer.ignoreEvents = false;\r\n\r\n    // Wrap the layer into a ScrollComponent if it exceeds the size\r\n    // and correct the parent if needed.\r\n    let wrappedLayer = layer;\r\n    if (options.scroll && options.wrap) {\r\n      wrappedLayer = this._wrapLayer(layer);\r\n    }\r\n\r\n    wrappedLayer.parent = this;\r\n    wrappedLayer.visible = !options.animate;\r\n\r\n    const layerA = this.current;\r\n    const layerB = wrappedLayer;\r\n    const { overlay } = this;\r\n\r\n    // Get the executed template data by passing in the layers for this transition\r\n    const template = transitionFunction(this, layerA, layerB, overlay);\r\n\r\n    // Build the transition function to setup all the states, using the\r\n    // transition, current and new layer, and optionally a background.\r\n    const transition = this._buildTransition(template, layerA, layerB, overlay);\r\n\r\n    // Run the transition and update the history\r\n    this._runTransition(\r\n      transition,\r\n      \"forward\",\r\n      options.animate,\r\n      this.current,\r\n      layer\r\n    );\r\n\r\n    return this._stack.push({ layer, transition });\r\n  }\r\n\r\n  showNext(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (this._initial == null) {\r\n      this._initial = layer;\r\n    }\r\n    return this.transition(layer, Transitions.show, options);\r\n  }\r\n\r\n  showPrevious(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (!this.previous) {\r\n      return;\r\n    }\r\n    if (this.isTransitioning) {\r\n      return;\r\n    }\r\n\r\n    // Maybe people (Jorn) pass in a layer accidentally\r\n    if (options instanceof Framer._Layer) {\r\n      options = {};\r\n    }\r\n    options = _.defaults({}, options, { count: 1, animate: true });\r\n\r\n    if (options.count > 1) {\r\n      const { count } = options;\r\n      for (\r\n        let n = 2, end = count, asc = 2 <= end;\r\n        asc ? n <= end : n >= end;\r\n        asc ? n++ : n--\r\n      ) {\r\n        this.showPrevious({ animate: false, count: 1 });\r\n      }\r\n    }\r\n\r\n    const previous = this._stack.pop();\r\n    return this._runTransition(\r\n      previous != null ? previous.transition : undefined,\r\n      \"back\",\r\n      options.animate,\r\n      this.current,\r\n      previous.layer\r\n    );\r\n  }\r\n\r\n  showOverlayCenter(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayCenter, options);\r\n  }\r\n\r\n  showOverlayTop(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayTop, options);\r\n  }\r\n\r\n  showOverlayRight(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayRight, options);\r\n  }\r\n\r\n  showOverlayBottom(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayBottom, options);\r\n  }\r\n\r\n  showOverlayLeft(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayLeft, options);\r\n  }\r\n\r\n  //#############################################################\r\n  // Internal methods\r\n\r\n  _showOverlay(layer, transition, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this.transition(\r\n      layer,\r\n      transition,\r\n      _.defaults({}, options, { animate: true, scroll: false, modal: false })\r\n    );\r\n  }\r\n\r\n  _handleOverlayTap() {\r\n    if (!this.isModal) {\r\n      return this.showPrevious();\r\n    }\r\n  }\r\n\r\n  _wrapLayer(flowLayer) {\r\n    let needle, previousWrappingContent, previousWrappingScroll, scroll;\r\n    flowLayer._flowLayer = flowLayer;\r\n\r\n    if (flowLayer instanceof ScrollComponent) {\r\n      return flowLayer;\r\n    }\r\n    if (flowLayer._flowWrapped) {\r\n      return flowLayer;\r\n    }\r\n\r\n    // Make the layer at least match the device size\r\n    flowLayer.width = Math.max(flowLayer.width, this.width);\r\n    flowLayer.height = Math.max(flowLayer.height, this.height);\r\n\r\n    const { size } = this;\r\n    // Save the parent so we can clean up when we re-wrap this layer\r\n    if (((needle = this), Array.from(flowLayer.ancestors()).includes(needle))) {\r\n      const content = flowLayer != null ? flowLayer.parent : undefined;\r\n      scroll = content != null ? content.parent : undefined;\r\n      if (scroll instanceof ScrollComponent) {\r\n        previousWrappingScroll = scroll;\r\n        previousWrappingContent = content;\r\n      }\r\n    }\r\n    let layer = layoutPage(flowLayer, size);\r\n    layer = layoutScroll(layer, size);\r\n    if (\r\n      flowLayer !== layer &&\r\n      (previousWrappingContent != null\r\n        ? previousWrappingContent.children.length\r\n        : undefined) === 0 &&\r\n      (previousWrappingScroll != null\r\n        ? previousWrappingScroll.children.length\r\n        : undefined) === 1 &&\r\n      (previousWrappingScroll != null\r\n        ? previousWrappingScroll.children[0]\r\n        : undefined) === previousWrappingContent\r\n    ) {\r\n      // we wrapped the layer\r\n      previousWrappingScroll.destroy();\r\n    }\r\n\r\n    // Mark the layer so we don't layout it twice'\r\n    layer._flowLayer = flowLayer;\r\n\r\n    // Forward the scroll events from created scroll components\r\n    for (scroll of [layer, ...Array.from(layer.children)]) {\r\n      this._forwardScrollEvents(scroll);\r\n\r\n      if (scroll instanceof ScrollComponent) {\r\n        var inset = {};\r\n        if (scroll.y === 0) {\r\n          inset.top =\r\n            (this.header != null ? this.header.height : undefined) || 0;\r\n        }\r\n        if (scroll.maxY === this.height) {\r\n          inset.bottom =\r\n            (this.footer != null ? this.footer.height : undefined) || 0;\r\n        }\r\n        scroll.contentInset = inset;\r\n        flowLayer._flowScroll = scroll;\r\n        scroll.mouseWheelEnabled = this._mouseWheelEnabled;\r\n      }\r\n    }\r\n\r\n    // Set the background color for he created scroll component\r\n    if (layer instanceof ScrollComponent) {\r\n      layer.backgroundColor = this.backgroundColor;\r\n    }\r\n\r\n    return layer;\r\n  }\r\n\r\n  _forwardScrollEvents(scroll) {\r\n    if (!(scroll instanceof ScrollComponent)) {\r\n      return;\r\n    }\r\n    if (scroll._flowForward === true) {\r\n      return;\r\n    }\r\n\r\n    // But only the actual scroll events\r\n    for (var event of [\r\n      Events.Move,\r\n      Events.ScrollStart,\r\n      Events.ScrollMove,\r\n      Events.ScrollEnd,\r\n      Events.ScrollAnimationDidStart,\r\n      Events.ScrollAnimationDidEnd,\r\n    ]) {\r\n      ((event) => scroll.on(event, () => this.emit(event, scroll)))(event);\r\n    }\r\n\r\n    return (scroll._flowForward = true);\r\n  }\r\n\r\n  _runTransition(transition, direction, animate, from, to) {\r\n    let a, b;\r\n    if (direction === \"forward\") {\r\n      a = from;\r\n      b = to;\r\n    } else {\r\n      a = to;\r\n      b = from;\r\n    }\r\n\r\n    this.emit(Events.TransitionStart, a, b, direction);\r\n\r\n    // Start the transition with a small delay added so it only runs after all\r\n    // js has been processed. It's also important for hints, as they rely on\r\n    // ignoreEvents to be false at the moment of a click.\r\n\r\n    return Utils.delay(0, () => {\r\n      this._firstTransition = true;\r\n      return transition[direction](animate);\r\n    });\r\n  }\r\n\r\n  _buildTransition(template, layerA, layerB, overlay) {\r\n    // # Buld a new transtition object with empty states\r\n    const transition = {};\r\n\r\n    // Add the forward function for this state to transition forward\r\n    transition.forward = (animate, callback) => {\r\n      if (animate == null) {\r\n        animate = true;\r\n      }\r\n      const forwardEvents = (group, direction) => {\r\n        group.once(Events.AnimationHalt, () =>\r\n          this.emit(Events.TransitionHalt, layerA, layerB, direction)\r\n        );\r\n        group.once(Events.AnimationStop, () =>\r\n          this.emit(Events.TransitionStop, layerA, layerB, direction)\r\n        );\r\n        return group.once(Events.AnimationEnd, () =>\r\n          this.emit(Events.TransitionEnd, layerA, layerB, direction)\r\n        );\r\n      };\r\n\r\n      const animations = [];\r\n      const options = { instant: !animate };\r\n\r\n      if (layerA && template.layerA) {\r\n        layerA.visible = true;\r\n        animations.push(new Animation(layerA, template.layerA.hide, options));\r\n      }\r\n\r\n      if (layerB && template.layerB) {\r\n        layerB.props = template.layerB.hide;\r\n        // layerB.props = template.layerB.hide if animate # This breaks events now\r\n        layerB.bringToFront();\r\n        layerB.visible = true;\r\n        animations.push(new Animation(layerB, template.layerB.show, options));\r\n      }\r\n\r\n      if (overlay && template.overlay) {\r\n        overlay.visible = true;\r\n        overlay.ignoreEvents = false;\r\n        overlay.placeBehind(layerB);\r\n        overlay.props = template.overlay.hide;\r\n        animations.push(new Animation(overlay, template.overlay.show, options));\r\n      }\r\n\r\n      // Set the right layer indexes for the header and footer if they are there.\r\n      if (overlay && template.overlay) {\r\n        if (this.header) {\r\n          this.header.placeBehind(overlay);\r\n        }\r\n        if (this.footer) {\r\n          this.footer.placeBehind(overlay);\r\n        }\r\n      } else {\r\n        if (this.header) {\r\n          this.header.bringToFront();\r\n        }\r\n        if (this.footer) {\r\n          this.footer.bringToFront();\r\n        }\r\n      }\r\n\r\n      const group = new AnimationGroup(animations);\r\n      forwardEvents(group, \"forward\");\r\n\r\n      group.once(Events.AnimationEnd, function () {\r\n        if (layerA && template.layerA && !(overlay && template.overlay)) {\r\n          return (layerA.visible = false);\r\n        }\r\n      });\r\n\r\n      return group.start();\r\n    };\r\n\r\n    transition.back = (animate, callback) => {\r\n      if (animate == null) {\r\n        animate = true;\r\n      }\r\n      const forwardEvents = (group, direction) => {\r\n        group.once(Events.AnimationHalt, () =>\r\n          this.emit(Events.TransitionHalt, layerB, layerA, direction)\r\n        );\r\n        group.once(Events.AnimationStop, () =>\r\n          this.emit(Events.TransitionStop, layerB, layerA, direction)\r\n        );\r\n        return group.once(Events.AnimationEnd, () =>\r\n          this.emit(Events.TransitionEnd, layerB, layerA, direction)\r\n        );\r\n      };\r\n\r\n      const animations = [];\r\n      const options = { instant: !animate };\r\n\r\n      if (overlay && template.overlay) {\r\n        overlay.visible = true;\r\n        overlay.ignoreEvents = true;\r\n        animations.push(new Animation(overlay, template.overlay.hide, options));\r\n      }\r\n\r\n      if (layerA && template.layerA) {\r\n        layerA.visible = true;\r\n        animations.push(new Animation(layerA, template.layerA.show, options));\r\n      }\r\n\r\n      if (layerB && template.layerB) {\r\n        layerB.visible = true;\r\n        animations.push(new Animation(layerB, template.layerB.hide, options));\r\n      }\r\n\r\n      const group = new AnimationGroup(animations);\r\n      group.stopAnimations = false;\r\n      forwardEvents(group, \"back\");\r\n\r\n      group.once(Events.AnimationEnd, function () {\r\n        if (layerB && template.layerB) {\r\n          return (layerB.visible = false);\r\n        }\r\n      });\r\n\r\n      return group.start();\r\n    };\r\n\r\n    return transition;\r\n  }\r\n\r\n  //#############################################################\r\n  // Event helpers\r\n\r\n  onTransitionStart(cb) {\r\n    return this.on(Events.TransitionStart, cb);\r\n  }\r\n  onTransitionHalt(cb) {\r\n    return this.on(Events.TransitionHalt, cb);\r\n  }\r\n  onTransitionStop(cb) {\r\n    return this.on(Events.TransitionStop, cb);\r\n  }\r\n  onTransitionEnd(cb) {\r\n    return this.on(Events.TransitionEnd, cb);\r\n  }\r\n\r\n  onStart(cb) {\r\n    return this.onTransitionStart(cb);\r\n  }\r\n  onHalt(cb) {\r\n    return this.onTransitionHalt(cb);\r\n  }\r\n  onStop(cb) {\r\n    return this.onTransitionStop(cb);\r\n  }\r\n  onEnd(cb) {\r\n    return this.onTransitionEnd(cb);\r\n  }\r\n}\r\nFlowComponent.initClass();\r\n\r\n//#############################################################\r\n// Layout helpers\r\n\r\nconst findPossibleHeader = function (layer) {\r\n  let child;\r\n  let candidate = null;\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    var attachedLeft =\r\n      child.x === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.left\r\n        : undefined) === 0;\r\n    var atttachedRight =\r\n      child.width === layer.width ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.right\r\n        : undefined) === 0;\r\n    var attachedTop =\r\n      child.y === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.top\r\n        : undefined) === 0;\r\n    if (attachedLeft && atttachedRight && attachedTop) {\r\n      if (candidate) {\r\n        return;\r\n      }\r\n      candidate = child;\r\n    }\r\n  }\r\n\r\n  if (!candidate) {\r\n    return;\r\n  }\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    if (candidate === child) {\r\n      continue;\r\n    }\r\n    if (child.minY < candidate.maxY) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return candidate;\r\n};\r\n\r\nconst findPossibleFooter = function (layer) {\r\n  let child;\r\n  let candidate = null;\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    var attachedLeft =\r\n      child.x === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.left\r\n        : undefined) === 0;\r\n    var atttachedRight =\r\n      child.width === layer.width ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.right\r\n        : undefined) === 0;\r\n    var attachedBottom =\r\n      child.maxY === layer.height ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.bottom\r\n        : undefined) === 0;\r\n    if (attachedLeft && atttachedRight && attachedBottom) {\r\n      if (candidate) {\r\n        return;\r\n      }\r\n      candidate = child;\r\n    }\r\n  }\r\n\r\n  if (!candidate) {\r\n    return;\r\n  }\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    if (candidate === child) {\r\n      continue;\r\n    }\r\n    if (child.maxY > candidate.minY) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return candidate;\r\n};\r\n\r\nconst findHeader = function (layer) {\r\n  const header = findPossibleHeader(layer);\r\n  const footer = findPossibleFooter(layer);\r\n\r\n  if (header && footer) {\r\n    if (header.maxY === footer.minY) {\r\n      if (header.height >= footer.height) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  return header;\r\n};\r\n\r\nconst findFooter = function (layer) {\r\n  const header = findPossibleHeader(layer);\r\n  const footer = findPossibleFooter(layer);\r\n\r\n  if (header && footer) {\r\n    if (header.maxY === footer.minY) {\r\n      if (footer.height >= header.height) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  return footer;\r\n};\r\n\r\nconst findBody = function (layer, header, footer) {\r\n  if (!header && !footer) {\r\n    return;\r\n  }\r\n\r\n  for (var child of Array.from(layer.children)) {\r\n    if (child === header) {\r\n      continue;\r\n    }\r\n    if (child === footer) {\r\n      continue;\r\n    }\r\n\r\n    if (child.x === 0 && child.width === layer.width) {\r\n      if (\r\n        header &&\r\n        footer &&\r\n        child.minY === header.maxY &&\r\n        child.maxY === footer.minY\r\n      ) {\r\n        return child;\r\n      } else if (\r\n        header &&\r\n        child.minY === header.maxY &&\r\n        child.maxY === layer.height\r\n      ) {\r\n        return child;\r\n      } else if (footer && child.minY === 0 && child.maxY === footer.minY) {\r\n        return child;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst guessBodyFrame = function (layer, header, footer) {\r\n  let frame;\r\n  if (!header && !footer) {\r\n    return;\r\n  }\r\n  if (\r\n    (header != null ? header.maxY : undefined) ===\r\n    (footer != null ? footer.minY : undefined)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  if (header && footer) {\r\n    frame = {\r\n      x: 0,\r\n      y: header.height,\r\n      width: layer.width,\r\n      height: layer.height - header.height - footer.height,\r\n    };\r\n  } else if (header) {\r\n    frame = {\r\n      x: 0,\r\n      y: header.height,\r\n      width: layer.width,\r\n      height: layer.height - header.height,\r\n    };\r\n  } else if (footer) {\r\n    frame = {\r\n      x: 0,\r\n      y: 0,\r\n      width: layer.width,\r\n      height: layer.height - footer.height,\r\n    };\r\n  } else {\r\n    return;\r\n  }\r\n\r\n  if (((header != null ? header.height : undefined) || 0) > frame.height) {\r\n    return;\r\n  }\r\n  if (((footer != null ? footer.height : undefined) || 0) > frame.height) {\r\n    return;\r\n  }\r\n\r\n  return frame;\r\n};\r\n\r\nvar layoutPage = function (layer, size) {\r\n  let bodyFrame;\r\n  const header = findHeader(layer);\r\n  const footer = findFooter(layer);\r\n  if (!header && !footer) {\r\n    return layer;\r\n  }\r\n\r\n  let body = findBody(layer, header, footer);\r\n\r\n  if (!body) {\r\n    bodyFrame = guessBodyFrame(layer, header, footer);\r\n\r\n    if (bodyFrame) {\r\n      body = new Layer({\r\n        frame: bodyFrame,\r\n        backgroundColor: null,\r\n      });\r\n\r\n      for (var child of Array.from(layer.children)) {\r\n        if (child === header) {\r\n          continue;\r\n        }\r\n        if (child === footer) {\r\n          continue;\r\n        }\r\n        child.setParentPreservingConstraintValues(body);\r\n        var headerHeight = (header != null ? header.height : undefined) || 0;\r\n        if (child.constraintValues != null) {\r\n          if (\r\n            (child.constraintValues != null\r\n              ? child.constraintValues.top\r\n              : undefined) != null\r\n          ) {\r\n            if (child.constraintValues != null) {\r\n              child.constraintValues.top -= headerHeight;\r\n            }\r\n            child.layout();\r\n          }\r\n        } else {\r\n          child.y -= headerHeight;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!body) {\r\n    return layer;\r\n  }\r\n\r\n  bodyFrame = body.frame;\r\n  bodyFrame.width = size.width;\r\n  bodyFrame.height =\r\n    size.height -\r\n    ((header != null ? header.height : undefined) || 0) -\r\n    ((footer != null ? footer.height : undefined) || 0);\r\n\r\n  body.point = 0;\r\n  // Not scroll vertically if there's a header or footer\r\n  body.width = size.width;\r\n\r\n  const scroll = layoutScroll(body, bodyFrame);\r\n  scroll.parent = layer;\r\n  scroll.frame = bodyFrame;\r\n\r\n  layer.size = size;\r\n\r\n  if ((footer != null ? footer.maxY : undefined) > size.height) {\r\n    footer.maxY = size.height;\r\n  }\r\n\r\n  if (header != null) {\r\n    header.bringToFront();\r\n  }\r\n  if (footer != null) {\r\n    footer.bringToFront();\r\n  }\r\n\r\n  return layer;\r\n};\r\n\r\nvar layoutScroll = function (layer, size) {\r\n  if (layer.width <= size.width && layer.height <= size.height) {\r\n    return layer;\r\n  }\r\n\r\n  const scroll = new ScrollComponent({\r\n    size,\r\n    name: \"scroll\",\r\n  });\r\n\r\n  const { height } = layer;\r\n  scroll.propagateEvents = false;\r\n\r\n  const constraints = layer.constraintValues;\r\n\r\n  layer.point = 0;\r\n  layer.parent = scroll.content;\r\n  layer.constraintValues = constraints;\r\n\r\n  scroll.scrollHorizontal = layer.maxX > size.width;\r\n  scroll.scrollVertical = layer.maxY > size.height;\r\n\r\n  return scroll;\r\n};\r\n\r\nvar Transitions = {};\r\n\r\nTransitions.show = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  const options = { curve: \"spring(300, 35, 0)\" };\r\n  return (transition = {\r\n    layerA: {\r\n      show: { options, x: 0, y: 0 },\r\n      hide: {\r\n        options,\r\n        x: 0 - (layerA != null ? layerA.width : undefined) / 2,\r\n        y: 0,\r\n      },\r\n    },\r\n    layerB: {\r\n      show: { options, x: 0, y: 0 },\r\n      hide: { options, x: layerB.width, y: 0 },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayCenter = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(500, 35, 0)\" },\r\n        x: Align.center,\r\n        y: Align.center,\r\n        scale: 1.0,\r\n        opacity: 1,\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(500, 35, 0)\" },\r\n        x: Align.center,\r\n        y: Align.center,\r\n        scale: 0.5,\r\n        opacity: 0,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayLeft = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: { options: { curve: \"spring(300, 35, 0)\" }, y: 0, x: 0 },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x: 0 - (layerB != null ? layerB.width : undefined),\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayRight = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x:\r\n          (nav != null ? nav.width : undefined) -\r\n          (layerB != null ? layerB.width : undefined),\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x: nav != null ? nav.width : undefined,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayTop = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: { options: { curve: \"spring(300, 35, 0)\" }, x: Align.center, y: 0 },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        maxY: 0,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayBottom = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        y:\r\n          (nav != null ? nav.height : undefined) -\r\n          (layerB != null ? layerB.height : undefined),\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        y: nav != null ? nav.height : undefined,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { Layer } from \"../Layer\";\r\nimport { Color } from \"../Color\"; // Assuming you have a Color utility\r\nimport { Utils } from \"../Utils\";\r\nimport _ from \"lodash\";\r\n\r\nexport class CircularProgressComponent extends Layer {\r\n  // Class fields with defaults\r\n  _strokeWidth = 1;\r\n  _progress = 0;\r\n  _progressColor = Color.grey(1);\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    this.svg.setAttribute(\"width\", \"100%\");\r\n    this.svg.setAttribute(\"height\", \"100%\");\r\n    this.svg.setAttributeNS(\r\n      \"http://www.w3.org/2000/xmlns/\",\r\n      \"xmlns:xlink\",\r\n      \"http://www.w3.org/1999/xlink\"\r\n    );\r\n\r\n    this.backgroundColor = null;\r\n    this.rotation = -90;\r\n\r\n    this.rails = this.addShape(\"circle\");\r\n    this.rails.setAttribute(\"fill\", \"transparent\");\r\n\r\n    this.circle = this.addShape(\"circle\");\r\n    this.circle.setAttribute(\"fill\", \"transparent\");\r\n\r\n    this.strokeWidth = 1;\r\n    this.progress = 0;\r\n\r\n    this.railsColor = Color.grey(0.2);\r\n    this.progressColor = Color.grey(1);\r\n\r\n    this._element.appendChild(this.svg);\r\n  }\r\n\r\n  // Computed radius\r\n  get radius() {\r\n    return this.width / 2 - this.strokeWidth / 2;\r\n  }\r\n\r\n  get strokeWidth() {\r\n    return this._strokeWidth;\r\n  }\r\n\r\n  set strokeWidth(value) {\r\n    this._strokeWidth = value;\r\n\r\n    // Update rails\r\n    this.rails.cx.baseVal.value = this.width / 2;\r\n    this.rails.cy.baseVal.value = this.width / 2;\r\n    this.rails.r.baseVal.value = this.radius;\r\n    this.rails.setAttribute(\"stroke-width\", value);\r\n\r\n    // Update circle\r\n    this.circle.cx.baseVal.value = this.width / 2;\r\n    this.circle.cy.baseVal.value = this.width / 2;\r\n    this.circle.r.baseVal.value = this.radius;\r\n    this.circle.setAttribute(\"stroke-width\", value);\r\n  }\r\n\r\n  get progressColor() {\r\n    return this._progressColor;\r\n  }\r\n\r\n  set progressColor(value) {\r\n    this._progressColor = value;\r\n    this.circle.setAttribute(\"stroke\", value);\r\n  }\r\n\r\n  get railsColor() {\r\n    return this._railsColor || Color.grey(0.1);\r\n  }\r\n\r\n  set railsColor(value) {\r\n    this._railsColor = value;\r\n    this.rails.setAttribute(\"stroke\", value);\r\n  }\r\n\r\n  get progress() {\r\n    return this._progress;\r\n  }\r\n\r\n  set progress(value) {\r\n    this._progress = Utils.clamp(value, 0, 1);\r\n    const strokeDashArray = this.radius * Math.PI * 2;\r\n    const strokeDashOffset = (1 - this._progress) * strokeDashArray;\r\n    this.circle.setAttribute(\"stroke-dasharray\", strokeDashArray);\r\n    this.circle.setAttribute(\"stroke-dashoffset\", strokeDashOffset);\r\n  }\r\n\r\n  addShape(type) {\r\n    const shape = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"circle\"\r\n    );\r\n    this.svg.appendChild(shape);\r\n    return shape;\r\n  }\r\n\r\n  setProgress(value, animated = true, animationOptions = {}) {\r\n    if (!animated) {\r\n      this.progress = value;\r\n      return;\r\n    }\r\n\r\n    const dynamicTime = Math.abs(this.progress - value) * 0.3;\r\n    animationOptions = _.defaults(animationOptions, {\r\n      curve: \"linear\",\r\n      time: dynamicTime,\r\n    });\r\n    const animationProperties = { progress: Utils.clamp(value, 0, 1) };\r\n\r\n    return this.animate(animationProperties, animationOptions);\r\n  }\r\n}\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport { Events } from \"./Events.js\";\r\n\r\nEvents.MIDICommand = \"midiCommand\";\r\n\r\nexport class MIDIInput extends BaseClass {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this._requestResolved = this._requestResolved.bind(this);\r\n    this._onMidiMessage = this._onMidiMessage.bind(this);\r\n    this._requestRejected = this._requestRejected.bind(this);\r\n  }\r\n\r\n  static initClass() {\r\n    this.define(\"enabled\", {\r\n      get() {\r\n        return (this._inputs?.length ?? undefined) || this._request;\r\n      },\r\n      set(value) {\r\n        if (value === this.enabled) return;\r\n\r\n        if (!navigator.requestMIDIAccess) {\r\n          return this._requestRejected();\r\n        }\r\n\r\n        if (value) {\r\n          this._request = navigator\r\n            .requestMIDIAccess()\r\n            .then(this._requestResolved, this._requestRejected);\r\n        } else {\r\n          this._inputs?.forEach((input) => input.close?.());\r\n          this._request = null;\r\n          this._inputs = [];\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  // Success handler\r\n  _requestResolved(access) {\r\n    this._inputs = [];\r\n    access.inputs.forEach((input) => {\r\n      this._inputs.push(input);\r\n      input.onmidimessage = this._onMidiMessage(input.id);\r\n    });\r\n  }\r\n\r\n  // Failure handler\r\n  _requestRejected(error) {\r\n    throw new Error(\r\n      `Requesting MIDI access failed: ${error ?? \"not supported by browser\"}`\r\n    );\r\n  }\r\n\r\n  // Event handler\r\n  _onMidiMessage(sourceID) {\r\n    return (message) => {\r\n      this.emit(Events.MIDICommand, sourceID, message.timeStamp, message.data);\r\n    };\r\n  }\r\n\r\n  // Event shortcut\r\n  onCommand(cb) {\r\n    return this.on(Events.MIDICommand, cb);\r\n  }\r\n}\r\n\r\n// Initialize static properties\r\nMIDIInput.initClass();\r\n\r\n// Export a singleton instance\r\nexport const midiInput = new MIDIInput();\r\n","import _ from \"../Underscore.js\";\r\nimport { BaseClass } from \"../BaseClass.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { MIDIInput } from \"../MIDIInput.js\";\r\nimport Utils from \"../Utils.js\";\r\n\r\nEvents.MIDIComponentValueChange = \"MIDIComponentValueChange\";\r\n\r\nexport class MIDIComponent extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"min\", this.simpleProperty(\"min\", 0));\r\n    this.define(\"max\", this.simpleProperty(\"max\", 127));\r\n    this.define(\"control\", this.simpleProperty(\"control\", null));\r\n    this.define(\"channel\", this.simpleProperty(\"channel\", null));\r\n    this.define(\"source\", this.simpleProperty(\"source\", null));\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    MIDIInput.enabled = true;\r\n\r\n    MIDIInput.onCommand((source, timeStamp, data) => {\r\n      const [b1, b2, b3] = data;\r\n\r\n      const command = b1 & 0xf0;\r\n      const channel = (b1 & 0x0f) + 1; // 1-16\r\n      const data1 = b2 & 0x7f;\r\n      const data2 = b3 & 0x7f;\r\n\r\n      if (![0xb0, 0x90, 0x80].includes(command)) return;\r\n      if (this.source != null && this.source !== source) return;\r\n      if (this.channel != null && this.channel !== channel) return;\r\n      if (this.control != null && this.control !== data1) return;\r\n\r\n      let info = { source, channel, control: data1 };\r\n\r\n      if ([0x90, 0x80].includes(command)) {\r\n        info = _.defaults(info, { type: \"note\" });\r\n      }\r\n\r\n      this.emit(Events.MIDIComponentValueChange, this._modulate(data2), info);\r\n    });\r\n  }\r\n\r\n  _modulate(value) {\r\n    return Utils.modulate(value, [0, 127], [this.min, this.max]);\r\n  }\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.MIDIComponentValueChange, cb);\r\n  }\r\n}\r\n\r\nMIDIComponent.initClass();\r\n","import Utils from \"./Utils.js\";\r\n\r\nconst FramerCSS = `\r\nbody {\r\n\tmargin: 0;\r\n}\r\n\r\n.framerContext {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tpointer-events: none;\r\n}\r\n\r\n.framerLayer {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center;\r\n\tbackground-size: cover;\r\n\t-webkit-overflow-scrolling: touch;\r\n\tbox-sizing: border-box;\r\n\tuser-select: none;\r\n}\r\n\r\n.framerLayer input,\r\n.framerLayer textarea,\r\n.framerLayer select,\r\n.framerLayer option,\r\n.framerLayer div[contenteditable=\"true\"] {\r\n\tpointer-events: auto;\r\n\tuser-select: auto;\r\n}\r\n\r\n.framerLayer svg {\r\n\toverflow: visible;\r\n\tdisplay: block;\r\n\t-webkit-font-smoothing: antialiased;\r\n}\r\n\r\n.framerDebug {\r\n\tpadding: 6px;\r\n\tcolor: #fff;\r\n\tfont: 10px/1em Monaco, monospace;\r\n}\r\n`;\r\n\r\nUtils.domComplete(() => {\r\n  Utils.insertCSS(FramerCSS);\r\n});\r\n\r\nexport const Config = {\r\n  FramerCSS,\r\n};\r\n","import Utils from \"./Utils.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\n\r\nconst getTime = () => Utils.getTime() * 1000;\r\n\r\nexport class AnimationLoop extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n\r\n    this.delta = 1 / 60;\r\n    this.raf = true;\r\n\r\n    // Disable RAF for certain WebKit versions in Framer Studio or Desktop\r\n    const webkitVersion = Utils.webkitVersion();\r\n    if (webkitVersion > 600 && webkitVersion < 601) {\r\n      if (Utils.isFramerStudio() || Utils.isDesktop()) {\r\n        this.raf = false;\r\n      }\r\n    }\r\n\r\n    // To avoid EventEmitter warning\r\n    this.maximumListeners = Infinity;\r\n\r\n    // Bind start method\r\n    this.start = this.start.bind(this);\r\n  }\r\n\r\n  start() {\r\n    let previousTime = getTime();\r\n\r\n    const update = () => {\r\n      let deltaTime;\r\n      if (this.delta) {\r\n        deltaTime = this.delta;\r\n      } else {\r\n        const currentTime = getTime();\r\n        deltaTime = (currentTime - previousTime) / 1000;\r\n        previousTime = currentTime;\r\n      }\r\n\r\n      this.emit(\"update\", deltaTime);\r\n      this.emit(\"render\", deltaTime);\r\n    };\r\n\r\n    const tick = () => {\r\n      if (this.raf) {\r\n        window.requestAnimationFrame(tick);\r\n        update();\r\n      } else {\r\n        setTimeout(() => {\r\n          window.requestAnimationFrame(tick);\r\n          update();\r\n        }, 0);\r\n      }\r\n    };\r\n\r\n    tick();\r\n  }\r\n}\r\n","export class Animator {\r\n  static initClass() {\r\n    // Static initialization or metadata can go here if needed\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    this.setup(options);\r\n  }\r\n\r\n  setup(options) {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  /**\r\n   * Return the next value based on delta progress\r\n   * Must be implemented by subclasses\r\n   */\r\n  next(delta) {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  finished() {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  /**\r\n   * Generate an array of values by repeatedly calling next()\r\n   * @param {number} delta Time step per frame\r\n   * @param {number} limit Maximum number of frames to calculate\r\n   * @returns {Array} Array of values produced by next()\r\n   */\r\n  values(delta = 1 / 60, limit = 100) {\r\n    const values = [];\r\n    for (let i = 0; i <= limit; i++) {\r\n      values.push(this.next(delta));\r\n      if (this.finished()) break;\r\n    }\r\n    return values;\r\n  }\r\n}\r\n\r\n// Optional: run static initializer\r\nAnimator.initClass();\r\n","import { Animator } from \"./Animator.js\";\r\n\r\nexport class LinearAnimator extends Animator {\r\n  setup(options) {\r\n    this.options = _.defaults(options, {\r\n      time: 1,\r\n      precision: 1 / 1000,\r\n    });\r\n\r\n    return (this._time = 0);\r\n  }\r\n\r\n  next(delta) {\r\n    this._time += delta;\r\n\r\n    if (this.finished()) {\r\n      return 1;\r\n    }\r\n\r\n    return this._time / this.options.time;\r\n  }\r\n\r\n  finished() {\r\n    return this._time >= this.options.time - this.options.precision;\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nconst BezierCurveDefaults = {\r\n  linear: [0, 0, 1, 1],\r\n  ease: [0.25, 0.1, 0.25, 1],\r\n  \"ease-in\": [0.42, 0, 1, 1],\r\n  \"ease-out\": [0, 0, 0.58, 1],\r\n  \"ease-in-out\": [0.42, 0, 0.58, 1],\r\n};\r\n\r\nexport class BezierCurveAnimator extends Animator {\r\n  _time = 0;\r\n  options = {};\r\n  _unitBezier = null;\r\n\r\n  setup(options) {\r\n    // Input is a named bezier curve string\r\n    if (\r\n      _.isString(options) &&\r\n      BezierCurveDefaults.hasOwnProperty(options.toLowerCase())\r\n    ) {\r\n      options = { values: BezierCurveDefaults[options.toLowerCase()] };\r\n    }\r\n\r\n    // Input.values is a named bezier curve string\r\n    if (\r\n      options.values &&\r\n      _.isString(options.values) &&\r\n      BezierCurveDefaults.hasOwnProperty(options.values.toLowerCase())\r\n    ) {\r\n      options = {\r\n        values: BezierCurveDefaults[options.values.toLowerCase()],\r\n        time: options.time,\r\n      };\r\n    }\r\n\r\n    // Input is a single array of 4 values\r\n    if (_.isArray(options) && options.length === 4) {\r\n      options = { values: options };\r\n    }\r\n\r\n    this.options = _.defaults(options, {\r\n      values: BezierCurveDefaults.ease,\r\n      time: 1,\r\n      precision: 1 / 1000,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._unitBezier = new UnitBezier(...this.options.values);\r\n  }\r\n\r\n  next(delta) {\r\n    this._time += delta;\r\n\r\n    if (this.finished()) {\r\n      return 1;\r\n    }\r\n\r\n    return this._unitBezier.solve(this._time / this.options.time);\r\n  }\r\n\r\n  finished() {\r\n    return this._time >= this.options.time - this.options.precision;\r\n  }\r\n}\r\n\r\n// ES6 UnitBezier class\r\nclass UnitBezier {\r\n  epsilon = 1e-6; // precision\r\n\r\n  constructor(p1x, p1y, p2x, p2y) {\r\n    // Pre-calculate polynomial coefficients\r\n    this.cx = 3.0 * p1x;\r\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\r\n    this.ax = 1.0 - this.cx - this.bx;\r\n\r\n    this.cy = 3.0 * p1y;\r\n    this.by = 3.0 * (p2y - p1y) - this.cy;\r\n    this.ay = 1.0 - this.cy - this.by;\r\n  }\r\n\r\n  sampleCurveX(t) {\r\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\r\n  }\r\n\r\n  sampleCurveY(t) {\r\n    return ((this.ay * t + this.by) * t + this.cy) * t;\r\n  }\r\n\r\n  sampleCurveDerivativeX(t) {\r\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\r\n  }\r\n\r\n  solveCurveX(x) {\r\n    let t2 = x;\r\n    let x2;\r\n    let d2;\r\n\r\n    // Newton-Raphson method\r\n    for (let i = 0; i < 8; i++) {\r\n      x2 = this.sampleCurveX(t2) - x;\r\n      if (Math.abs(x2) < this.epsilon) return t2;\r\n      d2 = this.sampleCurveDerivativeX(t2);\r\n      if (Math.abs(d2) < this.epsilon) break;\r\n      t2 -= x2 / d2;\r\n    }\r\n\r\n    // Bisection method\r\n    let t0 = 0;\r\n    let t1 = 1;\r\n    t2 = x;\r\n\r\n    if (t2 < t0) return t0;\r\n    if (t2 > t1) return t1;\r\n\r\n    while (t0 < t1) {\r\n      x2 = this.sampleCurveX(t2);\r\n      if (Math.abs(x2 - x) < this.epsilon) return t2;\r\n      if (x > x2) t0 = t2;\r\n      else t1 = t2;\r\n      t2 = (t1 + t0) / 2;\r\n    }\r\n\r\n    return t2; // fallback\r\n  }\r\n\r\n  solve(x) {\r\n    return this.sampleCurveY(this.solveCurveX(x));\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nexport class SpringDHOAnimator extends Animator {\r\n  _time = 0;\r\n  _value = 0;\r\n  _velocity = 0;\r\n  options = {};\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    // bind finished if it will be used as a callback\r\n    this.finished = this.finished.bind(this);\r\n  }\r\n\r\n  setup(options = {}) {\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      tolerance: 1 / 10000,\r\n      stiffness: 50,\r\n      damping: 2,\r\n      mass: 0.2,\r\n      time: null,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._value = 0;\r\n    this._velocity = this.options.velocity;\r\n  }\r\n\r\n  next(delta) {\r\n    if (this.finished()) return 1;\r\n\r\n    this._time += delta;\r\n\r\n    const k = -this.options.stiffness;\r\n    const b = -this.options.damping;\r\n\r\n    const F_spring = k * (this._value - 1);\r\n    const F_damper = b * this._velocity;\r\n\r\n    this._velocity += ((F_spring + F_damper) / this.options.mass) * delta;\r\n    this._value += this._velocity * delta;\r\n\r\n    return this._value;\r\n  }\r\n\r\n  finished() {\r\n    return this._time > 0 && Math.abs(this._velocity) < this.options.tolerance;\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nexport class SpringRK4Animator extends Animator {\r\n  _time = 0;\r\n  _value = 0;\r\n  _velocity = 0;\r\n  _stopSpring = false;\r\n  _integrator = null;\r\n  options = {};\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    // bind finished if used as a callback\r\n    this.finished = this.finished.bind(this);\r\n  }\r\n\r\n  setup(options = {}) {\r\n    this.options = _.defaults(options, {\r\n      tension: 250,\r\n      friction: 25,\r\n      velocity: 0,\r\n      tolerance: 1 / 1000,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._value = 0;\r\n    this._velocity = this.options.velocity;\r\n    this._stopSpring = false;\r\n\r\n    this._integrator = new Integrator((state) => {\r\n      return -this.options.tension * state.x - this.options.friction * state.v;\r\n    });\r\n  }\r\n\r\n  next(delta) {\r\n    if (this.finished()) return 1;\r\n\r\n    this._time += delta;\r\n\r\n    const stateBefore = {\r\n      x: this._value - 1,\r\n      v: this._velocity,\r\n    };\r\n\r\n    const stateAfter = this._integrator.integrateState(stateBefore, delta);\r\n\r\n    this._value = 1 + stateAfter.x;\r\n    this._velocity = stateAfter.v;\r\n\r\n    const netValueIsLow = Math.abs(stateAfter.x) < this.options.tolerance;\r\n    const netVelocityIsLow = Math.abs(stateAfter.v) < this.options.tolerance;\r\n\r\n    this._stopSpring = netValueIsLow && netVelocityIsLow;\r\n\r\n    return this._value;\r\n  }\r\n\r\n  finished() {\r\n    return this._stopSpring;\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Layer } from \"./Layer.js\";\r\n\r\nconst ChromeAlert = `Importing layers is currently only supported on Safari. \r\nFor Chrome, run: open -a \"Google Chrome\" --allow-file-access-from-files`;\r\n\r\nconst resizeFrame = (scale, frame) => {\r\n  if (scale === 1 || !frame) return frame;\r\n  const result = {};\r\n  [\"x\", \"y\", \"width\", \"height\"].forEach((key) => {\r\n    if (frame.hasOwnProperty(key)) result[key] = frame[key] * scale;\r\n  });\r\n  return result;\r\n};\r\n\r\nconst startsWithNumber = (str) => /^[0-9]/.test(str);\r\n\r\nconst sanitizeLayerName = (name) => {\r\n  for (const suffix of [\"*\", \"-\", \".png\", \".jpg\", \".pdf\"]) {\r\n    if (name.toLowerCase().endsWith(suffix)) {\r\n      name = name.slice(0, -suffix.length);\r\n    }\r\n  }\r\n  return name;\r\n};\r\n\r\nexport class Importer {\r\n  constructor(path, options = {}, extraLayerProperties = {}) {\r\n    this.path = path;\r\n    this.options = options;\r\n    this.extraLayerProperties = extraLayerProperties;\r\n    this.scale = options.scale ?? 1;\r\n    this.paths = {\r\n      layerInfo: Utils.pathJoin(this.path, \"layers.json\"),\r\n      images: Utils.pathJoin(this.path, \"images\"),\r\n      documentName: decodeURIComponent(this.path.split(\"/\").pop()),\r\n    };\r\n    this._createdLayers = [];\r\n    this._createdLayersByName = {};\r\n  }\r\n\r\n  async load() {\r\n    const layerInfo = await this._loadLayerInfo();\r\n    if (!layerInfo || layerInfo.length === 0) {\r\n      throw new Error(\"Importer: no layers. Ensure at least one layer exists.\");\r\n    }\r\n\r\n    // Pass 1: create all layers recursively\r\n    layerInfo.forEach((info) => this._createLayer(info));\r\n\r\n    // Pass 2: correct hierarchy and positions\r\n    this._createdLayers.forEach((layer) => this._correctLayer(layer));\r\n    this._correctArtboards(this._createdLayers);\r\n\r\n    // Pass 3: ensure all layers are inserted\r\n    this._createdLayers.forEach((layer) => {\r\n      if (!layer.parent) layer.parent = null;\r\n    });\r\n\r\n    return this._createdLayersByName;\r\n  }\r\n\r\n  async _loadLayerInfo() {\r\n    try {\r\n      // Check preloaded global variable\r\n      const importedKey = `${this.paths.documentName}/layers.json.js`;\r\n      if (window.__imported__?.[importedKey]) {\r\n        return _.cloneDeep(window.__imported__[importedKey]);\r\n      }\r\n\r\n      // Load JSON asynchronously\r\n      const response = await fetch(this.paths.layerInfo);\r\n      if (!response.ok)\r\n        throw new Error(`Failed to load layers: ${response.statusText}`);\r\n      return await response.json();\r\n    } catch (err) {\r\n      console.warn(ChromeAlert);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  _createLayer(info, parent) {\r\n    // Scale frames\r\n    if (info.layerFrame)\r\n      info.layerFrame = resizeFrame(this.scale, info.layerFrame);\r\n    if (info.maskFrame)\r\n      info.maskFrame = resizeFrame(this.scale, info.maskFrame);\r\n    if (info.image?.frame)\r\n      info.image.frame = resizeFrame(this.scale, info.image.frame);\r\n\r\n    if (!info.children) info.children = [];\r\n\r\n    const LayerClass = Layer;\r\n    const layerInfo = {\r\n      shadow: true,\r\n      name: sanitizeLayerName(info.name),\r\n      frame: info.layerFrame,\r\n      clip: false,\r\n      backgroundColor: null,\r\n      visible: info.visible ?? true,\r\n      ...this.extraLayerProperties,\r\n    };\r\n\r\n    if (info.image) {\r\n      layerInfo.frame = info.image.frame;\r\n      layerInfo.image = Utils.pathJoin(this.path, info.image.path);\r\n    }\r\n\r\n    if (info.maskFrame) layerInfo.clip = true;\r\n    if (info.kind === \"artboard\")\r\n      layerInfo.backgroundColor = info.backgroundColor;\r\n\r\n    if (parent?.contentLayer) layerInfo.parent = parent.contentLayer;\r\n    else if (parent) layerInfo.parent = parent;\r\n\r\n    if (startsWithNumber(layerInfo.name)) {\r\n      throw new Error(\r\n        `Layer/Artboard names cannot start with a number: '${layerInfo.name}'`\r\n      );\r\n    }\r\n\r\n    const layer = new LayerClass(layerInfo);\r\n    layer.name = layerInfo.name;\r\n    layer.__framerImportedFromPath = this.path;\r\n\r\n    if (layerInfo.name.toLowerCase().includes(\"scroll\")) layer.scroll = true;\r\n    if (layerInfo.name.toLowerCase().includes(\"draggable\"))\r\n      layer.draggable.enabled = true;\r\n\r\n    if (!layer.image && !info.children.length && !info.maskFrame) {\r\n      layer.frame = Utils.frameZero();\r\n    }\r\n\r\n    [...info.children]\r\n      .reverse()\r\n      .forEach((childInfo) => this._createLayer(childInfo, layer));\r\n\r\n    if (info.kind === \"artboard\") layer.point = { x: 0, y: 0 };\r\n    else if (!layer.image && !info.maskFrame)\r\n      layer.frame = layer.contentFrame();\r\n\r\n    layer._info = info;\r\n    this._createdLayers.push(layer);\r\n    this._createdLayersByName[layer.name] = layer;\r\n\r\n    return layer;\r\n  }\r\n\r\n  _correctArtboards(layers) {\r\n    const artboards = layers.filter((l) => l._info.kind === \"artboard\");\r\n    if (!artboards.length) return;\r\n\r\n    const leftMostLayer = artboards.reduce(\r\n      (left, layer) => (!left || layer.x < left.x ? layer : left),\r\n      null\r\n    );\r\n    const offset = leftMostLayer.point;\r\n\r\n    artboards.forEach((layer) => {\r\n      layer.x -= offset.x;\r\n      layer.y -= offset.y;\r\n      layer.visible = true;\r\n    });\r\n  }\r\n\r\n  _correctLayer(layer) {\r\n    const traverse = (l) => {\r\n      if (l.parent) l.frame = Utils.convertPoint(l.frame, null, l.parent);\r\n      l.children.forEach(traverse);\r\n    };\r\n    if (!layer.parent) traverse(layer);\r\n  }\r\n}\r\n\r\n// Static helper\r\nImporter.load = async function (path, scale = 1) {\r\n  const importer = new Importer(path, { scale });\r\n  return await importer.load();\r\n};\r\n","import Utils from \"../Utils\";\r\nimport { BaseClass } from \"../BaseClass\";\r\n\r\nconst createTouch = (event, identifier, offset = { x: 0, y: 0 }) => {\r\n  const touch = {\r\n    identifier,\r\n    target: event.target,\r\n    pageX: event.pageX - offset.x,\r\n    pageY: event.pageY - offset.y,\r\n    clientX: event.clientX - offset.x,\r\n    clientY: event.clientY - offset.y,\r\n    screenX: event.screenX - offset.x,\r\n    screenY: event.screenY - offset.y,\r\n    point: {\r\n      x: event.pageX - offset.x,\r\n      y: event.pageY - offset.y,\r\n    },\r\n  };\r\n  return touch;\r\n};\r\n\r\nconst dispatchTouchEvent = (type, target, event, offset) => {\r\n  if (!target) ({ target } = event);\r\n\r\n  const touchEvent = document.createEvent(\"MouseEvent\");\r\n  touchEvent.initMouseEvent(\r\n    type,\r\n    true,\r\n    true,\r\n    window,\r\n    event.detail,\r\n    event.screenX,\r\n    event.screenY,\r\n    event.clientX,\r\n    event.clientY,\r\n    event.ctrlKey,\r\n    event.shiftKey,\r\n    event.altKey,\r\n    event.metaKey,\r\n    event.button,\r\n    event.relatedTarget\r\n  );\r\n\r\n  const touches = [createTouch(event, 1)];\r\n  if (offset) touches.push(createTouch(event, 2, offset));\r\n\r\n  touchEvent.touches =\r\n    touchEvent.changedTouches =\r\n    touchEvent.targetTouches =\r\n      touches;\r\n\r\n  return target.dispatchEvent(touchEvent);\r\n};\r\n\r\nconst cancelEvent = (event) => {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n};\r\n\r\nclass TouchEmulator extends BaseClass {\r\n  constructor() {\r\n    super();\r\n\r\n    this.keydown = this.keydown.bind(this);\r\n    this.keyup = this.keyup.bind(this);\r\n    this.mousedown = this.mousedown.bind(this);\r\n    this.mousemove = this.mousemove.bind(this);\r\n    this.mouseup = this.mouseup.bind(this);\r\n    this.mouseout = this.mouseout.bind(this);\r\n    this.mousemovePosition = this.mousemovePosition.bind(this);\r\n\r\n    this.touchPointerImage = \"url('framer/images/cursor@2x.png')\";\r\n    this.touchPointerImageActive = \"url('framer/images/cursor-active@2x.png')\";\r\n    this.touchPointerImageSize = 64;\r\n    this.touchPointerInitialOffset = { x: 0, y: 0 };\r\n\r\n    this.keyPinchCode = 18; // Alt\r\n    this.keyPanCode = 91; // Command\r\n\r\n    this.context = new Framer.Context({ name: \"TouchEmulator\" });\r\n    this.context._element.style.zIndex = 10000;\r\n    this.wrap = this.context.domEventManager.wrap;\r\n\r\n    this.wrap(document).addEventListener(\"mousedown\", this.mousedown, true);\r\n    this.wrap(document).addEventListener(\"mousemove\", this.mousemove, true);\r\n    this.wrap(document).addEventListener(\"mouseup\", this.mouseup, true);\r\n    this.wrap(document).addEventListener(\"keydown\", this.keydown, true);\r\n    this.wrap(document).addEventListener(\"keyup\", this.keyup, true);\r\n    this.wrap(document).addEventListener(\"mouseout\", this.mouseout, true);\r\n\r\n    this.isMouseDown = false;\r\n    this.isPinchKeyDown = false;\r\n    this.isPanKeyDown = false;\r\n\r\n    this.context.run(() => {\r\n      this.touchPointLayer = new Layer({\r\n        width: this.touchPointerImageSize,\r\n        height: this.touchPointerImageSize,\r\n        backgroundColor: null,\r\n        opacity: 0,\r\n      });\r\n      this.touchPointLayer.style.backgroundImage = this.touchPointerImage;\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.context?.reset();\r\n    this.context = null;\r\n  }\r\n\r\n  keydown(event) {\r\n    if (event.keyCode === this.keyPinchCode) {\r\n      this.isPinchKeyDown = true;\r\n      this.startPoint = this.centerPoint = null;\r\n      this.showTouchCursor();\r\n      this.touchPointLayer.midX = this.point?.x ?? 0;\r\n      this.touchPointLayer.midY = this.point?.y ?? 0;\r\n    }\r\n\r\n    if (event.keyCode === this.keyPanCode) {\r\n      this.isPanKeyDown = true;\r\n      cancelEvent(event);\r\n    }\r\n  }\r\n\r\n  keyup(event) {\r\n    if (event.keyCode === this.keyPinchCode) {\r\n      cancelEvent(event);\r\n      this.isPinchKeyDown = false;\r\n      this.hideTouchCursor();\r\n    }\r\n\r\n    if (event.keyCode === this.keyPanCode) {\r\n      cancelEvent(event);\r\n      if (this.touchPoint && this.point) {\r\n        this.centerPoint = Utils.pointCenter(this.touchPoint, this.point);\r\n        this.isPanKeyDown = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  mousedown(event) {\r\n    this.isMouseDown = true;\r\n    this.target = event.target;\r\n\r\n    if (this.isPinchKeyDown) {\r\n      dispatchTouchEvent(\r\n        \"touchstart\",\r\n        this.target,\r\n        event,\r\n        this.touchPointDelta\r\n      );\r\n    } else {\r\n      dispatchTouchEvent(\"touchstart\", this.target, event);\r\n    }\r\n\r\n    this.touchPointLayer.style.backgroundImage = this.touchPointerImageActive;\r\n  }\r\n\r\n  mousemove(event) {\r\n    this.point = { x: event.pageX, y: event.pageY };\r\n\r\n    this.startPoint ??= this.point;\r\n    this.centerPoint ??= this.point;\r\n\r\n    if (this.isPinchKeyDown && !this.isPanKeyDown && this.centerPoint) {\r\n      this.touchPoint = Utils.pointAdd(\r\n        this.touchPointerInitialOffset,\r\n        this.pinchPoint(this.point, this.centerPoint)\r\n      );\r\n      this.touchPointDelta = Utils.pointSubtract(this.point, this.touchPoint);\r\n    }\r\n\r\n    if (\r\n      this.isPinchKeyDown &&\r\n      this.isPanKeyDown &&\r\n      this.touchPoint &&\r\n      this.touchPointDelta\r\n    ) {\r\n      this.touchPoint = this.panPoint(this.point, this.touchPointDelta);\r\n    }\r\n\r\n    if ((this.isPinchKeyDown || this.isPanKeyDown) && this.touchPoint) {\r\n      this.touchPointLayer.visible = true;\r\n      this.touchPointLayer.midX = this.touchPoint.x;\r\n      this.touchPointLayer.midY = this.touchPoint.y;\r\n    }\r\n\r\n    if (this.isMouseDown) {\r\n      if ((this.isPinchKeyDown || this.isPanKeyDown) && this.touchPointDelta) {\r\n        dispatchTouchEvent(\r\n          \"touchmove\",\r\n          this.target,\r\n          event,\r\n          this.touchPointDelta\r\n        );\r\n      } else {\r\n        dispatchTouchEvent(\"touchmove\", this.target, event);\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseup(event) {\r\n    if (this.isPinchKeyDown || this.isPanKeyDown) {\r\n      dispatchTouchEvent(\"touchend\", this.target, event, this.touchPointDelta);\r\n    } else {\r\n      dispatchTouchEvent(\"touchend\", this.target, event);\r\n    }\r\n\r\n    this.endMultiTouch();\r\n  }\r\n\r\n  mouseout(event) {\r\n    if (this.isMouseDown) return;\r\n\r\n    const fromElement = event.relatedTarget || event.toElement;\r\n    if (!fromElement || fromElement.nodeName === \"HTML\") {\r\n      this.endMultiTouch();\r\n    }\r\n  }\r\n\r\n  showTouchCursor() {\r\n    if (!this.point) {\r\n      this.point = { x: 0, y: 0 };\r\n    }\r\n\r\n    this.touchPointLayer.animateStop();\r\n    this.touchPointLayer.midX = this.point.x;\r\n    this.touchPointLayer.midY = this.point.y;\r\n    this.touchPointLayer.scale = 1.8;\r\n\r\n    this.touchPointLayer.animate({\r\n      opacity: 1,\r\n      scale: 1,\r\n      options: { time: 0.1, curve: \"ease-out\" },\r\n    });\r\n  }\r\n\r\n  hideTouchCursor() {\r\n    if (this.touchPointLayer.opacity <= 0) return;\r\n\r\n    this.touchPointLayer.animateStop();\r\n    this.touchPointLayer.animate({\r\n      opacity: 0,\r\n      scale: 1.2,\r\n      options: { time: 0.08 },\r\n    });\r\n  }\r\n\r\n  mousemovePosition(event) {\r\n    this.point = { x: event.pageX, y: event.pageY };\r\n  }\r\n\r\n  endMultiTouch() {\r\n    this.isMouseDown = false;\r\n    this.touchPointLayer.style.backgroundImage = this.touchPointerImage;\r\n    this.hideTouchCursor();\r\n  }\r\n\r\n  pinchPoint(point, centerPoint) {\r\n    return Utils.pointSubtract(\r\n      centerPoint,\r\n      Utils.pointSubtract(point, centerPoint)\r\n    );\r\n  }\r\n\r\n  panPoint(point, offsetPoint) {\r\n    return Utils.pointSubtract(point, offsetPoint);\r\n  }\r\n}\r\n\r\nlet touchEmulator = null;\r\n\r\nexport const enable = () => {\r\n  if (Utils.isTouch()) return;\r\n  if (!touchEmulator) touchEmulator = new TouchEmulator();\r\n  return Events.enableEmulatedTouchEvents(true);\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!touchEmulator) return;\r\n  touchEmulator.destroy();\r\n  touchEmulator = null;\r\n  return Events.enableEmulatedTouchEvents(false);\r\n};\r\n\r\nexport const reset = () => {\r\n  touchEmulator?.endMultiTouch();\r\n};\r\n\r\nexport default TouchEmulator;\r\n","const handleScrollingLayerTouchMove = (event) => event.stopPropagation();\r\n\r\nconst handleScrollingLayerTouchStart = function () {\r\n  const element = this._element;\r\n  const startTopScroll = element.scrollTop;\r\n\r\n  if (startTopScroll <= 0) {\r\n    element.scrollTop = 1;\r\n  }\r\n\r\n  if (startTopScroll + element.offsetHeight >= element.scrollHeight) {\r\n    element.scrollTop = element.scrollHeight - element.offsetHeight - 1;\r\n  }\r\n};\r\n\r\nexport class MobileScrollFixLayer extends Framer.Layer {\r\n  constructor(options) {\r\n    super(options);\r\n    this._updateScrollListeners = this._updateScrollListeners.bind(this);\r\n\r\n    // Only apply to base Layer, not Scroll/Page components\r\n    if (this.constructor.name === \"Layer\") {\r\n      this.on(\"change:scrollVertical\", this._updateScrollListeners);\r\n      this._updateScrollListeners();\r\n    }\r\n  }\r\n\r\n  _updateScrollListeners() {\r\n    if (this.scrollVertical === true) {\r\n      this.on(\"touchmove\", handleScrollingLayerTouchMove);\r\n      this.on(\"touchstart\", handleScrollingLayerTouchStart);\r\n    } else {\r\n      this.off(\"touchmove\", handleScrollingLayerTouchMove);\r\n      this.off(\"touchstart\", handleScrollingLayerTouchStart);\r\n    }\r\n  }\r\n\r\n  toInspect(...args) {\r\n    return this.constructor.name === \"MobileScrollFixLayer\"\r\n      ? super.toInspect(\"Layer\")\r\n      : super.toInspect(...args);\r\n  }\r\n}\r\n\r\nexport const enableMobileScrollFix = () => {\r\n  document.ontouchmove = (event) => {\r\n    if (event.target === document.body) {\r\n      event.preventDefault();\r\n    }\r\n  };\r\n};\r\n\r\nexport default MobileScrollFixLayer;\r\n","import Utils from \"../Utils\";\r\nimport { BaseClass } from \"../BaseClass\";\r\nimport { Context } from \"../Context\";\r\nimport { Layer } from \"../Layer\";\r\n\r\nlet errorDisplay = null;\r\n\r\nconst Config = Utils.isMobile()\r\n  ? { height: 100, textInset: 20, fontSize: 32 }\r\n  : { height: 40, textInset: 12, fontSize: 14 };\r\n\r\nexport default class ErrorDisplay extends BaseClass {\r\n  _context = null;\r\n  _errorLayer = null;\r\n\r\n  constructor() {\r\n    super();\r\n    this.resize = this.resize.bind(this);\r\n\r\n    this._context ??= new Context({ name: \"ErrorDisplay\" });\r\n    this._context.index = 1000;\r\n\r\n    this._context.run(() => {\r\n      Events.wrap(window).addEventListener(\"error\", (e) =>\r\n        this.showError(e.message)\r\n      );\r\n      Events.wrap(window).addEventListener(\"resize\", this.resize);\r\n    });\r\n  }\r\n\r\n  createLayer() {\r\n    if (this._errorLayer) return this._errorLayer;\r\n\r\n    this._context.run(() => {\r\n      const error = new Layer({\r\n        name: \"error\",\r\n        y: Align.bottom,\r\n        width: Canvas.width,\r\n        height: Config.height,\r\n        backgroundColor: \"rgba(255, 0, 0, 1)\",\r\n      });\r\n\r\n      error.text = new Layer({\r\n        name: \"text\",\r\n        parent: error,\r\n        size: Utils.frameInset(error, Config.textInset),\r\n        point: Align.center,\r\n        backgroundColor: null,\r\n        clip: true,\r\n      });\r\n\r\n      error.text.style = {\r\n        font: `${Config.fontSize}px/1em ${Utils.deviceFont()}`,\r\n        lineHeight: `${parseInt(error.text.height - 2)}px`,\r\n        textAlign: \"center\",\r\n        wordWrap: \"break-word\",\r\n        textOverflow: \"ellipsis\",\r\n      };\r\n\r\n      error.onTap(() => {\r\n        this._errorLayer?.destroy();\r\n        this._errorLayer = null;\r\n      });\r\n\r\n      this._errorLayer = error;\r\n      this.resize();\r\n    });\r\n\r\n    return this._errorLayer;\r\n  }\r\n\r\n  resize() {\r\n    if (!this._errorLayer) return;\r\n\r\n    this._errorLayer.width = Canvas.width;\r\n    this._errorLayer.y = Canvas.height - this._errorLayer.height;\r\n    this._errorLayer.text.size = Utils.frameInset(\r\n      this._errorLayer,\r\n      Config.textInset\r\n    );\r\n    this._errorLayer.text.point = Align.center;\r\n  }\r\n\r\n  showError(message) {\r\n    const error = this.createLayer();\r\n    error.scale = 1.1;\r\n    error.text.html = message;\r\n\r\n    return error.animate({\r\n      scale: 1,\r\n      options: {\r\n        curve: \"spring(800, 55, 10)\",\r\n      },\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._context?.destroy();\r\n  }\r\n}\r\n\r\nexport const enable = () => {\r\n  if (errorDisplay) return;\r\n  errorDisplay = new ErrorDisplay();\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!errorDisplay) return;\r\n  errorDisplay.destroy();\r\n  errorDisplay = null;\r\n};\r\n","export const enable = (module = window) => {\r\n  const ClassWrapper =\r\n    (Klass) =>\r\n    (...args) => {\r\n      const instance = new Klass(...args);\r\n      return Object.setPrototypeOf(() => {}, instance);\r\n    };\r\n\r\n  module.Frame = ClassWrapper(Framer.Frame);\r\n  module.Layer = ClassWrapper(Framer.Layer);\r\n  module.BackgroundLayer = ClassWrapper(Framer.BackgroundLayer);\r\n  module.VideoLayer = ClassWrapper(Framer.VideoLayer);\r\n  module.Animation = ClassWrapper(Framer.Animation);\r\n\r\n  return module;\r\n};\r\n\r\nexport default enable;\r\n","import { Context } from \"../Context\";\r\nimport Utils from \"../Utils\";\r\n\r\nlet hints = null;\r\n\r\nexport default class Hints {\r\n  _context = null;\r\n  _target = null;\r\n\r\n  constructor() {\r\n    this._handleDown = this._handleDown.bind(this);\r\n    this._handleUp = this._handleUp.bind(this);\r\n\r\n    this._context = new Framer.Context({ name: \"Hints\" });\r\n    this._context.index = 10000;\r\n\r\n    this._context.run(() => {\r\n      const wrappedDoc = Events.wrap(document);\r\n      wrappedDoc.addEventListener(Events.TouchStart, this._handleDown, true);\r\n      wrappedDoc.addEventListener(Events.TouchEnd, this._handleUp, true);\r\n    });\r\n  }\r\n\r\n  _handleDown(event) {\r\n    if (this._isPreloading()) return;\r\n    this._target = event.target;\r\n  }\r\n\r\n  _handleUp(event) {\r\n    if (this._isPreloading()) return;\r\n\r\n    const layer = Framer.CurrentContext.layerForElement(this._target);\r\n\r\n    if (!layer) {\r\n      for (const context of Context.all()) {\r\n        if (\r\n          context !== Framer.DefaultContext &&\r\n          context !== Framer.CurrentContext &&\r\n          context.layerForElement(this._target)\r\n        ) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (layer?.willSeemToDoSomething()) return;\r\n\r\n    this.showHints();\r\n  }\r\n\r\n  _isPreloading() {\r\n    return Framer.Preloader?.isLoading === true;\r\n  }\r\n\r\n  showHints() {\r\n    const context = Framer.CurrentContext;\r\n    this._context.run(() => {\r\n      _.invokeMap(context.rootLayers, \"_showHint\");\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._context?.destroy();\r\n  }\r\n}\r\n\r\nexport const enable = () => {\r\n  if (hints) return hints;\r\n  hints = new Hints(Framer.CurrentContext);\r\n  return hints;\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!hints) return;\r\n  hints.destroy();\r\n  hints = null;\r\n};\r\n\r\nexport const showHints = () => {\r\n  if (!hints) return;\r\n  Utils.delay(0.5, () => hints.showHints());\r\n};\r\n","import { BaseClass } from \"../BaseClass\";\r\nimport { Context } from \"../Context\";\r\nimport Utils from \"../Utils\";\r\n\r\nclass Preloader extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"progress\", {\r\n      get() {\r\n        return this._mediaLoaded.length / this._media.length || 0;\r\n      },\r\n    });\r\n\r\n    this.define(\"time\", {\r\n      get() {\r\n        return (Date.now() - this._startTime) / 1000;\r\n      },\r\n    });\r\n\r\n    this.define(\"isLoading\", {\r\n      get() {\r\n        return this._isLoading;\r\n      },\r\n    });\r\n\r\n    this.define(\"isReady\", {\r\n      get() {\r\n        if (!this.isLoading) {\r\n          return false;\r\n        }\r\n        return this._mediaLoaded.length === this._media.length;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this.setLogo = this.setLogo.bind(this);\r\n    this.addImage = this.addImage.bind(this);\r\n    this.addPlayer = this.addPlayer.bind(this);\r\n    this.start = this.start.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this.end = this.end.bind(this);\r\n    this._end = this._end.bind(this);\r\n    this._handleProgress = this._handleProgress.bind(this);\r\n    this._handleTimeout = this._handleTimeout.bind(this);\r\n    this._setupContext = this._setupContext.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this._media = [];\r\n    this._mediaLoaded = [];\r\n    this._isLoading = false;\r\n\r\n    this.timeout = 30;\r\n\r\n    this.start();\r\n  }\r\n\r\n  setupContext() {\r\n    this.context = new Context({ name: \"Preloader\" });\r\n    return this.context.run(this._setupContext);\r\n  }\r\n\r\n  setLogo(url) {\r\n    this._logo = url;\r\n    // Set directly via style, to avoid inclusion in the preloader list\r\n    if (this.brand) {\r\n      return (this.brand.style[\"background-image\"] = `url('${url}')`);\r\n    }\r\n  }\r\n\r\n  addImagesFromContext(context) {\r\n    return _.map(context.layers, \"image\").map(this.addImage);\r\n  }\r\n\r\n  addPlayersFromContext(context) {\r\n    return _.map(context.layers, \"player\").map(this.addPlayer);\r\n  }\r\n\r\n  addImage(image) {\r\n    if (image instanceof Gradient) {\r\n      return;\r\n    }\r\n    if (image && !Array.from(this._media).includes(image)) {\r\n      this._media.push(image);\r\n      // We simply count failed images as loaded for now so that we avoid\r\n      // being in some loading state forever.\r\n      return Utils.loadImage(image, (error) => {\r\n        this._mediaLoaded.push(image);\r\n        return this._handleProgress();\r\n      });\r\n    }\r\n  }\r\n\r\n  addPlayer(player) {\r\n    if (!player || Array.from(this._media).includes(player)) {\r\n      return;\r\n    }\r\n    if (player.src == null || player.getAttribute(\"src\") === \"undefined\") {\r\n      return;\r\n    }\r\n    if (player.readyState == null || !(player.readyState < 3)) {\r\n      return;\r\n    }\r\n    //  else\r\n    this._media.push(player);\r\n    // Wait until there is enough data for playback to start playing\r\n    return Events.wrap(player).addEventListener(\"canplaythrough\", () => {\r\n      this._mediaLoaded.push(player);\r\n      return this._handleProgress();\r\n    });\r\n  }\r\n\r\n  start() {\r\n    if (this.isLoading) {\r\n      return;\r\n    }\r\n\r\n    this._isLoading = true;\r\n    this._startTime = Date.now();\r\n\r\n    this.emit(\"start\");\r\n    this.setupContext();\r\n\r\n    // We need a little delay for the contexts to build up so we can\r\n    // actually find the images in it.\r\n    return Utils.delay(0.2, this._start);\r\n  }\r\n\r\n  _start() {\r\n    // Another bit of delay to find out if the images are already cached\r\n    // so we avoid a mini flickr of the progress indicator.\r\n    Utils.delay(0.2, () => {\r\n      this.progressIndicator.visible = true;\r\n      return (this.brand.visible = true);\r\n    });\r\n\r\n    // By default we take the image from the prototype and the device\r\n    this.addImagesFromContext(Framer.DefaultContext);\r\n    this.addImagesFromContext(Framer.CurrentContext);\r\n    this.addPlayersFromContext(Framer.DefaultContext);\r\n    this.addPlayersFromContext(Framer.CurrentContext);\r\n\r\n    // If we don't need any images to be preloaded we can stop\r\n    if (!this._media.length) {\r\n      return this.end();\r\n    }\r\n\r\n    // Make sure we always show the prototype after n seconds, even if not\r\n    // all the images managed to load at all.\r\n    return Utils.delay(this.timeout, this._handleTimeout);\r\n  }\r\n\r\n  end() {\r\n    if (!this.isLoading) {\r\n      return;\r\n    }\r\n    return this._end();\r\n  }\r\n\r\n  _end(animated) {\r\n    if (animated == null) {\r\n      animated = true;\r\n    }\r\n    Framer.DefaultContext.visible = true;\r\n\r\n    const finalize = () => {\r\n      this.emit(\"end\");\r\n      this._isLoading = false;\r\n      return this.context != null ? this.context.destroy() : undefined;\r\n    };\r\n\r\n    if (\r\n      (this.progressIndicator != null\r\n        ? this.progressIndicator.visible\r\n        : undefined) &&\r\n      animated\r\n    ) {\r\n      if (this.cover != null) {\r\n        this.cover.animate({\r\n          properties: { opacity: 0 },\r\n          time: 0.13,\r\n        });\r\n      }\r\n      return this.cover.onAnimationDidEnd(finalize);\r\n    } else {\r\n      return finalize();\r\n    }\r\n  }\r\n\r\n  _handleProgress() {\r\n    this.emit(\"progress\", this.progress);\r\n    if (this.progressIndicator != null) {\r\n      this.progressIndicator.setProgress(this.progress);\r\n    }\r\n    if (this.isReady) {\r\n      return this._handleLoaded();\r\n    }\r\n  }\r\n\r\n  _handleLoaded() {\r\n    if (this.time > 0.5) {\r\n      return Utils.delay(0.2, this.end);\r\n    } else {\r\n      return this.end();\r\n    }\r\n  }\r\n\r\n  _handleTimeout() {\r\n    if (!this.isLoading) {\r\n      return;\r\n    }\r\n    console.warn(\"Preloader timeout, ending\");\r\n    return this.end();\r\n  }\r\n\r\n  _setupContext() {\r\n    let layout;\r\n    this.cover = new Layer({\r\n      frame: Canvas,\r\n      backgroundColor: \"white\",\r\n    });\r\n\r\n    this.progressIndicator = new CircularProgressComponent({\r\n      size: 160,\r\n      point: Align.center,\r\n      parent: this.cover,\r\n      visible: false,\r\n    });\r\n\r\n    this.progressIndicator.railsColor = Color.grey(0, 0.1);\r\n    this.progressIndicator.progressColor = \"rgb(75, 169, 248)\";\r\n    this.progressIndicator.setProgress(this.progress);\r\n\r\n    this.brand = new Layer({\r\n      size: 96,\r\n      parent: this.cover,\r\n      backgroundColor: null,\r\n      visible: false,\r\n      style: {\r\n        backgroundSize: \"50%\",\r\n      },\r\n    });\r\n\r\n    // We display it a tad larger on mobile\r\n    if (Utils.isMobile()) {\r\n      this.progressIndicator.scale = 1.25;\r\n      this.brand.scale = 1.25;\r\n    }\r\n\r\n    if (this._logo) {\r\n      this.setLogo(this._logo);\r\n    } else {\r\n      // Use the online logo, make sure we don't use the file:// protocol\r\n      let logoUrl =\r\n        \"//resources.framerjs.com/static/images/preloader/framer-logo.png\";\r\n      if (_.startsWith(window.location.href, \"file://\")) {\r\n        logoUrl = \"http:\" + logoUrl;\r\n      }\r\n      this.setLogo(logoUrl);\r\n    }\r\n\r\n    (layout = () => {\r\n      this.cover.frame = Canvas;\r\n      this.progressIndicator.point = Align.center;\r\n      this.brand.x = Align.center;\r\n      return (this.brand.y = Align.center(2));\r\n    })();\r\n\r\n    return Canvas.onResize(layout);\r\n  }\r\n}\r\nPreloader.initClass();\r\n\r\nexport const enable = () => {\r\n  return (Framer.Preloader ??= new Preloader());\r\n};\r\n\r\nexport const disable = () => {\r\n  Framer.Preloader?._end(false);\r\n  Framer.Preloader = null;\r\n};\r\n\r\nexport const addImage = (url) => {\r\n  return Framer.Preloader?.addImage(url);\r\n};\r\n\r\nexport const setLogo = (url) => {\r\n  return Framer.Preloader?.setLogo(url);\r\n};\r\n\r\nexport default Preloader;\r\n","import Utils from \"./Utils.js\";\r\nimport { DOMEventManager } from \"./DOMEventManager.js\";\r\n\r\nconst GestureInputLongPressTime = 0.5;\r\nconst GestureInputDoubleTapTime = 0.25;\r\nconst GestureInputSwipeThreshold = 30;\r\nconst GestureInputEdgeSwipeDistance = 30;\r\nconst GestureInputVelocityTime = 0.1;\r\nconst GestureInputForceTapDesktop = MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN;\r\nconst GestureInputForceTapMobile = 0.7;\r\nconst GestureInputForceTapMobilePollTime = 1 / 30;\r\nconst GestureInputMinimumFingerDistance = 30;\r\n\r\nexport class GestureInputRecognizer {\r\n  constructor() {\r\n    this.startMouse = this.startMouse.bind(this);\r\n    this.startTouch = this.startTouch.bind(this);\r\n    this.touchstart = this.touchstart.bind(this);\r\n    this.touchmove = this.touchmove.bind(this);\r\n    this.touchend = this.touchend.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.tap = this.tap.bind(this);\r\n    this.tapstart = this.tapstart.bind(this);\r\n    this.tapend = this.tapend.bind(this);\r\n    this.doubletap = this.doubletap.bind(this);\r\n    this.longpressstart = this.longpressstart.bind(this);\r\n    this.longpressend = this.longpressend.bind(this);\r\n    this._updateTouchForce = this._updateTouchForce.bind(this);\r\n    this._updateMacForce = this._updateMacForce.bind(this);\r\n    this.forcetapchange = this.forcetapchange.bind(this);\r\n    this.forcetapstart = this.forcetapstart.bind(this);\r\n    this.forcetapend = this.forcetapend.bind(this);\r\n    this.panstart = this.panstart.bind(this);\r\n    this.pan = this.pan.bind(this);\r\n    this.panend = this.panend.bind(this);\r\n    this.panup = this.panup.bind(this);\r\n    this.pandown = this.pandown.bind(this);\r\n    this.panleft = this.panleft.bind(this);\r\n    this.panright = this.panright.bind(this);\r\n    this.pinchstart = this.pinchstart.bind(this);\r\n    this.pinch = this.pinch.bind(this);\r\n    this.pinchend = this.pinchend.bind(this);\r\n    this.scalestart = this.scalestart.bind(this);\r\n    this.scale = this.scale.bind(this);\r\n    this.scaleend = this.scaleend.bind(this);\r\n    this.rotatestart = this.rotatestart.bind(this);\r\n    this.rotate = this.rotate.bind(this);\r\n    this.rotateend = this.rotateend.bind(this);\r\n    this.swipestart = this.swipestart.bind(this);\r\n    this.swipe = this.swipe.bind(this);\r\n    this.swipeend = this.swipeend.bind(this);\r\n    this.swipedirectionstart = this.swipedirectionstart.bind(this);\r\n    this.swipedirection = this.swipedirection.bind(this);\r\n    this.swipedirectionend = this.swipedirectionend.bind(this);\r\n    this.edgeswipedirection = this.edgeswipedirection.bind(this);\r\n    this.edgeswipedirectionstart = this.edgeswipedirectionstart.bind(this);\r\n    this.edgeswipedirectionend = this.edgeswipedirectionend.bind(this);\r\n    this._process = this._process.bind(this);\r\n    this.em = new DOMEventManager();\r\n    this.em.wrap(window).addEventListener(\"mousedown\", this.startMouse);\r\n    this.em.wrap(window).addEventListener(\"touchstart\", this.startTouch);\r\n    this.session = null;\r\n  }\r\n\r\n  destroy() {\r\n    return this.em.removeAllListeners();\r\n  }\r\n\r\n  cancel() {\r\n    window.clearTimeout(this.session.pressTimer);\r\n    return (this.session = null);\r\n  }\r\n\r\n  startMouse(event) {\r\n    if (this.session) {\r\n      return;\r\n    }\r\n    this.em.wrap(window).addEventListener(\"mousemove\", this.touchmove);\r\n    this.em.wrap(window).addEventListener(\"mouseup\", this.touchend);\r\n    return this.touchstart(event);\r\n  }\r\n\r\n  startTouch(event) {\r\n    if (this.session) {\r\n      return;\r\n    }\r\n    this.em.wrap(window).addEventListener(\"touchmove\", this.touchmove);\r\n    this.em.wrap(window).addEventListener(\"touchend\", this.touchend);\r\n    return this.touchstart(event);\r\n  }\r\n\r\n  touchstart(event) {\r\n    // Only fire if we are not already in a session\r\n    if (this.session) {\r\n      return;\r\n    }\r\n\r\n    this.em\r\n      .wrap(window)\r\n      .addEventListener(\"webkitmouseforcechanged\", this._updateMacForce);\r\n\r\n    this.session = {\r\n      startEvent: this._getGestureEvent(event),\r\n      lastEvent: null,\r\n      startMultiEvent: null,\r\n      startTime: Date.now(),\r\n      pressTimer: window.setTimeout(\r\n        this.longpressstart,\r\n        GestureInputLongPressTime * 1000\r\n      ),\r\n      started: {},\r\n      events: [],\r\n      eventCount: 0,\r\n      cancelTap: false,\r\n    };\r\n\r\n    event = this._getGestureEvent(event);\r\n\r\n    this.tapstart(event);\r\n\r\n    if (Date.now() - this.doubleTapTime < GestureInputDoubleTapTime * 1000) {\r\n      this.doubletap(event);\r\n    } else {\r\n      this.doubleTapTime = Date.now();\r\n    }\r\n\r\n    this._process(event);\r\n    if (Utils.isTouch()) {\r\n      return this._updateTouchForce();\r\n    }\r\n  }\r\n\r\n  touchmove(event) {\r\n    return this._process(this._getGestureEvent(event));\r\n  }\r\n\r\n  touchend(event) {\r\n    // Only fire if there are no fingers left on the screen\r\n\r\n    if (event.touches != null) {\r\n      if (Utils.isTouch()) {\r\n        if (event.touches.length !== 0) {\r\n          return;\r\n        }\r\n      } else {\r\n        if (event.touches.length !== event.changedTouches.length) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.em.wrap(window).removeEventListener(\"mousemove\", this.touchmove);\r\n    this.em.wrap(window).removeEventListener(\"mouseup\", this.touchend);\r\n    this.em.wrap(window).removeEventListener(\"touchmove\", this.touchmove);\r\n    this.em.wrap(window).removeEventListener(\"touchend\", this.touchend);\r\n    this.em\r\n      .wrap(window)\r\n      .removeEventListener(\"webkitmouseforcechanged\", this._updateMacForce);\r\n\r\n    event = this._getGestureEvent(event);\r\n\r\n    for (var eventName in this.session.started) {\r\n      var value = this.session.started[eventName];\r\n      if (value) {\r\n        this[`${eventName}end`](event);\r\n      }\r\n    }\r\n\r\n    if (this.shouldFireTapEvent(event)) {\r\n      this.tap(event);\r\n    }\r\n\r\n    this.tapend(event);\r\n    return this.cancel();\r\n  }\r\n\r\n  reset() {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    return this.touchend(this.session.lastEvent);\r\n  }\r\n\r\n  // Tap\r\n\r\n  shouldFireTapEvent(event) {\r\n    const startEvent =\r\n      this.session != null ? this.session.startEvent : undefined;\r\n    if (startEvent != null) {\r\n      // We only want to fire a tap event if the original target is the same\r\n      // as the release target, so buttons work the way you expect if you\r\n      // release the mouse outside.\r\n      const isSameTarget = startEvent.target === event.target;\r\n      const isShortSession = event.time - this.session.startTime < 750;\r\n      const isShortDistance =\r\n        Utils.pointDistance(startEvent.touchCenter, event.touchCenter) < 45;\r\n      return (\r\n        isSameTarget &&\r\n        isShortSession &&\r\n        isShortDistance &&\r\n        !this.session.cancelTap\r\n      );\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  tap(event) {\r\n    return this._dispatchEvent(\"tap\", event);\r\n  }\r\n  tapstart(event) {\r\n    return this._dispatchEvent(\"tapstart\", event);\r\n  }\r\n  tapend(event) {\r\n    return this._dispatchEvent(\"tapend\", event);\r\n  }\r\n  doubletap(event) {\r\n    return this._dispatchEvent(\"doubletap\", event);\r\n  }\r\n\r\n  // Press\r\n\r\n  longpressstart() {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (this.session.started.longpress) {\r\n      return;\r\n    }\r\n    const event = this._getGestureEvent(this.session.startEvent);\r\n    this.session.started.longpress = event;\r\n    this._dispatchEvent(\"longpressstart\", event);\r\n    return this._dispatchEvent(\"longpress\", event);\r\n  }\r\n\r\n  longpressend(event) {\r\n    return this._dispatchEvent(\"longpressend\", event);\r\n  }\r\n\r\n  // ForceTap\r\n\r\n  _updateTouchForce() {\r\n    if (\r\n      !__guard__(\r\n        __guard__(\r\n          this.session != null ? this.session.lastEvent : undefined,\r\n          (x1) => x1.touches\r\n        ),\r\n        (x) => x.length\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n    this.session.force = this.session.lastEvent.touches[0].force || 0;\r\n    const event = this._getGestureEvent(this.session.lastEvent);\r\n    this.forcetapchange(event);\r\n\r\n    if (this.session.force >= GestureInputForceTapMobile) {\r\n      this.forcetapstart(event);\r\n    } else {\r\n      this.forcetapend(event);\r\n    }\r\n\r\n    return setTimeout(\r\n      this._updateTouchForce,\r\n      GestureInputForceTapMobilePollTime\r\n    );\r\n  }\r\n\r\n  _updateMacForce(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    this.session.force = Utils.modulate(event.webkitForce, [0, 3], [0, 1]);\r\n    this.forcetapchange(this._getGestureEvent(event));\r\n\r\n    // Trigger a force touch if we reach the desktop threshold\r\n    if (event.webkitForce >= GestureInputForceTapDesktop) {\r\n      return this.forcetapstart(event);\r\n    } else {\r\n      return this.forcetapend(event);\r\n    }\r\n  }\r\n\r\n  forcetapchange(event) {\r\n    return this._dispatchEvent(\"forcetapchange\", event);\r\n  }\r\n\r\n  forcetapstart(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (this.session.started.forcetap) {\r\n      return;\r\n    }\r\n    this.session.started.forcetap = event;\r\n    this._dispatchEvent(\"forcetapstart\", event);\r\n    return this._dispatchEvent(\"forcetap\", event);\r\n  }\r\n\r\n  forcetapend(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (!this.session.started.forcetap) {\r\n      return;\r\n    }\r\n    this.session.started.forcetap = null;\r\n    return this._dispatchEvent(\"forcetapend\", event);\r\n  }\r\n\r\n  // Pan\r\n\r\n  panstart(event) {\r\n    this.session.started.pan = event;\r\n    return this._dispatchEvent(\r\n      \"panstart\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n\r\n  pan(event) {\r\n    this._dispatchEvent(\"pan\", event, this.session.started.pan.target);\r\n    const direction = this._getDirection(event.delta);\r\n    if (direction) {\r\n      return this[`pan${direction}`](event);\r\n    }\r\n  }\r\n\r\n  panend(event) {\r\n    this._dispatchEvent(\"panend\", event, this.session.started.pan.target);\r\n    return (this.session.started.pan = null);\r\n  }\r\n\r\n  panup(event) {\r\n    return this._dispatchEvent(\"panup\", event, this.session.started.pan.target);\r\n  }\r\n  pandown(event) {\r\n    return this._dispatchEvent(\r\n      \"pandown\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n  panleft(event) {\r\n    return this._dispatchEvent(\r\n      \"panleft\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n  panright(event) {\r\n    return this._dispatchEvent(\r\n      \"panright\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n\r\n  // Pinch\r\n\r\n  pinchstart(event) {\r\n    this.session.started.pinch = event;\r\n    this.scalestart(event, this.session.started.pinch.target);\r\n    this.rotatestart(event, this.session.started.pinch.target);\r\n    return this._dispatchEvent(\"pinchstart\", event);\r\n  }\r\n\r\n  pinch(event) {\r\n    this._dispatchEvent(\"pinch\", event);\r\n    this.scale(event, this.session.started.pinch.target);\r\n    return this.rotate(event, this.session.started.pinch.target);\r\n  }\r\n\r\n  pinchend(event) {\r\n    this._dispatchEvent(\"pinchend\", event);\r\n    this.scaleend(event, this.session.started.pinch.target);\r\n    this.rotateend(event, this.session.started.pinch.target);\r\n    return (this.session.started.pinch = null);\r\n  }\r\n\r\n  scalestart(event) {\r\n    return this._dispatchEvent(\"scalestart\", event);\r\n  }\r\n  scale(event) {\r\n    return this._dispatchEvent(\"scale\", event);\r\n  }\r\n  scaleend(event) {\r\n    return this._dispatchEvent(\"scaleend\", event);\r\n  }\r\n\r\n  rotatestart(event) {\r\n    return this._dispatchEvent(\"rotatestart\", event);\r\n  }\r\n  rotate(event) {\r\n    return this._dispatchEvent(\"rotate\", event);\r\n  }\r\n  rotateend(event) {\r\n    return this._dispatchEvent(\"rotateend\", event);\r\n  }\r\n\r\n  // Swipe\r\n\r\n  swipestart(event) {\r\n    this._dispatchEvent(\"swipestart\", event);\r\n    this.session.started.swipe = event;\r\n    return this.swipedirectionstart(event);\r\n  }\r\n\r\n  swipe(event) {\r\n    this._dispatchEvent(\"swipe\", event);\r\n    return this.swipedirection(event);\r\n  }\r\n\r\n  swipeend(event) {\r\n    return this._dispatchEvent(\"swipeend\", event);\r\n  }\r\n\r\n  // Direction swipe\r\n\r\n  swipedirectionstart(event) {\r\n    if (!event.offsetDirection) {\r\n      return;\r\n    }\r\n    if (this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    this.session.started.swipedirection = event;\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    this._dispatchEvent(`swipe${direction}start`, event);\r\n\r\n    const swipeEdge = this._edgeForSwipeDirection(direction);\r\n\r\n    if (\r\n      swipeEdge === \"top\" &&\r\n      0 < event.start.y &&\r\n      event.start.y < GestureInputEdgeSwipeDistance\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"right\" &&\r\n      Screen.width - GestureInputEdgeSwipeDistance < event.start.x &&\r\n      event.start.x < Screen.width\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"bottom\" &&\r\n      Screen.height - GestureInputEdgeSwipeDistance < event.start.y &&\r\n      event.start.y < Screen.height\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"left\" &&\r\n      0 < event.start.x &&\r\n      event.start.x < GestureInputEdgeSwipeDistance\r\n    ) {\r\n      return this.edgeswipedirectionstart(event);\r\n    }\r\n  }\r\n\r\n  swipedirection(event) {\r\n    if (!this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    this._dispatchEvent(`swipe${direction}`, event);\r\n    if (this.session.started.edgeswipedirection) {\r\n      return this.edgeswipedirection(event);\r\n    }\r\n  }\r\n\r\n  swipedirectionend(event) {\r\n    if (!this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    return this._dispatchEvent(`swipe${direction}end`, event);\r\n  }\r\n\r\n  // Edge swipe\r\n\r\n  edgeswipedirection(event) {\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipe\", this._createEvent(\"edgeswipe\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}`,\r\n      this._createEvent(`edgeswipe${swipeEdge}`, event)\r\n    );\r\n  }\r\n\r\n  edgeswipedirectionstart(event) {\r\n    if (this.session.started.edgeswipedirection) {\r\n      return;\r\n    }\r\n    this.session.started.edgeswipedirection = event;\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipestart\", this._createEvent(\"edgeswipestart\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}start`,\r\n      this._createEvent(`edgeswipe${swipeEdge}start`, event)\r\n    );\r\n  }\r\n\r\n  edgeswipedirectionend(event) {\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipeend\", this._createEvent(\"edgeswipeend\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}end`,\r\n      this._createEvent(`edgeswipe${swipeEdge}end`, event)\r\n    );\r\n  }\r\n\r\n  // Utilities\r\n\r\n  _process(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n\r\n    this.session.events.push(event);\r\n    event.eventCount = this.session.eventCount++;\r\n\r\n    // Detect pan events\r\n\r\n    // See if there was any movement\r\n    if (Math.abs(event.delta.x) > 0 || Math.abs(event.delta.y) > 0) {\r\n      if (!this.session.started.pan) {\r\n        this.panstart(event);\r\n      } else {\r\n        this.pan(event);\r\n      }\r\n    }\r\n\r\n    // Detect pinch, rotate and scale events\r\n\r\n    // Stop panning if we go from 2 to 1 finger\r\n    if (this.session.started.pinch && event.fingers === 1) {\r\n      this.pinchend(event);\r\n      // If we did not start yet and get two fingers, start\r\n    } else if (!this.session.started.pinch && event.fingers === 2) {\r\n      this.pinchstart(event);\r\n      // If we did start send pinch events\r\n    } else if (this.session.started.pinch) {\r\n      this.pinch(event);\r\n    }\r\n\r\n    // Detect swipe events\r\n\r\n    // If we did not start but moved more then the swipe threshold, start\r\n    if (\r\n      !this.session.started.swipe &&\r\n      (Math.abs(event.offset.x) > GestureInputSwipeThreshold ||\r\n        Math.abs(event.offset.y) > GestureInputSwipeThreshold)\r\n    ) {\r\n      this.swipestart(event);\r\n      // If we did start send swipe events\r\n    } else if (this.session.started.swipe) {\r\n      this.swipe(event);\r\n    }\r\n\r\n    return (this.session.lastEvent = event);\r\n  }\r\n\r\n  _getEventPoint(event) {\r\n    if (event.touches != null ? event.touches.length : undefined) {\r\n      return this._getTouchPoint(event, 0);\r\n    }\r\n    return { x: event.pageX, y: event.pageY };\r\n  }\r\n\r\n  _getGestureEvent(event) {\r\n    // Convert the point to the current context\r\n    const eventPoint = Utils.convertPointFromContext(\r\n      this._getEventPoint(event),\r\n      Framer.CurrentContext,\r\n      true,\r\n      true\r\n    );\r\n    _.extend(event, {\r\n      time: Date.now(), // Current time \r\n\r\n      point: eventPoint, // Current point \r\n      start: eventPoint, // Start point \r\n      previous: eventPoint, // Previous point \r\n\r\n      offset: { x: 0, y: 0 }, // Offset since start \r\n      offsetTime: 0, // Time since start \r\n      offsetAngle: 0, // Angle from start \r\n      offsetDirection: null, // Direction from start (up, down, left, right) \r\n\r\n      delta: { x: 0, y: 0 }, // Offset since last event \r\n      deltaTime: 0, // Time since last event \r\n      deltaAngle: 0, // Angle from last event \r\n      deltaDirection: null, // Direction from last event \r\n\r\n      force: 0, // 3d touch or force touch, iOS/Mac only \r\n      velocity: { x: 0, y: 0 }, // Velocity average over the last few events \r\n\r\n      fingers: (event.touches != null ? event.touches.length : undefined) || 0, // Number of fingers used \r\n      touchCenter: eventPoint, // Center between two fingers \r\n      touchOffset: { x: 0, y: 0 }, // Offset between two fingers \r\n      touchDistance: 0, // Distance between two fingers \r\n      scale: 1, // Scale value from two fingers \r\n      scaleDirection: null, // Direction for scale: up or down \r\n      rotation: 0,\r\n    }); // Rotation value from two fingers \r\n\r\n    // Properties relative to a start event\r\n    if (this.session != null ? this.session.startEvent : undefined) {\r\n      event.start = this.session.startEvent.point;\r\n      event.offset = Utils.pointSubtract(event.point, event.start);\r\n      event.offsetTime = event.time - this.session.startEvent.time;\r\n      event.offsetAngle = Utils.pointAngle(\r\n        this.session.startEvent.point,\r\n        event.point\r\n      );\r\n      event.offsetDirection = this._getDirection(event.offset);\r\n      event.touchCenterStart = this.session.startEvent.touchCenter;\r\n    }\r\n\r\n    // Properties relative to the previous event\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      event.previous = this.session.lastEvent.point;\r\n      event.deltaTime = event.time - this.session.lastEvent.time;\r\n      event.delta = Utils.pointSubtract(\r\n        event.point,\r\n        this.session.lastEvent.point\r\n      );\r\n      event.deltaAngle = Utils.pointAngle(\r\n        event.point,\r\n        this.session.lastEvent.point\r\n      );\r\n      event.deltaDirection = this._getDirection(event.delta);\r\n    }\r\n\r\n    // Properties related to multi touch\r\n    if (event.fingers > 1) {\r\n      const touchPointA = this._getTouchPoint(event, 0);\r\n      const touchPointB = this._getTouchPoint(event, 1);\r\n      event.touchCenter = Utils.pointCenter(touchPointB, touchPointA);\r\n      event.touchOffset = Utils.pointSubtract(touchPointB, touchPointA);\r\n      event.touchDistance = _.max([\r\n        GestureInputMinimumFingerDistance,\r\n        Utils.pointDistance(touchPointA, touchPointB),\r\n      ]);\r\n      event.rotation = Utils.pointAngle(touchPointA, touchPointB);\r\n    }\r\n\r\n    // Special cases\r\n\r\n    // Velocity\r\n    if (this.session != null ? this.session.events : undefined) {\r\n      const events = _.filter(this.session.events, function (e) {\r\n        if (e.eventCount === 0) {\r\n          return false;\r\n        }\r\n        return e.time > event.time - GestureInputVelocityTime * 1000;\r\n      });\r\n\r\n      event.velocity = this._getVelocity(events);\r\n    }\r\n\r\n    // Scale can only be set after we started a pinch session\r\n    if (this.session != null ? this.session.started.pinch : undefined) {\r\n      event.scale =\r\n        event.touchDistance / this.session.started.pinch.touchDistance;\r\n      event.scaleDirection = this._getScaleDirection(\r\n        event.scale - this.session.lastEvent.scale\r\n      );\r\n\r\n      // If this is a pinch end event, there was no movement so we use the last one\r\n      if (\r\n        !event.scaleDirection &&\r\n        (this.session != null ? this.session.lastEvent : undefined)\r\n      ) {\r\n        event.scaleDirection = this.session.lastEvent.scaleDirection;\r\n      }\r\n    }\r\n\r\n    // For delta we switch to center-compare if there are two fingers\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      // If we just switched fingers, we skip the delta event entirely\r\n      if (\r\n        event.fingers !== this.session.lastEvent.fingers &&\r\n        this.session.lastEvent.fingers === 2\r\n      ) {\r\n        event.delta = { x: 0, y: 0 };\r\n      }\r\n      // If we are having two finger events, we use the touchCenter as base for delta\r\n      if (event.fingers === 2 && this.session.lastEvent.fingers === 2) {\r\n        event.delta = Utils.pointSubtract(\r\n          event.touchCenter,\r\n          this.session.lastEvent.touchCenter\r\n        );\r\n      }\r\n    }\r\n\r\n    // Force touch\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      if (this.session.force) {\r\n        event.force = this.session.force;\r\n      }\r\n    }\r\n\r\n    // Convert point style event properties to dom style:\r\n    // event.delta -> event.deltaX, event.deltaY\r\n    for (var pointKey of [\r\n      \"point\",\r\n      \"start\",\r\n      \"previous\",\r\n      \"offset\",\r\n      \"delta\",\r\n      \"velocity\",\r\n      \"touchCenter\",\r\n      \"touchOffset\",\r\n    ]) {\r\n      event[`${pointKey}X`] = event[pointKey].x;\r\n      event[`${pointKey}Y`] = event[pointKey].y;\r\n    }\r\n\r\n    return event;\r\n  }\r\n\r\n  _getTouchPoint(event, index) {\r\n    let point;\r\n    return (point = {\r\n      x: event.touches[index].pageX,\r\n      y: event.touches[index].pageY,\r\n    });\r\n  }\r\n\r\n  _getDirection(offset) {\r\n    if (Math.abs(offset.x) > Math.abs(offset.y)) {\r\n      if (offset.x > 0) {\r\n        return \"right\";\r\n      }\r\n      if (offset.x < 0) {\r\n        return \"left\";\r\n      }\r\n    }\r\n    if (Math.abs(offset.x) < Math.abs(offset.y)) {\r\n      if (offset.y < 0) {\r\n        return \"up\";\r\n      }\r\n      if (offset.y > 0) {\r\n        return \"down\";\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _edgeForSwipeDirection(direction) {\r\n    if (direction === \"down\") {\r\n      return \"top\";\r\n    }\r\n    if (direction === \"left\") {\r\n      return \"right\";\r\n    }\r\n    if (direction === \"up\") {\r\n      return \"bottom\";\r\n    }\r\n    if (direction === \"right\") {\r\n      return \"left\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _getScaleDirection(offset) {\r\n    if (offset > 0) {\r\n      return \"up\";\r\n    }\r\n    if (offset < 0) {\r\n      return \"down\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _createEvent(type, event) {\r\n    const touchEvent = document.createEvent(\"MouseEvent\");\r\n    touchEvent.initMouseEvent(\r\n      type,\r\n      true,\r\n      true,\r\n      window,\r\n      event.detail,\r\n      event.screenX,\r\n      event.screenY,\r\n      event.clientX,\r\n      event.clientY,\r\n      event.ctrlKey,\r\n      event.shiftKey,\r\n      event.altKey,\r\n      event.metaKey,\r\n      event.button,\r\n      event.relatedTarget\r\n    );\r\n\r\n    touchEvent.touches = event.touches;\r\n    touchEvent.changedTouches = event.touches;\r\n    touchEvent.targetTouches = event.touches;\r\n\r\n    for (var k in event) {\r\n      var v = event[k];\r\n      touchEvent[k] = v;\r\n    }\r\n\r\n    return touchEvent;\r\n  }\r\n\r\n  _dispatchEvent(type, event, target) {\r\n    const touchEvent = this._createEvent(type, event);\r\n    // By default we want to send the event to the target at the beginning\r\n    // of this session, so we catch tap ends etc when the mouse is released\r\n    // outside of the original target.\r\n    if (target == null) {\r\n      target = __guard__(\r\n        this.session != null ? this.session.startEvent : undefined,\r\n        (x) => x.target\r\n      );\r\n    }\r\n    if (target == null) {\r\n      ({ target } = event);\r\n    }\r\n    return target.dispatchEvent(touchEvent);\r\n  }\r\n\r\n  _getVelocity(events) {\r\n    if (events.length < 2) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    const time = current.time - first.time;\r\n\r\n    const velocity = {\r\n      x: (current.point.x - first.point.x) / time,\r\n      y: (current.point.y - first.point.y) / time,\r\n    };\r\n\r\n    if (velocity.x === Infinity) {\r\n      velocity.x = 0;\r\n    }\r\n    if (velocity.y === Infinity) {\r\n      velocity.y = 0;\r\n    }\r\n\r\n    return velocity;\r\n  }\r\n}\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\nexport class Canvas extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"width\", { get: () => window.innerWidth });\r\n    this.define(\"height\", { get: () => window.innerHeight });\r\n    this.define(\"size\", { get: () => Utils.size(this) });\r\n    this.define(\"frame\", { get: () => Utils.frame(this) });\r\n\r\n    this.define(\"backgroundColor\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get: () => Framer.Device.background.backgroundColor,\r\n      set: (value) => (Framer.Device.background.backgroundColor = value),\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get: () => Framer.Device.background.image,\r\n      set: (value) => (Framer.Device.background.image = value),\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n    this._handleResize = this._handleResize.bind(this);\r\n    Events.wrap(window).addEventListener(\"resize\", this._handleResize);\r\n  }\r\n\r\n  onResize(cb) {\r\n    return this.on(\"resize\", cb);\r\n  }\r\n\r\n  _handleResize(event) {\r\n    if (!Screen.device) {\r\n      Screen.emit(\"resize\");\r\n    }\r\n    this.emit(\"resize\");\r\n    this.emit(\"change:width\");\r\n    this.emit(\"change:height\");\r\n    this.emit(\"change:size\");\r\n    this.emit(\"change:frame\");\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} ${this.width}x${this.height}>`;\r\n  }\r\n\r\n  // Point Conversion\r\n  convertPointToLayer(point, layer) {\r\n    return Utils.convertPointFromContext(point, layer, true, true);\r\n  }\r\n\r\n  convertPointToScreen(point) {\r\n    const ctx = Framer.Device.context;\r\n    return Utils.convertPointFromContext(point, ctx, true, true);\r\n  }\r\n}\r\n\r\n// Initialize static definitions\r\nCanvas.initClass();\r\n","// This gets automatically populated bij gulp\r\n\r\nexports.date = 1762655598;\r\nexports.branch = \"main\";\r\nexports.hash = \"ad96cba2-dirty\";\r\nexports.build = 3296;\r\nexports.version = `${exports.branch}/${exports.hash}`;\r\n","import { _ } from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Gradient } from \"./Gradient.js\";\r\nimport { Layer } from \"./Layer.js\";\r\nimport { BackgroundLayer } from \"./BackgroundLayer.js\";\r\nimport { VideoLayer } from \"./VideoLayer.js\";\r\nimport { SVGLayer } from \"./SVGLayer.js\";\r\nimport { SVGPath } from \"./SVGPath.js\";\r\nimport { SVGGroup } from \"./SVGGroup.js\";\r\nimport { TextLayer } from \"./TextLayer.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\nimport { Animation } from \"./Animation.js\";\r\nimport { AnimationGroup, AnimationStateGroup } from \"./AnimationGroup.js\";\r\nimport { Screen } from \"./Screen.js\";\r\nimport { Align } from \"./Align.js\";\r\nimport { Blending } from \"./Blending.js\";\r\nimport { print } from \"./Print.js\";\r\n\r\nimport { ScrollComponent } from \"./Components/ScrollComponent.js\";\r\nimport { PageComponent } from \"./Components/PageComponent.js\";\r\nimport { SliderComponent } from \"./Components/SliderComponent.js\";\r\nimport { RangeSliderComponent } from \"./Components/RangeSliderComponent.js\";\r\nimport { DeviceComponent } from \"./Components/DeviceComponent.js\";\r\nimport { GridComponent } from \"./Components/GridComponent.js\";\r\nimport { FlowComponent } from \"./Components/FlowComponent.js\";\r\nimport { CircularProgressComponent } from \"./Components/CircularProgressComponent.js\";\r\nimport { MIDIComponent } from \"./Components/MIDIComponent.js\";\r\n\r\nimport { Context } from \"./Context.js\";\r\nimport { Config } from \"./Config.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { LayerStyle } from \"./LayerStyle.js\";\r\nimport { AnimationLoop } from \"./AnimationLoop.js\";\r\nimport { LinearAnimator } from \"./Animators/LinearAnimator.js\";\r\nimport { BezierCurveAnimator } from \"./Animators/BezierCurveAnimator.js\";\r\nimport { SpringDHOAnimator } from \"./Animators/SpringDHOAnimator.js\";\r\nimport { SpringRK4Animator } from \"./Animators/SpringRK4Animator.js\";\r\nimport * as Curves from \"./Animators/Curves.js\";\r\nimport { Importer } from \"./Importer.js\";\r\nimport * as Extras from \"./Extras/Extras.js\";\r\nimport { GestureInputRecognizer } from \"./GestureInputRecognizer.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { Canvas } from \"./Canvas.js\";\r\n\r\n// Import version file generated by Vite build\r\nimport * as Version from \"../build/version.js\";\r\n\r\nconst Framer = {};\r\n\r\n// Root modules\r\nFramer._ = _;\r\nFramer.Utils = Utils;\r\nFramer.Color = Color;\r\nFramer.Gradient = Gradient;\r\nFramer.Layer = Layer;\r\nFramer._Layer = Layer;\r\nFramer.BackgroundLayer = BackgroundLayer;\r\nFramer.VideoLayer = VideoLayer;\r\nFramer.SVGLayer = SVGLayer;\r\nFramer.SVGPath = SVGPath;\r\nFramer.SVGGroup = SVGGroup;\r\nFramer.TextLayer = TextLayer;\r\nFramer.Events = Events;\r\nFramer.Gestures = Gestures;\r\nFramer.Animation = Animation;\r\nFramer.AnimationGroup = AnimationGroup;\r\nFramer.AnimationStateGroup = AnimationStateGroup;\r\nFramer.Screen = Screen;\r\nFramer.Align = Align;\r\nFramer.Blending = Blending;\r\nFramer.print = print;\r\n\r\n// Components\r\nFramer.ScrollComponent = ScrollComponent;\r\nFramer.PageComponent = PageComponent;\r\nFramer.SliderComponent = SliderComponent;\r\nFramer.RangeSliderComponent = RangeSliderComponent;\r\nFramer.DeviceComponent = DeviceComponent;\r\nFramer.DeviceView = DeviceComponent;\r\nFramer.GridComponent = GridComponent;\r\nFramer.FlowComponent = FlowComponent;\r\nFramer.CircularProgressComponent = CircularProgressComponent;\r\nFramer.MIDIComponent = MIDIComponent;\r\n\r\n// Framer level modules\r\nFramer.Context = Context;\r\nFramer.Config = Config;\r\nFramer.EventEmitter = EventEmitter;\r\nFramer.BaseClass = BaseClass;\r\nFramer.LayerStyle = LayerStyle;\r\nFramer.AnimationLoop = AnimationLoop;\r\nFramer.LinearAnimator = LinearAnimator;\r\nFramer.BezierCurveAnimator = BezierCurveAnimator;\r\nFramer.SpringDHOAnimator = SpringDHOAnimator;\r\nFramer.SpringRK4Animator = SpringRK4Animator;\r\nFramer.LayerDraggable = Layer;\r\n\r\nFramer.Curves = Curves;\r\nif (typeof window !== \"undefined\") {\r\n  window.Bezier = Curves.Bezier;\r\n  window.Spring = Curves.Spring;\r\n}\r\n\r\nFramer.Importer = Importer;\r\nFramer.Extras = Extras;\r\n\r\nFramer.GestureInputRecognizer = new GestureInputRecognizer();\r\nFramer.Version = Version;\r\nFramer.Loop = new AnimationLoop();\r\n\r\n// Metadata\r\nFramer.Info = {};\r\n\r\n// Attach to window safely\r\nif (typeof window !== \"undefined\") {\r\n  _.extend(window, Framer);\r\n  window.Framer = Framer;\r\n}\r\n\r\n// Set defaults\r\nDefaults.setup();\r\nFramer.resetDefaults = Defaults.reset;\r\n\r\n// Default context\r\nFramer.DefaultContext = new Context({ name: \"Default\" });\r\nFramer.DefaultContext.backgroundColor = \"white\";\r\nFramer.CurrentContext = Framer.DefaultContext;\r\n\r\n// Canvas\r\nif (typeof window !== \"undefined\") {\r\n  window.Canvas = new Canvas();\r\n}\r\n\r\n// Extras\r\nif (Utils.isMobile()) Framer.Extras.MobileScrollFix.enable();\r\nif (!Utils.isTouch()) Framer.Extras.TouchEmulator.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.ErrorDisplay.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.Preloader.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.Hints.enable();\r\n\r\nUtils.domComplete(() => Framer.Loop.start());\r\n\r\nexport default Framer;\r\n"],"names":["undefined","VERSION","LARGE_ARRAY_SIZE","CORE_ERROR_TEXT","FUNC_ERROR_TEXT","INVALID_TEMPL_VAR_ERROR_TEXT","HASH_UNDEFINED","MAX_MEMOIZE_SIZE","PLACEHOLDER","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","WRAP_BIND_FLAG","WRAP_BIND_KEY_FLAG","WRAP_CURRY_BOUND_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","WRAP_FLIP_FLAG","DEFAULT_TRUNC_LENGTH","DEFAULT_TRUNC_OMISSION","HOT_COUNT","HOT_SPAN","LAZY_FILTER_FLAG","LAZY_MAP_FLAG","LAZY_WHILE_FLAG","INFINITY","MAX_SAFE_INTEGER","MAX_INTEGER","NAN","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","HALF_MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","asyncTag","boolTag","dateTag","domExcTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","weakSetTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reWhitespace","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reForbiddenIdentifierChars","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","deburredLetters","htmlEscapes","htmlUnescapes","stringEscapes","freeParseFloat","freeParseInt","freeGlobal","global","freeSelf","root","freeExports","exports","freeModule","module","moduleExports","freeProcess","nodeUtil","types","nodeIsArrayBuffer","nodeIsDate","nodeIsMap","nodeIsRegExp","nodeIsSet","nodeIsTypedArray","apply","func","thisArg","args","arrayAggregator","array","setter","iteratee","accumulator","index","length","value","arrayEach","arrayEachRight","arrayEvery","predicate","arrayFilter","resIndex","result","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","values","offset","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","asciiToArray","string","asciiWords","baseFindKey","collection","eachFunc","key","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","object","basePropertyOf","baseReduce","baseSortBy","comparer","current","baseTimes","n","baseToPairs","props","baseTrim","trimmedEndIndex","baseUnary","baseValues","cacheHas","cache","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","chr","getValue","hasUnicode","hasUnicodeWord","iteratorToArray","iterator","data","mapToArray","map","overArg","transform","arg","replaceHolders","setToArray","set","setToPairs","strictLastIndexOf","stringSize","unicodeSize","stringToArray","unicodeToArray","unescapeHtmlChar","unicodeWords","runInContext","context","_","Array","Date","Error","Function","Math","Object","RegExp","String","TypeError","arrayProto","funcProto","objectProto","coreJsData","funcToString","hasOwnProperty","idCounter","maskSrcKey","uid","nativeObjectToString","objectCtorString","oldDash","reIsNative","Buffer","Symbol","Uint8Array","allocUnsafe","getPrototype","objectCreate","propertyIsEnumerable","splice","spreadableSymbol","symIterator","symToStringTag","defineProperty","getNative","ctxClearTimeout","ctxNow","ctxSetTimeout","nativeCeil","nativeFloor","nativeGetSymbols","nativeIsBuffer","nativeIsFinite","nativeJoin","nativeKeys","nativeMax","nativeMin","nativeNow","nativeParseInt","nativeRandom","nativeReverse","DataView","Map","Promise","Set","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","symbolToString","lodash","isObjectLike","isArray","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","lazyClone","copyArray","lazyReverse","lazyValue","dir","isArr","isRight","arrLength","view","getView","start","end","iteratees","iterLength","takeCount","baseWrapperValue","outer","iterIndex","type","computed","Hash","entries","entry","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","size","SetCache","setCacheAdd","setCacheHas","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArg","isArguments","isBuff","isBuffer","isType","isTypedArray","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","baseAggregator","baseEach","baseAssign","source","copyObject","keys","baseAssignIn","keysIn","baseAt","paths","skip","get","number","lower","upper","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","initCloneArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","copySymbols","initCloneByTag","stacked","isSet","subValue","isMap","keysFunc","getAllKeysIn","getAllKeys","baseConforms","baseConformsTo","baseDelay","wait","setTimeout","baseDifference","includes","isCommon","valuesLength","valuesIndex","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFill","toInteger","toLength","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","path","castPath","toKey","baseGetAllKeys","symbolsFunc","baseGetTag","getRawTag","objectToString","baseGt","other","baseHas","baseHasIn","baseInRange","baseIntersection","arrays","othLength","othIndex","caches","maxLength","seen","baseInverter","baseInvoke","parent","last","baseIsArguments","baseIsArrayBuffer","baseIsDate","baseIsEqual","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsMap","baseIsMatch","matchData","noCustomizer","srcValue","baseIsNative","isMasked","pattern","baseIsRegExp","baseIsSet","baseIsTypedArray","isLength","baseIteratee","identity","baseMatchesProperty","baseMatches","property","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","baseMergeDeep","newValue","safeGet","mergeFunc","isTyped","isArrayLikeObject","cloneTypedArray","isPlainObject","toPlainObject","baseNth","baseOrderBy","orders","getIteratee","criteria","compareMultiple","basePick","basePickBy","baseSet","basePropertyDeep","basePullAll","indexOf","basePullAt","indexes","previous","baseUnset","baseRange","step","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","low","high","mid","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","actions","action","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","toString","castRest","castSlice","clearTimeout","id","buffer","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneRegExp","regexp","cloneSymbol","symbol","typedArray","compareAscending","valIsDefined","valIsReflexive","objCriteria","othCriteria","ordersLength","order","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","getSymbols","getSymbolsIn","createAggregator","initializer","createAssigner","assigner","sources","guard","isIterateeCall","iterable","createBind","isBind","Ctor","createCtor","wrapper","fn","createCaseFirst","methodName","trailing","createCompounder","callback","words","deburr","thisBinding","createCurry","arity","getHolder","createRecurry","createHybrid","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","getFuncName","funcName","getData","isLaziable","partialsRight","holdersRight","argPos","ary","isAry","isBindKey","isFlip","holdersCount","newHolders","reorder","createInverter","toIteratee","createMathOperation","operator","defaultValue","createOver","arrayFunc","createPadding","chars","charsLength","createPartial","createRange","toFinite","createRelationalOperation","toNumber","wrapFunc","isCurry","newHoldersRight","newPartials","newPartialsRight","newData","setData","setWrapToString","createRound","precision","pair","noop","createToPairs","createWrap","mergeData","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","isPartial","arrStacked","othStacked","arrValue","othValue","compared","convert","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","flatten","otherFunc","isKeyable","isOwn","unmasked","stubArray","ctorString","transforms","getWrapDetails","match","hasPath","hasFunc","insertWrapDetails","details","isMaskable","stubFalse","memoizeCapped","memoize","srcBitmask","newBitmask","isCombo","otherArgs","oldArray","shortOut","reference","updateWrapDetails","count","lastCalled","stamp","remaining","rand","quote","subString","chunk","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","fill","findIndex","findLastIndex","flattenDeep","flattenDepth","fromPairs","head","initial","intersection","mapped","intersectionBy","intersectionWith","join","separator","lastIndexOf","nth","pull","pullAll","pullAllBy","pullAllWith","pullAt","remove","reverse","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","group","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","chain","tap","interceptor","thru","wrapperAt","wrapperChain","wrapperCommit","wrapperNext","toArray","done","wrapperToIterator","wrapperPlant","clone","wrapperReverse","wrapped","wrapperValue","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","forEach","forEachRight","groupBy","isString","invokeMap","keyBy","orderBy","partition","reduce","reduceRight","reject","negate","sample","sampleSize","shuffle","some","sortBy","now","after","before","bind","bindKey","curry","curryRight","debounce","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","time","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","defer","delay","flip","resolver","memoized","once","overArgs","funcsLength","partial","partialRight","rearg","rest","spread","throttle","unary","wrap","castArray","cloneWith","cloneDeep","cloneDeepWith","conformsTo","gt","gte","isArrayBuffer","isBoolean","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isInteger","isMatch","isMatchWith","isNaN","isNumber","isNative","isNull","isNil","isRegExp","isSafeInteger","isUndefined","isWeakMap","isWeakSet","lt","lte","sign","remainder","isBinary","toSafeInteger","assign","assignIn","assignInWith","assignWith","at","create","prototype","properties","defaults","propsIndex","propsLength","defaultsDeep","mergeWith","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","functions","functionsIn","has","invert","invertBy","invoke","mapKeys","mapValues","merge","omit","omitBy","pickBy","pick","prop","setWith","toPairs","toPairsIn","isArrLike","unset","update","updateWith","valuesIn","clamp","inRange","random","floating","temp","camelCase","word","capitalize","upperFirst","endsWith","target","position","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","pad","strLength","padEnd","padStart","parseInt","radix","repeat","replace","snakeCase","split","limit","startCase","startsWith","template","settings","imports","importsKeys","importsValues","isEscaping","isEvaluating","interpolate","reDelimiters","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","variable","attempt","toLower","toUpper","trim","trimEnd","trimStart","truncate","omission","substring","newEnd","unescape","upperCase","e","bindAll","methodNames","cond","conforms","defaultTo","flow","flowRight","matches","matchesProperty","method","methodOf","mixin","noConflict","nthArg","over","overEvery","overSome","propertyOf","range","rangeRight","stubObject","stubString","stubTrue","times","toPath","uniqueId","prefix","add","augend","addend","ceil","divide","dividend","divisor","floor","max","maxBy","mean","meanBy","min","minBy","multiply","multiplier","multiplicand","round","subtract","minuend","subtrahend","sum","sumBy","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","this","skew","rad","m","point","x","y","z","w","aa","a","b","c","ba","d","p","q","ca","da","t","u","v","f","g","ea","A","B","C","D","E","F","G","fa","H","I","J","ga","ha","ia","K","L","ja","ka","M","N","O","P","Q","R","S","T","U","la","V","ma","W","X","na","oa","pa","qa","h","l","k","r","xa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Y","Z","Utils","obj","part","val","fields","i","field","currentValue","arr","item","sorted","increment","timer","threshold","immediate","timeout","delayed","hash","currentArg","alpha","layer","photos","photo","names","geometric","Enum","name","j","text","style","fontSize","className","extract","str","code","objectInfo","objectType","output","digit","layers","selector","getHierarchyString","hierarchyMatch","hierarchy","regexString","curr","total","version","url","baseUrl","isBeta","isLocal","isFuture","os","appleFont","googleFont","microsoftFont","fonts","unavailableFonts","font","constraints","shouldCreateNode","rect","config","allLoadedResult","currentFont","currentFontLoaded","customActive","customInactive","customFontactive","customFontinactive","resolve","weight","fontToLoad","decimals","fromLow","fromHigh","toLow","toHigh","fontFamily","__guard__","x1","x2","x3","event","element","eventName","script","request","err","handleError","css","styleElement","input","fraction","pointA","pointB","points","frame","scale","sizes","minX","maxX","minY","maxY","xValues","yValues","width","height","parentFrame","child","constraintValues","ratio","frames","frameA","frameB","originX","originY","inset","distance","vs","inside","xi","yi","xj","yj","intersect","rectA","y1","y2","lastValue","diff","maxDiff","nTimes","rootContext","includeLayer","containers","container","convertedCorners","node","layerA","layerB","contextCornerPoints","boundingFrame","ox","oy","ppm","importedLayers","layerName","message","regex","existingElement","EE","EventEmitter","events","exists","evt","available","ee","a1","a2","a3","a4","a5","listeners","len","listener","eventNames","propertyList","descriptor","propertyName","depend","fallback","__guardMethod__","o","keyPath","objectKey","Class","cb","proxy","optionValue","Color","color","color1","allow3Char","rgb","husl","hsl","hex","amount","colorB","model","colorA","hslA","hslB","fromH","toH","deltaH","tween","colorString","tolerance","colorModel","needle","s","hue2rgb","processPercent","char","css_unit","permissive_match3","permissive_match4","percentage","trimLeft","trimRight","Gradient","gradientB","gradientA","angle","hue","gradient","equalAngle","equalStart","equalEnd","Events","enable","Defaults","optsClone","classValues","svgLayer","scaleX","scaleY","offsetX","offsetY","imageWidth","imageHeight","imageRatio","realWidth","realHeight","validScaleX","validScaleY","fillBackground","elements","PathClass","GroupClass","targets","children","defsResult","BezierCurveAnimator","SpringRK4Animator","Spring","dampingRatio","mass","velocity","curveOptions","duration","derivedOptions","animator","argumentsRegex","argumentObject","numbersRegex","numbers","definition","curve","unit","Animation","Curves.fromString","Curves.Spring","Curves.Bezier","animation","emit","delta","direction","propKeys","valueA","valueB","propKey","keyValueA","keyValueB","numShadows","asc","left","fromShadow","toShadow","fromData","toData","targetData","animatableProperties","derivedKey","derivedKeys","shadowIndex","pixelMultiplier","num","createString","shadow","dpr","shadowString","cssName","layerPropertyName","shadowStrings","factor","radius","borderWidth","left1","borderTopBottom","borderRightLeft","borderTop","borderBottom","borderLeft","borderRight","topRatio","leftRatio","padding","states","stateName","opts","stateNameA","stateNameB","startAnimation","stateSwitched","switchState","onStart","onStop","onEnd","instantProps","suggestion","state","capture","methods","LayerStates","_machine","stateProperties","accelerationForState","dt","dxdt","dvdt","initialState","derivative","positionNearZero","velocityNearZero","bound","force","belowMinWithVelocity","aboveMaxWithVelocity","belowMinTravelingBack","aboveMaxTravelingBack","check","friction","BaseEvents","SimulatorClass","animatingProperties","layerProperties","first","p1","p2","payload","constrainedPoint","constraintsOffset","touchEvent","bounds","proposedPoint","xFinished","yFinished","correctedDelta","axis","simulation","updatePoint","startSimulationX","startSimulationY","velocityX","velocityY","topBefore","pinchLocation","topAfter","originDelta","rotation","getter","targetDesc","desc","layerProperty","cssProperty","validator","transformer","targetElement","includeMainElement","useSubpropertyProxy","oldValue","mainElement","subElement","elementContainer","proxiedValue","subProperty","isValidObject","layerOrContext","Layer","shadowProp","shadows","needle3","needle1","needle2","ids","isBackgroundColorDefault","imageUrl","oldParent","result1","newParent","tmp","self","left2","factorX","factorY","o1","layerScaledFrame","getComputedStyle","query","copiedChild","copy","toRoot","includePending","maxIndex","siblings","minIndex","touch","targetLayer","highlightFrame","constructor","video","sizeProp","layerSize","svgSize","propName","proxiedName","pathProps","indicesToRemove","matrix","measuredElement","svgMeasure","cssProp","attributes","attribute","defineProp","strokeStart","strokeEnd","strokeStartEndUpdater","isStart","link","startLength","endLength","dasharray","gap","from","to","relativeToLayer","privateProp","childValue","persistedValue","htmlString","svgNode","idElements","svg","SVGLayer","configuration","maybeLineBreak","span","search","block","inline","templateRanges","inlineStyle","div","totalWidth","firstStyle","textOverflow","maxLines","currentIndex","newText","combinedText","styledText","blockDiv","elementFont","currentSize","measuredWidth","measuredHeight","constrainedHeight","lineHeight","availableHeight","visibleLines","firstRange","formatter","promise","firstName","oldText","fontWeight","explicitWidth","explicitHeight","topAndBottom","heightFactor","forceRender","constrainedWidth","calculatedSize","animations","ctx","Screen","align","Align","Blending","webkitPerspective","layerId","interval","previousContext","layerListeners","parentElement","ignoredArgument","printPrefix","printNode","print","contentInset","contentFrame","constraintsFrame","scrollPoint","animate","animationOptions","contentPoint","contentLayer","closestLayer","adjustedLength","deltaX","deltaY","ScrollComponent","instance","scroll","isPageComponent","screenFrame","currentPage","withoutCurrentPage","page","nextPage","directions","xDisabled","yDisabled","xLock","yLock","isRound","Knob","touchX","touchY","knob","clickedValue","snapToPixels","fullScreen","deviceType","device","lDevicetype","lKey","shouldZoomToFit","hideBezel","deviceScale","contentScale","orientation","orientationName","contentScaleFactor","screenSizeChanged","clientWidth","clientHeight","newHeight","pixelRatio","deviceProps","resourceUrl","forceHide","phoneScale","windowWidth","windowHeight","dimension","paddingOffset","suggestedSize","handsProperties","contentProperties","previousBackgroundColor","previousScreenBackgroundVisiblity","hands","nextHandIndex","nextHand","hand","handData","column","row","cell","layerOrOptions","transitionFunction","wrappedLayer","overlay","transition","flowLayer","previousWrappingContent","previousWrappingScroll","content","forwardEvents","candidate","attachedLeft","atttachedRight","attachedTop","attachedBottom","header","footer","bodyFrame","body","headerHeight","nav","strokeDashArray","strokeDashOffset","shape","animated","dynamicTime","animationProperties","access","error","sourceID","timeStamp","b1","b2","b3","command","channel","data1","data2","info","Config","webkitVersion","previousTime","deltaTime","currentTime","tick","p1x","p1y","p2x","p2y","t2","d2","t0","t1","F_spring","F_damper","stateBefore","stateAfter","netValueIsLow","netVelocityIsLow","suffix","extraLayerProperties","layerInfo","importedKey","response","LayerClass","childInfo","artboards","traverse","identifier","touches","fromElement","centerPoint","offsetPoint","startTopScroll","ClassWrapper","Klass","wrappedDoc","image","player","finalize","layout","logoUrl","startEvent","isSameTarget","isShortSession","isShortDistance","swipeEdge","eventPoint","touchPointA","touchPointB","pointKey","Canvas","Framer","CircularProgressComponent"],"mappings":"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QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACvE,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACvE,GAAU;AAAA,QAAM,GAAU;AAAA,QAC1B,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACvE,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACvE,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACxD,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QACzC,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QACtF,GAAU;AAAA,QAAM,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;AAAA,QAAK,GAAU;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","x_google_ignoreList":[0,3,5]}