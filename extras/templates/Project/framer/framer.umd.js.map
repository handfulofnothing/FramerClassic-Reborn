{"version":3,"file":"framer.umd.js","sources":["../node_modules/lodash/lodash.js","../framer/Underscore.js","../framer/Matrix.js","../node_modules/webfontloader/webfontloader.js","../framer/Utils.js","../node_modules/eventemitter3/index.js","../framer/EventEmitter.js","../framer/BaseClass.js","../framer/Color.js","../framer/Gradient.js","../framer/Gestures.js","../framer/Events.js","../framer/Defaults.js","../framer/SVG.js","../framer/Animators/Curves.js","../framer/Animation.js","../framer/LayerStyle.js","../framer/LayerStateMachine.js","../framer/LayerStates.js","../framer/Simulator.js","../framer/Integrator.js","../framer/Simulators/SpringSimulator.js","../framer/Simulators/FrictionSimulator.js","../framer/Simulators/MomentumBounceSimulator.js","../framer/Simulation.js","../framer/EventBuffer.js","../framer/LayerDraggable.js","../framer/LayerPinchable.js","../framer/LayerPropertyProxy.js","../framer/Layer.js","../framer/BackgroundLayer.js","../framer/VideoLayer.js","../framer/SVGBaseLayer.js","../framer/SVGPath.js","../framer/SVGGroup.js","../framer/SVGLayer.js","../framer/StyledText.js","../framer/TextLayer.js","../framer/AnimationGroup.js","../framer/Screen.js","../framer/Align.js","../framer/Blending.js","../framer/DOMEventManager.js","../framer/Context.js","../framer/Print.js","../framer/Components/ScrollComponent.js","../framer/Components/PageComponent.js","../framer/Components/SliderComponent.js","../framer/Components/RangeSliderComponent.js","../framer/Components/DeviceComponent.js","../framer/Components/GridComponent.js","../framer/Components/FlowComponent.js","../framer/Components/CircularProgressComponent.js","../framer/MIDIInput.js","../framer/Components/MIDIComponent.js","../framer/Config.js","../framer/AnimationLoop.js","../framer/Animators/Animator.js","../framer/Animators/LinearAnimator.js","../framer/Animators/BezierCurveAnimator.js","../framer/Animators/SpringDHOAnimator.js","../framer/Animators/SpringRK4Animator.js","../framer/Importer.js","../framer/Extras/TouchEmulator.js","../framer/Extras/MobileScrollFix.js","../framer/Extras/ErrorDisplay.js","../framer/Extras/OmitNew.js","../framer/Extras/Hints.js","../framer/Extras/Preloader.js","../framer/GestureInputRecognizer.js","../framer/Canvas.js","../build/Version.js","../framer/Framer.js"],"sourcesContent":["/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","import _ from \"lodash\";\r\n\r\n_.pluck = _.map;\r\n\r\nexport { _ };\r\nexport default _;\r\n","import _ from \"./Underscore.js\";\r\n\r\nWebKitCSSMatrix.prototype.skew = function (skew) {\r\n  if (!skew) return this;\r\n\r\n  const rad = (skew * Math.PI) / 180;\r\n  const value = Math.tan(rad);\r\n  const m = new WebKitCSSMatrix();\r\n  m.m12 = value;\r\n  m.m21 = value;\r\n\r\n  return this.multiply(m);\r\n};\r\n\r\nWebKitCSSMatrix.prototype.point = function (point = {}) {\r\n  const { x = 0, y = 0, z = 0 } = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n\r\n  let w = this.m14 * x + this.m24 * y + this.m34 * z + this.m44;\r\n  w ||= 1;\r\n\r\n  return {\r\n    x: (this.m11 * x + this.m21 * y + this.m31 * z + this.m41) / w,\r\n    y: (this.m12 * x + this.m22 * y + this.m32 * z + this.m42) / w,\r\n    z: (this.m13 * x + this.m23 * y + this.m33 * z + this.m43) / w,\r\n  };\r\n};\r\n\r\nWebKitCSSMatrix.identity3d = () =>\r\n  new WebKitCSSMatrix(\"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)\");\r\n\r\nexport const Matrix = WebKitCSSMatrix;\r\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","import _ from \"./Underscore.js\";\r\nimport { Matrix } from \"./Matrix.js\";\r\nimport WebFont from \"webfontloader\";\r\n\r\nexport const Utils = {\r\n  reset: () => Framer.CurrentContext.reset(),\r\n\r\n  getValue: (value) => (_.isFunction(value) ? value() : value),\r\n\r\n  getValueForKeyPath: (obj, key) => {\r\n    if (!key.includes(\".\")) return obj[key];\r\n\r\n    return key.split(\".\").reduce((result, part) => {\r\n      return result?.[part];\r\n    }, obj);\r\n  },\r\n\r\n  setValueForKeyPath: (obj, path, val) => {\r\n    const fields = path.split(\".\");\r\n    let result = obj;\r\n\r\n    for (let i = 0; i < fields.length && result !== undefined; i++) {\r\n      const field = fields[i];\r\n\r\n      if (i === fields.length - 1) {\r\n        const currentValue = result[field];\r\n\r\n        if (\r\n          _.isObject(currentValue) &&\r\n          _.isObject(val) &&\r\n          Object.getPrototypeOf(currentValue) === Object.prototype &&\r\n          Object.getPrototypeOf(val) === Object.prototype\r\n        ) {\r\n          _.extend(currentValue, val);\r\n        } else {\r\n          result[field] = val;\r\n        }\r\n      } else {\r\n        if (\r\n          typeof result[field] === \"undefined\" ||\r\n          !_.isObject(result[field])\r\n        ) {\r\n          result[field] = {};\r\n        }\r\n        result = result[field];\r\n      }\r\n    }\r\n  },\r\n\r\n  escapeForRegex: (string) => string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"),\r\n  valueOrDefault: (value, defaultValue) => {\r\n    if ([undefined, null].includes(value)) {\r\n      value = defaultValue;\r\n    }\r\n\r\n    return value;\r\n  },\r\n\r\n  arrayNext: (arr, item) => arr[arr.indexOf(item) + 1] || _.head(arr),\r\n  arrayPrev: (arr, item) => arr[arr.indexOf(item) - 1] || _.last(arr),\r\n  webkitPerspectiveForValue: (value) => {\r\n    if ([\"none\", null, 0].includes(value)) return \"none\";\r\n    if (_.isNumber(value)) return value;\r\n    return null;\r\n  },\r\n\r\n  sum: (arr) => _.reduce(arr, (a, b) => a + b),\r\n  average: (arr) => (arr.length ? Utils.sum(arr) / arr.length : 0),\r\n  mean: (arr) => (arr.length ? Utils.sum(arr) / arr.length : 0),\r\n  median: (arr) => {\r\n    if (!arr.length) return null;\r\n\r\n    const sorted = [...arr].sort((a, b) => a - b);\r\n    const mid = Math.floor(sorted.length / 2);\r\n\r\n    return sorted.length % 2\r\n      ? sorted[mid]\r\n      : (sorted[mid - 1] + sorted[mid]) / 2;\r\n  },\r\n\r\n  nearestIncrement: (x, increment) =>\r\n    increment ? Math.round(x * (1 / increment)) / (1 / increment) : x,\r\n\r\n  delay: function (time, f) {\r\n    const timer = setTimeout(f, time * 1000);\r\n    Framer.CurrentContext.addTimer(timer);\r\n    return timer;\r\n  },\r\n\r\n  interval: function (time, f) {\r\n    const timer = setInterval(f, time * 1000);\r\n    Framer.CurrentContext.addInterval(timer);\r\n    return timer;\r\n  },\r\n\r\n  debounce: function (threshold, fn, immediate) {\r\n    if (threshold == null) threshold = 0.1;\r\n    let timeout = null;\r\n    threshold *= 1000;\r\n    return function (...args) {\r\n      const obj = this;\r\n      const delayed = function () {\r\n        if (!immediate) fn.apply(obj, args);\r\n        return (timeout = null);\r\n      };\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n      } else if (immediate) {\r\n        fn.apply(obj, args);\r\n      }\r\n      return (timeout = setTimeout(delayed, threshold));\r\n    };\r\n  },\r\n\r\n  throttle: function (delay, fn) {\r\n    if (delay === 0) return fn;\r\n    delay *= 1000;\r\n    let timer = false;\r\n    return function (...args) {\r\n      if (timer) return;\r\n      timer = true;\r\n      if (delay !== -1) setTimeout(() => (timer = false), delay);\r\n      return fn(...args);\r\n    };\r\n  },\r\n\r\n  memoize: (fn) => {\r\n    return function (...args) {\r\n      let hash = \"\";\r\n      let i = args.length;\r\n      let currentArg = null;\r\n      while (i--) {\r\n        currentArg = args[i];\r\n        hash +=\r\n          currentArg === Object(currentArg)\r\n            ? JSON.stringify(currentArg)\r\n            : currentArg;\r\n        fn.memoize || (fn.memoize = {});\r\n      }\r\n      if (hash in fn.memoize) {\r\n        return fn.memoize[hash];\r\n      } else {\r\n        return (fn.memoize[hash] = fn.apply(this, args));\r\n      }\r\n    };\r\n  },\r\n\r\n  randomColor: function (alpha = 1.0) {\r\n    return Color.random(alpha);\r\n  },\r\n\r\n  randomChoice: (arr) => arr[Math.floor(Math.random() * arr.length)],\r\n\r\n  randomNumber: function (a = 0, b = 1) {\r\n    return Utils.mapRange(Math.random(), 0, 1, a, b);\r\n  },\r\n\r\n  randomImage: function (layer) {\r\n    if (_.isNumber(layer)) layer = { id: layer };\r\n\r\n    const photos = [\r\n      \"1417733403748-83bbc7c05140\",\r\n      \"1423841265803-dfac59ebf718\",\r\n      \"1433689056001-018e493576bc\",\r\n      \"1430812411929-de4cf1d1fe73\",\r\n      \"1457269449834-928af64c684d\",\r\n      \"1443616839562-036bb2afd9a2\",\r\n      \"1461535676131-2de1f7054d3f\",\r\n      \"1462393582935-1ac76b85dcf1\",\r\n      \"1414589530802-cb54ce0575d9\",\r\n      \"1422908132590-117a051fc5cd\",\r\n      \"1438522014717-d7ce32b9bab9\",\r\n      \"1462058164249-2dcdcda67ce7\",\r\n      \"1456757014009-0614a080ff7f\",\r\n      \"1434238255348-4fb0d9caa0a4\",\r\n      \"1448071792026-7064a01897e7\",\r\n      \"1458681842652-019f4eeda5e5\",\r\n      \"1460919920543-d8c45f4bd621\",\r\n      \"1447767961238-038617b84a2b\",\r\n      \"1449089299624-89ce41e8306c\",\r\n      \"1414777410116-81e404502b52\",\r\n      \"1433994349623-0a18966ee9c0\",\r\n      \"1452567772283-91d67178f409\",\r\n      \"1458245229726-a8ba04cb5969\",\r\n      \"1422246719650-cb30d19825e3\",\r\n      \"1417392639864-2c88dd07f460\",\r\n      \"1442328166075-47fe7153c128\",\r\n      \"1448467258552-6b3982373a13\",\r\n      \"1447023362548-250f3a7b80ed\",\r\n      \"1451486242265-24b0c0ef9a51\",\r\n      \"1414339372428-797ec111646d\",\r\n    ];\r\n\r\n    let photo = Utils.randomChoice(photos);\r\n    if (layer?.id != null) {\r\n      photo = photos[layer.id % photos.length];\r\n    }\r\n\r\n    const increment = 100;\r\n    let size = 1024;\r\n\r\n    if (layer) {\r\n      size = Math.max(layer.width, layer.height);\r\n      size = Math.ceil(size / increment) * increment;\r\n      if (size < increment) size = increment;\r\n      size = Utils.devicePixelRatio() * size;\r\n      size = parseInt(size, 10);\r\n    }\r\n\r\n    return `https://images.unsplash.com/photo-${photo}?ixlib=rb-0.3.5&q=80&fm=jpg&crop=entropy&w=${size}&h=${size}&fit=max`;\r\n  },\r\n\r\n  defineEnum: function (names = [], offset = 0, geometric = 0) {\r\n    const Enum = {};\r\n    for (let i = 0; i < names.length; i++) {\r\n      const name = names[i];\r\n      let j = i;\r\n      j = offset ? j + offset : j;\r\n      j = geometric ? Math.pow(geometric, j) : j;\r\n      Enum[(Enum[name] = j)] = name;\r\n    }\r\n    return Enum;\r\n  },\r\n\r\n  labelLayer: function (layer, text, style = {}) {\r\n    if (!text || typeof text !== \"string\") return;\r\n\r\n    const fontSize = Math.max(Math.min(48, parseInt(layer.height / 3.2)), 14);\r\n\r\n    style = _.extend(\r\n      {\r\n        font: `${fontSize}px/1em ${Utils.deviceFont()}`,\r\n        lineHeight: `${layer.height}px`,\r\n        textAlign: \"center\",\r\n        color: \"#fff\",\r\n      },\r\n      style\r\n    );\r\n\r\n    layer.style = style;\r\n    layer.html = text;\r\n  },\r\n\r\n  stringify: function (obj) {\r\n    try {\r\n      if (_.isObject(obj)) return JSON.stringify(obj);\r\n    } catch (error) {}\r\n\r\n    if (obj === null) return \"null\";\r\n    if (obj === undefined) return \"undefined\";\r\n    if (obj.toString) return obj.toString();\r\n    return obj;\r\n  },\r\n\r\n  inspectObjectType: function (item) {\r\n    // This is a hacky way to get nice object names, it tries to\r\n    // parse them from the .toString methods for objects.\r\n\r\n    let className;\r\n    if (\r\n      (item.constructor != null ? item.constructor.name : undefined) != null &&\r\n      (item.constructor != null ? item.constructor.name : undefined) !==\r\n        \"Object\"\r\n    ) {\r\n      return item.constructor.name;\r\n    }\r\n\r\n    const extract = function (str) {\r\n      if (!str) {\r\n        return null;\r\n      }\r\n      const regex = /\\[object (\\w+)\\]/;\r\n      const match = regex.exec(str);\r\n      if (match) {\r\n        return match[1];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    if (item.toString) {\r\n      className = extract(item.toString());\r\n      if (className) {\r\n        return className;\r\n      }\r\n    }\r\n\r\n    if (item.constructor != null ? item.constructor.toString : undefined) {\r\n      className = extract(\r\n        item.constructor != null ? item.constructor.toString() : undefined\r\n      );\r\n      if (className) {\r\n        return className.replace(\"Constructor\", \"\");\r\n      }\r\n    }\r\n\r\n    return \"Object\";\r\n  },\r\n\r\n  inspect: function (item, max, l) {\r\n    if (max == null) {\r\n      max = 5;\r\n    }\r\n    if (l == null) {\r\n      l = 0;\r\n    }\r\n    if (item === null) {\r\n      return \"null\";\r\n    }\r\n    if (item === undefined) {\r\n      return \"undefined\";\r\n    }\r\n\r\n    if (_.isFunction(item.toInspect)) {\r\n      return item.toInspect();\r\n    }\r\n    if (_.isString(item)) {\r\n      return `\\\"${item}\\\"`;\r\n    }\r\n    if (_.isNumber(item)) {\r\n      return `${item}`;\r\n    }\r\n    if (_.isFunction(item)) {\r\n      let code = item\r\n        .toString()\r\n        .slice(\"function \".length)\r\n        .replace(/\\n/g, \"\")\r\n        .replace(/\\s+/g, \" \");\r\n      // We limit the size of a function body if it's in a strucutre\r\n      const limit = 50;\r\n      if (code.length > limit && l > 0) {\r\n        code = `${_.trimEnd(code.slice(0, +limit + 1 || undefined))} }`;\r\n      }\r\n      return `<Function ${code}>`;\r\n    }\r\n    if (_.isArray(item)) {\r\n      if (l > max) {\r\n        return \"[...]\";\r\n      }\r\n      return (\r\n        \"[\" + _.map(item, (i) => Utils.inspect(i, max, l + 1)).join(\", \") + \"]\"\r\n      );\r\n    }\r\n    if (_.isObject(item)) {\r\n      let objectInfo;\r\n      const objectType = Utils.inspectObjectType(item);\r\n      // We should not loop over dom trees because we will have a bad time\r\n      if (/HTML\\w+?Element/.test(objectType)) {\r\n        return `<${objectType}>`;\r\n      }\r\n      if (l > max) {\r\n        objectInfo = \"{...}\";\r\n      } else {\r\n        objectInfo =\r\n          \"{\" +\r\n          _.map(item, (v, k) => `${k}:${Utils.inspect(v, max, l + 1)}`).join(\r\n            \", \"\r\n          ) +\r\n          \"}\";\r\n      }\r\n      if (objectType === \"Object\") {\r\n        return objectInfo;\r\n      }\r\n      return `<${objectType} ${objectInfo}>`;\r\n    }\r\n\r\n    return `${item}`;\r\n  },\r\n\r\n  uuid: function () {\r\n    const chars = \"0123456789abcdefghijklmnopqrstuvwxyz\".split(\"\");\r\n    const output = new Array(36);\r\n    let random = 0;\r\n\r\n    for (let digit = 1; digit <= 32; digit++) {\r\n      if (random <= 0x02) {\r\n        random = (0x2000000 + Math.random() * 0x1000000) | 0;\r\n      }\r\n      var r = random & 0xf;\r\n      random = random >> 4;\r\n      output[digit] = chars[digit === 19 ? (r & 0x3) | 0x8 : r];\r\n    }\r\n\r\n    return output.join(\"\");\r\n  },\r\n\r\n  findLayer: (layers, selector) =>\r\n    _.find(layers, (layer) => Utils.layerMatchesSelector(layer, selector)),\r\n\r\n  filterLayers: (layers, selector) =>\r\n    _.filter(layers, (layer) => Utils.layerMatchesSelector(layer, selector)),\r\n\r\n  layerMatchesSelector: (layer, selector) => {\r\n    const getHierarchyString = (l) => {\r\n      // create a string of the hierarchy so we can run regex on it\r\n      const nameArr = _.pluck(l.ancestors().reverse(), \"name\");\r\n      return nameArr.join(\">\") + `>${layer.name}`;\r\n    };\r\n\r\n    const hierarchyMatch = (hierarchy, string) => {\r\n      string = string.replace(/\\s*>\\s*/g, \">\"); // clean spaces around >\r\n      string = string.split(\"*\").join(\"[^>]*\"); // anything but >\r\n      string = string.split(\" \").join(\"(?:.*)>\"); // anything but ends with >\r\n      string = string.split(\",\").join(\"$|\"); // or\r\n      const regexString = \"(^|>)\" + string + \"$\";\r\n      const regExp = new RegExp(regexString);\r\n      return regExp.test(hierarchy);\r\n    };\r\n\r\n    if (selector) {\r\n      const hierarchy = getHierarchyString(layer, selector);\r\n      return hierarchyMatch(hierarchy, selector);\r\n    }\r\n  },\r\n\r\n  arrayFromArguments: (args) =>\r\n    _.isArray(args[0]) ? args[0] : Array.from(args),\r\n\r\n  cycle: (...args) => {\r\n    let curr = -1;\r\n    return () => {\r\n      curr++;\r\n      if (curr >= args.length) curr = 0;\r\n      return args[curr];\r\n    };\r\n  },\r\n\r\n  toggle: (...args) => Utils.cycle(...args),\r\n\r\n  callAfterCount: (total, callback) => {\r\n    let count = 0;\r\n    return () => {\r\n      count += 1;\r\n      if (count === total)\r\n        return typeof callback === \"function\" ? callback() : undefined;\r\n    };\r\n  },\r\n\r\n  equal: (a, b) => {\r\n    if (_.isFunction(a?.isEqual)) return a.isEqual(b);\r\n    if (_.isFunction(b?.isEqual)) return b.isEqual(a);\r\n    return _.isEqual(a, b);\r\n  },\r\n\r\n  isWebKit: () => window.WebKitCSSMatrix !== undefined && !Utils.isEdge(),\r\n\r\n  webkitVersion: () => {\r\n    let version = -1;\r\n    const regexp = /AppleWebKit\\/([\\d.]+)/;\r\n    const result = regexp.exec(navigator.userAgent);\r\n    if (result) version = parseFloat(result[1]);\r\n    return version;\r\n  },\r\n\r\n  isChrome: () =>\r\n    /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor),\r\n\r\n  isSafari: () =>\r\n    /Safari/.test(navigator.userAgent) &&\r\n    /Apple Computer/.test(navigator.vendor),\r\n\r\n  isFirefox: () => /^Mozilla.*Firefox\\/\\d+\\.\\d+$/.test(navigator.userAgent),\r\n\r\n  isEdge: () => /Edge/.test(navigator.userAgent),\r\n\r\n  isAndroid: () => /(android)/i.test(navigator.userAgent),\r\n\r\n  isIOS: () => /(iPhone|iPod|iPad)/i.test(navigator.platform),\r\n\r\n  isMacOS: () => /Mac/.test(navigator.platform),\r\n\r\n  isWindows: () => /Win/.test(navigator.platform),\r\n\r\n  isTouch: () =>\r\n    window.ontouchstart === null &&\r\n    window.ontouchmove === null &&\r\n    window.ontouchend === null,\r\n\r\n  isDesktop: () => Utils.deviceType() === \"desktop\",\r\n\r\n  isPhone: () => Utils.deviceType() === \"phone\",\r\n\r\n  isTablet: () => Utils.deviceType() === \"tablet\",\r\n\r\n  isMobile: () => Utils.isPhone() || Utils.isTablet(),\r\n\r\n  isFileUrl: (url) => _.startsWith(url, \"file://\"),\r\n\r\n  isDataUrl: (url) => _.startsWith(url, \"data:\"),\r\n\r\n  isRelativeUrl: (url) => !/^([a-zA-Z]{1,8}:\\/\\/).*$/.test(url),\r\n\r\n  isLocalServerUrl: (url) =>\r\n    /[a-zA-Z]{1,8}:\\/\\/127\\.0\\.0\\.1/.test(url) ||\r\n    /[a-zA-Z]{1,8}:\\/\\/localhost/.test(url),\r\n\r\n  isLocalUrl: (url) => Utils.isFileUrl(url) || Utils.isLocalServerUrl(url),\r\n\r\n  isLocalAssetUrl: (url, baseUrl = window.location.href) => {\r\n    if (Utils.isDataUrl(url)) return false;\r\n    if (Utils.isLocalUrl(url)) return true;\r\n    if (Utils.isRelativeUrl(url) && Utils.isLocalUrl(baseUrl)) return true;\r\n    return false;\r\n  },\r\n\r\n  isFramerStudio: () => navigator.userAgent.includes(\"FramerStudio\"),\r\n\r\n  framerStudioVersion: () => {\r\n    if (Utils.isFramerStudio()) {\r\n      const isBeta = navigator.userAgent.includes(\"FramerStudio/beta\");\r\n      const isLocal = navigator.userAgent.includes(\"FramerStudio/local\");\r\n      const isFuture = navigator.userAgent.includes(\"FramerStudio/future\");\r\n\r\n      if (isBeta || isLocal || isFuture) return Number.MAX_VALUE;\r\n\r\n      const matches = navigator.userAgent.match(/\\d+$/);\r\n      const version =\r\n        matches && matches.length > 0 ? parseInt(matches[0]) : undefined;\r\n\r\n      if (_.isNumber(version)) return version;\r\n    }\r\n\r\n    return Number.MAX_VALUE;\r\n  },\r\n\r\n  devicePixelRatio: () => window.devicePixelRatio,\r\n\r\n  isJP2Supported: () =>\r\n    Utils.isWebKit() && !Utils.isChrome() && !Utils.isFirefox(),\r\n\r\n  isWebPSupported: () => Utils.isChrome(),\r\n\r\n  deviceType: () => {\r\n    if (/(tablet)|(iPad)|(Nexus 9)/i.test(navigator.userAgent)) return \"tablet\";\r\n    if (/(mobi)/i.test(navigator.userAgent)) return \"phone\";\r\n    return \"desktop\";\r\n  },\r\n\r\n  pathJoin: (...args) => args.join(\"/\"),\r\n\r\n  deviceFont: (os) => {\r\n    if (!os) {\r\n      if (Utils.isMacOS()) os = \"macOS\";\r\n      if (Utils.isIOS()) os = \"iOS\";\r\n      if (Utils.isAndroid()) os = \"Android\";\r\n      if (Utils.isWindows()) os = \"Windows\";\r\n    }\r\n\r\n    const appleFont =\r\n      \"-apple-system, BlinkMacSystemFont, SF UI Text, Helvetica Neue\";\r\n    const googleFont = \"Roboto, Helvetica Neue\";\r\n    const microsoftFont = \"Segoe UI, Helvetica Neue\";\r\n\r\n    switch (os) {\r\n      case \"Android\":\r\n        return googleFont;\r\n      case \"iOS\":\r\n      case \"watchOS\":\r\n      case \"macOS\":\r\n        return appleFont;\r\n      case \"Windows\":\r\n        return microsoftFont;\r\n      default:\r\n        return appleFont;\r\n    }\r\n  },\r\n\r\n  isFontAvailable: (fonts) => {\r\n    if (_isFontLoadedResults[fonts] === true) return true;\r\n\r\n    if (monoWidth == null) monoWidth = getWidth(\"monospace\");\r\n    if (serifWidth == null) serifWidth = getWidth(\"serif\");\r\n    if (sansWidth == null) sansWidth = getWidth(\"sans-serif\");\r\n\r\n    if (\r\n      monoWidth !== getWidth(`${fonts},monospace`) ||\r\n      serifWidth !== getWidth(`${fonts},serif`) ||\r\n      sansWidth !== getWidth(`${fonts},sans-serif`)\r\n    ) {\r\n      _isFontLoadedResults[fonts] = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  isFontFamilyLoaded: (fonts, timeout = 1000) => {\r\n    if (!_.isArray(fonts)) fonts = [fonts];\r\n\r\n    const unavailableFonts = fonts.filter(\r\n      (font) => !Utils.isFontAvailable(font)\r\n    );\r\n\r\n    if (unavailableFonts.length === 0) return true;\r\n\r\n    return Utils.loadWebFontConfig({\r\n      custom: {\r\n        families: unavailableFonts,\r\n      },\r\n      timeout,\r\n    });\r\n  },\r\n\r\n  textSize: (text, style = {}, constraints = {}) => {\r\n    let frame;\r\n    const shouldCreateNode = !_textSizeNode;\r\n\r\n    if (shouldCreateNode) {\r\n      _textSizeNode = document.createElement(\"div\");\r\n      _textSizeNode.id = \"_textSizeNode\";\r\n    }\r\n\r\n    // Reset all previous styles and set the content\r\n    _textSizeNode.removeAttribute(\"style\");\r\n    _textSizeNode.innerHTML = text;\r\n\r\n    style = _.extend(_.clone(style), {\r\n      position: \"fixed\",\r\n      display: \"inline\",\r\n      visibility: \"hidden\",\r\n      top: \"-10000px\",\r\n      left: \"-10000px\",\r\n    });\r\n\r\n    // Remove sizing properties that will interfere\r\n    delete style.width;\r\n    delete style.height;\r\n    delete style.bottom;\r\n    delete style.right;\r\n\r\n    if (constraints.max) {\r\n      if (constraints.width) style.maxWidth = `${constraints.width}px`;\r\n      if (constraints.height) style.maxHeight = `${constraints.height}px`;\r\n    } else {\r\n      if (constraints.width) style.width = `${constraints.width}px`;\r\n      if (constraints.height) style.height = `${constraints.height}px`;\r\n    }\r\n\r\n    _.extend(_textSizeNode.style, style);\r\n\r\n    if (shouldCreateNode) {\r\n      if (!document.body) {\r\n        // In case document.body is not ready\r\n        document.write(_textSizeNode.outerHTML);\r\n        _textSizeNode = document.getElementById(\"_textSizeNode\");\r\n      } else {\r\n        document.body.appendChild(_textSizeNode);\r\n      }\r\n    }\r\n\r\n    const rect = _textSizeNode.getBoundingClientRect();\r\n\r\n    return {\r\n      width: rect.right - rect.left,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n  },\r\n\r\n  loadWebFontConfig: (config) => {\r\n    const fonts = fontsFromConfig(config);\r\n    let allLoadedResult = null;\r\n\r\n    for (const currentFont of fonts) {\r\n      const currentFontLoaded = _isFontLoadedResults[currentFont];\r\n      if (currentFontLoaded == null) {\r\n        allLoadedResult = null;\r\n        break;\r\n      }\r\n      allLoadedResult =\r\n        allLoadedResult === null\r\n          ? currentFontLoaded\r\n          : allLoadedResult && currentFontLoaded;\r\n    }\r\n\r\n    if (allLoadedResult != null) return allLoadedResult;\r\n\r\n    const {\r\n      active: customActive,\r\n      inactive: customInactive,\r\n      fontactive: customFontactive,\r\n      fontinactive: customFontinactive,\r\n    } = config;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      config.fontactive = (font) => {\r\n        _isFontLoadedResults[font] = true;\r\n        if (typeof customFontactive === \"function\") customFontactive(font);\r\n        if (fonts.length === 1) resolve();\r\n      };\r\n\r\n      config.fontinactive = (font) => {\r\n        console.warn(`Tried to load unavailable font: '${font}'`);\r\n        _isFontLoadedResults[font] = false;\r\n        if (typeof customFontinactive === \"function\") customFontinactive(font);\r\n        if (fonts.length === 1) reject(new Error(`${font} failed to load`));\r\n      };\r\n\r\n      config.active = () => {\r\n        if (typeof customActive === \"function\") customActive();\r\n        resolve();\r\n      };\r\n\r\n      config.inactive = () => {\r\n        if (typeof customInactive === \"function\") customInactive();\r\n        reject(new Error(`${fonts.join(\", \")} failed to load`));\r\n      };\r\n\r\n      WebFont.load(config);\r\n    });\r\n  },\r\n\r\n  loadWebFont: (font, weight, source = \"google\") => {\r\n    if (\r\n      _isFontLoadedResults[font] == null ||\r\n      _isFontLoadedResults[font] === false\r\n    ) {\r\n      delete _isFontLoadedResults[font];\r\n      const config = {};\r\n      if (source === \"google\") {\r\n        let fontToLoad = font;\r\n        if (weight != null) fontToLoad += `:${weight}`;\r\n        config.google = { families: [fontToLoad] };\r\n      }\r\n      Utils.loadWebFontConfig(config);\r\n    }\r\n    return { fontFamily: font, fontWeight: weight };\r\n  },\r\n\r\n  //#####################################################\r\n  // MATH FUNCTIONS\r\n\r\n  round: (value, decimals = 0, increment = null, min = null, max = null) => {\r\n    const d = Math.pow(10, decimals);\r\n\r\n    if (increment) value = Math.round(value / increment) * increment;\r\n    value = Math.round(value * d) / d;\r\n\r\n    if (min != null && value < min) value = min;\r\n    if (max != null && value > max) value = max;\r\n\r\n    return value;\r\n  },\r\n\r\n  roundWhole: (value, decimals = 1) =>\r\n    parseInt(value) === value ? parseInt(value) : Utils.round(value, decimals),\r\n\r\n  clamp: (value, a, b) => {\r\n    const min = Math.min(a, b);\r\n    const max = Math.max(a, b);\r\n    return Math.min(Math.max(value, min), max);\r\n  },\r\n\r\n  mapRange: (value, fromLow, fromHigh, toLow, toHigh) =>\r\n    toLow + ((value - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow),\r\n\r\n  modulate: (value, [fromLow, fromHigh], [toLow, toHigh], limit = false) => {\r\n    let result =\r\n      toLow + ((value - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow);\r\n\r\n    if (limit) {\r\n      if (toLow < toHigh) {\r\n        result = Math.min(Math.max(result, toLow), toHigh);\r\n      } else {\r\n        result = Math.max(Math.min(result, toLow), toHigh);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n  //#####################################################\r\n  // STRING FUNCTIONS\r\n\r\n  parseFunction: (str) => {\r\n    const result = { name: \"\", args: [] };\r\n\r\n    if (_.endsWith(str, \")\")) {\r\n      result.name = str.split(\"(\")[0];\r\n      result.args = str\r\n        .split(\"(\")[1]\r\n        .split(\",\")\r\n        .map((a) => _.trim(_.trimEnd(a, \")\")));\r\n    } else {\r\n      result.name = str;\r\n    }\r\n\r\n    return result;\r\n  },\r\n};\r\n\r\nif (window.requestAnimationFrame == null) {\r\n  window.requestAnimationFrame = window.webkitRequestAnimationFrame;\r\n}\r\nif (window.requestAnimationFrame == null) {\r\n  window.requestAnimationFrame = (f) => Utils.delay(1 / 60, f);\r\n}\r\n\r\n// Used by animation engine, needs to be very performant\r\nif (window.performance) {\r\n  Utils.getTime = () => window.performance.now() / 1000;\r\n} else {\r\n  Utils.getTime = () => Date.now() / 1000;\r\n}\r\n\r\nconst _isFontLoadedResults = {};\r\n\r\nconst getWidth = (fontFamily) =>\r\n  Utils.textSize(\"BESbswy\", {\r\n    fontFamily,\r\n    fontSize: 300,\r\n  }).width;\r\n\r\nlet monoWidth = null;\r\nlet serifWidth = null;\r\nlet sansWidth = null;\r\n\r\nconst fontsFromConfig = function (config) {\r\n  let result = [];\r\n  if (\r\n    _.isArray(\r\n      __guard__(config != null ? config.custom : undefined, (x) => x.families)\r\n    )\r\n  ) {\r\n    result = result.concat(\r\n      __guard__(config != null ? config.custom : undefined, (x1) => x1.families)\r\n    );\r\n  }\r\n  if (\r\n    _.isArray(\r\n      __guard__(config != null ? config.google : undefined, (x2) => x2.families)\r\n    )\r\n  ) {\r\n    result = result.concat(\r\n      __guard__(config != null ? config.google : undefined, (x3) => x3.families)\r\n    );\r\n  }\r\n  return result;\r\n};\r\n//#####################################################\r\n// DOM FUNCTIONS\r\n\r\nconst __domCompleteState = \"interactive\";\r\nlet __domComplete = [];\r\nlet __domReady = false;\r\n\r\nif (typeof document !== \"undefined\" && document !== null) {\r\n  document.onreadystatechange = function (event) {\r\n    if (document.readyState === __domCompleteState) {\r\n      __domReady = true;\r\n      return (() => {\r\n        const result = [];\r\n        while (__domComplete.length) {\r\n          var f;\r\n          result.push((f = __domComplete.shift()()));\r\n        }\r\n        return result;\r\n      })();\r\n    }\r\n  };\r\n}\r\n\r\nUtils.domComplete = function (f) {\r\n  if (__domReady) {\r\n    return f();\r\n  } else {\r\n    return __domComplete.push(f);\r\n  }\r\n};\r\n\r\nUtils.domCompleteCancel = (f) => (__domComplete = _.without(__domComplete, f));\r\n\r\nUtils.domValidEvent = function (element, eventName) {\r\n  if (!eventName) {\r\n    return;\r\n  }\r\n  if ([\"touchstart\", \"touchmove\", \"touchend\"].includes(eventName)) {\r\n    return true;\r\n  }\r\n  return typeof element[`on${eventName.toLowerCase()}`] !== \"undefined\";\r\n};\r\n\r\nUtils.domLoadScript = function (url, callback) {\r\n  const script = document.createElement(\"script\");\r\n  script.type = \"text/javascript\";\r\n  script.src = url;\r\n\r\n  script.onload = callback;\r\n\r\n  const head = document.getElementsByTagName(\"head\")[0];\r\n  head.appendChild(script);\r\n\r\n  return script;\r\n};\r\n\r\nUtils.domLoadData = function (path, callback) {\r\n  const request = new XMLHttpRequest();\r\n\r\n  // request.addEventListener \"progress\", updateProgress, false\r\n  // request.addEventListener \"abort\", transferCanceled, false\r\n\r\n  request.addEventListener(\r\n    \"load\",\r\n    () => callback(null, request.responseText),\r\n    false\r\n  );\r\n\r\n  request.addEventListener(\"error\", () => callback(true, null), false);\r\n\r\n  request.open(\"GET\", path, true);\r\n  return request.send(null);\r\n};\r\n\r\nUtils.domLoadJSON = (path, callback) =>\r\n  Utils.domLoadData(path, (err, data) => callback(err, JSON.parse(data)));\r\n\r\nUtils.domLoadDataSync = function (path) {\r\n  const request = new XMLHttpRequest();\r\n  request.open(\"GET\", path, false);\r\n\r\n  // This does not work in Safari, see below\r\n  try {\r\n    request.send(null);\r\n  } catch (e) {\r\n    console.debug(\"XMLHttpRequest.error\", e);\r\n  }\r\n\r\n  const handleError = function () {\r\n    throw Error(\r\n      `Utils.domLoadDataSync: ${path} -> [${request.status} ${request.statusText}]`\r\n    );\r\n  };\r\n\r\n  request.onerror = handleError;\r\n\r\n  if (![200, 0].includes(request.status)) {\r\n    handleError();\r\n  }\r\n\r\n  // Because I can't catch the actual 404 with Safari, I just assume something\r\n  // went wrong if there is no text data returned from the request.\r\n  if (!request.responseText) {\r\n    handleError();\r\n  }\r\n\r\n  // console.log \"domLoadDataSync\", path\r\n  // console.log \"xhr.readyState\", request.readyState\r\n  // console.log \"xhr.status\", request.status\r\n  // console.log \"xhr.responseText\", request.responseText\r\n\r\n  return request.responseText;\r\n};\r\n\r\nUtils.domLoadJSONSync = (path) => JSON.parse(Utils.domLoadDataSync(path));\r\n\r\nUtils.domLoadScriptSync = function (path) {\r\n  const scriptData = Utils.domLoadDataSync(path);\r\n  eval(scriptData);\r\n  return scriptData;\r\n};\r\n\r\nUtils.insertCSS = function (css) {\r\n  const styleElement = document.createElement(\"style\");\r\n  styleElement.type = \"text/css\";\r\n  styleElement.innerHTML = css;\r\n\r\n  return Utils.domComplete(() => document.body.appendChild(styleElement));\r\n};\r\n\r\nUtils.loadImage = function (url, callback, context) {\r\n  // Loads a single image and calls callback.\r\n  // The callback will be called with true if there is an error.\r\n\r\n  const element = new Image();\r\n  if (context == null) {\r\n    context = Framer.CurrentContext;\r\n  }\r\n\r\n  context.domEventManager\r\n    .wrap(element)\r\n    .addEventListener(\"load\", (event) => callback());\r\n\r\n  context.domEventManager\r\n    .wrap(element)\r\n    .addEventListener(\"error\", (event) => callback(true));\r\n\r\n  return (element.src = url);\r\n};\r\n\r\nUtils.isInsideIframe = function () {\r\n  if (!Utils.isInsideFramerCloud()) {\r\n    return window !== window.top;\r\n  }\r\n  return false;\r\n};\r\n\r\nUtils.isInsideFramerCloud = () => Utils.getQueryParameters()[\"cloud\"] === \"1\";\r\n\r\nUtils.getQueryParameters = () =>\r\n  _.fromPairs(\r\n    window.location.search\r\n      .slice(1)\r\n      .split(\"&\")\r\n      .map((val) => val.split(\"=\"))\r\n  );\r\n\r\n//#####################################################\r\n// GEOMETRY FUNCTIONS\r\n\r\n// Point\r\n\r\nUtils.point = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.pointZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.pointZero();\r\n  }\r\n\r\n  const result = Utils.pointZero();\r\n\r\n  for (var k of [\"x\", \"y\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.pointZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { x: n, y: n };\r\n};\r\n\r\nUtils.pointDivide = (point, fraction) =>\r\n  (point = {\r\n    x: point.x / fraction,\r\n    y: point.y / fraction,\r\n  });\r\n\r\nUtils.pointAdd = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: pointA.x + pointB.x,\r\n    y: pointA.y + pointB.y,\r\n  });\r\n};\r\n\r\nUtils.pointSubtract = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: pointA.x - pointB.x,\r\n    y: pointA.y - pointB.y,\r\n  });\r\n};\r\n\r\nUtils.pointMin = function () {\r\n  let point;\r\n  const points = Utils.arrayFromArguments(arguments);\r\n  return (point = {\r\n    x: _.min(points.map((size) => size.x)),\r\n    y: _.min(points.map((size) => size.y)),\r\n  });\r\n};\r\n\r\nUtils.pointMax = function () {\r\n  let point;\r\n  const points = Utils.arrayFromArguments(arguments);\r\n  return (point = {\r\n    x: _.max(points.map((size) => size.x)),\r\n    y: _.max(points.map((size) => size.y)),\r\n  });\r\n};\r\n\r\nUtils.pointDelta = function (pointA, pointB) {\r\n  let delta;\r\n  return (delta = {\r\n    x: pointB.x - pointA.x,\r\n    y: pointB.y - pointA.y,\r\n  });\r\n};\r\n\r\nUtils.pointDistance = function (pointA, pointB) {\r\n  const a = pointA.x - pointB.x;\r\n  const b = pointA.y - pointB.y;\r\n  return Math.sqrt(a * a + b * b);\r\n};\r\n\r\nUtils.pointInvert = (point) =>\r\n  (point = {\r\n    x: 0 - point.x,\r\n    y: 0 - point.y,\r\n  });\r\n\r\nUtils.pointTotal = (point) => point.x + point.y;\r\n\r\nUtils.pointAbs = (point) =>\r\n  (point = {\r\n    x: Math.abs(point.x),\r\n    y: Math.abs(point.y),\r\n  });\r\n\r\nUtils.pointInFrame = function (point, frame) {\r\n  if (\r\n    point.x < Utils.frameGetMinX(frame) ||\r\n    point.x > Utils.frameGetMaxX(frame)\r\n  ) {\r\n    return false;\r\n  }\r\n  if (\r\n    point.y < Utils.frameGetMinY(frame) ||\r\n    point.y > Utils.frameGetMaxY(frame)\r\n  ) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nUtils.pointCenter = function (pointA, pointB) {\r\n  let point;\r\n  return (point = {\r\n    x: (pointA.x + pointB.x) / 2,\r\n    y: (pointA.y + pointB.y) / 2,\r\n  });\r\n};\r\n\r\nUtils.pointAngle = (pointA, pointB) =>\r\n  (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI;\r\n\r\nUtils.divideFrame = function (frame, scale) {\r\n  frame.x /= scale;\r\n  frame.y /= scale;\r\n  frame.width /= scale;\r\n  frame.height /= scale;\r\n  return frame;\r\n};\r\n\r\nUtils.scaleFrames = function (layer, scale) {\r\n  if (layer instanceof Layer) {\r\n    layer.constraintValues = null;\r\n    layer.children.map((l) => Utils.scaleFrames(l, scale));\r\n    layer.frame = Utils.divideFrame(layer.frame, scale);\r\n  }\r\n  if (_.isArray(layer)) {\r\n    return layer.map((l) => Utils.scaleFrames(l, scale));\r\n  }\r\n};\r\n// Size\r\n\r\nUtils.size = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.sizeZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.sizeZero();\r\n  }\r\n\r\n  const result = Utils.sizeZero();\r\n\r\n  for (var k of [\"width\", \"height\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.sizeZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { width: n, height: n };\r\n};\r\n\r\nUtils.sizeMin = function () {\r\n  let size;\r\n  const sizes = Utils.arrayFromArguments(arguments);\r\n  return (size = {\r\n    width: _.min(sizes.map((size) => size.width)),\r\n    height: _.min(sizes.map((size) => size.height)),\r\n  });\r\n};\r\n\r\nUtils.sizeMax = function () {\r\n  let size;\r\n  const sizes = Utils.arrayFromArguments(arguments);\r\n  return (size = {\r\n    width: _.max(sizes.map((size) => size.width)),\r\n    height: _.max(sizes.map((size) => size.height)),\r\n  });\r\n};\r\n\r\n// Rect\r\n\r\nUtils.rectZero = function (args) {\r\n  if (args == null) {\r\n    args = {};\r\n  }\r\n  return _.defaults(args, { top: 0, right: 0, bottom: 0, left: 0 });\r\n};\r\n\r\nUtils.parseRect = function (args) {\r\n  if (_.isArray(args) && _.isNumber(args[0])) {\r\n    if (args.length === 1) {\r\n      return Utils.parseRect({ top: args[0] });\r\n    }\r\n    if (args.length === 2) {\r\n      return Utils.parseRect({ top: args[0], right: args[1] });\r\n    }\r\n    if (args.length === 3) {\r\n      return Utils.parseRect({ top: args[0], right: args[1], bottom: args[2] });\r\n    }\r\n    if (args.length === 4) {\r\n      return Utils.parseRect({\r\n        top: args[0],\r\n        right: args[1],\r\n        bottom: args[2],\r\n        left: args[3],\r\n      });\r\n    }\r\n  }\r\n  if (_.isArray(args) && _.isObject(args[0])) {\r\n    return args[0];\r\n  }\r\n  if (_.isObject(args)) {\r\n    return args;\r\n  }\r\n  if (_.isNumber(args)) {\r\n    return { top: args, right: args, bottom: args, left: args };\r\n  }\r\n\r\n  return {};\r\n};\r\n\r\n// Frames\r\n\r\n// min mid max * x, y\r\n\r\nUtils.frameGetMinX = (frame) => frame.x;\r\nUtils.frameSetMinX = (frame, value) => (frame.x = value);\r\n\r\nUtils.frameGetMidX = function (frame) {\r\n  if (frame.width === 0) {\r\n    return frame.x;\r\n  } else {\r\n    return frame.x + frame.width / 2.0;\r\n  }\r\n};\r\nUtils.frameSetMidX = (frame, value) =>\r\n  (frame.x = frame.width === 0 ? value : value - frame.width / 2.0);\r\n\r\nUtils.frameGetMaxX = function (frame) {\r\n  if (frame.width === 0) {\r\n    return 0;\r\n  } else {\r\n    return frame.x + frame.width;\r\n  }\r\n};\r\nUtils.frameSetMaxX = (frame, value) =>\r\n  (frame.x = frame.width === 0 ? 0 : value - frame.width);\r\n\r\nUtils.frameGetMinY = (frame) => frame.y;\r\nUtils.frameSetMinY = (frame, value) => (frame.y = value);\r\n\r\nUtils.frameGetMidY = function (frame) {\r\n  if (frame.height === 0) {\r\n    return frame.y;\r\n  } else {\r\n    return frame.y + frame.height / 2.0;\r\n  }\r\n};\r\nUtils.frameSetMidY = (frame, value) =>\r\n  (frame.y = frame.height === 0 ? value : value - frame.height / 2.0);\r\n\r\nUtils.frameGetMaxY = function (frame) {\r\n  if (frame.height === 0) {\r\n    return 0;\r\n  } else {\r\n    return frame.y + frame.height;\r\n  }\r\n};\r\nUtils.frameSetMaxY = (frame, value) =>\r\n  (frame.y = frame.height === 0 ? 0 : value - frame.height);\r\n\r\nUtils.frame = function (input) {\r\n  if (_.isNumber(input)) {\r\n    return Utils.frameZero(input);\r\n  }\r\n  if (!input) {\r\n    return Utils.frameZero();\r\n  }\r\n\r\n  const result = Utils.frameZero();\r\n\r\n  for (var k of [\"x\", \"y\", \"width\", \"height\"]) {\r\n    if (_.isNumber(input[k])) {\r\n      result[k] = input[k];\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nUtils.frameZero = function (n) {\r\n  if (n == null) {\r\n    n = 0;\r\n  }\r\n  return { x: n, y: n };\r\n};\r\n\r\nUtils.frameSize = function (frame) {\r\n  let size;\r\n  return (size = {\r\n    width: frame.width,\r\n    height: frame.height,\r\n  });\r\n};\r\n\r\nUtils.framePoint = function (frame) {\r\n  let point;\r\n  return (point = {\r\n    x: frame.x,\r\n    y: frame.y,\r\n  });\r\n};\r\n\r\nUtils.pointsFromFrame = function (frame) {\r\n  const minX = Utils.frameGetMinX(frame);\r\n  const maxX = Utils.frameGetMaxX(frame);\r\n  const minY = Utils.frameGetMinY(frame);\r\n  const maxY = Utils.frameGetMaxY(frame);\r\n  const corner1 = { x: minX, y: minY };\r\n  const corner2 = { x: minX, y: maxY };\r\n  const corner3 = { x: maxX, y: maxY };\r\n  const corner4 = { x: maxX, y: minY };\r\n  return [corner1, corner2, corner3, corner4];\r\n};\r\n\r\nUtils.frameFromPoints = function (points) {\r\n  let frame;\r\n  const xValues = _.map(points, \"x\");\r\n  const yValues = _.map(points, \"y\");\r\n\r\n  const minX = _.min(xValues);\r\n  const maxX = _.max(xValues);\r\n  const minY = _.min(yValues);\r\n  const maxY = _.max(yValues);\r\n\r\n  return (frame = {\r\n    x: minX,\r\n    y: minY,\r\n    width: maxX - minX,\r\n    height: maxY - minY,\r\n  });\r\n};\r\n\r\nUtils.pixelAlignedFrame = function (frame) {\r\n  const x = Math.round(frame.x);\r\n  const y = Math.round(frame.y);\r\n  const maxX = Math.round(frame.x + frame.width);\r\n  const maxY = Math.round(frame.y + frame.height);\r\n  const width = Math.max(maxX - x, 0);\r\n  const height = Math.max(maxY - y, 0);\r\n  return { x, y, width, height };\r\n};\r\n\r\nUtils.calculateLayoutFrame = function (parentFrame, child) {\r\n  const { constraintValues } = child;\r\n\r\n  let x = constraintValues.left || 0;\r\n  let y = constraintValues.top || 0;\r\n  let { width } = constraintValues;\r\n  let { height } = constraintValues;\r\n\r\n  if (parentFrame === null) {\r\n    return Utils.pixelAlignedFrame({ x, y, width, height });\r\n  }\r\n\r\n  const ratio = width / height;\r\n\r\n  if (constraintValues.widthFactor !== null) {\r\n    width = parentFrame.width * constraintValues.widthFactor;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      height = width / ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.heightFactor !== null) {\r\n    height = parentFrame.height * constraintValues.heightFactor;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      width = height * ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.left !== null && constraintValues.right !== null) {\r\n    width = parentFrame.width - constraintValues.right - constraintValues.left;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      height = width / ratio;\r\n    }\r\n  }\r\n\r\n  if (constraintValues.top !== null && constraintValues.bottom !== null) {\r\n    height =\r\n      parentFrame.height - constraintValues.bottom - constraintValues.top;\r\n    if (constraintValues.aspectRatioLocked) {\r\n      width = height * ratio;\r\n    }\r\n  }\r\n\r\n  x = Utils.calculateLayoutX(parentFrame, constraintValues, width);\r\n  y = Utils.calculateLayoutY(parentFrame, constraintValues, height);\r\n\r\n  return Utils.pixelAlignedFrame({ x, y, width, height });\r\n};\r\n\r\nUtils.calculateLayoutX = function (parentFrame, constraintValues, width) {\r\n  let x = constraintValues.left || 0;\r\n  if (constraintValues.left !== null) {\r\n    x = constraintValues.left;\r\n  } else if (constraintValues.right !== null) {\r\n    x = parentFrame.width - constraintValues.right - width;\r\n  } else {\r\n    x = constraintValues.centerAnchorX * parentFrame.width - width / 2;\r\n  }\r\n  return x;\r\n};\r\n\r\nUtils.calculateLayoutY = function (parentFrame, constraintValues, height) {\r\n  let y = constraintValues.top || 0;\r\n  if (constraintValues.top !== null) {\r\n    y = constraintValues.top;\r\n  } else if (constraintValues.bottom !== null) {\r\n    y = parentFrame.height - constraintValues.bottom - height;\r\n  } else {\r\n    y = constraintValues.centerAnchorY * parentFrame.height - height / 2;\r\n  }\r\n  return y;\r\n};\r\n\r\nUtils.frameMerge = function () {\r\n  // Return a frame that fits all the input frames\r\n\r\n  const frames = Utils.arrayFromArguments(arguments);\r\n\r\n  const frame = {\r\n    x: _.min(frames.map(Utils.frameGetMinX)),\r\n    y: _.min(frames.map(Utils.frameGetMinY)),\r\n  };\r\n\r\n  frame.width = _.max(frames.map(Utils.frameGetMaxX)) - frame.x;\r\n  frame.height = _.max(frames.map(Utils.frameGetMaxY)) - frame.y;\r\n\r\n  return frame;\r\n};\r\n\r\nUtils.frameInFrame = function (frameA, frameB) {\r\n  for (var point of Array.from(Utils.pointsFromFrame(frameA))) {\r\n    if (!Utils.pointInFrame(point, frameB)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nUtils.framePointForOrigin = (frame, originX, originY) =>\r\n  (frame = {\r\n    x: frame.x + originX * frame.width,\r\n    y: frame.y + originY * frame.height,\r\n    width: frame.width,\r\n    height: frame.height,\r\n  });\r\n\r\nUtils.frameInset = function (frame, inset) {\r\n  if (_.isNumber(inset)) {\r\n    inset = { top: inset, right: inset, bottom: inset, left: inset };\r\n  }\r\n\r\n  frame = Utils.frame(frame);\r\n\r\n  return (frame = {\r\n    x: frame.x + inset.left,\r\n    y: frame.y + inset.top,\r\n    width: frame.width - inset.left - inset.right,\r\n    height: frame.height - inset.top - inset.bottom,\r\n  });\r\n};\r\n\r\nUtils.frameSortByAbsoluteDistance = function (point, frames, originX, originY) {\r\n  if (originX == null) {\r\n    originX = 0;\r\n  }\r\n  if (originY == null) {\r\n    originY = 0;\r\n  }\r\n  const distance = function (frame) {\r\n    let result = Utils.pointDelta(\r\n      point,\r\n      Utils.framePointForOrigin(frame, originX, originY)\r\n    );\r\n    result = Utils.pointAbs(result);\r\n    result = Utils.pointTotal(result);\r\n    return result;\r\n  };\r\n\r\n  return frames.sort((a, b) => distance(a) - distance(b));\r\n};\r\n\r\nUtils.pointInPolygon = function (point, vs) {\r\n  // ray-casting algorithm based on\r\n  // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n  const x = point[0];\r\n  const y = point[1];\r\n  let inside = false;\r\n  let i = 0;\r\n  let j = vs.length - 1;\r\n  while (i < vs.length) {\r\n    var xi = vs[i][0];\r\n    var yi = vs[i][1];\r\n    var xj = vs[j][0];\r\n    var yj = vs[j][1];\r\n    var intersect =\r\n      yi > y &&\r\n      y !== yj &&\r\n      yj > y &&\r\n      x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n    if (intersect) {\r\n      inside = !inside;\r\n    }\r\n    j = i++;\r\n  }\r\n  return inside;\r\n};\r\n\r\nUtils.frameIntersection = function (rectA, rect) {\r\n  let x1 = rect.x;\r\n  let y1 = rect.y;\r\n\r\n  let x2 = x1 + rect.width;\r\n  let y2 = y1 + rect.height;\r\n\r\n  if (rectA.x > x1) {\r\n    x1 = rectA.x;\r\n  }\r\n  if (rectA.y > y1) {\r\n    y1 = rectA.y;\r\n  }\r\n  if (rectA.x + rectA.width < x2) {\r\n    x2 = rectA.x + rectA.width;\r\n  }\r\n  if (rectA.y + rectA.height < y2) {\r\n    y2 = rectA.y + rectA.height;\r\n  }\r\n  if (x2 <= x1 || y2 <= y1) {\r\n    return null;\r\n  }\r\n\r\n  return (rect = {\r\n    x: x1,\r\n    y: y1,\r\n    width: x2 - x1,\r\n    height: y2 - y1,\r\n  });\r\n};\r\n\r\nUtils.frameCenterPoint = function (frame) {\r\n  let point;\r\n  return (point = {\r\n    x: Utils.frameGetMidX(frame),\r\n    y: Utils.frameGetMidY(frame),\r\n  });\r\n};\r\n\r\nUtils.frameInFrame = function (frameA, frameB) {\r\n  for (var point of Array.from(Utils.pointsFromFrame(frameA))) {\r\n    if (!Utils.pointInFrame(point, frameB)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n// Rotation\r\n\r\nUtils.rotationNormalizer = function () {\r\n  let lastValue = null;\r\n\r\n  return function (value) {\r\n    if (lastValue == null) {\r\n      lastValue = value;\r\n    }\r\n\r\n    const diff = lastValue - value;\r\n    const maxDiff = Math.abs(diff) + 180;\r\n    const nTimes = Math.floor(maxDiff / 360);\r\n\r\n    if (diff < 180) {\r\n      value -= nTimes * 360;\r\n    }\r\n    if (diff > 180) {\r\n      value += nTimes * 360;\r\n    }\r\n\r\n    lastValue = value;\r\n    return value;\r\n  };\r\n};\r\n\r\n// Coordinate system\r\n\r\n// convert a point from a layer to the context level, with rootContext enabled you can make it cross to the top context\r\nUtils.convertPointToContext = function (\r\n  point,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (point == null) {\r\n    point = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  point = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n  const containers = layer.containers(rootContext);\r\n  if (includeLayer) {\r\n    containers.unshift(layer);\r\n  }\r\n\r\n  for (var container of Array.from(containers)) {\r\n    if (container.flat || container.clip) {\r\n      point.z = 0;\r\n    }\r\n    if (container.matrix3d != null) {\r\n      point = container.matrix3d.point(point);\r\n    } else if (container.scale != null) {\r\n      point = {\r\n        x: point.x * container.scale,\r\n        y: point.y * container.scale,\r\n      };\r\n    }\r\n    if (!container.parent) {\r\n      point.z = 0;\r\n    }\r\n  }\r\n\r\n  return point;\r\n};\r\n\r\nUtils.convertFrameToContext = function (\r\n  frame,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (frame == null) {\r\n    frame = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  frame = _.defaults(frame, {\r\n    x: 0,\r\n    y: 0,\r\n    width: Framer.Defaults.Layer.width,\r\n    height: Framer.Defaults.Layer.height,\r\n  });\r\n  const corners = Utils.pointsFromFrame(frame);\r\n  const convertedCorners = corners.map((point) =>\r\n    Utils.convertPointToContext(point, layer, rootContext, includeLayer)\r\n  );\r\n  return Utils.frameFromPoints(convertedCorners);\r\n};\r\n\r\n// convert a point from the context level to a layer, with rootContext enabled you can make it cross from the top context\r\nUtils.convertPointFromContext = function (\r\n  point,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (point == null) {\r\n    point = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  point = _.defaults(point, { x: 0, y: 0, z: 0 });\r\n\r\n  if (\r\n    rootContext &&\r\n    typeof webkitConvertPointFromPageToNode !== \"undefined\" &&\r\n    webkitConvertPointFromPageToNode !== null\r\n  ) {\r\n    let node;\r\n    if (includeLayer) {\r\n      node = layer._element;\r\n    } else {\r\n      const parent = layer.parent || layer.context;\r\n      node = parent._element;\r\n    }\r\n    point = Utils.point(\r\n      webkitConvertPointFromPageToNode(node, new WebKitPoint(point.x, point.y))\r\n    );\r\n    const context = layer.context != null ? layer.context : layer;\r\n    point = {\r\n      x: point.x / context.scale,\r\n      y: point.y / context.scale,\r\n    };\r\n    return point;\r\n  }\r\n\r\n  const containers = layer.containers(rootContext);\r\n  containers.reverse();\r\n  if (includeLayer) {\r\n    containers.push(layer);\r\n  }\r\n\r\n  for (var container of Array.from(containers)) {\r\n    if (container.matrix3d != null) {\r\n      point = container.matrix3d.inverse().point(point);\r\n    } else if (container.scale != null) {\r\n      point = {\r\n        x: point.x / container.scale,\r\n        y: point.y / container.scale,\r\n      };\r\n    }\r\n  }\r\n  return point;\r\n};\r\n\r\n// convert a frame from the context level to a layer, with rootContext enabled you can make it start from the top context\r\nUtils.convertFrameFromContext = function (\r\n  frame,\r\n  layer,\r\n  rootContext,\r\n  includeLayer\r\n) {\r\n  if (frame == null) {\r\n    frame = {};\r\n  }\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  if (includeLayer == null) {\r\n    includeLayer = true;\r\n  }\r\n  frame = _.defaults(frame, {\r\n    x: 0,\r\n    y: 0,\r\n    width: Framer.Defaults.Layer.width,\r\n    height: Framer.Defaults.Layer.height,\r\n  });\r\n  const corners = Utils.pointsFromFrame(frame);\r\n  const convertedCorners = corners.map((point) =>\r\n    Utils.convertPointFromContext(point, layer, rootContext, includeLayer)\r\n  );\r\n  return Utils.frameFromPoints(convertedCorners);\r\n};\r\n\r\n// convert a point from layerA to layerB via the context\r\nUtils.convertPoint = function (input, layerA, layerB, rootContext) {\r\n  // Convert a point between two layer coordinate systems\r\n  if (rootContext == null) {\r\n    rootContext = false;\r\n  }\r\n  let point = _.defaults(input, { x: 0, y: 0, z: 0 });\r\n  if (layerA) {\r\n    point = Utils.convertPointToContext(point, layerA, rootContext);\r\n  }\r\n  if (layerB != null) {\r\n    return Utils.convertPointFromContext(point, layerB, rootContext);\r\n  } else if (\r\n    layerA != null &&\r\n    rootContext &&\r\n    typeof webkitConvertPointFromPageToNode !== \"undefined\" &&\r\n    webkitConvertPointFromPageToNode !== null\r\n  ) {\r\n    const node = layerA.context._element;\r\n    return Utils.point(\r\n      webkitConvertPointFromPageToNode(node, new WebKitPoint(point.x, point.y))\r\n    );\r\n  } else {\r\n    return point;\r\n  }\r\n};\r\n\r\n// get the bounding frame of a layer, either at the canvas (rootcontext) or screen level\r\nUtils.boundingFrame = function (layer, rootContext) {\r\n  if (rootContext == null) {\r\n    rootContext = true;\r\n  }\r\n  const frame = { x: 0, y: 0, width: layer.width, height: layer.height };\r\n  const cornerPoints = Utils.pointsFromFrame(frame);\r\n  const contextCornerPoints = cornerPoints.map((point) =>\r\n    Utils.convertPointToContext(point, layer, rootContext)\r\n  );\r\n  const boundingFrame = Utils.frameFromPoints(contextCornerPoints);\r\n  return Utils.pixelAlignedFrame(boundingFrame);\r\n};\r\n\r\nUtils.perspectiveProjectionMatrix = function (element) {\r\n  const p = element.perspective;\r\n\r\n  const m = Matrix.identity3d();\r\n  if (p != null && p !== 0) {\r\n    m.m34 = -1 / p;\r\n  }\r\n  return m;\r\n};\r\n\r\n// matrix of perspective projection with perspective origin applied\r\nUtils.perspectiveMatrix = function (element) {\r\n  const ox = element.perspectiveOriginX * element.width;\r\n  const oy = element.perspectiveOriginY * element.height;\r\n  const ppm = Utils.perspectiveProjectionMatrix(element);\r\n  return Matrix.identity3d()\r\n    .translate(ox, oy)\r\n    .multiply(ppm)\r\n    .translate(-ox, -oy);\r\n};\r\n\r\n//##################################################################\r\n// Beta additions, use with care\r\n\r\nUtils.globalLayers = function (importedLayers) {\r\n  // Beta. Not sure if we should push this but it's nice to have.\r\n  // Use this to make all layers in an imported set available on\r\n  // on the top level, so without the \"importedLayers\" prefix.\r\n\r\n  for (var layerName in importedLayers) {\r\n    // Replace all whitespace in layer names\r\n    var layer = importedLayers[layerName];\r\n    layerName = layerName.replace(/\\s/g, \"\");\r\n\r\n    // Check if there are global variables with the same name\r\n    if (\r\n      window.hasOwnProperty(layerName) &&\r\n      !window.Framer._globalWarningGiven\r\n    ) {\r\n      print(\r\n        `Warning: Cannot make layer '${layerName}' a global, a variable with that name already exists`\r\n      );\r\n    } else {\r\n      window[layerName] = layer;\r\n    }\r\n  }\r\n\r\n  return (window.Framer._globalWarningGiven = true);\r\n};\r\n\r\nlet _textSizeNode = null;\r\n\r\nUtils.throwInStudioOrWarnInProduction = function (message) {\r\n  if (Utils.isFramerStudio()) {\r\n    throw new Error(message);\r\n  }\r\n  // else\r\n  console.warn(message);\r\n  return null;\r\n};\r\n\r\nUtils.getIdAttributesFromString = function (string) {\r\n  let m;\r\n  const regex = /id=['\"]([^'\"]+)[\"']/g;\r\n  const matches = [];\r\n  while ((m = regex.exec(string))) {\r\n    var id = m[1];\r\n    if (id != null) {\r\n      matches.push(id);\r\n    }\r\n  }\r\n  return matches;\r\n};\r\n\r\nUtils.getUniqueId = function (prefix) {\r\n  if (prefix == null) {\r\n    prefix = \"id\";\r\n  }\r\n  let id = prefix;\r\n  let count = 1;\r\n  let existingElement = document.querySelector(`[id='${id}']`);\r\n  while (existingElement != null) {\r\n    id = `${prefix}${count}`;\r\n    existingElement = document.querySelector(`[id='${id}']`);\r\n    count++;\r\n  }\r\n  return id;\r\n};\r\n\r\nexport default Utils;\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import _ from \"./Underscore.js\";\r\nimport EventEmitter3 from \"eventemitter3\";\r\n\r\nconst EventKey = \"_events\";\r\n\r\nexport class EventEmitter extends EventEmitter3 {\r\n  listenerEvents() {\r\n    return _.keys(this[EventKey] ?? {});\r\n  }\r\n\r\n  removeAllListeners(eventName) {\r\n    const eventNames = eventName ? [eventName] : this.listenerEvents();\r\n\r\n    for (const name of eventNames) {\r\n      const listeners = this.listeners(name);\r\n      for (const listener of listeners) {\r\n        this.removeListener(name, listener);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\n\r\n// Constants\r\nconst CounterKey = \"_ObjectCounter\";\r\nconst DefinedPropertiesValuesKey = \"_DefinedPropertiesValuesKey\";\r\n\r\nlet ObjectDescriptors = [];\r\nlet ObjectDescriptorsChanged = true;\r\n\r\nconst DefaultPropertyOrder = [];\r\n\r\nexport class BaseClass extends EventEmitter {\r\n  static initClass() {\r\n    this.define(\"props\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        const keys = [];\r\n        const propertyList = this._propertyList();\r\n        for (var key in propertyList) {\r\n          var descriptor = propertyList[key];\r\n          if (descriptor.exportable) {\r\n            keys.push(key);\r\n          }\r\n        }\r\n\r\n        return _.pick(this, keys);\r\n      },\r\n\r\n      set(value) {\r\n        const propertyList = this._propertyList();\r\n        return (() => {\r\n          const result = [];\r\n          for (var k in value) {\r\n            // We only apply properties that we know and are marked to be\r\n            // importable.\r\n            var v = value[k];\r\n            if (\r\n              propertyList[k] != null ? propertyList[k].importable : undefined\r\n            ) {\r\n              result.push((this[k] = v));\r\n            } else {\r\n              result.push(undefined);\r\n            }\r\n          }\r\n          return result;\r\n        })();\r\n      },\r\n    });\r\n\r\n    this.define(\"id\", {\r\n      get() {\r\n        return this._id;\r\n      },\r\n    });\r\n  }\r\n\r\n  //################################################################\r\n  // Framer object properties\r\n\r\n  static define(propertyName, descriptor) {\r\n    // See if we need to add this property to the internal properties class\r\n    if (this !== BaseClass) {\r\n      this._addDescriptor(propertyName, descriptor);\r\n    }\r\n\r\n    if (descriptor.readonly) {\r\n      descriptor.set = function (value) {\r\n        throw Error(`${this.constructor.name}.${propertyName} is readonly`);\r\n      };\r\n    }\r\n\r\n    // Define the property on the prototype\r\n    return Object.defineProperty(this.prototype, propertyName, descriptor);\r\n  }\r\n\r\n  static undefine(propertyName) {\r\n    if (_.isArray(propertyName)) {\r\n      return propertyName.map((prop) => this.undefine(prop));\r\n    } else {\r\n      return this.define(\r\n        propertyName,\r\n        this.simpleProperty(propertyName, undefined, {\r\n          importable: false,\r\n          exportable: false,\r\n          enumerable: false,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  static _addDescriptor(propertyName, descriptor) {\r\n    // for key in [\"enumerable\", \"exportable\", \"importable\"]\r\n    // \tif descriptor.hasOwnProperty(key)\r\n    // \t\tthrow Error(\"woops #{propertyName} #{descriptor[key]}\") if not _.isBoolean(descriptor[key])\r\n\r\n    descriptor.propertyName = propertyName;\r\n\r\n    // Have the following flags set to true when undefined:\r\n    if (descriptor.enumerable == null) {\r\n      descriptor.enumerable = true;\r\n    }\r\n    if (descriptor.exportable == null) {\r\n      descriptor.exportable = true;\r\n    }\r\n    if (descriptor.importable == null) {\r\n      descriptor.importable = true;\r\n    }\r\n    if (descriptor.readonly == null) {\r\n      descriptor.readonly = descriptor.set == null;\r\n    }\r\n\r\n    // We assume we don't import if there is no setter, because we can't\r\n    descriptor.importable = descriptor.importable && !descriptor.readonly;\r\n    // We also assume we don't export if there is no setter, because\r\n    // it is likely a calculated property, and we can't set it.\r\n    descriptor.exportable = descriptor.exportable && !descriptor.readonly;\r\n\r\n    // We assume that every property with an underscore is private\r\n    if (_.startsWith(propertyName, \"_\")) {\r\n      return;\r\n    }\r\n\r\n    ObjectDescriptors.push([this, propertyName, descriptor]);\r\n    ObjectDescriptorsChanged = true;\r\n\r\n    // Only retain options that are importable, exportable or both:\r\n    if (descriptor.exportable || descriptor.importable) {\r\n      if (descriptor.depends) {\r\n        for (var depend of Array.from(descriptor.depends)) {\r\n          if (!Array.from(DefaultPropertyOrder).includes(depend)) {\r\n            DefaultPropertyOrder.push(depend);\r\n          }\r\n        }\r\n        const index = DefaultPropertyOrder.indexOf(propertyName);\r\n        if (index !== -1) {\r\n          DefaultPropertyOrder.splice(index, 1);\r\n          DefaultPropertyOrder.push(propertyName);\r\n        }\r\n      }\r\n      if (!Array.from(DefaultPropertyOrder).includes(propertyName)) {\r\n        return DefaultPropertyOrder.push(propertyName);\r\n      }\r\n    }\r\n  }\r\n\r\n  static simpleProperty(name, fallback, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return _.extend(options, {\r\n      default: fallback,\r\n      get() {\r\n        return this._getPropertyValue(name);\r\n      },\r\n      set(value) {\r\n        this._setPropertyValue(name, value);\r\n        return __guardMethod__(options, \"didSet\", (o) => o.didSet(this, value));\r\n      },\r\n    });\r\n  }\r\n\r\n  static proxyProperty(keyPath, options) {\r\n    // Allows to easily proxy properties from an instance object\r\n    // Object property is in the form of \"object.property\"\r\n\r\n    let descriptor;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    const objectKey = keyPath.split(\".\")[0];\r\n\r\n    return (descriptor = _.extend(options, {\r\n      get() {\r\n        if (!_.isObject(this[objectKey])) {\r\n          return;\r\n        }\r\n        return Utils.getValueForKeyPath(this, keyPath);\r\n      },\r\n      set(value) {\r\n        if (!_.isObject(this[objectKey])) {\r\n          return;\r\n        }\r\n        Utils.setValueForKeyPath(this, keyPath, value);\r\n        return __guardMethod__(options, \"didSet\", (o) => o.didSet(this, value));\r\n      },\r\n      proxy: true,\r\n    }));\r\n  }\r\n\r\n  _setPropertyValue(k, v) {\r\n    return (this[DefinedPropertiesValuesKey][k] = v);\r\n  }\r\n\r\n  _getPropertyValue(k) {\r\n    return Utils.valueOrDefault(\r\n      this[DefinedPropertiesValuesKey][k],\r\n      this._getPropertyDefaultValue(k)\r\n    );\r\n  }\r\n\r\n  _getPropertyDefaultValue(k) {\r\n    return __guard__(this._propertyList()[k], (x) => x[\"default\"]);\r\n  }\r\n\r\n  _propertyList() {\r\n    if (!this._propertyListCache || ObjectDescriptorsChanged) {\r\n      this._propertyListCache = this.__propertyList();\r\n      ObjectDescriptorsChanged = false;\r\n    }\r\n\r\n    return this._propertyListCache;\r\n  }\r\n\r\n  __propertyList() {\r\n    const result = {};\r\n\r\n    for (var k of Array.from(ObjectDescriptors)) {\r\n      var [Class, name, descriptor] = Array.from(k);\r\n      if (this instanceof Class) {\r\n        if (descriptor.exportable || descriptor.importable) {\r\n          result[name] = descriptor;\r\n        } else {\r\n          delete result[name];\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  keys() {\r\n    return _.keys(this.props);\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id || null}>`;\r\n  }\r\n\r\n  onChange(name, cb) {\r\n    return this.on(`change:${name}`, cb);\r\n  }\r\n\r\n  //################################################################\r\n  // Base constructor method\r\n\r\n  constructor(options) {\r\n    super(...arguments);\r\n\r\n    this._setPropertyValue = this._setPropertyValue.bind(this);\r\n    this._getPropertyValue = this._getPropertyValue.bind(this);\r\n    this.toInspect = this.toInspect.bind(this);\r\n\r\n    this._context =\r\n      typeof Framer !== \"undefined\" && Framer !== null\r\n        ? Framer.CurrentContext\r\n        : undefined;\r\n\r\n    // Create a holder for the property values\r\n    this[DefinedPropertiesValuesKey] = {};\r\n\r\n    this._applyDefaults(options);\r\n\r\n    // Count the creation for these objects and set the id\r\n    if (this.constructor[CounterKey] == null) {\r\n      this.constructor[CounterKey] = 0;\r\n    }\r\n    this.constructor[CounterKey] += 1;\r\n\r\n    // We set this last so if we print a layer during construction\r\n    // we don't get confused because the id changes from global to context\r\n    this._id = this.constructor[CounterKey];\r\n  }\r\n\r\n  _applyDefaults(options, proxy) {\r\n    if (proxy == null) {\r\n      proxy = false;\r\n    }\r\n    if (!options) {\r\n      return;\r\n    }\r\n\r\n    const propertyList = this._propertyList();\r\n    return (() => {\r\n      const result = [];\r\n      for (var k of Array.from(DefaultPropertyOrder)) {\r\n        var descriptor = propertyList[k];\r\n        if (descriptor != null) {\r\n          if (proxy && !(descriptor.proxy === true)) {\r\n            continue;\r\n          }\r\n          result.push(this._applyDefault(descriptor, k, options[k]));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _applyProxyDefaults(options) {\r\n    return this._applyDefaults(options, true);\r\n  }\r\n\r\n  _applyDefault(descriptor, key, optionValue) {\r\n    // For each known property (registered with @define) that has a setter, fetch\r\n    // the value from the options object, unless the prop is not importable.\r\n    // When there's no user value, apply the default value:\r\n\r\n    let value;\r\n    if (descriptor.readonly) {\r\n      return;\r\n    }\r\n\r\n    if (descriptor.importable) {\r\n      value = optionValue;\r\n    }\r\n    value = Utils.valueOrDefault(\r\n      optionValue,\r\n      this._getPropertyDefaultValue(key)\r\n    );\r\n\r\n    if ([null, undefined].includes(value)) {\r\n      return;\r\n    }\r\n\r\n    return (this[key] = value);\r\n  }\r\n}\r\nBaseClass.initClass();\r\n\r\nfunction __guardMethod__(obj, methodName, transform) {\r\n  if (\r\n    typeof obj !== \"undefined\" &&\r\n    obj !== null &&\r\n    typeof obj[methodName] === \"function\"\r\n  ) {\r\n    return transform(obj, methodName);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { _ } from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport * as hsluv from \"hsluv\";\r\nconst { rgbToHsluv } = \"hsluv\";\r\n\r\nconst ColorType = {\r\n  RGB: \"rgb\",\r\n  HSL: \"hsl\",\r\n  HEX: \"hex\",\r\n  NAME: \"name\",\r\n};\r\n\r\nexport class Color extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"r\", {\r\n      get() {\r\n        return this._r;\r\n      },\r\n    });\r\n    this.define(\"g\", {\r\n      get() {\r\n        return this._g;\r\n      },\r\n    });\r\n    this.define(\"b\", {\r\n      get() {\r\n        return this._b;\r\n      },\r\n    });\r\n    this.define(\"a\", {\r\n      get() {\r\n        return this._a;\r\n      },\r\n    });\r\n    this.define(\"h\", {\r\n      get() {\r\n        return this._h;\r\n      },\r\n    });\r\n    this.define(\"s\", {\r\n      get() {\r\n        return this._s;\r\n      },\r\n    });\r\n    this.define(\"l\", {\r\n      get() {\r\n        return this._l;\r\n      },\r\n    });\r\n\r\n    this.isColor = (color) => {\r\n      return _.isString(color)\r\n        ? this.isColorString(color)\r\n        : this.isColorObject(color);\r\n    };\r\n  }\r\n  constructor(color1, r, g, b) {\r\n    this.toInspect = this.toInspect.bind(this);\r\n    this.color = color1;\r\n    if (this.color === \"\") {\r\n      this.color = null;\r\n    }\r\n\r\n    const { color } = this;\r\n\r\n    // If input already is a Color object return input\r\n    if (Color.isColorObject(color)) {\r\n      return color;\r\n    }\r\n\r\n    // Convert input to RGB\r\n    const input = inputData(color, r, g, b);\r\n\r\n    this._type = input.type;\r\n    this._r = input.r;\r\n    this._g = input.g;\r\n    this._b = input.b;\r\n    this._a = input.a;\r\n    this._h = input.h;\r\n    this._s = input.s;\r\n    this._l = input.l;\r\n    this._roundA = Math.round(100 * this._a) / 100;\r\n  }\r\n\r\n  toHex(allow3Char) {\r\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\r\n  }\r\n\r\n  toHexString(allow3Char) {\r\n    return \"#\" + this.toHex(allow3Char);\r\n  }\r\n\r\n  toRgb() {\r\n    if (this._rgb === undefined) {\r\n      this._rgb = {\r\n        r: Math.round(this._r),\r\n        g: Math.round(this._g),\r\n        b: Math.round(this._b),\r\n        a: this._a,\r\n      };\r\n    }\r\n    return _.clone(this._rgb);\r\n  }\r\n\r\n  toRgbString() {\r\n    if (this._a === 1) {\r\n      return `rgb(${Utils.round(this._r, 0)}, ${Utils.round(\r\n        this._g,\r\n        0\r\n      )}, ${Utils.round(this._b, 0)})`;\r\n    } else {\r\n      return `rgba(${Utils.round(this._r, 0)}, ${Utils.round(\r\n        this._g,\r\n        0\r\n      )}, ${Utils.round(this._b, 0)}, ${this._roundA})`;\r\n    }\r\n  }\r\n\r\n  toHsl() {\r\n    if (this._hsl === undefined) {\r\n      this._hsl = {\r\n        h: this.h,\r\n        s: this.s,\r\n        l: this.l,\r\n        a: this.a,\r\n      };\r\n    }\r\n    return _.clone(this._hsl);\r\n  }\r\n\r\n  toHusl() {\r\n    if (this._husl === undefined) {\r\n      const rgb = [this.r / 255, this.g / 255, this.b / 255];\r\n      const husl = rgbToHsluv(rgb);\r\n      this._husl = { h: husl[0], s: husl[1], l: husl[2] };\r\n    }\r\n\r\n    return _.clone(this._husl);\r\n  }\r\n\r\n  toHslString() {\r\n    if (this._hslString === undefined) {\r\n      const hsl = this.toHsl();\r\n      const h = Math.round(hsl.h);\r\n      const s = Math.round(hsl.s * 100);\r\n      const l = Math.round(hsl.l * 100);\r\n      if (this._a === 1) {\r\n        this._hslString = `hsl(${h}, ${s}%, ${l}%)`;\r\n      } else {\r\n        this._hslString = `hsla(${h}, ${s}%, ${l}%, ${this._roundA})`;\r\n      }\r\n    }\r\n    return this._hslString;\r\n  }\r\n\r\n  toName() {\r\n    if (this._a === 0) {\r\n      return \"transparent\";\r\n    }\r\n    if (this._a < 1) {\r\n      return false;\r\n    }\r\n    const hex = rgbToHex(this._r, this._g, this._b, true);\r\n\r\n    for (var key of Array.from(_.keys(cssNames))) {\r\n      var value = cssNames[key];\r\n      if (value === hex) {\r\n        return key;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  lighten(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.l += amount / 100;\r\n    hsl.l = Math.min(1, Math.max(0, hsl.l));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  brighten(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const rgb = this.toRgb();\r\n    rgb.r = Math.max(\r\n      0,\r\n      Math.min(255, rgb.r - Math.round(255 * -(amount / 100)))\r\n    );\r\n    rgb.g = Math.max(\r\n      0,\r\n      Math.min(255, rgb.g - Math.round(255 * -(amount / 100)))\r\n    );\r\n    rgb.b = Math.max(\r\n      0,\r\n      Math.min(255, rgb.b - Math.round(255 * -(amount / 100)))\r\n    );\r\n    return new Color(rgb);\r\n  }\r\n\r\n  darken(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.l -= amount / 100;\r\n    hsl.l = Math.min(1, Math.max(0, hsl.l));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  desaturate(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.s -= amount / 100;\r\n    hsl.s = Math.min(1, Math.max(0, hsl.s));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  saturate(amount) {\r\n    if (amount == null) {\r\n      amount = 10;\r\n    }\r\n    const hsl = this.toHsl();\r\n    hsl.s += amount / 100;\r\n    hsl.s = Math.min(1, Math.max(0, hsl.s));\r\n    return new Color(hsl);\r\n  }\r\n\r\n  grayscale() {\r\n    const hsl = this.toHsl();\r\n    return new Color(hsl).desaturate(100);\r\n  }\r\n\r\n  toString() {\r\n    return this.toRgbString();\r\n  }\r\n\r\n  alpha(alpha) {\r\n    let result;\r\n    if (alpha == null) {\r\n      alpha = 1;\r\n    }\r\n    return (result = new Color({\r\n      r: this.r,\r\n      g: this.g,\r\n      b: this.b,\r\n      a: alpha,\r\n    }));\r\n  }\r\n\r\n  multiplyAlpha(alpha) {\r\n    return this.alpha(this.a * alpha);\r\n  }\r\n\r\n  transparent() {\r\n    return this.alpha(0);\r\n  }\r\n\r\n  mix(colorB, fraction, limit, model) {\r\n    if (limit == null) {\r\n      limit = false;\r\n    }\r\n    return Color.mix(this, colorB, fraction, limit, model);\r\n  }\r\n\r\n  copy() {\r\n    return new Color(this);\r\n  }\r\n\r\n  isEqual(colorB) {\r\n    return Color.equal(this, colorB);\r\n  }\r\n\r\n  toInspect() {\r\n    if (this._type === ColorType.HSL) {\r\n      return `<${this.constructor.name} h:${this.h} s:${this.s} l:${this.l} a:${this.a}>`;\r\n    } else if (this._type === ColorType.HEX || this._type === ColorType.NAME) {\r\n      return `<${this.constructor.name} \\\"${this.color}\\\">`;\r\n    } else {\r\n      return `<${this.constructor.name} r:${this.r} g:${this.g} b:${this.b} a:${this.a}>`;\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  //# Class methods\r\n\r\n  static mix(colorA, colorB, fraction, limit, model) {\r\n    if (fraction == null) {\r\n      fraction = 0.5;\r\n    }\r\n    if (limit == null) {\r\n      limit = false;\r\n    }\r\n    let result = null;\r\n\r\n    //\r\n    if (typeof colorA === \"string\" && this.isColorString(colorA)) {\r\n      colorA = new Color(colorA);\r\n    }\r\n    if (typeof colorB === \"string\" && this.isColorString(colorB)) {\r\n      colorB = new Color(colorB);\r\n    }\r\n\r\n    if (!(colorA instanceof Color) && colorB instanceof Color) {\r\n      colorA = colorB.transparent();\r\n    } else if (\r\n      colorA instanceof Color &&\r\n      colorA._a === 0 &&\r\n      colorB instanceof Color &&\r\n      colorB._a !== 0\r\n    ) {\r\n      colorA = colorB.transparent();\r\n    } else if (!(colorB instanceof Color) && colorA instanceof Color) {\r\n      colorB = colorA.transparent();\r\n    } else if (\r\n      colorB instanceof Color &&\r\n      colorB._a === 0 &&\r\n      colorA instanceof Color &&\r\n      colorA._a !== 0\r\n    ) {\r\n      colorB = colorA.transparent();\r\n    }\r\n\r\n    if (colorB instanceof Color) {\r\n      if (ColorModel.isRGB(model)) {\r\n        // rgb model\r\n        result = new Color({\r\n          r: Utils.modulate(fraction, [0, 1], [colorA._r, colorB._r], limit),\r\n          g: Utils.modulate(fraction, [0, 1], [colorA._g, colorB._g], limit),\r\n          b: Utils.modulate(fraction, [0, 1], [colorA._b, colorB._b], limit),\r\n          a: Utils.modulate(fraction, [0, 1], [colorA._a, colorB._a], limit),\r\n        });\r\n      } else {\r\n        let hslA, hslB;\r\n        hslA;\r\n        hslB;\r\n\r\n        if (ColorModel.isHSL(model)) {\r\n          // hsl model\r\n          hslA = colorA.toHsl();\r\n          hslB = colorB.toHsl();\r\n        } else {\r\n          // husl model\r\n          hslA = colorA.toHusl();\r\n          hslB = colorB.toHusl();\r\n        }\r\n\r\n        if (hslA.s === 0) {\r\n          hslA.h = hslB.h;\r\n        } else if (hslB.s === 0) {\r\n          hslB.h = hslA.h;\r\n        }\r\n\r\n        const fromH = hslA.h;\r\n        const toH = hslB.h;\r\n        let deltaH = toH - fromH;\r\n\r\n        if (deltaH > 180) {\r\n          deltaH = toH - 360 - fromH;\r\n        } else if (deltaH < -180) {\r\n          deltaH = toH + 360 - fromH;\r\n        }\r\n\r\n        const tween = {\r\n          h: Utils.modulate(fraction, [0, 1], [fromH, fromH + deltaH], limit),\r\n          s: Utils.modulate(fraction, [0, 1], [hslA.s, hslB.s], limit),\r\n          l: Utils.modulate(fraction, [0, 1], [hslA.l, hslB.l], limit),\r\n          a: Utils.modulate(fraction, [0, 1], [colorA.a, colorB.a], limit),\r\n        };\r\n\r\n        if (ColorModel.isHSL(model)) {\r\n          // hsl model\r\n          result = new Color(tween);\r\n        } else {\r\n          // husl model\r\n          result = new Color(rgbaFromHusl(tween));\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static random(alpha) {\r\n    if (alpha == null) {\r\n      alpha = 1.0;\r\n    }\r\n    const c = () => parseInt(Math.random() * 255);\r\n    return new Color(`rgba(${c()}, ${c()}, ${c()}, ${alpha})`);\r\n  }\r\n\r\n  static grey(g, alpha) {\r\n    if (g == null) {\r\n      g = 0.5;\r\n    }\r\n    if (alpha == null) {\r\n      alpha = 1;\r\n    }\r\n    g = parseInt(g * 255);\r\n    return new Color(`rgba(${g}, ${g}, ${g}, ${alpha})`);\r\n  }\r\n\r\n  static gray(...args) {\r\n    return this.grey(...Array.from(args || []));\r\n  }\r\n\r\n  static toColor(color) {\r\n    return new Color(color);\r\n  }\r\n  static validColorValue(color) {\r\n    return color instanceof Color || color === null;\r\n  }\r\n\r\n  static isColorObject(color) {\r\n    return color instanceof Color;\r\n  }\r\n\r\n  static isColorString(colorString) {\r\n    if (_.isString(colorString)) {\r\n      return stringToObject(colorString) !== false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isValidColorProperty(name, value) {\r\n    // We check if the property name ends with color, because we don't want\r\n    // to convert every string that looks like a Color, like the html property containing \"add\"\r\n    const isColorKey =\r\n      _.endsWith(name.toLowerCase(), \"color\") ||\r\n      [\"fill\", \"stroke\"].includes(name);\r\n    if (isColorKey && _.isString(value) && Color.isColorString(value)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  static equal(colorA, colorB) {\r\n    if (!this.validColorValue(colorA)) {\r\n      if (!Color.isColorString(colorA)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!this.validColorValue(colorB)) {\r\n      if (!Color.isColorString(colorB)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    colorA = new Color(colorA);\r\n    colorB = new Color(colorB);\r\n\r\n    const tolerance = 0.01;\r\n    if (Math.abs(colorA.r - colorB.r) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.g - colorB.g) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.b - colorB.b) >= tolerance) {\r\n      return false;\r\n    }\r\n    if (Math.abs(colorA.a - colorB.a) >= tolerance) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static rgbToHsl(a, b, c) {\r\n    return rgbToHsl(a, b, c);\r\n  }\r\n}\r\n\r\n// Color models, husl is default\r\nvar ColorModel = {\r\n  RGB: \"rgb\",\r\n  RGBA: \"rgba\",\r\n  HSL: \"hsl\",\r\n  HSLA: \"hsla\",\r\n};\r\n\r\nColorModel.isRGB = function (colorModel) {\r\n  if (_.isString(colorModel)) {\r\n    let needle;\r\n    return (\r\n      (needle = colorModel.toLowerCase()),\r\n      [ColorModel.RGB, ColorModel.RGBA].includes(needle)\r\n    );\r\n  }\r\n  return false;\r\n};\r\n\r\nColorModel.isHSL = function (colorModel) {\r\n  if (_.isString(colorModel)) {\r\n    let needle;\r\n    return (\r\n      (needle = colorModel.toLowerCase()),\r\n      [ColorModel.HSL, ColorModel.HSLA].includes(needle)\r\n    );\r\n  }\r\n  return false;\r\n};\r\n\r\nconst rgbaFromHusl = (husl) => {\r\n  const rgb = husl.hsluvToRgb([husl.h, husl.s, husl.l]);\r\n  return {\r\n    r: rgb[0] * 255,\r\n    g: rgb[1] * 255,\r\n    b: rgb[2] * 255,\r\n    a: husl.a, // keep alpha if it exists\r\n  };\r\n};\r\n\r\n// Functions\r\nvar inputData = function (color, g, b, alpha) {\r\n  let h, l, s;\r\n  let rgb = { r: 0, g: 0, b: 0 };\r\n  let hsl = { h: 0, s: 0, l: 0 };\r\n  let a = 1;\r\n  const ok = false;\r\n  let type = ColorType.RGB;\r\n\r\n  if (color === null) {\r\n    a = 0;\r\n  } else if (_.isNumber(color)) {\r\n    rgb.r = color;\r\n\r\n    if (_.isNumber(g)) {\r\n      rgb.g = g;\r\n    }\r\n    if (_.isNumber(b)) {\r\n      rgb.b = b;\r\n    }\r\n    if (_.isNumber(alpha)) {\r\n      a = alpha;\r\n    }\r\n  } else {\r\n    if (typeof color === \"string\") {\r\n      color = stringToObject(color);\r\n\r\n      if (!color) {\r\n        color = {\r\n          r: 0,\r\n          g: 0,\r\n          b: 0,\r\n          a: 0,\r\n        };\r\n      }\r\n\r\n      if (color.hasOwnProperty(\"type\")) {\r\n        ({ type } = color);\r\n      }\r\n    }\r\n\r\n    if (typeof color === \"object\") {\r\n      if (\r\n        color.hasOwnProperty(\"r\") ||\r\n        color.hasOwnProperty(\"g\") ||\r\n        color.hasOwnProperty(\"b\")\r\n      ) {\r\n        rgb = rgbToRgb(color.r, color.g, color.b);\r\n      } else if (\r\n        color.hasOwnProperty(\"h\") ||\r\n        color.hasOwnProperty(\"s\") ||\r\n        color.hasOwnProperty(\"l\")\r\n      ) {\r\n        h = isNumeric(color.h) ? parseFloat(color.h) : 0;\r\n        h = (h + 360) % 360;\r\n        s = isNumeric(color.s) ? color.s : 1;\r\n        if (_.isString(color.s)) {\r\n          s = numberFromString(color.s);\r\n        }\r\n        l = isNumeric(color.l) ? color.l : 0.5;\r\n        if (_.isString(color.l)) {\r\n          l = numberFromString(color.l);\r\n        }\r\n\r\n        rgb = hslToRgb(h, s, l);\r\n        type = ColorType.HSL;\r\n        hsl = {\r\n          h,\r\n          s,\r\n          l,\r\n        };\r\n      }\r\n\r\n      if (color.hasOwnProperty(\"a\")) {\r\n        ({ a } = color);\r\n      }\r\n    }\r\n  }\r\n\r\n  a = correctAlpha(a);\r\n\r\n  if (type !== ColorType.HSL) {\r\n    hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n  }\r\n\r\n  return {\r\n    type,\r\n    r: Math.min(255, Math.max(rgb.r, 0)),\r\n    g: Math.min(255, Math.max(rgb.g, 0)),\r\n    b: Math.min(255, Math.max(rgb.b, 0)),\r\n    h: Utils.clamp(hsl.h, 0, 360),\r\n    s: Utils.clamp(hsl.s, 0, 1),\r\n    l: Utils.clamp(hsl.l, 0, 1),\r\n    a,\r\n  };\r\n};\r\n\r\n// extract number from string\r\nvar numberFromString = (string) => string.match(/\\d+/)[0];\r\n\r\n// Conversion Functions\r\n// RGB to RGB\r\nvar rgbToRgb = (r, g, b) => ({\r\n  r: isNumeric(r) ? bound01(r, 255) * 255 : 0,\r\n  g: isNumeric(g) ? bound01(g, 255) * 255 : 0,\r\n  b: isNumeric(b) ? bound01(b, 255) * 255 : 0,\r\n});\r\n\r\n// RGB to HEX\r\nvar rgbToHex = function (r, g, b, allow3Char) {\r\n  const hex = [\r\n    pad2(Math.round(r).toString(16)),\r\n    pad2(Math.round(g).toString(16)),\r\n    pad2(Math.round(b).toString(16)),\r\n  ];\r\n  if (\r\n    allow3Char &&\r\n    hex[0].charAt(0) === hex[0].charAt(1) &&\r\n    hex[1].charAt(0) === hex[1].charAt(1) &&\r\n    hex[2].charAt(0) === hex[2].charAt(1)\r\n  ) {\r\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\r\n  }\r\n  return hex.join(\"\");\r\n};\r\n\r\n// RGB to HSL\r\nvar rgbToHsl = function (r, g, b) {\r\n  let l, s;\r\n  r = bound01(r, 255);\r\n  g = bound01(g, 255);\r\n  b = bound01(b, 255);\r\n\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n  let h = (s = l = (max + min) / 2);\r\n\r\n  if (max === min) {\r\n    h = s = 0;\r\n  } else {\r\n    const d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    switch (max) {\r\n      case r:\r\n        h = (g - b) / d + (g < b ? 6 : 0);\r\n        break;\r\n      case g:\r\n        h = (b - r) / d + 2;\r\n        break;\r\n      case b:\r\n        h = (r - g) / d + 4;\r\n        break;\r\n    }\r\n    h /= 6;\r\n  }\r\n  return { h: h * 360, s, l };\r\n};\r\n\r\n// HSL to RGB\r\nvar hslToRgb = function (h, s, l) {\r\n  let r = undefined;\r\n  let g = undefined;\r\n  let b = undefined;\r\n\r\n  h = bound01(h, 360);\r\n  s = bound01(s * 100, 100);\r\n  l = bound01(l * 100, 100);\r\n\r\n  const hue2rgb = function (p, q, t) {\r\n    if (t < 0) {\r\n      t += 1;\r\n    }\r\n    if (t > 1) {\r\n      t -= 1;\r\n    }\r\n    if (t < 1 / 6) {\r\n      return p + (q - p) * 6 * t;\r\n    }\r\n    if (t < 1 / 2) {\r\n      return q;\r\n    }\r\n    if (t < 2 / 3) {\r\n      return p + (q - p) * (2 / 3 - t) * 6;\r\n    }\r\n    return p;\r\n  };\r\n\r\n  if (s === 0) {\r\n    r = g = b = l; // Achromatic\r\n  } else {\r\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    const p = 2 * l - q;\r\n    r = hue2rgb(p, q, h + 1 / 3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1 / 3);\r\n  }\r\n\r\n  return { r: r * 255, g: g * 255, b: b * 255 };\r\n};\r\n\r\n// Utility Functions\r\n\r\nconst convertToPercentage = function (n) {\r\n  if (n <= 1) {\r\n    n = n * 100 + \"%\";\r\n  }\r\n  return n;\r\n};\r\n\r\n// Ensure there's always a correct alpha value.\r\n// If there isn't, it will be set to 1 by default.\r\nvar correctAlpha = function (a) {\r\n  a = parseFloat(a);\r\n  if (a < 0) {\r\n    a = 0;\r\n  }\r\n  if (isNaN(a) || a > 1) {\r\n    a = 1;\r\n  }\r\n  return a;\r\n};\r\n\r\n// Take input from [0, n] and return it as [0, 1]\r\nvar bound01 = function (n, max) {\r\n  if (isOnePointZero(n)) {\r\n    n = \"100%\";\r\n  }\r\n  const processPercent = isPercentage(n);\r\n  n = Math.min(max, Math.max(0, parseFloat(n)));\r\n\r\n  // Automatically convert percentage into number\r\n  if (processPercent) {\r\n    n = parseInt(n * max, 10) / 100;\r\n  }\r\n  // Handle floating point rounding errors\r\n  if (Math.abs(n - max) < 0.000001) {\r\n    return 1;\r\n  }\r\n  // Convert into [0, 1] range if it isn't already\r\n  return (n % max) / parseFloat(max);\r\n};\r\n\r\nvar isOnePointZero = (n) =>\r\n  typeof n === \"string\" && n.indexOf(\".\") !== -1 && parseFloat(n) === 1;\r\n\r\n// Check to see if string passed in is a percentage\r\nvar isPercentage = (n) => typeof n === \"string\" && n.indexOf(\"%\") !== -1;\r\n\r\n// Force hex to have 2 characters.\r\nvar pad2 = function (char) {\r\n  if (char.length === 1) {\r\n    return \"0\" + char;\r\n  } else {\r\n    return \"\" + char;\r\n  }\r\n};\r\n\r\n// Matchers\r\nconst matchers = (function () {\r\n  const css_integer = \"[-\\\\+]?\\\\d+%?\";\r\n  const css_number = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\r\n  const css_unit = \"(?:\" + css_number + \")|(?:\" + css_integer + \")\";\r\n\r\n  const permissive_match3 =\r\n    \"[\\\\s|\\\\(]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")\\\\s*\\\\)?\";\r\n  const permissive_match4 =\r\n    \"[\\\\s|\\\\(]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")[,|\\\\s]+(\" +\r\n    css_unit +\r\n    \")\\\\s*\\\\)?\";\r\n  return {\r\n    rgb: new RegExp(\"rgb\" + permissive_match3),\r\n    rgba: new RegExp(\"rgba\" + permissive_match4),\r\n    hsl: new RegExp(\"hsl\" + permissive_match3),\r\n    hsla: new RegExp(\"hsla\" + permissive_match4),\r\n    hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n    hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\r\n  };\r\n})();\r\n\r\nvar isNumeric = (value) => !isNaN(value) && isFinite(value);\r\n\r\nconst percentToFraction = (percentage) => numberFromString(percentage) / 100;\r\n\r\nvar stringToObject = function (color) {\r\n  const trimLeft = /^[\\s,#]+/;\r\n  const trimRight = /\\s+$/;\r\n\r\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\r\n\r\n  let named = false;\r\n\r\n  if (cssNames[color]) {\r\n    color = cssNames[color];\r\n    named = true;\r\n    ({ type: ColorType.NAME });\r\n  } else if (color === \"transparent\") {\r\n    return {\r\n      r: 0,\r\n      g: 0,\r\n      b: 0,\r\n      a: 0,\r\n      type: ColorType.NAME,\r\n    };\r\n  }\r\n\r\n  let match = undefined;\r\n\r\n  if ((match = matchers.rgb.exec(color))) {\r\n    return {\r\n      r: match[1],\r\n      g: match[2],\r\n      b: match[3],\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.rgba.exec(color))) {\r\n    return {\r\n      r: match[1],\r\n      g: match[2],\r\n      b: match[3],\r\n      a: match[4],\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.hsl.exec(color))) {\r\n    return {\r\n      h: match[1],\r\n      s: percentToFraction(match[2]),\r\n      l: percentToFraction(match[3]),\r\n    };\r\n  }\r\n\r\n  if ((match = matchers.hsla.exec(color))) {\r\n    return {\r\n      h: match[1],\r\n      s: percentToFraction(match[2]),\r\n      l: percentToFraction(match[3]),\r\n      a: match[4],\r\n    };\r\n  }\r\n\r\n  if (\r\n    (match =\r\n      matchers.hex6.exec(color) ||\r\n      (match = matchers.hex6.exec(cssNames[color])))\r\n  ) {\r\n    return {\r\n      r: parseInt(match[1], 16),\r\n      g: parseInt(match[2], 16),\r\n      b: parseInt(match[3], 16),\r\n      a: 1,\r\n      type: ColorType.HEX,\r\n    };\r\n  }\r\n\r\n  if (\r\n    (match =\r\n      matchers.hex3.exec(color) ||\r\n      (match = matchers.hex3.exec(cssNames[color])))\r\n  ) {\r\n    return {\r\n      r: parseInt(match[1] + \"\" + match[1], 16),\r\n      g: parseInt(match[2] + \"\" + match[2], 16),\r\n      b: parseInt(match[3] + \"\" + match[3], 16),\r\n      type: ColorType.HEX,\r\n    };\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n// CSS Colors\r\nvar cssNames = {\r\n  aliceblue: \"f0f8ff\",\r\n  antiquewhite: \"faebd7\",\r\n  aqua: \"0ff\",\r\n  aquamarine: \"7fffd4\",\r\n  azure: \"f0ffff\",\r\n  beige: \"f5f5dc\",\r\n  bisque: \"ffe4c4\",\r\n  black: \"000\",\r\n  blanchedalmond: \"ffebcd\",\r\n  blue: \"00f\",\r\n  blueviolet: \"8a2be2\",\r\n  brown: \"a52a2a\",\r\n  burlywood: \"deb887\",\r\n  burntsienna: \"ea7e5d\",\r\n  cadetblue: \"5f9ea0\",\r\n  chartreuse: \"7fff00\",\r\n  chocolate: \"d2691e\",\r\n  coral: \"ff7f50\",\r\n  cornflowerblue: \"6495ed\",\r\n  cornsilk: \"fff8dc\",\r\n  crimson: \"dc143c\",\r\n  cyan: \"0ff\",\r\n  darkblue: \"00008b\",\r\n  darkcyan: \"008b8b\",\r\n  darkgoldenrod: \"b8860b\",\r\n  darkgray: \"a9a9a9\",\r\n  darkgreen: \"006400\",\r\n  darkgrey: \"a9a9a9\",\r\n  darkkhaki: \"bdb76b\",\r\n  darkmagenta: \"8b008b\",\r\n  darkolivegreen: \"556b2f\",\r\n  darkorange: \"ff8c00\",\r\n  darkorchid: \"9932cc\",\r\n  darkred: \"8b0000\",\r\n  darksalmon: \"e9967a\",\r\n  darkseagreen: \"8fbc8f\",\r\n  darkslateblue: \"483d8b\",\r\n  darkslategray: \"2f4f4f\",\r\n  darkslategrey: \"2f4f4f\",\r\n  darkturquoise: \"00ced1\",\r\n  darkviolet: \"9400d3\",\r\n  deeppink: \"ff1493\",\r\n  deepskyblue: \"00bfff\",\r\n  dimgray: \"696969\",\r\n  dimgrey: \"696969\",\r\n  dodgerblue: \"1e90ff\",\r\n  firebrick: \"b22222\",\r\n  floralwhite: \"fffaf0\",\r\n  forestgreen: \"228b22\",\r\n  fuchsia: \"f0f\",\r\n  gainsboro: \"dcdcdc\",\r\n  ghostwhite: \"f8f8ff\",\r\n  gold: \"ffd700\",\r\n  goldenrod: \"daa520\",\r\n  gray: \"808080\",\r\n  green: \"008000\",\r\n  greenyellow: \"adff2f\",\r\n  grey: \"808080\",\r\n  honeydew: \"f0fff0\",\r\n  hotpink: \"ff69b4\",\r\n  indianred: \"cd5c5c\",\r\n  indigo: \"4b0082\",\r\n  ivory: \"fffff0\",\r\n  khaki: \"f0e68c\",\r\n  lavender: \"e6e6fa\",\r\n  lavenderblush: \"fff0f5\",\r\n  lawngreen: \"7cfc00\",\r\n  lemonchiffon: \"fffacd\",\r\n  lightblue: \"add8e6\",\r\n  lightcoral: \"f08080\",\r\n  lightcyan: \"e0ffff\",\r\n  lightgoldenrodyellow: \"fafad2\",\r\n  lightgray: \"d3d3d3\",\r\n  lightgreen: \"90ee90\",\r\n  lightgrey: \"d3d3d3\",\r\n  lightpink: \"ffb6c1\",\r\n  lightsalmon: \"ffa07a\",\r\n  lightseagreen: \"20b2aa\",\r\n  lightskyblue: \"87cefa\",\r\n  lightslategray: \"789\",\r\n  lightslategrey: \"789\",\r\n  lightsteelblue: \"b0c4de\",\r\n  lightyellow: \"ffffe0\",\r\n  lime: \"0f0\",\r\n  limegreen: \"32cd32\",\r\n  linen: \"faf0e6\",\r\n  magenta: \"f0f\",\r\n  maroon: \"800000\",\r\n  mediumaquamarine: \"66cdaa\",\r\n  mediumblue: \"0000cd\",\r\n  mediumorchid: \"ba55d3\",\r\n  mediumpurple: \"9370db\",\r\n  mediumseagreen: \"3cb371\",\r\n  mediumslateblue: \"7b68ee\",\r\n  mediumspringgreen: \"00fa9a\",\r\n  mediumturquoise: \"48d1cc\",\r\n  mediumvioletred: \"c71585\",\r\n  midnightblue: \"191970\",\r\n  mintcream: \"f5fffa\",\r\n  mistyrose: \"ffe4e1\",\r\n  moccasin: \"ffe4b5\",\r\n  navajowhite: \"ffdead\",\r\n  navy: \"000080\",\r\n  oldlace: \"fdf5e6\",\r\n  olive: \"808000\",\r\n  olivedrab: \"6b8e23\",\r\n  orange: \"ffa500\",\r\n  orangered: \"ff4500\",\r\n  orchid: \"da70d6\",\r\n  palegoldenrod: \"eee8aa\",\r\n  palegreen: \"98fb98\",\r\n  paleturquoise: \"afeeee\",\r\n  palevioletred: \"db7093\",\r\n  papayawhip: \"ffefd5\",\r\n  peachpuff: \"ffdab9\",\r\n  peru: \"cd853f\",\r\n  pink: \"ffc0cb\",\r\n  plum: \"dda0dd\",\r\n  powderblue: \"b0e0e6\",\r\n  purple: \"800080\",\r\n  rebeccapurple: \"663399\",\r\n  red: \"f00\",\r\n  rosybrown: \"bc8f8f\",\r\n  royalblue: \"4169e1\",\r\n  saddlebrown: \"8b4513\",\r\n  salmon: \"fa8072\",\r\n  sandybrown: \"f4a460\",\r\n  seagreen: \"2e8b57\",\r\n  seashell: \"fff5ee\",\r\n  sienna: \"a0522d\",\r\n  silver: \"c0c0c0\",\r\n  skyblue: \"87ceeb\",\r\n  slateblue: \"6a5acd\",\r\n  slategray: \"708090\",\r\n  slategrey: \"708090\",\r\n  snow: \"fffafa\",\r\n  springgreen: \"00ff7f\",\r\n  steelblue: \"4682b4\",\r\n  tan: \"d2b48c\",\r\n  teal: \"008080\",\r\n  thistle: \"d8bfd8\",\r\n  tomato: \"ff6347\",\r\n  turquoise: \"40e0d0\",\r\n  violet: \"ee82ee\",\r\n  wheat: \"f5deb3\",\r\n  white: \"fff\",\r\n  whitesmoke: \"f5f5f5\",\r\n  yellow: \"ff0\",\r\n  yellowgreen: \"9acd32\",\r\n};\r\n\r\nColor.initClass();\r\n","import _ from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\n// Modern Gradient class\r\nexport class Gradient extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"start\", {\r\n      get() {\r\n        return this._start;\r\n      },\r\n      set(value) {\r\n        this._start = new Color(value);\r\n      },\r\n    });\r\n\r\n    this.define(\"end\", {\r\n      get() {\r\n        return this._end;\r\n      },\r\n      set(value) {\r\n        this._end = new Color(value);\r\n      },\r\n    });\r\n\r\n    this.define(\"angle\", {\r\n      get() {\r\n        return this._angle;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) this._angle = value;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    const defaults = {\r\n      start: \"black\",\r\n      end: \"white\",\r\n      angle: 0,\r\n    };\r\n    super({ ...defaults, ...options });\r\n  }\r\n\r\n  toCSS() {\r\n    return `linear-gradient(${this.angle}deg, ${this.start}, ${this.end})`;\r\n  }\r\n\r\n  mix(gradientB, fraction, model) {\r\n    return Gradient.mix(this, gradientB, fraction, model);\r\n  }\r\n\r\n  isEqual(gradientB) {\r\n    return Gradient.equal(this, gradientB);\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} start:${this.start} end:${this.end} angle:${this.angle}>`;\r\n  }\r\n\r\n  static mix(gradientA, gradientB, fraction = 0.5, model) {\r\n    fraction = Utils.clamp(fraction, 0, 1);\r\n\r\n    const start = Color.mix(\r\n      gradientA.start,\r\n      gradientB.start,\r\n      fraction,\r\n      false,\r\n      model\r\n    );\r\n    const end = Color.mix(gradientA.end, gradientB.end, fraction, false, model);\r\n\r\n    const angle =\r\n      gradientA.angle + (gradientB.angle - gradientA.angle) * fraction;\r\n\r\n    return new Gradient({ start, end, angle });\r\n  }\r\n\r\n  static random() {\r\n    const hue = Math.random() * 360;\r\n    const colorA = new Color({ h: hue });\r\n    const colorB = new Color({ h: hue + 40 });\r\n\r\n    return new Gradient({\r\n      start: colorA,\r\n      end: colorB,\r\n      angle: Math.round(Math.random() * 360),\r\n    });\r\n  }\r\n\r\n  static isGradient(gradient) {\r\n    return !_.isEmpty(this._asPlainObject(gradient));\r\n  }\r\n\r\n  static isGradientObject(gradient) {\r\n    return gradient instanceof Gradient;\r\n  }\r\n\r\n  static equal(gradientA, gradientB) {\r\n    if (!Gradient.isGradient(gradientA)) return false;\r\n    if (!Gradient.isGradient(gradientB)) return false;\r\n\r\n    const equalAngle = Math.abs(gradientA.angle - gradientB.angle) % 360 === 0;\r\n    const equalStart = Color.equal(gradientA.start, gradientB.start);\r\n    const equalEnd = Color.equal(gradientA.end, gradientB.end);\r\n\r\n    return equalAngle && equalStart && equalEnd;\r\n  }\r\n\r\n  static multiplyAlpha(gradient, alpha) {\r\n    if (!this.isGradientObject(gradient)) gradient = new Gradient(gradient);\r\n\r\n    return new Gradient({\r\n      start: gradient.start.multiplyAlpha(alpha),\r\n      end: gradient.end.multiplyAlpha(alpha),\r\n      angle: gradient.angle,\r\n    });\r\n  }\r\n\r\n  static _asPlainObject(gradient) {\r\n    return _.pick(gradient, [\"start\", \"end\", \"angle\"]);\r\n  }\r\n}\r\nGradient.initClass();\r\n","export const Gestures = Object.freeze({\r\n  // Tap\r\n  Tap: \"tap\",\r\n  TapStart: \"tapstart\",\r\n  TapEnd: \"tapend\",\r\n  DoubleTap: \"doubletap\",\r\n\r\n  // Force Tap\r\n  ForceTap: \"forcetap\",\r\n  ForceTapChange: \"forcetapchange\",\r\n  ForceTapStart: \"forcetapstart\",\r\n  ForceTapEnd: \"forcetapend\",\r\n\r\n  // Long Press\r\n  LongPress: \"longpress\",\r\n  LongPressStart: \"longpressstart\",\r\n  LongPressEnd: \"longpressend\",\r\n\r\n  // Swipe\r\n  Swipe: \"swipe\",\r\n  SwipeStart: \"swipestart\",\r\n  SwipeEnd: \"swipeend\",\r\n\r\n  SwipeUp: \"swipeup\",\r\n  SwipeUpStart: \"swipeupstart\",\r\n  SwipeUpEnd: \"swipeupend\",\r\n\r\n  SwipeDown: \"swipedown\",\r\n  SwipeDownStart: \"swipedownstart\",\r\n  SwipeDownEnd: \"swipedownend\",\r\n\r\n  SwipeLeft: \"swipeleft\",\r\n  SwipeLeftStart: \"swipeleftstart\",\r\n  SwipeLeftEnd: \"swipeleftend\",\r\n\r\n  SwipeRight: \"swiperight\",\r\n  SwipeRightStart: \"swiperightstart\",\r\n  SwipeRightEnd: \"swiperightend\",\r\n\r\n  // Edge Swipe\r\n  EdgeSwipe: \"edgeswipe\",\r\n  EdgeSwipeStart: \"edgeswipestart\",\r\n  EdgeSwipeEnd: \"edgeswipeend\",\r\n\r\n  EdgeSwipeTop: \"edgeswipetop\",\r\n  EdgeSwipeTopStart: \"edgeswipetopstart\",\r\n  EdgeSwipeTopEnd: \"edgeswipetopend\",\r\n\r\n  EdgeSwipeRight: \"edgeswiperight\",\r\n  EdgeSwipeRightStart: \"edgeswiperightstart\",\r\n  EdgeSwipeRightEnd: \"edgeswiperightend\",\r\n\r\n  EdgeSwipeBottom: \"edgeswipebottom\",\r\n  EdgeSwipeBottomStart: \"edgeswipebottomstart\",\r\n  EdgeSwipeBottomEnd: \"edgeswipebottomend\",\r\n\r\n  EdgeSwipeLeft: \"edgeswipeleft\",\r\n  EdgeSwipeLeftStart: \"edgeswipeleftstart\",\r\n  EdgeSwipeLeftEnd: \"edgeswipeleftend\",\r\n\r\n  // Pan\r\n  Pan: \"pan\",\r\n  PanStart: \"panstart\",\r\n  PanEnd: \"panend\",\r\n  PanLeft: \"panleft\",\r\n  PanRight: \"panright\",\r\n  PanUp: \"panup\",\r\n  PanDown: \"pandown\",\r\n\r\n  // Pinch\r\n  Pinch: \"pinch\",\r\n  PinchStart: \"pinchstart\",\r\n  PinchEnd: \"pinchend\",\r\n\r\n  // Scale\r\n  Scale: \"scale\",\r\n  ScaleStart: \"scalestart\",\r\n  ScaleEnd: \"scaleend\",\r\n\r\n  // Rotate\r\n  Rotate: \"rotate\",\r\n  RotateStart: \"rotatestart\",\r\n  RotateEnd: \"rotateend\",\r\n});\r\n","import Utils from \"./Utils.js\";\r\nimport _ from \"./Underscore.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\nconst Events = {\r\n  // Standard DOM events\r\n  MouseUp: \"mouseup\",\r\n  MouseDown: \"mousedown\",\r\n  MouseOver: \"mouseover\",\r\n  MouseOut: \"mouseout\",\r\n  MouseEnter: \"mouseenter\",\r\n  MouseLeave: \"mouseleave\",\r\n  MouseMove: \"mousemove\",\r\n  MouseWheel: \"mousewheel\",\r\n  DoubleClick: \"dblclick\",\r\n  MouseDoubleClick: \"dblclick\", // Alias\r\n};\r\n\r\n// Pointer support detection\r\nconst supportsPointerEvents =\r\n  window.onpointerdown === null &&\r\n  window.onpointermove === null &&\r\n  window.onpointerup === null;\r\n\r\nEvents.PointerUp = \"pointerup\";\r\nEvents.PointerDown = \"pointerdown\";\r\nEvents.PointerOver = \"pointerover\";\r\nEvents.PointerOut = \"pointerout\";\r\nEvents.PointerMove = \"pointermove\";\r\n\r\n// Touch events\r\nEvents.enableEmulatedTouchEvents = (enable = true) => {\r\n  if (supportsPointerEvents) return;\r\n\r\n  if (enable) {\r\n    Events.TouchStart = Events.MouseDown;\r\n    Events.TouchEnd = Events.MouseUp;\r\n    Events.TouchMove = Events.MouseMove;\r\n    Events.Click = \"touchend\";\r\n  } else {\r\n    Events.TouchStart = \"touchstart\";\r\n    Events.TouchEnd = \"touchend\";\r\n    Events.TouchMove = \"touchmove\";\r\n    Events.Click = Utils.isTouch() ? \"touchend\" : \"mouseup\";\r\n  }\r\n};\r\n\r\n// Ensure touch events work on desktop too\r\nEvents.enableEmulatedTouchEvents(!Utils.isTouch());\r\n\r\n// Use pointer events if supported\r\nif (supportsPointerEvents) {\r\n  Events.MouseUp = Events.PointerUp;\r\n  Events.MouseDown = Events.PointerDown;\r\n  Events.MouseOver = Events.PointerOver;\r\n  Events.MouseOut = Events.PointerOut;\r\n  Events.MouseMove = Events.PointerMove;\r\n\r\n  Events.TouchStart = Events.PointerDown;\r\n  Events.TouchEnd = Events.PointerUp;\r\n  Events.TouchMove = Events.PointerMove;\r\n  Events.Click = Events.PointerUp;\r\n}\r\n\r\n// Animation events\r\nEvents.AnimationStart = \"start\";\r\nEvents.AnimationHalt = \"halt\";\r\nEvents.AnimationStop = \"stop\";\r\nEvents.AnimationEnd = \"end\";\r\n\r\nEvents.AnimationDidStart = Events.AnimationStart; // Deprecated\r\nEvents.AnimationDidStop = Events.AnimationStop; // Deprecated\r\nEvents.AnimationDidEnd = Events.AnimationEnd; // Deprecated\r\n\r\n// State events\r\nEvents.StateSwitchStart = \"stateswitchstart\";\r\nEvents.StateSwitchStop = \"stateswitchstop\";\r\nEvents.StateSwitchEnd = \"stateswitchend\";\r\n\r\nEvents.StateWillSwitch = Events.StateSwitchStart; // Deprecated\r\nEvents.StateDidSwitch = Events.StateSwitchEnd; // Deprecated\r\n\r\n// Scroll events\r\nEvents.Scroll = \"scroll\";\r\n\r\n// Image events\r\nEvents.ImageLoaded = \"imageload\";\r\nEvents.ImageLoadError = \"imageerror\";\r\nEvents.ImageLoadCancelled = \"imagecancelled\";\r\n\r\n// Sensor events\r\nEvents.DeviceOrientation = \"deviceorientation\";\r\nEvents.DeviceMotion = \"devicemotion\";\r\n\r\n// Merge gesture events\r\nObject.assign(Events, Gestures);\r\n\r\n// Extract touch from any event\r\nEvents.touchEvent = (event) => {\r\n  return event.touches?.[0] ?? event.changedTouches?.[0] ?? event;\r\n};\r\n\r\n// Wrapping for Framer\r\nEvents.wrap = (element) => Framer.CurrentContext.domEventManager.wrap(element);\r\n\r\n// Check if an event is a gesture\r\nEvents.isGesture = (eventName) => Object.values(Gestures).includes(eventName);\r\n\r\n// Interactive events\r\nconst interactiveEvents = [\r\n  ...Object.values(Gestures),\r\n  Events.TouchStart,\r\n  Events.TouchEnd,\r\n  Events.MouseUp,\r\n  Events.MouseDown,\r\n  Events.MouseWheel,\r\n  Events.DoubleClick,\r\n];\r\n\r\nEvents.isInteractive = (eventName) => interactiveEvents.includes(eventName);\r\n\r\nexport { Events };\r\n","import _ from \"./Underscore.js\";\r\n\r\nconst Originals = {\r\n  Layer: {\r\n    backgroundColor: \"rgba(123, 123, 123, 0.5)\",\r\n    color: \"white\",\r\n    borderColor: \"rgba(123, 123, 123, 0.5)\",\r\n    width: 200,\r\n    height: 200,\r\n  },\r\n  Animation: {\r\n    curve: \"ease\", // or \"spring(400, 40, 0)\"\r\n    time: 1,\r\n    repeat: 0,\r\n    delay: 0,\r\n    debug: false,\r\n    colorModel: \"husl\",\r\n    animate: true,\r\n    looping: false,\r\n  },\r\n  Context: {\r\n    perspective: 0,\r\n    perspectiveOriginX: 0.5,\r\n    perspectiveOriginY: 0.5,\r\n    parent: null,\r\n    name: null,\r\n  },\r\n  DeviceComponent: {\r\n    fullScreen: false,\r\n    padding: 50,\r\n    deviceType: \"apple-iphone-8-silver\",\r\n    deviceZoom: \"fit\",\r\n    contentZoom: 1,\r\n    orientation: \"portrait\",\r\n    keyboard: false,\r\n    animationOptions: {\r\n      time: 0.3,\r\n      curve: \"ease-in-out\",\r\n    },\r\n  },\r\n  LayerDraggable: {\r\n    momentum: true,\r\n    momentumOptions: { friction: 2.1, tolerance: 1 },\r\n    bounce: true,\r\n    bounceOptions: { friction: 40, tension: 200, tolerance: 1 },\r\n    directionLock: false,\r\n    directionLockThreshold: { x: 10, y: 10 },\r\n    overdrag: true,\r\n    overdragScale: 0.5,\r\n    pixelAlign: true,\r\n    velocityTimeout: 100,\r\n    velocityScale: 890,\r\n  },\r\n  FrictionSimulator: { friction: 2, tolerance: 1 / 10 },\r\n  Spring: { dampingRatio: 0.5, mass: 1, velocity: 0 },\r\n  SpringSimulator: { tension: 500, friction: 10, tolerance: 1 / 10000 },\r\n  MomentumBounceSimulator: {\r\n    momentum: { friction: 2, tolerance: 10 },\r\n    bounce: { tension: 500, friction: 10, tolerance: 1 },\r\n  },\r\n  GridComponent: {\r\n    rows: 3,\r\n    columns: 3,\r\n    spacing: 0,\r\n    backgroundColor: \"transparent\",\r\n  },\r\n  ScrollComponent: {\r\n    clip: true,\r\n    mouseWheelEnabled: false,\r\n    backgroundColor: null,\r\n  },\r\n  Hints: { color: \"rgba(144, 19, 254, 0.8)\" },\r\n  Shadow: {\r\n    x: 0,\r\n    y: 0,\r\n    color: \"rgba(123, 123, 123, 0.5)\",\r\n    type: \"box\",\r\n    blur: 0,\r\n    spread: 0,\r\n  },\r\n};\r\n\r\nexport const Defaults = {\r\n  getDefaults(className, options = {}) {\r\n    if (!Originals[className] || !Framer.Defaults?.[className]) return {};\r\n\r\n    const optsClone = _.clone(options);\r\n    const defaults = _.cloneDeep(Originals[className]);\r\n\r\n    for (const [k, v] of Object.entries(Framer.Defaults[className])) {\r\n      defaults[k] =\r\n        _.isFunction(v) && !(className === \"Animation\" && k === \"curve\")\r\n          ? v()\r\n          : v;\r\n    }\r\n\r\n    for (const [k, v] of Object.entries(defaults)) {\r\n      if (!optsClone.hasOwnProperty(k)) optsClone[k] = v;\r\n    }\r\n\r\n    return optsClone;\r\n  },\r\n\r\n  setup() {\r\n    if (window.FramerDefaults) {\r\n      for (const [className, classValues] of Object.entries(\r\n        window.FramerDefaults\r\n      )) {\r\n        Object.assign(Originals[className], classValues);\r\n      }\r\n    }\r\n    return this.reset();\r\n  },\r\n\r\n  reset() {\r\n    window.Framer.Defaults = _.cloneDeep(Originals);\r\n    return window.Framer.Defaults;\r\n  },\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport { Color } from \"./Color.js\";\r\n\r\nexport class SVG {\r\n  static validFill(value) {\r\n    return Color.validColorValue(value) || _.startsWith(value, \"url(\");\r\n  }\r\n\r\n  static toFill(value) {\r\n    if (_.startsWith(value, \"url(\")) {\r\n      return value;\r\n    } else {\r\n      return Color.toColor(value);\r\n    }\r\n  }\r\n\r\n  static updateGradientSVG(svgLayer) {\r\n    if (svgLayer.__constructor) {\r\n      return;\r\n    }\r\n    if (!Gradient.isGradient(svgLayer.gradient)) {\r\n      if (svgLayer._elementGradientSVG != null) {\r\n        svgLayer._elementGradientSVG.innerHTML = \"\";\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!svgLayer._elementGradientSVG) {\r\n      svgLayer._elementGradientSVG = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"svg\"\r\n      );\r\n      svgLayer._element.appendChild(svgLayer._elementGradientSVG);\r\n    }\r\n\r\n    const id = `gradient-${svgLayer.id}`;\r\n    svgLayer._elementGradientSVG.innerHTML = `\\\r\n<linearGradient id='${id}' gradientTransform='rotate(${\r\n      svgLayer.gradient.angle - 90\r\n    }, 0.5, 0.5)' >\r\n\t<stop offset=\"0\" stop-color='#${svgLayer.gradient.start.toHex()}' stop-opacity='${\r\n      svgLayer.gradient.start.a\r\n    }' />\r\n\t<stop offset=\"1\" stop-color='#${svgLayer.gradient.end.toHex()}' stop-opacity='${\r\n      svgLayer.gradient.end.a\r\n    }' />\r\n</linearGradient>\\\r\n`;\r\n    return (svgLayer.fill = `url(#${id})`);\r\n  }\r\n\r\n  static updateImagePatternSVG(svgLayer) {\r\n    if (svgLayer.__constructor) {\r\n      return;\r\n    }\r\n\r\n    if (!svgLayer.image) {\r\n      if (svgLayer._elementImagePatternSVG != null) {\r\n        svgLayer._elementImagePatternSVG.innerHTML = \"\";\r\n      }\r\n      return;\r\n    }\r\n\r\n    let transform = \"\";\r\n\r\n    if (\r\n      [\"fill\", \"fit\", \"contain\", \"cover\"].includes(svgLayer.backgroundSize) &&\r\n      svgLayer.imageSize\r\n    ) {\r\n      let scaleX = 1;\r\n      let scaleY = 1;\r\n      let offsetX = 0;\r\n      let offsetY = 0;\r\n\r\n      const imageWidth = svgLayer.imageSize.width;\r\n      const imageHeight = svgLayer.imageSize.height;\r\n\r\n      const imageRatio = imageWidth / imageHeight;\r\n      const realWidth = svgLayer.height * imageRatio;\r\n      const realHeight = svgLayer.width / imageRatio;\r\n      const validScaleX = realWidth / svgLayer.width;\r\n      const validScaleY = realHeight / svgLayer.height;\r\n\r\n      const fillBackground = [\"fill\", \"cover\"].includes(\r\n        svgLayer.backgroundSize\r\n      );\r\n\r\n      if (\r\n        (fillBackground && validScaleY > validScaleX) ||\r\n        (!fillBackground && validScaleY < validScaleX)\r\n      ) {\r\n        scaleY = validScaleY;\r\n        offsetY = (1 - validScaleY) / 2;\r\n      } else {\r\n        scaleX = validScaleX;\r\n        offsetX = (1 - validScaleX) / 2;\r\n      }\r\n\r\n      transform = `transform=\"translate(${offsetX}, ${offsetY}) scale(${scaleX}, ${scaleY})\" `;\r\n    }\r\n\r\n    if (!svgLayer._elementImagePatternSVG) {\r\n      svgLayer._elementImagePatternSVG = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"svg\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\r\n        \"xmlns\",\r\n        \"http://www.w3.org/2000/svg\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\r\n        \"xmlns:xlink\",\r\n        \"http://www.w3.org/1999/xlink\"\r\n      );\r\n      svgLayer._elementImagePatternSVG.setAttribute(\"width\", \"100%\");\r\n      svgLayer._elementImagePatternSVG.setAttribute(\"height\", \"100%\");\r\n      svgLayer._element.appendChild(svgLayer._elementImagePatternSVG);\r\n    }\r\n\r\n    const id = `image-pattern-${svgLayer.id}`;\r\n    svgLayer._elementImagePatternSVG.innerHTML = `\\\r\n<pattern id=\"${id}\" width=\"100%\" height=\"100%\" patternContentUnits=\"objectBoundingBox\">\r\n\t<image width=\"1\" height=\"1\" xlink:href=${svgLayer.image} preserveAspectRatio=\"none\" ${transform} />\r\n</pattern>\\\r\n`;\r\n    return window.requestAnimationFrame(() =>\r\n      window.requestAnimationFrame(() => (svgLayer.fill = `url(#${id})`))\r\n    );\r\n  }\r\n  // Utils.delay 0.1, -> svgLayer.fill = \"url(##{id})\"\r\n\r\n  static constructSVGElements(root, elements, PathClass, GroupClass) {\r\n    const targets = {};\r\n    let children = [];\r\n\r\n    if (elements != null) {\r\n      for (var element of Array.from(elements)) {\r\n        if (!(element instanceof SVGElement)) {\r\n          // Children can contain text nodes\r\n          continue;\r\n        }\r\n        var name = element.getAttribute(\"name\");\r\n        if (name == null) {\r\n          if (element instanceof SVGGElement) {\r\n            var defsResult = this.constructSVGElements(\r\n              root,\r\n              element.childNodes,\r\n              PathClass,\r\n              GroupClass\r\n            );\r\n            _.extend(targets, defsResult.targets);\r\n            children = children.concat(defsResult.children);\r\n            continue;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        var options = {};\r\n        options.name = name;\r\n        options.parent = root;\r\n\r\n        if (element instanceof SVGGElement) {\r\n          var group = new GroupClass(element, options);\r\n          children.push(group);\r\n          _.extend(targets, group.elements);\r\n          if (element.id != null && element.id !== \"\") {\r\n            targets[element.id] = group;\r\n          }\r\n          continue;\r\n        }\r\n        if (\r\n          element instanceof SVGPathElement ||\r\n          element instanceof SVGUseElement\r\n        ) {\r\n          var path = new PathClass(element, options);\r\n          children.push(path);\r\n          if (path._path.id != null && path._path.id !== \"\") {\r\n            var { id } = path._path;\r\n            targets[id] = path;\r\n          }\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n    return { targets, children };\r\n  }\r\n\r\n  static isPath(path) {\r\n    return path instanceof Framer.SVGPath;\r\n  }\r\n}\r\n","const { BezierCurveAnimator } = require(\"./BezierCurveAnimator\");\r\nconst {\r\n  computeDerivedCurveOptions,\r\n  computeDuration,\r\n  computeDampingRatio,\r\n} = require(\"./SpringCurveValueConverter\");\r\nconst { SpringRK4Animator } = require(\"./SpringRK4Animator\");\r\nconst { Defaults } = require(\"../Defaults\");\r\n\r\nconst Bezier = (...values) =>\r\n  function (options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (values.length > 0) {\r\n      options.values = values;\r\n    }\r\n    return new BezierCurveAnimator(options);\r\n  };\r\n\r\n// We define each in a seperate function here\r\n// so they become named functions\r\n// and Framer.Curves.Bezier.ease.name is set\r\nconst BezierDefaults = {\r\n  linear(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0, 0, 1, 1)(options);\r\n  },\r\n  ease(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.25, 0.1, 0.25, 1)(options);\r\n  },\r\n  easeIn(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.42, 0, 1, 1)(options);\r\n  },\r\n  easeOut(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0, 0, 0.58, 1)(options);\r\n  },\r\n  easeInOut(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return Bezier(0.42, 0, 0.58, 1)(options);\r\n  },\r\n};\r\n\r\nconst Spring = function (dampingRatio, mass, velocity) {\r\n  let curveOptions = {};\r\n  if (dampingRatio != null && _.isFinite(dampingRatio)) {\r\n    curveOptions.dampingRatio = dampingRatio;\r\n  }\r\n  if (mass != null) {\r\n    curveOptions.mass = mass;\r\n  }\r\n  if (velocity != null) {\r\n    curveOptions.velocity = velocity;\r\n  }\r\n  if (!_.isFinite(dampingRatio) && typeof dampingRatio === \"object\") {\r\n    curveOptions = dampingRatio;\r\n    if (curveOptions.damping != null && curveOptions.dampingRatio == null) {\r\n      curveOptions.dampingRatio = curveOptions.damping;\r\n    }\r\n  }\r\n  if (curveOptions.tension == null && curveOptions.friction == null) {\r\n    curveOptions = Defaults.getDefaults(\"Spring\", curveOptions);\r\n  }\r\n\r\n  return function (options) {\r\n    let duration;\r\n    if (curveOptions.dampingRatio != null) {\r\n      duration =\r\n        (options != null ? options.time : undefined) != null\r\n          ? options != null\r\n            ? options.time\r\n            : undefined\r\n          : 1;\r\n      const derivedOptions = computeDerivedCurveOptions(\r\n        curveOptions.dampingRatio,\r\n        duration,\r\n        curveOptions.velocity,\r\n        curveOptions.mass\r\n      );\r\n      curveOptions = _.defaults(derivedOptions, curveOptions);\r\n    } else {\r\n      if (options != null) {\r\n        delete options.time;\r\n      }\r\n    }\r\n    options = _.defaults(curveOptions, options);\r\n    const animator = new SpringRK4Animator(options);\r\n    if (duration != null) {\r\n      animator.time = duration;\r\n    }\r\n    return animator;\r\n  };\r\n};\r\n\r\n_.assign(Bezier, BezierDefaults);\r\nSpring.computeDerivedCurveOptions = computeDerivedCurveOptions;\r\nSpring.computeDuration = computeDuration;\r\nSpring.computeDampingRatio = computeDampingRatio;\r\n\r\nconst parseFunction = function (string) {\r\n  let value;\r\n  if (!_.isString(string)) {\r\n    return null;\r\n  }\r\n\r\n  // This parses functions with or without arguments like Bezier(0.1, 0.2, 0.3, 0.4) and Spring(damping: 0.5)\r\n  const regex = /.*(Spring|Bezier)(?:\\(\\s*{?([\\w:\\s,.]*)}?\\s*\\)|\\.(\\w+))?/;\r\n  let matches = regex.exec(string);\r\n  if (matches == null) {\r\n    return null;\r\n  }\r\n  let [match, type, args, prop] = Array.from(matches);\r\n  const result = { name: type, property: null, arguments: null };\r\n  if (prop != null) {\r\n    result.property = prop;\r\n    return result;\r\n  }\r\n  if (args == null) {\r\n    return result;\r\n  }\r\n  if (args.length === 0) {\r\n    result.arguments = [];\r\n  }\r\n\r\n  const argumentsRegex = /\\s*([\\w]+)\\s*:\\s*([\\d.]+)\\s*,?/g;\r\n  const argumentObject = {};\r\n  while ((matches = argumentsRegex.exec(args))) {\r\n    let property;\r\n    [match, property, value] = Array.from(matches);\r\n    value = parseFloat(value);\r\n    if (!isNaN(value)) {\r\n      argumentObject[property] = value;\r\n    }\r\n  }\r\n  if (_.size(argumentObject) > 0) {\r\n    result.arguments = argumentObject;\r\n    return result;\r\n  }\r\n\r\n  const numbersRegex = /\\s*([.\\d]+)\\s*/g;\r\n  const numbers = [];\r\n  while ((matches = numbersRegex.exec(args))) {\r\n    [match, value] = Array.from(matches);\r\n    value = parseFloat(value);\r\n    numbers.push(value);\r\n  }\r\n  result.arguments = numbers;\r\n  return result;\r\n};\r\n\r\nconst fromDefinition = function (definition) {\r\n  if (definition == null) {\r\n    return null;\r\n  }\r\n  const curve = Framer.Curves[definition.name];\r\n  if (curve == null) {\r\n    return null;\r\n  }\r\n\r\n  if (definition.property != null) {\r\n    return curve[definition.property];\r\n  }\r\n  if (definition.arguments == null) {\r\n    return curve;\r\n  }\r\n\r\n  if (_.isArray(definition.arguments)) {\r\n    return curve(...Array.from(definition.arguments || []));\r\n  }\r\n\r\n  return curve(definition.arguments);\r\n};\r\nexport { parseFunction, fromDefinition, Spring, Bezier };\r\n\r\nexport const fromString = (string) => {\r\n  if (!_.isString(string)) {\r\n    return null;\r\n  }\r\n  let func = fromDefinition(parseFunction(string));\r\n  if (func != null) {\r\n    return func;\r\n  }\r\n  func = Utils.parseFunction(string);\r\n  const args = func.args.map(parseFloat);\r\n  switch (func.name) {\r\n    case \"linear\":\r\n      return Bezier.linear;\r\n    case \"ease\":\r\n      return Bezier.ease;\r\n    case \"ease-in\":\r\n      return Bezier.easeIn;\r\n    case \"ease-out\":\r\n      return Bezier.easeOut;\r\n    case \"ease-in-out\":\r\n      return Bezier.easeInOut;\r\n    case \"bezier-curve\":\r\n    case \"cubic-bezier\":\r\n      return Bezier(...Array.from(args || []));\r\n    case \"spring\":\r\n    case \"spring-rk4\":\r\n    case \"spring-dho\":\r\n      var pairs = _.zipWith(\r\n        [\"tension\", \"friction\", \"velocity\", \"tolerance\"],\r\n        args,\r\n        [250, 25, 0, 1 / 100],\r\n        (key, value, defaults) => [key, value != null ? value : defaults]\r\n      );\r\n      var object = _.fromPairs(pairs);\r\n      return Spring(object);\r\n    default:\r\n      return Bezier.linear;\r\n  }\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { SVG } from \"./SVG.js\";\r\nimport * as Curves from \"./Animators/Curves.js\";\r\n\r\nconst numberRE = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/;\r\nconst relativePropertyRE = new RegExp(\r\n  `^(?:([+-])=|)(${numberRE.source})([a-z%]*)$`,\r\n  \"i\"\r\n);\r\n\r\nexport const isRelativeProperty = (v) =>\r\n  _.isString(v) && relativePropertyRE.test(v);\r\n\r\nexport const evaluateRelativeProperty = (target, k, v) => {\r\n  const match = relativePropertyRE.exec(v);\r\n  if (!match) return +v;\r\n  const [, sign, number, unit] = match;\r\n  if (sign) return target[k] + Number(sign + 1) * Number(number);\r\n  return +number;\r\n};\r\n\r\nexport class Animation extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"layer\", {\r\n      get() {\r\n        return this._layer;\r\n      },\r\n    });\r\n\r\n    this.define(\"isPending\", {\r\n      get() {\r\n        return this._delayTimer != null;\r\n      },\r\n    });\r\n\r\n    this.define(\"isAnimating\", {\r\n      get() {\r\n        let needle;\r\n        return (\r\n          (needle = this), Array.from(this.layer.animations()).includes(needle)\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"looping\", {\r\n      get() {\r\n        return this.options.looping;\r\n      },\r\n      set(value) {\r\n        if (this.options != null) {\r\n          this.options.looping = value;\r\n        }\r\n        if (\r\n          (this.options != null ? this.options.looping : undefined) &&\r\n          this.layer != null &&\r\n          !this.isAnimating\r\n        ) {\r\n          return this.restart();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"isNoop\", this.simpleProperty(\"isNoop\", false));\r\n  }\r\n\r\n  constructor(...args) {\r\n    // Old API detection\r\n\r\n    // animationA = new Animation\r\n    // \tlayer: layerA\r\n    // \tproperties:\r\n    // \t\tx: 100\r\n\r\n    this.start = this.start.bind(this);\r\n    this._instant = this._instant.bind(this);\r\n    this._noop = this._noop.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this.finish = this.finish.bind(this);\r\n    this._update = this._update.bind(this);\r\n    this._prepareUpdateValues = this._prepareUpdateValues.bind(this);\r\n    this._updateValues = this._updateValues.bind(this);\r\n    this._updateNumberValue = this._updateNumberValue.bind(this);\r\n    this._calculateNumericObjectValue =\r\n      this._calculateNumericObjectValue.bind(this);\r\n    this._updateNumericObjectValue = this._updateNumericObjectValue.bind(this);\r\n    this._updateColorValue = this._updateColorValue.bind(this);\r\n    this._updateGradientValue = this._updateGradientValue.bind(this);\r\n    this._updateShadows = this._updateShadows.bind(this);\r\n    this._updateTemplateValue = this._updateTemplateValue.bind(this);\r\n    let layer = null;\r\n    let properties = {};\r\n    let options = {};\r\n\r\n    // Actual current api\r\n    if (arguments.length === 3) {\r\n      layer = args[0];\r\n      properties = args[1];\r\n\r\n      options = {};\r\n\r\n      if (properties.options != null) {\r\n        options = _.clone(properties.options);\r\n      }\r\n\r\n      if (args[2]) {\r\n        options = _.extend({}, options, args[2]);\r\n      }\r\n    }\r\n\r\n    // Mix of current and old api\r\n    if (arguments.length === 2) {\r\n      layer = args[0];\r\n      if (args[1].properties != null) {\r\n        ({ properties } = args[1]);\r\n      } else {\r\n        properties = args[1];\r\n      }\r\n      if (args[1].options != null) {\r\n        ({ options } = args[1]);\r\n      }\r\n    }\r\n\r\n    // Old api\r\n    if (arguments.length === 1) {\r\n      ({ layer } = args[0]);\r\n      ({ properties } = args[0]);\r\n      if (args[0].options != null) {\r\n        ({ options } = args[0]);\r\n      } else {\r\n        options = args[0];\r\n      }\r\n    }\r\n\r\n    delete options.layer;\r\n    delete options.properties;\r\n    delete options.options;\r\n\r\n    this.options = _.cloneDeep(Defaults.getDefaults(\"Animation\", options));\r\n\r\n    super(...arguments);\r\n\r\n    this._layer = layer;\r\n\r\n    if (!(layer instanceof _Layer)) {\r\n      throw Error(\"Animation: missing layer\");\r\n    }\r\n\r\n    this.properties = Animation.filterAnimatableProperties(properties, layer);\r\n\r\n    if (properties.origin) {\r\n      console.warn(\r\n        \"Animation.origin: please use layer.originX and layer.originY\"\r\n      );\r\n    }\r\n\r\n    if (_.isString(this.options.curve)) {\r\n      this.options.curve = Curves.fromString(this.options.curve);\r\n    }\r\n    if (\r\n      this.options.curve === Curves.Spring ||\r\n      this.options.curve === Curves.Bezier\r\n    ) {\r\n      this.options.curve = this.options.curve.call();\r\n    }\r\n    this._originalState = this._currentState();\r\n    this._repeatCounter = this.options.repeat;\r\n  }\r\n\r\n  start() {\r\n    let k, start, v;\r\n    this._animator = this.options.curve(this.options);\r\n    this._target = this.layer;\r\n    this._stateA = this._currentState();\r\n    this._stateB = {};\r\n\r\n    for (k in this.properties) {\r\n      // Filter out properties that are literally equal\r\n      v = this.properties[k];\r\n      if (this._stateA[k] === v) {\r\n        continue;\r\n      }\r\n\r\n      // Evaluate function properties\r\n      if (_.isFunction(v)) {\r\n        v = v(this.layer, k);\r\n\r\n        // Evaluate relative properties\r\n      } else if (isRelativeProperty(v)) {\r\n        v = evaluateRelativeProperty(this._target, k, v);\r\n      }\r\n\r\n      // Filter out the properties that have equal values\r\n      if (this._stateA[k] !== v) {\r\n        this._stateB[k] = v;\r\n      }\r\n    }\r\n\r\n    if (_.keys(this._stateA).length === 0) {\r\n      console.warn(\"Animation: nothing to animate, no animatable properties\");\r\n      return this._noop();\r\n    }\r\n\r\n    if (_.isEqual(this._stateA, this._stateB)) {\r\n      console.warn(\r\n        \"Animation: nothing to animate, all properties are equal to what it is now\"\r\n      );\r\n      return this._noop();\r\n    }\r\n\r\n    if (_.keys(this._stateB).length === 0) {\r\n      return this._noop();\r\n    }\r\n\r\n    // If this animation wants to animate a property that is already being animated, it stops\r\n    // that currently running animation. If not, it allows them both to continue.\r\n    const object = this._target.animatingProperties();\r\n    for (var property in object) {\r\n      var animation = object[property];\r\n      if (this._stateA.hasOwnProperty(property)) {\r\n        animation.stop();\r\n      }\r\n\r\n      // We also need to account for derivatives from x, y\r\n      if (\r\n        property === \"x\" &&\r\n        (this._stateA.hasOwnProperty(\"minX\") ||\r\n          this._stateA.hasOwnProperty(\"midX\") ||\r\n          this._stateA.hasOwnProperty(\"maxX\"))\r\n      ) {\r\n        animation.stop();\r\n      }\r\n\r\n      if (\r\n        property === \"y\" &&\r\n        (this._stateA.hasOwnProperty(\"minY\") ||\r\n          this._stateA.hasOwnProperty(\"midY\") ||\r\n          this._stateA.hasOwnProperty(\"maxY\"))\r\n      ) {\r\n        animation.stop();\r\n      }\r\n    }\r\n\r\n    if (this.options.debug) {\r\n      console.log(\"Animation.start\");\r\n      for (k in this._stateB) {\r\n        v = this._stateB[k];\r\n        console.log(`\\t${k}: ${this._stateA[k]} -> ${this._stateB[k]}`);\r\n      }\r\n    }\r\n\r\n    // Add the callbacks\r\n    if (_.isFunction(this.options.onStart)) {\r\n      this.on(Events.AnimationStart, this.options.onStart);\r\n    }\r\n    if (_.isFunction(this.options.onHalt)) {\r\n      this.on(Events.AnimationHalt, this.options.onHalt);\r\n    }\r\n    if (_.isFunction(this.options.onStop)) {\r\n      this.on(Events.AnimationStop, this.options.onStop);\r\n    }\r\n    if (_.isFunction(this.options.onEnd)) {\r\n      this.on(Events.AnimationEnd, this.options.onEnd);\r\n    }\r\n\r\n    // See if we need to repeat this animation\r\n    // Todo: more repeat behaviours:\r\n    // 1) add (from end position) 2) reverse (loop between a and b)\r\n    this.once(\"end\", () => {\r\n      if (this._repeatCounter > 0 || this.looping) {\r\n        this.restart();\r\n        if (!this.looping) {\r\n          return this._repeatCounter--;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Figure out what kind of values we have so we don't have to do it in\r\n    // the actual update loop. This saves a lot of frame budget.\r\n    this._prepareUpdateValues();\r\n\r\n    // The option keywords animate and instant trigger an instant animation\r\n    if (this.options.animate === false || this.options.instant === true) {\r\n      // If animate is false we set everything immediately and skip the actual animation\r\n      start = this._instant;\r\n    } else {\r\n      start = this._start;\r\n    }\r\n\r\n    this.layer.context.addAnimation(this);\r\n    // If we have a delay, we wait a bit for it to start\r\n    if (this.options.delay) {\r\n      this._delayTimer = Utils.delay(this.options.delay, start);\r\n    } else {\r\n      start();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  stop(emit) {\r\n    if (emit == null) {\r\n      emit = true;\r\n    }\r\n    if (this._delayTimer != null) {\r\n      Framer.CurrentContext.removeTimer(this._delayTimer);\r\n      this._delayTimer = null;\r\n    }\r\n\r\n    this.layer.context.removeAnimation(this);\r\n    if (emit) {\r\n      this.emit(Events.AnimationHalt);\r\n    }\r\n    if (emit) {\r\n      this.emit(Events.AnimationStop);\r\n    }\r\n    return Framer.Loop.off(\"update\", this._update);\r\n  }\r\n\r\n  reverse() {\r\n    // TODO: Add some tests\r\n    const properties = _.clone(this._originalState);\r\n    for (var key in this.properties) {\r\n      var value = this.properties[key];\r\n      if (SVG.isPath(value)) {\r\n        value.reversed = !value.reversed;\r\n        properties[key] = value;\r\n      }\r\n    }\r\n    const options = _.clone(this.options);\r\n    return new Animation(this.layer, properties, options);\r\n  }\r\n\r\n  reset() {\r\n    return (() => {\r\n      const result = [];\r\n      for (var k in this._stateA) {\r\n        var v = this._stateA[k];\r\n        result.push((this._target[k] = v));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  restart() {\r\n    this.reset();\r\n    return this.start();\r\n  }\r\n\r\n  copy() {\r\n    const properties = _.clone(this.properties);\r\n    const options = _.clone(this.options);\r\n    return new Animation(this.layer, properties, options);\r\n  }\r\n\r\n  // A bunch of common aliases to minimize frustration\r\n  revert() {\r\n    return this.reverse();\r\n  }\r\n  inverse() {\r\n    return this.reverse();\r\n  }\r\n  invert() {\r\n    return this.reverse();\r\n  }\r\n\r\n  emit(event) {\r\n    super.emit(...arguments);\r\n    // Also emit this to the layer with self as argument\r\n    return this.layer.emit(event, this);\r\n  }\r\n\r\n  animatingProperties() {\r\n    return _.keys(this._stateA);\r\n  }\r\n\r\n  _instant() {\r\n    this.emit(Events.AnimationStart);\r\n    this._updateValues(1);\r\n    this.emit(Events.AnimationStop);\r\n    return this.emit(Events.AnimationEnd);\r\n  }\r\n\r\n  _noop() {\r\n    this.isNoop = true;\r\n    // We don't emit these so you can call layer.animate safely\r\n    // from the same layers layer.onAnimationEnd handler\r\n    // @emit(Events.AnimationStart)\r\n    // @emit(Events.AnimationStop)\r\n    // @emit(Events.AnimationEnd)\r\n    return !this.isNoop;\r\n  }\r\n\r\n  _start() {\r\n    this._delayTimer = null;\r\n    this.emit(Events.AnimationStart);\r\n    this._previousValue = 0;\r\n    return Framer.Loop.on(\"update\", this._update);\r\n  }\r\n\r\n  finish() {\r\n    this.stop();\r\n    return this._updateValues(1);\r\n  }\r\n\r\n  _update(delta) {\r\n    if (this._animator.finished()) {\r\n      let emit;\r\n      this._updateValues(1);\r\n      this.stop((emit = false));\r\n      this.emit(Events.AnimationStop);\r\n      return this.emit(Events.AnimationEnd);\r\n    } else {\r\n      return this._updateValues(this._animator.next(delta));\r\n    }\r\n  }\r\n\r\n  _prepareUpdateValues() {\r\n    this._valueUpdaters = {};\r\n    return (() => {\r\n      const result = [];\r\n      for (var k in this._stateB) {\r\n        var v = this._stateB[k];\r\n        if (SVG.isPath(v)) {\r\n          var path = v;\r\n          var direction = null;\r\n          var start = null;\r\n          var end = null;\r\n          switch (k) {\r\n            case \"x\":\r\n            case \"minX\":\r\n            case \"midX\":\r\n            case \"maxX\":\r\n            case \"width\":\r\n              direction = \"horizontal\";\r\n              break;\r\n            case \"y\":\r\n            case \"minY\":\r\n            case \"midY\":\r\n            case \"maxY\":\r\n            case \"height\":\r\n              direction = \"vertical\";\r\n              break;\r\n            case \"rotation\":\r\n            case \"rotationZ\":\r\n            case \"rotationX\":\r\n            case \"rotationY\":\r\n              direction = \"angle\";\r\n              break;\r\n          }\r\n\r\n          result.push(\r\n            (this._valueUpdaters[k] = path.valueUpdater(\r\n              direction,\r\n              this._target,\r\n              this._target[k]\r\n            ))\r\n          );\r\n        } else if (\r\n          Color.isColorObject(v) ||\r\n          Color.isColorObject(this._stateA[k])\r\n        ) {\r\n          result.push((this._valueUpdaters[k] = this._updateColorValue));\r\n        } else if (\r\n          Gradient.isGradient(v) ||\r\n          Gradient.isGradient(this._stateA[k])\r\n        ) {\r\n          this._valueUpdaters[k] = this._updateGradientValue;\r\n          // If the begin state is not set, animate from the same state but with alpha 0\r\n          result.push(\r\n            this._stateA[k] != null\r\n              ? this._stateA[k]\r\n              : (this._stateA[k] = Gradient.multiplyAlpha(v, 0))\r\n          );\r\n        } else if (k === \"borderWidth\") {\r\n          result.push(\r\n            (this._valueUpdaters[k] = this._updateNumericObjectValue.bind(\r\n              this,\r\n              [\"top\", \"left\", \"bottom\", \"right\"]\r\n            ))\r\n          );\r\n        } else if (k === \"borderRadius\") {\r\n          result.push(\r\n            (this._valueUpdaters[k] = this._updateNumericObjectValue.bind(\r\n              this,\r\n              [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]\r\n            ))\r\n          );\r\n        } else if (k === \"template\") {\r\n          result.push((this._valueUpdaters[k] = this._updateTemplateValue));\r\n        } else if (k === \"shadows\") {\r\n          result.push((this._valueUpdaters[k] = this._updateShadows));\r\n        } else {\r\n          result.push((this._valueUpdaters[k] = this._updateNumberValue));\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _updateValues(value) {\r\n    const delta = value - this._previousValue;\r\n    this._previousValue = value;\r\n    for (var k in this._stateB) {\r\n      var v = this._stateB[k];\r\n      this._valueUpdaters[k](k, value, delta);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _updateNumberValue(key, value) {\r\n    return (this._target[key] = Utils.mapRange(\r\n      value,\r\n      0,\r\n      1,\r\n      this._stateA[key],\r\n      this._stateB[key]\r\n    ));\r\n  }\r\n\r\n  _interpolateNumericObjectValues(propKeys, valueA, valueB, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    let result = {};\r\n\r\n    for (var propKey of Array.from(propKeys)) {\r\n      var keyValueA = _.isNumber(valueA)\r\n        ? valueA\r\n        : valueA != null\r\n        ? valueA[propKey]\r\n        : undefined;\r\n      var keyValueB = _.isNumber(valueB)\r\n        ? valueB\r\n        : valueB != null\r\n        ? valueB[propKey]\r\n        : undefined;\r\n      // If the key value is undefined in one state, use the value from the other\r\n      if (keyValueA == null) {\r\n        keyValueA = keyValueB;\r\n      }\r\n      if (keyValueB == null) {\r\n        keyValueB = keyValueA;\r\n      }\r\n      result[propKey] = Utils.mapRange(value, 0, 1, keyValueA, keyValueB);\r\n    }\r\n\r\n    // Flatten to a single number if all properties have the same value\r\n    if (flatten && _.uniq(_.values(result)).length === 1) {\r\n      result = result[propKeys[0]];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  _calculateNumericObjectValue(propKeys, key, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    const valueA = this._stateA[key];\r\n    const valueB = this._stateB[key];\r\n\r\n    return this._interpolateNumericObjectValues(\r\n      propKeys,\r\n      valueA,\r\n      valueB,\r\n      value,\r\n      flatten\r\n    );\r\n  }\r\n\r\n  _updateNumericObjectValue(propKeys, key, value, flatten) {\r\n    if (flatten == null) {\r\n      flatten = true;\r\n    }\r\n    const result = this._calculateNumericObjectValue(\r\n      propKeys,\r\n      key,\r\n      value,\r\n      flatten\r\n    );\r\n    return (this._target[key] = result);\r\n  }\r\n\r\n  _updateColorValue(key, value) {\r\n    return (this._target[key] = Color.mix(\r\n      this._stateA[key],\r\n      this._stateB[key],\r\n      value,\r\n      false,\r\n      this.options.colorModel\r\n    ));\r\n  }\r\n\r\n  _updateGradientValue(key, value) {\r\n    if (!this._stateB[key] && value === 1) {\r\n      this._target[key] = this._stateB[key];\r\n      return;\r\n    }\r\n\r\n    const gradientA = Gradient._asPlainObject(this._stateA[key]);\r\n    // If the end state is not set, animate to the same state but with alpha 0\r\n    const gradientB = Gradient._asPlainObject(\r\n      this._stateB[key] != null\r\n        ? this._stateB[key]\r\n        : Gradient.multiplyAlpha(gradientA, 0)\r\n    );\r\n\r\n    return (this._target[key] = Gradient.mix(\r\n      _.defaults(gradientA, gradientB),\r\n      _.defaults(gradientB, gradientA),\r\n      value,\r\n      this.options.colorModel\r\n    ));\r\n  }\r\n\r\n  _updateShadows(key, value) {\r\n    if (value === 1) {\r\n      this._target[key] = this._stateB[key];\r\n      return;\r\n    }\r\n\r\n    const result = [];\r\n    const numShadows = Math.max(\r\n      (this._stateA[key] != null ? this._stateA[key].length : undefined) != null\r\n        ? this._stateA[key] != null\r\n          ? this._stateA[key].length\r\n          : undefined\r\n        : 0,\r\n      (this._stateB[key] != null ? this._stateB[key].length : undefined) != null\r\n        ? this._stateB[key] != null\r\n          ? this._stateB[key].length\r\n          : undefined\r\n        : 0\r\n    );\r\n    for (\r\n      let index = 0, end = numShadows, asc = 0 <= end;\r\n      asc ? index < end : index > end;\r\n      asc ? index++ : index--\r\n    ) {\r\n      var left;\r\n      var fromShadow =\r\n        this._stateA[key] != null ? this._stateA[key][index] : undefined;\r\n      var toShadow =\r\n        this._stateB[key] != null ? this._stateB[key][index] : undefined;\r\n      if (toShadow == null && fromShadow == null) {\r\n        continue;\r\n      }\r\n      var type =\r\n        (left =\r\n          (toShadow != null ? toShadow.type : undefined) != null\r\n            ? toShadow != null\r\n              ? toShadow.type\r\n              : undefined\r\n            : fromShadow != null\r\n            ? fromShadow.type\r\n            : undefined) != null\r\n          ? left\r\n          : Framer.Defaults.Shadow.type;\r\n      if (fromShadow == null) {\r\n        fromShadow = _.defaults({ color: null, type }, Framer.Defaults.Shadow);\r\n      }\r\n      if (toShadow == null) {\r\n        toShadow = _.defaults({ color: null, type }, Framer.Defaults.Shadow);\r\n      }\r\n      _.defaults(fromShadow, Framer.Defaults.Shadow);\r\n      _.defaults(toShadow, Framer.Defaults.Shadow);\r\n      result[index] = this._interpolateNumericObjectValues(\r\n        [\"x\", \"y\", \"blur\", \"spread\"],\r\n        fromShadow,\r\n        toShadow,\r\n        value,\r\n        false\r\n      );\r\n      result[index].color = Color.mix(\r\n        fromShadow.color,\r\n        toShadow.color,\r\n        value,\r\n        false,\r\n        this.options.colorModel\r\n      );\r\n      result[index].type = type;\r\n    }\r\n    return (this._target[key] = result);\r\n  }\r\n\r\n  // shallow mix all end state `{key: value}`s if `value` is a number, otherwise just takes `value`\r\n  _updateTemplateValue(key, value) {\r\n    let k, valueA, valueB;\r\n    const fromData = this._stateA[key];\r\n    const toData = this._stateB[key];\r\n    const targetData = {};\r\n\r\n    if (!_.isObject(toData)) {\r\n      k =\r\n        this._target._styledText != null\r\n          ? this._target._styledText.buildTemplate()\r\n          : undefined;\r\n      if (!k) {\r\n        return;\r\n      }\r\n      valueB = toData;\r\n      if (_.isNumber(valueB)) {\r\n        valueA = _.isObject(fromData) ? fromData[k] : fromData;\r\n        if (!_.isNumber(valueA)) {\r\n          valueA = 0;\r\n        }\r\n        valueB = Utils.mapRange(value, 0, 1, valueA, valueB);\r\n      }\r\n      targetData[k] = valueB;\r\n      this._target.template = targetData;\r\n      return;\r\n    }\r\n\r\n    for (k in toData) {\r\n      valueB = toData[k];\r\n      if (_.isNumber(valueB)) {\r\n        valueA = _.isObject(fromData) ? fromData[k] : fromData;\r\n        if (!_.isNumber(valueA)) {\r\n          valueA = 0;\r\n        }\r\n        valueB = Utils.mapRange(value, 0, 1, valueA, valueB);\r\n      }\r\n      targetData[k] = valueB;\r\n    }\r\n    return (this._target.template = targetData);\r\n  }\r\n\r\n  _currentState() {\r\n    return _.pick(this.layer, _.keys(this.properties));\r\n  }\r\n\r\n  static isAnimatable(v) {\r\n    return (\r\n      _.isNumber(v) ||\r\n      _.isFunction(v) ||\r\n      isRelativeProperty(v) ||\r\n      Color.isColorObject(v) ||\r\n      Gradient.isGradientObject(v) ||\r\n      SVG.isPath(v)\r\n    );\r\n  }\r\n\r\n  // Special cases that animate with different types of objects\r\n  static isAnimatableKey(k) {\r\n    return [\r\n      \"gradient\",\r\n      \"borderWidth\",\r\n      \"borderRadius\",\r\n      \"template\",\r\n      \"shadows\",\r\n    ].includes(k);\r\n  }\r\n\r\n  static filterAnimatableProperties(properties, layer) {\r\n    // Function to filter only animatable properties out of a given set\r\n    const animatableProperties = {};\r\n\r\n    // Only animate numeric properties for now\r\n    for (var k in properties) {\r\n      var matches;\r\n      var v = properties[k];\r\n      if ([\"frame\", \"size\", \"point\", \"midPoint\", \"path\"].includes(k)) {\r\n        // Derived properties\r\n        var derivedKey, derivedKeys;\r\n        switch (k) {\r\n          case \"frame\":\r\n            derivedKeys = [\"x\", \"y\", \"width\", \"height\"];\r\n            break;\r\n          case \"size\":\r\n            derivedKeys = [\"width\", \"height\"];\r\n            break;\r\n          case \"point\":\r\n            derivedKeys = [\"x\", \"y\"];\r\n            break;\r\n          case \"midPoint\":\r\n            derivedKeys = [\"midX\", \"midY\"];\r\n            break;\r\n          case \"path\":\r\n            derivedKeys = [\"x\", \"y\", \"rotation\"];\r\n            break;\r\n          default:\r\n            derivedKeys = [];\r\n        }\r\n        if (SVG.isPath(v)) {\r\n          if (k === \"path\") {\r\n            layer.midPoint = v.start;\r\n          }\r\n          for (derivedKey of Array.from(derivedKeys)) {\r\n            animatableProperties[derivedKey] = v;\r\n          }\r\n        } else if (_.isObject(v)) {\r\n          _.defaults(animatableProperties, _.pick(v, derivedKeys));\r\n        } else if (_.isNumber(v)) {\r\n          for (derivedKey of Array.from(derivedKeys)) {\r\n            animatableProperties[derivedKey] = v;\r\n          }\r\n        }\r\n      } else if (this.isAnimatable(v)) {\r\n        animatableProperties[k] = v;\r\n      } else if (Color.isValidColorProperty(k, v)) {\r\n        animatableProperties[k] = new Color(v);\r\n      } else if (this.isAnimatableKey(k)) {\r\n        animatableProperties[k] = v;\r\n      } else if ((matches = k.match(/^shadow([1-9])$/))) {\r\n        if (animatableProperties.shadows == null) {\r\n          var left;\r\n          animatableProperties.shadows =\r\n            (left = _.clone(layer.shadows)) != null ? left : [];\r\n        }\r\n        var shadowIndex = parseInt(matches[1]) - 1;\r\n        if (animatableProperties.shadows[shadowIndex] != null) {\r\n          _.defaults(v, animatableProperties.shadows[shadowIndex]);\r\n        }\r\n        animatableProperties.shadows[shadowIndex] = v;\r\n      }\r\n    }\r\n    return animatableProperties;\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id} layer:${\r\n      this.layer != null ? this.layer.toName() : undefined\r\n    } [${_.keys(this.properties).join(\", \")}] isAnimating:${this.isAnimating}>`;\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationHalt(cb) {\r\n    return this.on(Events.AnimationHalt, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n  onAnimationDidStart(cb) {\r\n    return this.on(Events.AnimationDidStart, cb);\r\n  }\r\n  onAnimationDidStop(cb) {\r\n    return this.on(Events.AnimationDidStop, cb);\r\n  }\r\n  onAnimationDidEnd(cb) {\r\n    return this.on(Events.AnimationDidEnd, cb);\r\n  }\r\n}\r\nAnimation.initClass();\r\n","const filterFormat = function (name, value, unit, pixelMultiplier) {\r\n  if (unit === \"px\") {\r\n    value *= pixelMultiplier;\r\n  }\r\n  return `${name}(${Utils.round(value, 2)}${unit})`;\r\n};\r\n// \"#{value}#{unit}\"\r\n\r\nconst roundToZero = function (num) {\r\n  if (-1e-6 < num && num < 1e-6) {\r\n    return 0;\r\n  }\r\n  return num;\r\n};\r\n\r\n// TODO: Ideally these should be read out from the layer defined properties\r\nconst _WebkitProperties = [\r\n  [\"blur\", \"blur\", 0, \"px\"],\r\n  [\"brightness\", \"brightness\", 100, \"%\"],\r\n  [\"saturate\", \"saturate\", 100, \"%\"],\r\n  [\"hue-rotate\", \"hueRotate\", 0, \"deg\"],\r\n  [\"contrast\", \"contrast\", 100, \"%\"],\r\n  [\"invert\", \"invert\", 0, \"%\"],\r\n  [\"grayscale\", \"grayscale\", 0, \"%\"],\r\n  [\"sepia\", \"sepia\", 0, \"%\"],\r\n];\r\n\r\nconst _BackdropProperties = [\r\n  [\"blur\", \"backgroundBlur\", 0, \"px\"],\r\n  [\"brightness\", \"backgroundBrightness\", 100, \"%\"],\r\n  [\"saturate\", \"backgroundSaturate\", 100, \"%\"],\r\n  [\"hue-rotate\", \"backgroundHueRotate\", 0, \"deg\"],\r\n  [\"contrast\", \"backgroundContrast\", 100, \"%\"],\r\n  [\"invert\", \"backgroundInvert\", 0, \"%\"],\r\n  [\"grayscale\", \"backgroundGrayscale\", 0, \"%\"],\r\n  [\"sepia\", \"backgroundSepia\", 0, \"%\"],\r\n];\r\n\r\nconst _Force2DProperties = {\r\n  z: 0,\r\n  scaleZ: 1,\r\n  skewX: 0,\r\n  skewY: 0,\r\n  rotationX: 0,\r\n  rotationY: 0,\r\n};\r\n\r\nconst getShadowStrings = function (layer, types, createString) {\r\n  if (!_.isArray(types)) {\r\n    types = [types];\r\n  }\r\n  const result = [];\r\n  if (layer.shadows != null) {\r\n    for (var shadow of Array.from(layer.shadows)) {\r\n      if (shadow === null) {\r\n        continue;\r\n      }\r\n      shadow = _.defaults(_.clone(shadow), Framer.Defaults.Shadow);\r\n      if (shadow.type === \"inner\") {\r\n        shadow.type = \"inset\";\r\n      } else if (shadow.type === \"outer\") {\r\n        if (layer.image != null && layer.image !== \"\") {\r\n          shadow.type = \"drop\";\r\n        } else {\r\n          shadow.type = \"box\";\r\n        }\r\n      }\r\n      if (\r\n        !Array.from(types).includes(shadow.type) ||\r\n        (shadow.x === 0 &&\r\n          shadow.y === 0 &&\r\n          shadow.blur === 0 &&\r\n          shadow.spread === 0)\r\n      ) {\r\n        continue;\r\n      }\r\n      if (shadow.color === null) {\r\n        shadow.color = new Color(null);\r\n      }\r\n      var dpr =\r\n        layer._pixelMultiplierOverride != null\r\n          ? layer._pixelMultiplierOverride\r\n          : layer.context.pixelMultiplier;\r\n      var shadowString = createString(shadow, dpr);\r\n      result.push(shadowString);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const LayerStyle = {\r\n  width(layer) {\r\n    layer._updateHTMLScale();\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return layer._properties.width * dpr + \"px\";\r\n  },\r\n\r\n  height(layer) {\r\n    layer._updateHTMLScale();\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return layer._properties.height * dpr + \"px\";\r\n  },\r\n\r\n  display(layer) {\r\n    if (layer._properties.visible === true) {\r\n      return \"block\";\r\n    }\r\n    return \"none\";\r\n  },\r\n\r\n  opacity(layer) {\r\n    return layer._properties.opacity;\r\n  },\r\n\r\n  webkitTransformStyle(layer) {\r\n    if (layer._properties.flat) {\r\n      return \"flat\";\r\n    } else {\r\n      return \"preserve-3d\";\r\n    }\r\n  },\r\n\r\n  webkitBackfaceVisibility(layer) {\r\n    if (layer._properties.backfaceVisible) {\r\n      return \"visible\";\r\n    } else {\r\n      return \"hidden\";\r\n    }\r\n  },\r\n\r\n  overflow(layer) {\r\n    if (\r\n      layer._properties.scrollHorizontal === true ||\r\n      layer._properties.scrollVertical === true\r\n    ) {\r\n      return \"auto\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  overflowX(layer) {\r\n    if (layer._properties.scrollHorizontal === true) {\r\n      return \"scroll\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  overflowY(layer) {\r\n    if (layer._properties.scrollVertical === true) {\r\n      return \"scroll\";\r\n    }\r\n    if (layer._properties.clip === true) {\r\n      return \"hidden\";\r\n    }\r\n    return \"visible\";\r\n  },\r\n\r\n  zIndex(layer) {\r\n    return layer._properties.index;\r\n  },\r\n\r\n  webkitFilter(layer) {\r\n    // This is mostly an optimization for Chrome. If you pass in the Webkit filters\r\n    // with the defaults, it still takes a shitty rendering path. So I compare them\r\n    // first and only add the ones that have a non default value.\r\n\r\n    let css = [];\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    for (var [cssName, layerPropertyName, fallback, unit] of Array.from(\r\n      _WebkitProperties\r\n    )) {\r\n      if (\r\n        layer._properties.hasOwnProperty(layerPropertyName) &&\r\n        layer[layerPropertyName] !== fallback\r\n      ) {\r\n        var filter = filterFormat(cssName, layer[layerPropertyName], unit, dpr);\r\n        css.push(filter);\r\n      }\r\n    }\r\n\r\n    // filter shadow\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      \"drop\",\r\n      (shadow, pixelMultiplier) =>\r\n        `drop-shadow(${shadow.x * pixelMultiplier}px ${\r\n          shadow.y * pixelMultiplier\r\n        }px ${shadow.blur * pixelMultiplier}px ${shadow.color})`\r\n    );\r\n\r\n    css = css.concat(shadowStrings);\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitBackdropFilter(layer) {\r\n    const css = [];\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    for (var [cssName, layerPropertyName, fallback, unit] of Array.from(\r\n      _BackdropProperties\r\n    )) {\r\n      if (\r\n        layer._properties.hasOwnProperty(layerPropertyName) &&\r\n        layer[layerPropertyName] !== fallback\r\n      ) {\r\n        var filter = filterFormat(cssName, layer[layerPropertyName], unit, dpr);\r\n        css.push(filter);\r\n      }\r\n    }\r\n\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitTransform(layer) {\r\n    // We have a special rendering path for layers that prefer 2d rendering.\r\n    // This definitely decreases performance, but is handy in complex drawing\r\n    // scenarios with rounded corners and shadows where gpu drawing gets weird\r\n    // results.\r\n\r\n    if (layer._prefer2d || layer._properties.force2d) {\r\n      return exports.LayerStyle.webkitTransformForce2d(layer);\r\n    }\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return `\\\r\ntranslate3d( \\\r\n${roundToZero(layer._properties.x * dpr)}px, \\\r\n${roundToZero(layer._properties.y * dpr)}px, \\\r\n${roundToZero(layer._properties.z * dpr)}px) \\\r\nscale3d( \\\r\n${roundToZero(layer._properties.scaleX * layer._properties.scale)}, \\\r\n${roundToZero(layer._properties.scaleY * layer._properties.scale)}, \\\r\n${roundToZero(layer._properties.scaleZ)}) \\\r\nskew(${roundToZero(layer._properties.skew)}deg,${roundToZero(\r\n      layer._properties.skew\r\n    )}deg) \\\r\nskewX(${roundToZero(layer._properties.skewX)}deg) \\\r\nskewY(${roundToZero(layer._properties.skewY)}deg) \\\r\ntranslateZ(${roundToZero(layer._properties.originZ * dpr)}px) \\\r\nrotateX(${roundToZero(layer._properties.rotationX)}deg) \\\r\nrotateY(${roundToZero(layer._properties.rotationY)}deg) \\\r\nrotateZ(${roundToZero(layer._properties.rotationZ)}deg) \\\r\ntranslateZ(${roundToZero(-layer._properties.originZ * dpr)}px)\\\r\n`;\r\n  },\r\n\r\n  webkitTransformForce2d(layer) {\r\n    // This detects if we use 3d properties, if we don't it only uses\r\n    // 2d properties to disable gpu rendering.\r\n\r\n    const css = [];\r\n\r\n    for (var p in _Force2DProperties) {\r\n      var v = _Force2DProperties[p];\r\n      if (layer._properties[p] !== v) {\r\n        console.warn(\r\n          `Layer property '${p}'' will be ignored with force2d enabled`\r\n        );\r\n      }\r\n    }\r\n\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    css.push(\r\n      `translate(${roundToZero(layer._properties.x * dpr)}px,${roundToZero(\r\n        layer._properties.y * dpr\r\n      )}px)`\r\n    );\r\n    css.push(\r\n      `scale(${roundToZero(\r\n        layer._properties.scaleX * layer._properties.scale\r\n      )},\t${roundToZero(layer._properties.scaleY * layer._properties.scale)})`\r\n    );\r\n    css.push(\r\n      `skew(${roundToZero(layer._properties.skew)}deg,${roundToZero(\r\n        layer._properties.skew\r\n      )}deg)`\r\n    );\r\n    css.push(`rotate(${roundToZero(layer._properties.rotationZ)}deg)`);\r\n\r\n    return css.join(\" \");\r\n  },\r\n\r\n  webkitTransformOrigin(layer) {\r\n    return `${layer._properties.originX * 100}% ${\r\n      layer._properties.originY * 100\r\n    }%`;\r\n  },\r\n\r\n  webkitPerspective(layer) {\r\n    let left;\r\n    const value =\r\n      (left = Utils.webkitPerspectiveForValue(layer._properties.perspective)) !=\r\n      null\r\n        ? left\r\n        : \"\";\r\n    if (_.isNumber(value)) {\r\n      const dpr =\r\n        layer._pixelMultiplierOverride != null\r\n          ? layer._pixelMultiplierOverride\r\n          : layer.context.pixelMultiplier;\r\n      return `${value * dpr}`;\r\n    } else {\r\n      return value;\r\n    }\r\n  },\r\n\r\n  webkitPerspectiveOrigin(layer) {\r\n    return `${layer._properties.perspectiveOriginX * 100}% ${\r\n      layer._properties.perspectiveOriginY * 100\r\n    }%`;\r\n  },\r\n\r\n  mixBlendMode(layer) {\r\n    let needle;\r\n    if (\r\n      ((needle = layer._properties.blending),\r\n      Array.from(_.values(Blending)).includes(needle))\r\n    ) {\r\n      return layer._properties.blending;\r\n    } else {\r\n      return \"\";\r\n    }\r\n  },\r\n\r\n  pointerEvents(layer) {\r\n    if (layer._properties.ignoreEvents) {\r\n      return \"none\";\r\n    } else {\r\n      return \"auto\";\r\n    }\r\n  },\r\n\r\n  boxShadow(layer) {\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      [\"box\", \"inset\"],\r\n      function (shadow, pixelMultiplier) {\r\n        const insetString = shadow.type === \"inset\" ? \"inset \" : \"\";\r\n        return `${insetString}${shadow.x * pixelMultiplier}px ${\r\n          shadow.y * pixelMultiplier\r\n        }px ${shadow.blur * pixelMultiplier}px ${\r\n          shadow.spread * pixelMultiplier\r\n        }px ${shadow.color}`;\r\n      }\r\n    );\r\n\r\n    return shadowStrings.join(\", \");\r\n  },\r\n\r\n  textShadow(layer) {\r\n    const shadowStrings = getShadowStrings(\r\n      layer,\r\n      \"text\",\r\n      (shadow, pixelMultiplier) =>\r\n        `${shadow.x * pixelMultiplier}px ${shadow.y * pixelMultiplier}px ${\r\n          shadow.blur * pixelMultiplier\r\n        }px ${shadow.color}`\r\n    );\r\n    return shadowStrings.join(\", \");\r\n  },\r\n\r\n  backgroundColor(layer) {\r\n    return layer._properties.backgroundColor;\r\n  },\r\n\r\n  backgroundSize(layer) {\r\n    switch (layer._properties.backgroundSize) {\r\n      case \"fill\":\r\n        return \"cover\";\r\n        break;\r\n      case \"fit\":\r\n        return \"contain\";\r\n        break;\r\n      case \"stretch\":\r\n        return \"100% 100%\";\r\n        break;\r\n    }\r\n    return layer._properties.backgroundSize;\r\n  },\r\n\r\n  fill(layer) {\r\n    return layer._properties.fill;\r\n  },\r\n\r\n  strokeWidth(layer) {\r\n    const factor =\r\n      layer.strokeWidthMultiplier != null ? layer.strokeWidthMultiplier : 1;\r\n    return layer._properties.strokeWidth * factor;\r\n  },\r\n\r\n  strokeDasharray(layer) {\r\n    return layer._properties.strokeDasharray.join(\",\");\r\n  },\r\n\r\n  color(layer) {\r\n    return layer._properties.color;\r\n  },\r\n\r\n  borderRadius(layer) {\r\n    const radius = layer._properties.borderRadius;\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n\r\n    if (_.isNumber(radius)) {\r\n      return radius * dpr + \"px\";\r\n    }\r\n\r\n    if (_.isObject(layer._properties.borderRadius)) {\r\n      return (\r\n        (radius.topLeft != null ? radius.topLeft : 0) * dpr +\r\n        \"px \" +\r\n        (radius.topRight != null ? radius.topRight : 0) * dpr +\r\n        \"px \" +\r\n        (radius.bottomRight != null ? radius.bottomRight : 0) * dpr +\r\n        \"px \" +\r\n        (radius.bottomLeft != null ? radius.bottomLeft : 0) * dpr +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    // Custom values like strings are still allowed for compatibility reasons\r\n    return layer._properties.borderRadius;\r\n  },\r\n\r\n  borderWidth(layer) {\r\n    let left;\r\n    const { borderWidth } = layer._properties;\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n\r\n    if (_.isNumber(borderWidth)) {\r\n      let left1;\r\n      const borderTopBottom =\r\n        ((left = Math.min(borderWidth, layer.height / 2)) != null ? left : 0) *\r\n        dpr;\r\n      const borderRightLeft =\r\n        ((left1 = Math.min(borderWidth, layer.width / 2)) != null ? left1 : 0) *\r\n        dpr;\r\n      return (\r\n        borderTopBottom +\r\n        \"px \" +\r\n        borderRightLeft +\r\n        \"px \" +\r\n        borderTopBottom +\r\n        \"px \" +\r\n        borderRightLeft +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    if (_.isObject(borderWidth)) {\r\n      let borderTop = borderWidth.top != null ? borderWidth.top : 0;\r\n      let borderBottom = borderWidth.bottom != null ? borderWidth.bottom : 0;\r\n      let borderLeft = borderWidth.left != null ? borderWidth.left : 0;\r\n      let borderRight = borderWidth.right != null ? borderWidth.right : 0;\r\n\r\n      if (borderTop + borderBottom > layer.height) {\r\n        const topRatio = borderTop / (borderTop + borderBottom);\r\n        borderTop = Math.round(topRatio * layer.height);\r\n        borderBottom = layer.height - borderTop;\r\n      }\r\n\r\n      if (borderLeft + borderRight > layer.width) {\r\n        const leftRatio = borderLeft / (borderLeft + borderRight);\r\n        borderLeft = Math.round(leftRatio * layer.width);\r\n        borderRight = layer.width - borderLeft;\r\n      }\r\n\r\n      return (\r\n        borderTop * dpr +\r\n        \"px \" +\r\n        borderRight * dpr +\r\n        \"px \" +\r\n        borderBottom * dpr +\r\n        \"px \" +\r\n        borderLeft * dpr +\r\n        \"px\"\r\n      );\r\n    }\r\n\r\n    return borderWidth;\r\n  },\r\n\r\n  fontSize(layer) {\r\n    return layer._properties.fontSize + \"px\";\r\n  },\r\n\r\n  letterSpacing(layer) {\r\n    return layer._properties.letterSpacing + \"px\";\r\n  },\r\n\r\n  wordSpacing(layer) {\r\n    return layer._properties.wordSpacing + \"px\";\r\n  },\r\n\r\n  textIndent(layer) {\r\n    return layer._properties.textIndent + \"px\";\r\n  },\r\n\r\n  textAlign(layer) {\r\n    const value = layer._properties.textAlign;\r\n    if (value === Align.left) {\r\n      return \"left\";\r\n    }\r\n    if (value === Align.center) {\r\n      return \"center\";\r\n    }\r\n    if (value === Align.right) {\r\n      return \"right\";\r\n    } else {\r\n      return value;\r\n    }\r\n  },\r\n\r\n  direction(layer) {\r\n    const value = layer._properties.direction;\r\n    switch (value) {\r\n      case \"right-to-left\":\r\n        return \"rtl\";\r\n      case \"left-to-right\":\r\n        return \"ltr\";\r\n      default:\r\n        return value;\r\n    }\r\n  },\r\n\r\n  padding(layer) {\r\n    const padding = Utils.rectZero(Utils.parseRect(layer.padding));\r\n    const dpr =\r\n      layer._pixelMultiplierOverride != null\r\n        ? layer._pixelMultiplierOverride\r\n        : layer.context.pixelMultiplier;\r\n    return `${padding.top * dpr}px ${padding.right * dpr}px ${\r\n      padding.bottom * dpr\r\n    }px ${padding.left * dpr}px`;\r\n  },\r\n};\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport _ from \"./Underscore.js\"; // keep underscore if your Utils still depends on it\r\nimport { Events } from \"./Events.js\"; // assuming Events is imported from somewhere\r\nimport { Utils } from \"./Utils.js\"; // assuming Utils is available\r\n\r\nexport class LayerStateMachine extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"layer\", {\r\n      get() {\r\n        return this._layer;\r\n      },\r\n    });\r\n\r\n    this.define(\"current\", {\r\n      get() {\r\n        return this.currentName;\r\n      },\r\n    });\r\n\r\n    this.define(\"previous\", {\r\n      get() {\r\n        return this.previousName;\r\n      },\r\n    });\r\n\r\n    this.define(\"currentName\", {\r\n      get() {\r\n        return this._currentName;\r\n      },\r\n    });\r\n\r\n    this.define(\"previousName\", {\r\n      get() {\r\n        return _.last(this._previousNames) || \"default\";\r\n      },\r\n    });\r\n\r\n    this.define(\"stateNames\", {\r\n      get() {\r\n        return Object.keys(this.states);\r\n      },\r\n    });\r\n\r\n    this.define(\"states\", {\r\n      get() {\r\n        return this._states;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layer, states) {\r\n    super();\r\n    this._layer = layer;\r\n    this._states = states;\r\n    this.reset();\r\n  }\r\n\r\n  switchInstant(stateName) {\r\n    return this.switchTo(stateName, { instant: true });\r\n  }\r\n\r\n  switchTo(stateName, options = {}) {\r\n    if (!this.states[stateName]) {\r\n      throw new Error(`No such state: '${stateName}'`);\r\n    }\r\n\r\n    if (stateName === \"previous\") {\r\n      stateName = this.previousName;\r\n    }\r\n\r\n    // Clone and merge animation properties\r\n    const properties = { ...this.states[stateName] };\r\n    let opts = { ...options };\r\n\r\n    if (properties.animationOptions) {\r\n      opts = { ...properties.animationOptions, ...opts };\r\n      delete properties.animationOptions;\r\n    }\r\n\r\n    const stateNameA = this.currentName;\r\n    const stateNameB = stateName;\r\n\r\n    const startAnimation = opts.start ?? true;\r\n    opts.start = false;\r\n\r\n    const animation = this.layer.animate(properties, opts);\r\n\r\n    let stateSwitched = false;\r\n    const switchState = () => {\r\n      if (stateSwitched) return;\r\n      stateSwitched = true;\r\n      this._previousNames.push(stateNameA);\r\n      this._currentName = stateNameB;\r\n    };\r\n\r\n    const onStart = () => {\r\n      this.emit(Events.StateSwitchStart, stateNameA, stateNameB, this);\r\n      switchState();\r\n    };\r\n\r\n    const onStop = () => {\r\n      this.emit(Events.StateSwitchStop, stateNameA, stateNameB, this);\r\n    };\r\n\r\n    const onEnd = () => {\r\n      const instantProps = _.difference(\r\n        Object.keys(properties),\r\n        Object.keys(animation.properties)\r\n      );\r\n\r\n      for (const k of instantProps) {\r\n        this.layer[k] = properties[k];\r\n      }\r\n\r\n      this.emit(Events.StateSwitchEnd, stateNameA, stateNameB, this);\r\n    };\r\n\r\n    animation.on(Events.AnimationStart, onStart);\r\n    animation.on(Events.AnimationStop, onStop);\r\n    animation.on(Events.AnimationEnd, onEnd);\r\n\r\n    if (startAnimation) {\r\n      const started = animation.start();\r\n      if (!started) {\r\n        onStart();\r\n        onStop();\r\n        onEnd();\r\n      }\r\n    }\r\n\r\n    switchState();\r\n    return animation;\r\n  }\r\n\r\n  next(states = this.stateNames) {\r\n    return Utils.arrayNext(states, this.currentName);\r\n  }\r\n\r\n  emit(...args) {\r\n    super.emit(...args);\r\n    return this._layer.emit(...args);\r\n  }\r\n\r\n  reset() {\r\n    for (const key of Object.keys(this.states)) {\r\n      if (key !== \"default\") delete this.states[key];\r\n    }\r\n\r\n    this._previousNames = [];\r\n    this._currentName = \"default\";\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} id:${this.id} layer:${this.layer.id} current:'${this.currentName}'>`;\r\n  }\r\n}\r\nLayerStateMachine.initClass();\r\n","import { _ } from \"./Underscore\";\r\nimport { LayerStateMachine } from \"./LayerStateMachine\";\r\nconst LayerStatesIgnoredKeys = [\"ignoreEvents\", \"name\", \"id\"];\r\n\r\nconst reservedStateError = function (name) {\r\n  throw Error(`The state '${name}' is a reserved name.`);\r\n};\r\n\r\nconst deprecatedWarning = function (name, suggestion) {\r\n  let message = `layer.states.${name} is deprecated`;\r\n  if (suggestion != null) {\r\n    message += `, use '${suggestion}' instead.`;\r\n  }\r\n  return console.warn(message);\r\n};\r\n\r\nconst namedState = (state, name) => _.extend({}, { name }, state);\r\n\r\nexport const LayerStates = (function () {\r\n  let capture = undefined;\r\n  let methods = undefined;\r\n  LayerStates = class LayerStates {\r\n    static initClass() {\r\n      this.defineReserved(\"previous\", {\r\n        get() {\r\n          return namedState(\r\n            this[this.machine.previousName],\r\n            this.machine.previousName\r\n          );\r\n        },\r\n      });\r\n      this.defineReserved(\"current\", {\r\n        get() {\r\n          return namedState(\r\n            this[this.machine.currentName],\r\n            this.machine.currentName\r\n          );\r\n        },\r\n      });\r\n\r\n      capture = function (name) {\r\n        return (this[name] = LayerStates.filterStateProperties(\r\n          this.machine.layer.props\r\n        ));\r\n      };\r\n\r\n      this.defineReserved(\"capture\", {\r\n        get() {\r\n          return capture;\r\n        },\r\n      });\r\n\r\n      //################################################################\r\n      // Backwards compatibility\r\n\r\n      methods = {\r\n        add(states, object) {\r\n          if (object == null) {\r\n            object = {};\r\n          }\r\n          deprecatedWarning(\"add\", \"layer.states = \");\r\n          if (_.isString(states)) {\r\n            return (this[states] = object);\r\n          } else {\r\n            return (this.machine.layer.states = states);\r\n          }\r\n        },\r\n\r\n        remove(stateName) {\r\n          deprecatedWarning(\"remove\", \"delete layer.states.a\");\r\n          return delete this[stateName];\r\n        },\r\n\r\n        switch(stateName, options) {\r\n          deprecatedWarning(\"switch\", 'layer.animate(\"state\")');\r\n          return this.machine.switchTo(stateName, options);\r\n        },\r\n\r\n        switchInstant(stateName) {\r\n          deprecatedWarning(\r\n            \"switchInstant\",\r\n            'layer.animate(\"state\", {instant: true})'\r\n          );\r\n          return this.machine.switchTo(stateName, { instant: true });\r\n        },\r\n\r\n        next(...options) {\r\n          deprecatedWarning(\"next\", \"layer.stateCycle()\");\r\n          options = _.flatten(options);\r\n          return this.machine.layer.stateCycle(options);\r\n        },\r\n      };\r\n\r\n      this.defineReserved(\"add\", {\r\n        get() {\r\n          return methods.add;\r\n        },\r\n      });\r\n      this.defineReserved(\"remove\", {\r\n        get() {\r\n          return methods.remove;\r\n        },\r\n      });\r\n      this.defineReserved(\"switch\", {\r\n        get() {\r\n          return methods.switch;\r\n        },\r\n      });\r\n      this.defineReserved(\"switchInstant\", {\r\n        get() {\r\n          return methods.switchInstant;\r\n        },\r\n      });\r\n      this.defineReserved(\"next\", {\r\n        get() {\r\n          return methods.next;\r\n        },\r\n      });\r\n      this.defineReserved(\"animationOptions\", {\r\n        get() {\r\n          return this.machine.layer.animationOptions;\r\n        },\r\n        set(options) {\r\n          return (this.machine.layer.animationOptions = options);\r\n        },\r\n      });\r\n    }\r\n\r\n    static defineReserved(propertyName, descriptor) {\r\n      descriptor.configurable = true;\r\n      if (descriptor.enumerable == null) {\r\n        descriptor.enumerable = false;\r\n      }\r\n      if (descriptor.set == null) {\r\n        descriptor.set = () => reservedStateError(propertyName);\r\n      }\r\n      return Object.defineProperty(this.prototype, propertyName, descriptor);\r\n    }\r\n\r\n    constructor(layer) {\r\n      const _machine = new LayerStateMachine(layer, this);\r\n\r\n      // A trick to include a reference to the state machine, without exposing\r\n      // the key on the layer states object.\r\n\r\n      Object.defineProperty(this, \"machine\", {\r\n        enumerable: false,\r\n        configurable: false,\r\n        get() {\r\n          return _machine;\r\n        },\r\n        set() {\r\n          return reservedStateError(\"machine\");\r\n        },\r\n      });\r\n\r\n      this.capture(\"default\");\r\n    }\r\n\r\n    static filterStateProperties(properties) {\r\n      const stateProperties = {};\r\n\r\n      for (var k in properties) {\r\n        var v = properties[k];\r\n        if (Array.from(LayerStatesIgnoredKeys).includes(k)) {\r\n          continue;\r\n        }\r\n\r\n        if (Color.isValidColorProperty(k, v)) {\r\n          stateProperties[k] = new Color(v);\r\n          continue;\r\n        }\r\n\r\n        if (Gradient.isGradient(v)) {\r\n          stateProperties[k] = v;\r\n          continue;\r\n        }\r\n\r\n        if (this._isValidProperty(k, v)) {\r\n          stateProperties[k] = v;\r\n        }\r\n      }\r\n\r\n      return stateProperties;\r\n    }\r\n\r\n    static _isValidProperty(k, v) {\r\n      if (_.isNumber(v)) {\r\n        return true;\r\n      }\r\n      if (_.isFunction(v)) {\r\n        return true;\r\n      }\r\n      if (_.isBoolean(v)) {\r\n        return true;\r\n      }\r\n      if (_.isString(v)) {\r\n        return true;\r\n      }\r\n      if (Color.isColorObject(v)) {\r\n        return true;\r\n      }\r\n      if (Gradient.isGradient(v)) {\r\n        return true;\r\n      }\r\n      if (v === null) {\r\n        return true;\r\n      }\r\n      if (\r\n        __guard__(v != null ? v.constructor : undefined, (x) => x.name) ===\r\n        \"Layer\"\r\n      ) {\r\n        return true;\r\n      }\r\n      if ([\"template\", \"shadows\"].includes(k)) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  };\r\n  LayerStates.initClass();\r\n  return LayerStates;\r\n})();\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\n\r\nexport class Simulator extends BaseClass {\r\n  static initClass() {\r\n    `\\\r\nThe simulator class runs a physics simulation based on a set of input values\r\nat setup({input values}), and emits an output state {x, v}\\\r\n`;\r\n\r\n    this.define(\"state\", {\r\n      get() {\r\n        return _.clone(this._state);\r\n      },\r\n      set(state) {\r\n        return (this._state = _.clone(state));\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this._state = { x: 0, v: 0 };\r\n    this.options = null;\r\n    this.setup(options);\r\n  }\r\n\r\n  setup(options) {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  next(delta) {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  finished() {\r\n    throw Error(\"Not implemented\");\r\n  }\r\n\r\n  setState(state) {\r\n    return (this._state = state);\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\n\r\nexport class Integrator {\r\n  static initClass() {\r\n    `\r\nUsage:\r\n  - Instantiate with a function that takes (state) -> acceleration\r\n  - Call integrateState with state={x, v} and delta\r\n    `;\r\n  }\r\n\r\n  constructor(accelerationForState) {\r\n    this._accelerationForState = accelerationForState;\r\n\r\n    if (!_.isFunction(this._accelerationForState)) {\r\n      console.warn(\r\n        \"Integrator: an integrator must be constructed with an acceleration function\"\r\n      );\r\n      this._accelerationForState = () => 0;\r\n    }\r\n  }\r\n\r\n  integrateState(state, dt) {\r\n    const a = this._evaluateState(state);\r\n    const b = this._evaluateStateWithDerivative(state, dt * 0.5, a);\r\n    const c = this._evaluateStateWithDerivative(state, dt * 0.5, b);\r\n    const d = this._evaluateStateWithDerivative(state, dt, c);\r\n\r\n    const dxdt = (1 / 6) * (a.dx + 2 * (b.dx + c.dx) + d.dx);\r\n    const dvdt = (1 / 6) * (a.dv + 2 * (b.dv + c.dv) + d.dv);\r\n\r\n    state.x += dxdt * dt;\r\n    state.v += dvdt * dt;\r\n\r\n    return state;\r\n  }\r\n\r\n  _evaluateState(initialState) {\r\n    return {\r\n      dx: initialState.v,\r\n      dv: this._accelerationForState(initialState),\r\n    };\r\n  }\r\n\r\n  _evaluateStateWithDerivative(initialState, dt, derivative) {\r\n    const state = {\r\n      x: initialState.x + derivative.dx * dt,\r\n      v: initialState.v + derivative.dv * dt,\r\n    };\r\n\r\n    return {\r\n      dx: state.v,\r\n      dv: this._accelerationForState(state),\r\n    };\r\n  }\r\n}\r\n\r\nIntegrator.initClass();\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\n\r\nexport class SpringSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"SpringSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n      offset: 0,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._integrator = new Integrator((state) => {\r\n      return -this.options.tension * state.x - this.options.friction * state.v;\r\n    }));\r\n  }\r\n\r\n  next(delta) {\r\n    this._state = this._integrator.integrateState(this._state, delta);\r\n\r\n    // Return a copy of the state so it cannot be modified\r\n    return this.getState();\r\n  }\r\n\r\n  finished() {\r\n    const positionNearZero = Math.abs(this._state.x) < this.options.tolerance;\r\n    const velocityNearZero = Math.abs(this._state.v) < this.options.tolerance;\r\n    return positionNearZero && velocityNearZero;\r\n  }\r\n\r\n  setState(state) {\r\n    return (this._state = {\r\n      x: state.x - this.options.offset,\r\n      v: state.v,\r\n    });\r\n  }\r\n\r\n  getState() {\r\n    let state;\r\n    return (state = {\r\n      x: this._state.x + this.options.offset,\r\n      v: this._state.v,\r\n    });\r\n  }\r\n}\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\n\r\nexport class FrictionSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"FrictionSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._integrator = new Integrator((state) => {\r\n      return -(this.options.friction * state.v);\r\n    }));\r\n  }\r\n\r\n  next(delta) {\r\n    this._state = this._integrator.integrateState(this._state, delta);\r\n\r\n    return this._state;\r\n  }\r\n\r\n  finished() {\r\n    return Math.abs(this._state.v) < this.options.tolerance;\r\n  }\r\n}\r\n","import { Defaults } from \"../Defaults.js\";\r\nimport { Simulator } from \"../Simulator.js\";\r\n\r\nimport { SpringSimulator } from \"./SpringSimulator.js\";\r\nimport { FrictionSimulator } from \"./FrictionSimulator.js\";\r\n\r\nexport class MomentumBounceSimulator extends Simulator {\r\n  constructor(...args) {\r\n    this.finished = this.finished.bind(this);\r\n    super(...args);\r\n  }\r\n\r\n  setup(options) {\r\n    this.options = Defaults.getDefaults(\"MomentumBounceSimulator\", options);\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      position: 0,\r\n      min: 0,\r\n      max: 0,\r\n    });\r\n\r\n    this._frictionSimulator = new FrictionSimulator({\r\n      friction: this.options.momentum.friction,\r\n      tolerance: this.options.momentum.tolerance,\r\n      velocity: this.options.velocity,\r\n      position: this.options.position,\r\n    });\r\n\r\n    this._springSimulator = new SpringSimulator({\r\n      tension: this.options.bounce.tension,\r\n      friction: this.options.bounce.friction,\r\n      tolerance: this.options.bounce.tolerance,\r\n      velocity: this.options.velocity,\r\n      position: this.options.position,\r\n    });\r\n\r\n    this._state = {\r\n      x: this.options.position,\r\n      v: this.options.velocity,\r\n    };\r\n\r\n    return (this._useSpring = false);\r\n  }\r\n\r\n  next(delta) {\r\n    if (this._useSpring) {\r\n      this._state = this._springSimulator.next(delta);\r\n    } else {\r\n      this._state = this._frictionSimulator.next(delta);\r\n      this._tryTransitionToSpring(this._state);\r\n    }\r\n\r\n    return this._state;\r\n  }\r\n\r\n  finished() {\r\n    if (this._useSpring) {\r\n      return this._springSimulator.finished();\r\n    }\r\n    return this._frictionSimulator.finished();\r\n  }\r\n\r\n  setState(state) {\r\n    this._state = {\r\n      x: state.x,\r\n      v: state.v,\r\n    };\r\n\r\n    this._frictionSimulator.setState(this._state);\r\n\r\n    if (this._isValidState()) {\r\n      return this._tryTransitionToSpring();\r\n    } else {\r\n      let bound;\r\n      if (this._state.x <= this.options.min) {\r\n        bound = this.options.min;\r\n      }\r\n      if (this._state.x >= this.options.max) {\r\n        bound = this.options.max;\r\n      }\r\n      return this._transitionToSpring(bound);\r\n    }\r\n  }\r\n\r\n  // If the position is outside the min and max bounds, and traveling\r\n  // further away, then transition from friction to spring simulation\r\n  _tryTransitionToSpring(force) {\r\n    const belowMinWithVelocity =\r\n      this._state.x < this.options.min && this._state.v <= 0;\r\n    const aboveMaxWithVelocity =\r\n      this._state.x > this.options.max && this._state.v >= 0;\r\n\r\n    if (belowMinWithVelocity || aboveMaxWithVelocity) {\r\n      let bound;\r\n      if (belowMinWithVelocity) {\r\n        bound = this.options.min;\r\n      }\r\n      if (aboveMaxWithVelocity) {\r\n        bound = this.options.max;\r\n      }\r\n      return this._transitionToSpring(bound);\r\n    } else {\r\n      return (this._useSpring = false);\r\n    }\r\n  }\r\n\r\n  _transitionToSpring(bound) {\r\n    this._useSpring = true;\r\n    this._springSimulator.options.offset = bound;\r\n    return this._springSimulator.setState(this._state);\r\n  }\r\n\r\n  // If the position is outside the min and max bounds, but traveling\r\n  // back towards the bounds, check if the velocity is sufficient to\r\n  // carry the position back within bounds. If it is, let friction do the\r\n  // work. If not, the state is invalid, so use the spring.\r\n  _isValidState() {\r\n    // Note that if velocity is 0, the state is still valid (should use spring,\r\n    // not friction), and we don't want to divide by 0 later in the check.\r\n    let bound;\r\n    const belowMinTravelingBack =\r\n      this._state.x < this.options.min && this._state.v > 0;\r\n    const aboveMaxTravelingBack =\r\n      this._state.x > this.options.max && this._state.v < 0;\r\n\r\n    let check = false;\r\n\r\n    if (belowMinTravelingBack) {\r\n      bound = this.options.min;\r\n      check = true;\r\n    } else if (aboveMaxTravelingBack) {\r\n      bound = this.options.max;\r\n      check = true;\r\n    }\r\n\r\n    if (check) {\r\n      const { friction } = this._frictionSimulator.options;\r\n      const solution = 1 - (friction * (bound - this._state.x)) / this._state.v;\r\n\r\n      return solution > 0;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n// The math behind _isValidState:\r\n//\r\n// 1. Integrate the friction simulator's acceleration to find velocity\r\n//\r\n//         a = - k * v\r\n//     dv/dt = - k * v\r\n// Int(dv/v) = - k * Int(dt)\r\n//      ln v = - k * t + C\r\n//\r\n// => Solve for C at t = 0\r\n//\r\n// ln v(0) = - k * 0 + C\r\n// ln v(0) = C\r\n//\r\n// => Plug C back into v(t)\r\n//\r\n//     ln v = - k * t + ln v(0)\r\n// e^(ln v) = e^(- k * t) + e^(ln v(0))\r\n//        v = v(0) * e^(- k * t)\r\n//\r\n// 2. Integrate velocity to find position\r\n//\r\n// Int(v) = v(0) * Int(e^(- k * t))\r\n//      x = - v(0) * e^(-k * t) / k + C\r\n//\r\n// => Solve for C at t = 0\r\n//\r\n//            x(0) = - v(0) * e^(-k * 0) / k + C\r\n//            x(0) = - v(0) / k + C\r\n// x(0) + v(0) / k = C\r\n//\r\n// => Plug C back into x(t)\r\n//\r\n// x = - v(0) * e^(-k * t) / k + x(0) + v(0) / k\r\n//\r\n// 3. Check if a (real) solution exists for t for position x\r\n//\r\n//                                x = - v(0) * e^(-k * t) / k + x(0) + v(0) / k\r\n//                         x - x(0) = - v(0) * e^(-k * t) / k + v(0) / k\r\n//                   k * (x - x(0)) = - v(0) * e^(-k * t) + v(0)\r\n//            k * (x - x(0)) - v(0) = - v(0) * e^(-k * t)\r\n// (k * (x - x(0)) - v(0)) / - v(0) = e^(-k * t)\r\n//       1 - (k * (x - x(0)) / v(0) = e^(-k * t)\r\n//   ln(1 - (k * (x - x(0)) / v(0)) = -k * t\r\n//\r\n// Therefore, a real solution exists if 1 - (k * (x - x(0)) / v(0) > 0\r\n","// Modern ES module imports\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\n\r\nimport { SpringSimulator } from \"./Simulators/SpringSimulator.js\";\r\nimport { FrictionSimulator } from \"./Simulators/FrictionSimulator.js\";\r\nimport { MomentumBounceSimulator } from \"./Simulators/MomentumBounceSimulator.js\";\r\n\r\n// Extend the Events object\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  SimulationStart: \"simulationStart\",\r\n  SimulationStep: \"simulationStep\",\r\n  SimulationStop: \"simulationStop\",\r\n};\r\n\r\nconst SimulatorClasses = {\r\n  spring: SpringSimulator,\r\n  friction: FrictionSimulator,\r\n  \"inertial-scroll\": MomentumBounceSimulator,\r\n};\r\n\r\nexport class Simulation extends BaseClass {\r\n  // Pass-through to simulator\r\n  static initClass() {\r\n    this.define(\"simulator\", {\r\n      get() {\r\n        return this._simulator;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.start = this.start.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this._update = this._update.bind(this);\r\n\r\n    // Modern default options\r\n    this.options = {\r\n      layer: null,\r\n      properties: {},\r\n      model: \"spring\",\r\n      modelOptions: {},\r\n      delay: 0,\r\n      debug: false,\r\n      ...options,\r\n    };\r\n\r\n    this.layer = this.options.layer;\r\n    this.properties = this.options.properties;\r\n    this._running = false;\r\n\r\n    const SimulatorClass =\r\n      SimulatorClasses[this.options.model] || SpringSimulator;\r\n    this._simulator = new SimulatorClass(this.options.modelOptions);\r\n  }\r\n\r\n  animatingProperties() {\r\n    return Object.keys(this.properties);\r\n  }\r\n\r\n  start() {\r\n    if (!this.layer) {\r\n      console.error(\"Simulation: missing layer\");\r\n      return false;\r\n    }\r\n\r\n    if (this.options.debug) {\r\n      console.log(\r\n        `Simulation.start ${this._simulator.constructor.name}`,\r\n        this.options.modelOptions\r\n      );\r\n    }\r\n\r\n    const animatingProperties = this.animatingProperties();\r\n    const layerProperties = this.layer.animatingProperties();\r\n\r\n    for (const property in layerProperties) {\r\n      if (animatingProperties.includes(property)) {\r\n        layerProperties[property].stop();\r\n      }\r\n    }\r\n\r\n    if (this.options.delay) {\r\n      Utils.delay(this.options.delay, this._start);\r\n    } else {\r\n      this._start();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  stop(emit = true) {\r\n    if (!this._running) return;\r\n\r\n    this._running = false;\r\n    this.layer.context.removeAnimation(this);\r\n\r\n    if (emit) this.emit(Events.SimulationStop);\r\n    return Framer.Loop.off(\"update\", this._update);\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    super.emit(event, ...args);\r\n    this.layer?.emit(event, this, ...args);\r\n  }\r\n\r\n  _start() {\r\n    if (this._running) return;\r\n\r\n    this._running = true;\r\n    this.layer.context.addAnimation(this);\r\n\r\n    this.emit(Events.SimulationStart);\r\n    Framer.Loop.on(\"update\", this._update);\r\n  }\r\n\r\n  _update(delta) {\r\n    if (this._simulator.finished()) {\r\n      this.stop(false);\r\n      this.emit(\"end\");\r\n      this.emit(Events.SimulationStop);\r\n    } else {\r\n      const result = this._simulator.next(delta);\r\n      this.emit(Events.SimulationStep, result, delta);\r\n    }\r\n  }\r\n\r\n  finished() {\r\n    return this._simulator.finished();\r\n  }\r\n}\r\n\r\nSimulation.initClass();\r\n","// Modern ES module imports\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\n\r\n// Extend the Events object with new event types\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  EventBufferReset: \"eventbufferreset\",\r\n  EventBufferUpdated: \"eventbufferupdated\",\r\n};\r\n\r\nexport class EventBuffer extends BaseClass {\r\n  constructor(options = {}) {\r\n    super();\r\n    this.options = _.defaults(options, { velocityTimeout: 100 });\r\n    this._events = [];\r\n  }\r\n\r\n  // Computed properties\r\n  get length() {\r\n    return this._events.length;\r\n  }\r\n\r\n  get first() {\r\n    return this._events[0];\r\n  }\r\n\r\n  get events() {\r\n    const timeout =\r\n      (Utils.getTime?.() ?? Date.now()) - this.options.velocityTimeout;\r\n    return _.filter(this._events, (event) => event.t > timeout);\r\n  }\r\n\r\n  get offset() {\r\n    const events = this.events;\r\n    if (events.length < 2) return { x: 0, y: 0 };\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    return {\r\n      x: current.x - first.x,\r\n      y: current.y - first.y,\r\n    };\r\n  }\r\n\r\n  get angle() {\r\n    const events = this.events;\r\n    if (events.length < 2) return 0;\r\n\r\n    const p1 = events[0];\r\n    const p2 = events[1];\r\n    return (Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180) / Math.PI;\r\n  }\r\n\r\n  get velocity() {\r\n    const events = this.events;\r\n    if (events.length < 2) return { x: 0, y: 0 };\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    const time = current.t - first.t;\r\n\r\n    let velocity = {\r\n      x: (current.x - first.x) / time,\r\n      y: (current.y - first.y) / time,\r\n    };\r\n\r\n    if (!isFinite(velocity.x)) velocity.x = 0;\r\n    if (!isFinite(velocity.y)) velocity.y = 0;\r\n\r\n    return velocity;\r\n  }\r\n\r\n  // Methods\r\n  push(event) {\r\n    this._events.push(event);\r\n    this.emit(Events.EventBufferUpdated, event);\r\n  }\r\n\r\n  reset() {\r\n    this._events.length = 0;\r\n    this.emit(Events.EventBufferReset);\r\n  }\r\n\r\n  // Simple emit helper (if BaseClass doesn't already have it)\r\n  emit(eventName, payload) {\r\n    if (typeof this.onEvent === \"function\") {\r\n      this.onEvent(eventName, payload);\r\n    }\r\n  }\r\n}\r\n","// utils and core imports using ES modules\r\nimport _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\nimport { Simulation } from \"./Simulation.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { EventBuffer } from \"./EventBuffer.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\n// Extend the Events object with new event types\r\nexport const Events = {\r\n  ...BaseEvents, // keep existing events\r\n\r\n  Move: \"move\",\r\n  DragStart: \"dragstart\",\r\n  DragWillMove: \"dragwillmove\",\r\n  DragMove: \"dragmove\",\r\n  DragDidMove: \"dragmove\",\r\n  Drag: \"dragmove\",\r\n  DragEnd: \"dragend\",\r\n  DragAnimationStart: \"draganimationstart\",\r\n  DragAnimationEnd: \"draganimationend\",\r\n  DirectionLockStart: \"directionlockstart\",\r\n\r\n  // Special cases\r\n  DragSessionStart: \"dragsessionstart\",\r\n  DragSessionMove: \"dragsessionmove\",\r\n  DragSessionEnd: \"dragsessionend\",\r\n\r\n  // Deprecated aliases\r\n  DragAnimationDidStart: \"draganimationstart\",\r\n  DragAnimationDidEnd: \"draganimationend\",\r\n  DirectionLockDidStart: \"directionlockstart\",\r\n};\r\n\r\n`\\\r\n\r\n                   \r\n      \r\n          \r\n      \r\n                   \r\n\r\n   \r\n\r\n\tDrag         Momentum      Bounce\r\n\\\r\n`;\r\n\r\nexport class LayerDraggable extends BaseClass {\r\n  static initClass() {\r\n    this._globalDidDrag = false;\r\n\r\n    this.define(\"speedX\", this.simpleProperty(\"speedX\", 1));\r\n    this.define(\"speedY\", this.simpleProperty(\"speedY\", 1));\r\n\r\n    this.define(\"horizontal\", this.simpleProperty(\"horizontal\", true));\r\n    this.define(\"vertical\", this.simpleProperty(\"vertical\", true));\r\n\r\n    this.define(\r\n      \"momentumVelocityMultiplier\",\r\n      this.simpleProperty(\"momentumVelocityMultiplier\", 800)\r\n    );\r\n    this.define(\"directionLock\", this.simpleProperty(\"directionLock\", true));\r\n    this.define(\r\n      \"directionLockThreshold\",\r\n      this.simpleProperty(\"directionLockThreshold\", { x: 10, y: 10 })\r\n    );\r\n    this.define(\r\n      \"propagateEvents\",\r\n      this.simpleProperty(\"propagateEvents\", true)\r\n    );\r\n\r\n    this.define(\"constraints\", {\r\n      get() {\r\n        return this._constraints;\r\n      },\r\n      set(value) {\r\n        if (value && _.isObject(value)) {\r\n          value = _.pick(value, [\"x\", \"y\", \"width\", \"height\"]);\r\n          value = _.defaults(value, { x: 0, y: 0, width: 0, height: 0 });\r\n          this._constraints = value;\r\n        } else {\r\n          this._constraints = { x: 0, y: 0, width: 0, height: 0 };\r\n        }\r\n        if (this._constraints) {\r\n          return this._updateSimulationConstraints(this._constraints);\r\n        }\r\n      },\r\n    });\r\n\r\n    // The isDragging only is true when there was actual movement, so you can\r\n    // use it to determine a click from a drag event.\r\n    this.define(\"isDragging\", {\r\n      get() {\r\n        return this._isDragging || false;\r\n      },\r\n    });\r\n    this.define(\"isAnimating\", {\r\n      get() {\r\n        return this._isAnimating || false;\r\n      },\r\n    });\r\n    this.define(\"isMoving\", {\r\n      get() {\r\n        return this._isMoving || false;\r\n      },\r\n    });\r\n\r\n    this.define(\"layerStartPoint\", {\r\n      get() {\r\n        return this._layerStartPoint || this.layer.point;\r\n      },\r\n    });\r\n    this.define(\"cursorStartPoint\", {\r\n      get() {\r\n        return this._cursorStartPoint || { x: 0, y: 0 };\r\n      },\r\n    });\r\n    this.define(\"layerCursorOffset\", {\r\n      get() {\r\n        return this._layerCursorOffset || { x: 0, y: 0 };\r\n      },\r\n    });\r\n\r\n    this.define(\"offset\", {\r\n      get() {\r\n        let offset;\r\n        if (!this._correctedLayerStartPoint) {\r\n          return { x: 0, y: 0 };\r\n        }\r\n        return (offset = {\r\n          x: this.layer.x - this._correctedLayerStartPoint.x,\r\n          y: this.layer.y - this._correctedLayerStartPoint.y,\r\n        });\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Constraints\r\n\r\n    this.define(\"constraintsOffset\", {\r\n      get() {\r\n        if (!this.constraints) {\r\n          return { x: 0, y: 0 };\r\n        }\r\n        const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n          this.constraints\r\n        );\r\n        const { point } = this.layer;\r\n        const constrainedPoint = {\r\n          x: Utils.clamp(point.x, minX, maxX),\r\n          y: Utils.clamp(point.y, minY, maxY),\r\n        };\r\n        const offset = {\r\n          x: point.x - constrainedPoint.x,\r\n          y: point.y - constrainedPoint.y,\r\n        };\r\n        return offset;\r\n      },\r\n    });\r\n\r\n    this.define(\"isBeyondConstraints\", {\r\n      get() {\r\n        const { constraintsOffset } = this;\r\n        if (constraintsOffset.x !== 0) {\r\n          return true;\r\n        }\r\n        if (constraintsOffset.y !== 0) {\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Velocity\r\n\r\n    this.define(\"velocity\", {\r\n      get() {\r\n        if (this.isAnimating) {\r\n          return this._calculateSimulationVelocity();\r\n        }\r\n        return this._eventBuffer.velocity;\r\n        return { x: 0, y: 0 };\r\n      },\r\n    });\r\n\r\n    // return @_eventBuffer.velocity if @isDragging\r\n    // return @_calculateSimulationVelocity() if @isAnimating\r\n    // return {x: 0, y: 0}\r\n\r\n    this.define(\"angle\", {\r\n      get() {\r\n        return this._eventBuffer.angle;\r\n      },\r\n    });\r\n\r\n    this.define(\"direction\", {\r\n      get() {\r\n        // return null if not @isDragging\r\n        const { velocity } = this;\r\n        if (velocity.x === 0 && velocity.y === 0) {\r\n          const delta =\r\n            this._lastEvent != null ? this._lastEvent.delta : undefined;\r\n          if (!delta) {\r\n            return null;\r\n          }\r\n          if (Math.abs(delta.x) > Math.abs(delta.y)) {\r\n            if (delta.x > 0) {\r\n              return \"right\";\r\n            }\r\n            return \"left\";\r\n          } else {\r\n            if (delta.y > 0) {\r\n              return \"down\";\r\n            }\r\n            return \"up\";\r\n          }\r\n        }\r\n        if (Math.abs(velocity.x) > Math.abs(velocity.y)) {\r\n          if (velocity.x > 0) {\r\n            return \"right\";\r\n          }\r\n          return \"left\";\r\n        } else {\r\n          if (velocity.y > 0) {\r\n            return \"down\";\r\n          }\r\n          return \"up\";\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layer) {\r\n    this.panStart = this.panStart.bind(this);\r\n    this.touchStart = this.touchStart.bind(this);\r\n    this.tapStart = this.tapStart.bind(this);\r\n    this._updateLayerPosition = this._updateLayerPosition.bind(this);\r\n    this._panStart = this._panStart.bind(this);\r\n    this._panMove = this._panMove.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._panEnd = this._panEnd.bind(this);\r\n    this._onSimulationStep = this._onSimulationStep.bind(this);\r\n    this._onSimulationStop = this._onSimulationStop.bind(this);\r\n    this._stopSimulation = this._stopSimulation.bind(this);\r\n    this.layer = layer;\r\n    const options = Defaults.getDefaults(\"LayerDraggable\", {});\r\n\r\n    super(options);\r\n\r\n    _.extend(this, options);\r\n\r\n    this.enabled = true;\r\n\r\n    // TODO: will have to change panRecognizer's horizontal/vertical etc\r\n    // when they are changed on the LayerDraggable\r\n    // @_panRecognizer = new PanRecognizer @eventBuffer\r\n\r\n    this._eventBuffer = new EventBuffer();\r\n    this._constraints = null;\r\n    this._ignoreUpdateLayerPosition = true;\r\n\r\n    this.attach();\r\n  }\r\n\r\n  attach() {\r\n    this.layer.on(Gestures.TapStart, this.tapStart);\r\n    this.layer.on(Gestures.PanStart, this.panStart);\r\n    this.layer.on(\"change:x\", this._updateLayerPosition);\r\n    return this.layer.on(\"change:y\", this._updateLayerPosition);\r\n  }\r\n\r\n  remove() {\r\n    this.layer.off(Gestures.TapStart, this.tapStart);\r\n    this.layer.off(Gestures.PanStart, this.panStart);\r\n    this.layer.off(Gestures.Pan, this._panMove);\r\n    return this.layer.off(Gestures.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  updatePosition(point) {\r\n    // Override this to add your own behaviour to the update position\r\n    return point;\r\n  }\r\n\r\n  panStart(event) {\r\n    // For backwards compatibility, we still call touchStart here\r\n    return this.touchStart(event);\r\n  }\r\n\r\n  touchStart(event) {\r\n    // We expose this publicly so you can start the dragging from an external event\r\n    // this is for example needed with the slider.\r\n    return this._panStart(event);\r\n  }\r\n\r\n  // Stop the simulation if we touch the layer again\r\n  tapStart(event) {\r\n    if (this._isAnimating) {\r\n      __guard__(\r\n        Framer.GestureInputRecognizer != null\r\n          ? Framer.GestureInputRecognizer.session\r\n          : undefined,\r\n        (x) => (x.cancelTap = true)\r\n      );\r\n      return this._panStart(event);\r\n    }\r\n  }\r\n\r\n  _updateLayerPosition() {\r\n    // This updates the layer position if it's extrenally changed while\r\n    // a drag is going on at the same time.\r\n    if (this._ignoreUpdateLayerPosition === true) {\r\n      return;\r\n    }\r\n    return (this._point = this.layer.point);\r\n  }\r\n\r\n  _panStart(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    LayerDraggable._globalDidDrag = false;\r\n\r\n    Events.wrap(document).addEventListener(Gestures.Pan, this._panMove);\r\n    // One would assume to use Gestures.PanEnd here, but we also want to animate back when we touched, but didn't pan\r\n    Events.wrap(document).addEventListener(Gestures.TapEnd, this._tapEnd);\r\n\r\n    // Only reset isMoving if this was not animating when we were clicking\r\n    // so we can use it to detect a click versus a drag.\r\n    this._isMoving = this._isAnimating;\r\n\r\n    // Stop any animations influencing the position, but no others.\r\n    for (var animation of Array.from(this.layer.animations())) {\r\n      var { properties } = animation;\r\n      if (properties.hasOwnProperty(\"x\") || properties.hasOwnProperty(\"y\")) {\r\n        animation.stop();\r\n      }\r\n    }\r\n\r\n    this._stopSimulation();\r\n    this._resetdirectionLock();\r\n\r\n    event.preventDefault();\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    // Extract the event (mobile may have multiple)\r\n    const touchEvent = Events.touchEvent(event);\r\n\r\n    // TODO: we should use the event velocity\r\n    this._eventBuffer.push({\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n      t: Date.now(),\r\n    });\r\n\r\n    // Store original layer position\r\n    this._layerStartPoint = this.layer.point;\r\n    this._correctedLayerStartPoint = this.layer.point;\r\n\r\n    // If we are beyond bounds, we need to correct for the scaled clamping from the last drag,\r\n    // hence the 1 / overdragScale\r\n    if (this.constraints && this.bounce) {\r\n      this._correctedLayerStartPoint = this._constrainPosition(\r\n        this._correctedLayerStartPoint,\r\n        this.constraints,\r\n        1 / this.overdragScale\r\n      );\r\n    }\r\n\r\n    // Store start cursor position\r\n    this._cursorStartPoint = {\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n    };\r\n\r\n    // Store cursor/layer offset\r\n    this._layerCursorOffset = {\r\n      x: touchEvent.clientX - this._correctedLayerStartPoint.x,\r\n      y: touchEvent.clientY - this._correctedLayerStartPoint.y,\r\n    };\r\n\r\n    this._point = this._correctedLayerStartPoint;\r\n    this._ignoreUpdateLayerPosition = false;\r\n\r\n    return this.emit(Events.DragSessionStart, event);\r\n  }\r\n\r\n  _panMove(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    // If we started dragging from another event we need to capture some initial values\r\n    if (!this._point) {\r\n      this.touchStart(event);\r\n    }\r\n\r\n    event.preventDefault();\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    const touchEvent = Events.touchEvent(event);\r\n    this._lastEvent = touchEvent;\r\n\r\n    this._eventBuffer.push({\r\n      x: touchEvent.clientX,\r\n      y: touchEvent.clientY,\r\n      t: Date.now(),\r\n    }); // We don't use timeStamp because it's different on Chrome/Safari\r\n\r\n    let point = _.clone(this._point);\r\n    if (this.horizontal) {\r\n      point.x =\r\n        this._point.x +\r\n        event.delta.x * this.speedX * (1 / this.layer.screenScaleX(false));\r\n    }\r\n    if (this.vertical) {\r\n      point.y =\r\n        this._point.y +\r\n        event.delta.y * this.speedY * (1 / this.layer.screenScaleY(false));\r\n    }\r\n\r\n    // Save the point for the next update so we have the unrounded, unconstrained value\r\n    this._point = _.clone(point);\r\n\r\n    // Constraints and overdrag\r\n    if (this._constraints) {\r\n      point = this._constrainPosition(\r\n        point,\r\n        this._constraints,\r\n        this.overdragScale\r\n      );\r\n    }\r\n\r\n    // Direction lock\r\n    if (this.directionLock) {\r\n      if (!this._directionLockEnabledX && !this._directionLockEnabledY) {\r\n        const { offset } = event;\r\n        offset.x =\r\n          offset.x *\r\n          this.speedX *\r\n          (1 / this.layer.canvasScaleX()) *\r\n          this.layer.scaleX *\r\n          this.layer.scale;\r\n        offset.y =\r\n          offset.y *\r\n          this.speedY *\r\n          (1 / this.layer.canvasScaleY()) *\r\n          this.layer.scaleY *\r\n          this.layer.scale;\r\n\r\n        this._updatedirectionLock(offset);\r\n        return;\r\n      } else {\r\n        if (this._directionLockEnabledX) {\r\n          point.x = this._layerStartPoint.x;\r\n        }\r\n        if (this._directionLockEnabledY) {\r\n          point.y = this._layerStartPoint.y;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update the dragging status\r\n    if (\r\n      point.x !== this._layerStartPoint.x ||\r\n      point.y !== this._layerStartPoint.y\r\n    ) {\r\n      LayerDraggable._globalDidDrag = true;\r\n      if (!this._isDragging) {\r\n        this._isDragging = true;\r\n        this._isMoving = true;\r\n        this.emit(Events.DragStart, event);\r\n      }\r\n    }\r\n\r\n    // Move literally means move. If there is no movement, we do not emit.\r\n    if (this.isDragging) {\r\n      this.emit(Events.DragWillMove, event);\r\n    }\r\n\r\n    // Align every drag to pixels\r\n    if (this.pixelAlign) {\r\n      if (this.horizontal) {\r\n        point.x = Math.round(point.x);\r\n      }\r\n      if (this.vertical) {\r\n        point.y = Math.round(point.y);\r\n      }\r\n    }\r\n\r\n    // While we update the layer position ourselves, we don't want\r\n    // to trigger the updater for external changes.\r\n    this._ignoreUpdateLayerPosition = true;\r\n    this.layer.point = this.updatePosition(point);\r\n    this._ignoreUpdateLayerPosition = false;\r\n\r\n    if (this.isDragging) {\r\n      this.emit(Events.Move, this.layer.point);\r\n      this.emit(Events.DragDidMove, event);\r\n    }\r\n\r\n    return this.emit(Events.DragSessionMove, event);\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._panEnd(event);\r\n  }\r\n\r\n  _panEnd(event) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n\r\n    LayerDraggable._globalDidDrag = false;\r\n\r\n    Events.wrap(document).removeEventListener(Gestures.Pan, this._panMove);\r\n    Events.wrap(document).removeEventListener(Gestures.TapEnd, this._tapEnd);\r\n    event.stopPropagation();\r\n\r\n    if (this.propagateEvents === false) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    // Start the simulation prior to emitting the DragEnd event.\r\n    // This way, if the user calls layer.animate on DragEnd, the simulation will\r\n    // be canceled by the user's animation (if the user animates x and/or y).\r\n    this._startSimulation();\r\n\r\n    this.emit(Events.DragSessionEnd, event);\r\n    if (this._isDragging) {\r\n      this.emit(Events.DragEnd, event);\r\n    }\r\n\r\n    // Set _isDragging after DragEnd is fired, so that calls to calculateVelocity()\r\n    // still returns dragging velocity - both in case the user calls calculateVelocity(),\r\n    // (which would return a stale value before the simulation had finished one tick)\r\n    // and because @_start currently calls calculateVelocity().\r\n    this._isDragging = false;\r\n\r\n    // reset isMoving if not animating, otherwise animation start/stop will reset it\r\n    this._isMoving = this._isAnimating;\r\n    this._ignoreUpdateLayerPosition = true;\r\n    this._lastEvent = null;\r\n    return this._eventBuffer.reset();\r\n  }\r\n\r\n  _clampAndScale(value, min, max, scale) {\r\n    // TODO: Move to utils? Combine with clamp?\r\n    if (value < min) {\r\n      value = min + (value - min) * scale;\r\n    }\r\n    if (value > max) {\r\n      value = max + (value - max) * scale;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  _calculateConstraints(bounds) {\r\n    let constraints;\r\n    if (!bounds) {\r\n      return (constraints = {\r\n        minX: Infinity,\r\n        maxX: Infinity,\r\n        minY: Infinity,\r\n        maxY: Infinity,\r\n      });\r\n    }\r\n\r\n    // Correct the constraints if the layer size exceeds the constraints\r\n    if (bounds.width < this.layer.width) {\r\n      bounds.width = this.layer.width;\r\n    }\r\n    if (bounds.height < this.layer.height) {\r\n      bounds.height = this.layer.height;\r\n    }\r\n\r\n    //bounds.width = _.max([bounds.width, @layer.width])\r\n\r\n    constraints = {\r\n      minX: Utils.frameGetMinX(bounds),\r\n      maxX: Utils.frameGetMaxX(bounds),\r\n      minY: Utils.frameGetMinY(bounds),\r\n      maxY: Utils.frameGetMaxY(bounds),\r\n    };\r\n\r\n    // It makes sense to take the dimensions of the object into account\r\n    constraints.maxX -= this.layer.width;\r\n    constraints.maxY -= this.layer.height;\r\n\r\n    return constraints;\r\n  }\r\n\r\n  _constrainPosition(proposedPoint, bounds, scale) {\r\n    let point;\r\n    const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n      this._constraints\r\n    );\r\n\r\n    if (this.overdrag) {\r\n      point = {\r\n        x: this._clampAndScale(proposedPoint.x, minX, maxX, scale),\r\n        y: this._clampAndScale(proposedPoint.y, minY, maxY, scale),\r\n      };\r\n    } else {\r\n      point = {\r\n        x: Utils.clamp(proposedPoint.x, minX, maxX),\r\n        y: Utils.clamp(proposedPoint.y, minY, maxY),\r\n      };\r\n    }\r\n\r\n    if (this.speedX === 0 || this.horizontal === false) {\r\n      point.x = proposedPoint.x;\r\n    }\r\n    if (this.speedY === 0 || this.vertical === false) {\r\n      point.y = proposedPoint.y;\r\n    }\r\n\r\n    return point;\r\n  }\r\n\r\n  calculateVelocity() {\r\n    // Compatibility method\r\n    return this.velocity;\r\n  }\r\n\r\n  _calculateSimulationVelocity() {\r\n    const xFinished = this._simulation.x.finished();\r\n    const yFinished = this._simulation.y.finished();\r\n\r\n    const velocity = { x: 0, y: 0 };\r\n    if (!xFinished) {\r\n      velocity.x =\r\n        this._simulation.x.simulator.state.v / this.momentumVelocityMultiplier;\r\n    }\r\n    if (!yFinished) {\r\n      velocity.y =\r\n        this._simulation.y.simulator.state.v / this.momentumVelocityMultiplier;\r\n    }\r\n\r\n    return velocity;\r\n  }\r\n\r\n  //#############################################################\r\n  // Event Handling\r\n\r\n  emit(eventName, event) {\r\n    // TODO: Add new event properties like position corrected for device\r\n\r\n    // Pass this to the layer above\r\n    this.layer.emit(eventName, event);\r\n\r\n    return super.emit(eventName, event);\r\n  }\r\n\r\n  //#############################################################\r\n  // Lock Direction\r\n\r\n  _updatedirectionLock(correctedDelta) {\r\n    this._directionLockEnabledX =\r\n      Math.abs(correctedDelta.y) > this.directionLockThreshold.y;\r\n    this._directionLockEnabledY =\r\n      Math.abs(correctedDelta.x) > this.directionLockThreshold.x;\r\n\r\n    // TODO: This wasn't working as advertised. We shouls have a way to scroll diagonally\r\n    // if we were sort of moving into both directions equally.\r\n\r\n    // xSlightlyPreferred = Math.abs(correctedDelta.y) > @directionLockThreshold.y / 2\r\n    // ySlightlyPreferred = Math.abs(correctedDelta.x) > @directionLockThreshold.x / 2\r\n\r\n    // # Allow locking in both directions at the same time\r\n    // @_directionLockEnabledX = @_directionLockEnabledY = true if (xSlightlyPreferred and ySlightlyPreferred)\r\n\r\n    if (this._directionLockEnabledX || this._directionLockEnabledY) {\r\n      return this.emit(Events.DirectionLockStart, {\r\n        x: this._directionLockEnabledX,\r\n        y: this._directionLockEnabledY,\r\n      });\r\n    }\r\n  }\r\n\r\n  _resetdirectionLock() {\r\n    this._directionLockEnabledX = false;\r\n    return (this._directionLockEnabledY = false);\r\n  }\r\n\r\n  //#############################################################\r\n  // Inertial scroll simulation\r\n\r\n  _setupSimulation() {\r\n    if (this._simulation) {\r\n      return;\r\n    }\r\n\r\n    this._simulation = {\r\n      x: this._setupSimulationForAxis(\"x\"),\r\n      y: this._setupSimulationForAxis(\"y\"),\r\n    };\r\n\r\n    return this._updateSimulationConstraints(this.constraints);\r\n  }\r\n\r\n  _setupSimulationForAxis(axis) {\r\n    const properties = {};\r\n    properties[axis] = true;\r\n\r\n    const simulation = new Simulation({\r\n      layer: this.layer,\r\n      properties,\r\n      model: \"inertial-scroll\",\r\n      modelOptions: {\r\n        momentum: this.momentumOptions,\r\n        bounce: this.bounceOptions,\r\n      },\r\n    });\r\n\r\n    simulation.on(Events.SimulationStep, (state) =>\r\n      this._onSimulationStep(axis, state)\r\n    );\r\n    simulation.on(Events.SimulationStop, (state) =>\r\n      this._onSimulationStop(axis, state)\r\n    );\r\n    return simulation;\r\n  }\r\n\r\n  _updateSimulationConstraints(constraints) {\r\n    // This is where we let the simulator know about our constraints\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n    if (constraints) {\r\n      const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n        this._constraints\r\n      );\r\n      this._simulation.x.simulator.options = { min: minX, max: maxX };\r\n      return (this._simulation.y.simulator.options = { min: minY, max: maxY });\r\n    } else {\r\n      this._simulation.x.simulator.options = { min: -Infinity, max: +Infinity };\r\n      return (this._simulation.y.simulator.options = {\r\n        min: -Infinity,\r\n        max: +Infinity,\r\n      });\r\n    }\r\n  }\r\n\r\n  _onSimulationStep(axis, state) {\r\n    let delta;\r\n    if (axis === \"x\" && this.horizontal === false) {\r\n      return;\r\n    }\r\n    if (axis === \"y\" && this.vertical === false) {\r\n      return;\r\n    }\r\n\r\n    // The simulation state has x as value, it can look confusing here\r\n    // as we're working with x and y.\r\n\r\n    if (this.constraints) {\r\n      if (this.bounce) {\r\n        delta = state.x - this.layer[axis];\r\n      } else {\r\n        const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n          this._constraints\r\n        );\r\n        if (axis === \"x\") {\r\n          delta = Utils.clamp(state.x, minX, maxX) - this.layer[axis];\r\n        }\r\n        if (axis === \"y\") {\r\n          delta = Utils.clamp(state.x, minY, maxY) - this.layer[axis];\r\n        }\r\n      }\r\n    } else {\r\n      delta = state.x - this.layer[axis];\r\n    }\r\n\r\n    const updatePoint = this.layer.point;\r\n    if (axis === \"x\") {\r\n      updatePoint[axis] = updatePoint[axis] + delta;\r\n    }\r\n    if (axis === \"y\") {\r\n      updatePoint[axis] = updatePoint[axis] + delta;\r\n    }\r\n    this.updatePosition(updatePoint);\r\n\r\n    this.layer[axis] = this.updatePosition(updatePoint)[axis];\r\n    return this.emit(Events.Move, this.layer.point);\r\n  }\r\n\r\n  _onSimulationStop(axis, state) {\r\n    if (axis === \"x\" && this.horizontal === false) {\r\n      return;\r\n    }\r\n    if (axis === \"y\" && this.vertical === false) {\r\n      return;\r\n    }\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n\r\n    // Round the end position to whole pixels\r\n    if (this.pixelAlign) {\r\n      this.layer[axis] = Math.round(this.layer[axis]);\r\n    }\r\n\r\n    // See if both simulators are stopped\r\n    if (this._simulation.x.finished() && this._simulation.y.finished()) {\r\n      return this._stopSimulation();\r\n    }\r\n  }\r\n\r\n  _startSimulation() {\r\n    // The types of simulation that we can have are:\r\n    // 1) Momentum inside constraints\r\n    // 2) Momentum inside constraints to outside constraints bounce\r\n    // 3) Release outside constraints bounce\r\n    // 4) Momentum without constraints\r\n\r\n    if (!this.momentum && !this.bounce) {\r\n      return;\r\n    }\r\n    if (this.isBeyondConstraints === false && this.momentum === false) {\r\n      return;\r\n    }\r\n    if (this.isBeyondConstraints === false && this.isDragging === false) {\r\n      return;\r\n    }\r\n\r\n    // If overdrag is disabled, we need to not have a bounce animation\r\n    // when the cursor is outside of the dragging bounds for an axis.\r\n    const { minX, maxX, minY, maxY } = this._calculateConstraints(\r\n      this._constraints\r\n    );\r\n\r\n    const startSimulationX =\r\n      this.overdrag === true || (this.layer.x > minX && this.layer.x < maxX);\r\n    const startSimulationY =\r\n      this.overdrag === true || (this.layer.y > minY && this.layer.y < maxY);\r\n\r\n    if (startSimulationX === startSimulationY && startSimulationY === false) {\r\n      return;\r\n    }\r\n\r\n    const { velocity } = this;\r\n\r\n    const velocityX =\r\n      velocity.x *\r\n      this.momentumVelocityMultiplier *\r\n      this.speedX *\r\n      (1 / this.layer.canvasScaleX()) *\r\n      this.layer.scaleX *\r\n      this.layer.scale;\r\n    const velocityY =\r\n      velocity.y *\r\n      this.momentumVelocityMultiplier *\r\n      this.speedY *\r\n      (1 / this.layer.canvasScaleY()) *\r\n      this.layer.scaleY *\r\n      this.layer.scale;\r\n\r\n    this._setupSimulation();\r\n    this._isAnimating = true;\r\n    this._isMoving = true;\r\n\r\n    this._simulation.x.simulator.setState({\r\n      x: this.layer.x,\r\n      v: velocityX,\r\n    });\r\n    if (startSimulationX) {\r\n      this._simulation.x.start();\r\n    }\r\n\r\n    this._simulation.y.simulator.setState({\r\n      x: this.layer.y,\r\n      v: velocityY,\r\n    });\r\n    if (startSimulationY) {\r\n      this._simulation.y.start();\r\n    }\r\n\r\n    return this.emit(Events.DragAnimationStart);\r\n  }\r\n\r\n  _stopSimulation() {\r\n    if (this._isMoving) {\r\n      this.emit(Events.Move, this.layer.point);\r\n    }\r\n    this._isAnimating = false;\r\n    this._isMoving = false;\r\n\r\n    if (!this._simulation) {\r\n      return;\r\n    }\r\n    if (this._simulation != null) {\r\n      this._simulation.x.stop();\r\n    }\r\n    if (this._simulation != null) {\r\n      this._simulation.y.stop();\r\n    }\r\n    this._simulation = null;\r\n    return this.emit(Events.DragAnimationEnd);\r\n  }\r\n\r\n  animateStop() {\r\n    return this._stopSimulation();\r\n  }\r\n\r\n  onMove(cb) {\r\n    return this.on(Events.Move, cb);\r\n  }\r\n  onDragStart(cb) {\r\n    return this.on(Events.DragStart, cb);\r\n  }\r\n  onDragWillMove(cb) {\r\n    return this.on(Events.DragWillMove, cb);\r\n  }\r\n  onDragMove(cb) {\r\n    return this.on(Events.DragMove, cb);\r\n  }\r\n  onDragDidMove(cb) {\r\n    return this.on(Events.DragDidMove, cb);\r\n  }\r\n  onDrag(cb) {\r\n    return this.on(Events.Drag, cb);\r\n  }\r\n  onDragEnd(cb) {\r\n    return this.on(Events.DragEnd, cb);\r\n  }\r\n  onDragAnimationStart(cb) {\r\n    return this.on(Events.DragAnimationStart, cb);\r\n  }\r\n  onDragAnimationEnd(cb) {\r\n    return this.on(Events.DragAnimationEnd, cb);\r\n  }\r\n  onDirectionLockStart(cb) {\r\n    return this.on(Events.DirectionLockStart, cb);\r\n  }\r\n}\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\nLayerDraggable.initClass();\r\n","import Utils from \"./Utils.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Events as BaseEvents } from \"./Events.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\n\r\n// Extend Events\r\nexport const Events = {\r\n  ...BaseEvents,\r\n  PinchStart: \"pinchstart\",\r\n  Pinch: \"pinch\",\r\n  PinchEnd: \"pinchend\",\r\n  RotateStart: \"rotatestart\",\r\n  Rotate: \"rotate\",\r\n  RotateEnd: \"rotateend\",\r\n  ScaleStart: \"scalestart\",\r\n  Scale: \"scale\",\r\n  ScaleEnd: \"scaleend\",\r\n};\r\n\r\nexport class LayerPinchable extends BaseClass {\r\n  static initClass() {\r\n    // Properties\r\n    this.define(\"enabled\", this.simpleProperty(\"enabled\", true));\r\n    this.define(\"threshold\", this.simpleProperty(\"threshold\", 0));\r\n    this.define(\"centerOrigin\", this.simpleProperty(\"centerOrigin\", true));\r\n\r\n    this.define(\"scale\", this.simpleProperty(\"scale\", true));\r\n    this.define(\"scaleIncrements\", this.simpleProperty(\"scaleIncrements\", 0));\r\n    this.define(\"minScale\", this.simpleProperty(\"minScale\", 0));\r\n    this.define(\"maxScale\", this.simpleProperty(\"maxScale\", Number.MAX_VALUE));\r\n    this.define(\"scaleFactor\", this.simpleProperty(\"scaleFactor\", 1));\r\n\r\n    this.define(\"rotate\", this.simpleProperty(\"rotate\", true));\r\n    this.define(\"rotateIncrements\", this.simpleProperty(\"rotateIncrements\", 0));\r\n    this.define(\"rotateMin\", this.simpleProperty(\"rotateMin\", 0));\r\n    this.define(\"rotateMax\", this.simpleProperty(\"rotateMax\", 0));\r\n    this.define(\"rotateFactor\", this.simpleProperty(\"rotateFactor\", 1));\r\n  }\r\n\r\n  constructor(layer) {\r\n    super();\r\n    this.layer = layer;\r\n\r\n    this._centerOrigin = this._centerOrigin.bind(this);\r\n    this._pinchStart = this._pinchStart.bind(this);\r\n    this._pinch = this._pinch.bind(this);\r\n    this._pinchEnd = this._pinchEnd.bind(this);\r\n    this._tapStart = this._tapStart?.bind(this);\r\n\r\n    this._attach();\r\n  }\r\n\r\n  _attach() {\r\n    this.layer.on(Gestures.PinchStart, this._pinchStart);\r\n    this.layer.on(Gestures.Pinch, this._pinch);\r\n    this.layer.on(Gestures.PinchEnd, this._pinchEnd);\r\n    this.layer.on(Gestures.TapStart, this._tapStart);\r\n  }\r\n\r\n  _reset() {\r\n    this._scaleStart = null;\r\n    this._rotationStart = null;\r\n    this._rotationOffset = null;\r\n  }\r\n\r\n  _tapStart(event) {\r\n    // Placeholder for optional tap behavior\r\n    // if (this.centerOrigin) this._centerOrigin(event);\r\n  }\r\n\r\n  _centerOrigin(event) {\r\n    const topBefore = Utils.convertPoint({}, this.layer, this.layer.superLayer);\r\n    const pinchLocation = Utils.convertPointFromContext(\r\n      event.touchCenter,\r\n      this.layer,\r\n      true,\r\n      true\r\n    );\r\n\r\n    this.layer.originX = pinchLocation.x / this.layer.width;\r\n    this.layer.originY = pinchLocation.y / this.layer.height;\r\n\r\n    const topAfter = Utils.convertPoint({}, this.layer, this.layer.superLayer);\r\n    const originDelta = {\r\n      x: topAfter.x - topBefore.x,\r\n      y: topAfter.y - topBefore.y,\r\n    };\r\n\r\n    this.layer.x -= originDelta.x;\r\n    this.layer.y -= originDelta.y;\r\n  }\r\n\r\n  _pinchStart(event) {\r\n    this._reset();\r\n    if (this.centerOrigin) this._centerOrigin(event);\r\n    this.normalizeRotation = Utils.rotationNormalizer();\r\n  }\r\n\r\n  _pinch(event) {\r\n    if (\r\n      event.fingers !== 2 ||\r\n      !this.enabled ||\r\n      event.touchDistance <= this.threshold\r\n    )\r\n      return;\r\n\r\n    // Handle scaling\r\n    if (this.scale) {\r\n      if (this._scaleStart == null) this._scaleStart = this.layer.scale;\r\n      let scale = ((event.scale - 1) * this.scaleFactor + 1) * this._scaleStart;\r\n\r\n      if (this.minScale && this.maxScale) {\r\n        scale = Utils.clamp(scale, this.minScale, this.maxScale);\r\n      } else if (this.minScale) {\r\n        scale = Utils.clamp(scale, this.minScale, 1e6);\r\n      } else if (this.maxScale) {\r\n        scale = Utils.clamp(scale, 1e-5, this.maxScale);\r\n      }\r\n\r\n      if (this.scaleIncrements)\r\n        scale = Utils.nearestIncrement(scale, this.scaleIncrements);\r\n      this.layer.scale = scale;\r\n      this.emit(Events.Scale, event);\r\n    }\r\n\r\n    // Handle rotation\r\n    if (this.rotate) {\r\n      if (this._rotationStart == null)\r\n        this._rotationStart = this.layer.rotation;\r\n      if (this._rotationOffset == null) this._rotationOffset = event.rotation;\r\n\r\n      let rotation =\r\n        event.rotation - this._rotationOffset + this._rotationStart;\r\n      rotation *= this.rotateFactor;\r\n      rotation = this.normalizeRotation(rotation);\r\n\r\n      if (this.rotateMin && this.rotateMax)\r\n        rotation = Utils.clamp(rotation, this.rotateMin, this.rotateMax);\r\n      if (this.rotateIncrements)\r\n        rotation = Utils.nearestIncrement(rotation, this.rotateIncrements);\r\n\r\n      this.layer.rotation = rotation;\r\n      this.emit(Events.Rotate, event);\r\n    }\r\n  }\r\n\r\n  _pinchEnd(event) {\r\n    this._reset();\r\n  }\r\n}\r\n\r\nLayerPinchable.initClass();\r\n","export class LayerPropertyProxy {\r\n  constructor(target, callback) {\r\n    const proxy = this;\r\n    const getter = function (prop) {\r\n      return this[prop];\r\n    };\r\n    const setter = function (prop, value) {\r\n      return callback(this, prop, value, proxy);\r\n    };\r\n    for (var prop of Array.from(Object.getOwnPropertyNames(target))) {\r\n      var targetDesc = Object.getOwnPropertyDescriptor(target, prop);\r\n      var desc = {\r\n        enumerable: targetDesc.enumerable,\r\n        get: getter.bind(target, prop),\r\n        set: setter.bind(target, prop),\r\n      };\r\n      Object.defineProperty(proxy, prop, desc);\r\n    }\r\n    proxy.__proto__ = target.__proto__;\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Gradient } from \"./Gradient.js\";\r\nimport { Matrix } from \"./Matrix.js\";\r\nimport { Animation } from \"./Animation.js\";\r\nimport { LayerStyle } from \"./LayerStyle.js\";\r\nimport { LayerStates } from \"./LayerStates.js\";\r\nimport { LayerDraggable } from \"./LayerDraggable.js\";\r\nimport { LayerPinchable } from \"./LayerPinchable.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\nimport { LayerPropertyProxy } from \"./LayerPropertyProxy.js\";\r\n\r\nconst NoCacheDateKey = Date.now();\r\n\r\nconst delayedStyles = [\r\n  \"webkitTransform\",\r\n  \"webkitFilter\",\r\n  \"webkitPerspectiveOrigin\",\r\n  \"webkitTransformOrigin\",\r\n  \"webkitBackdropFilter\",\r\n];\r\n\r\nconst layerValueTypeError = function (name, value) {\r\n  throw new Error(\r\n    `Layer.${name}: value '${value}' of type '${typeof value}' is not valid`\r\n  );\r\n};\r\n\r\nexport const layerProperty = function (\r\n  name,\r\n  cssProperty,\r\n  fallback,\r\n  validator,\r\n  transformer,\r\n  options,\r\n  set,\r\n  targetElement,\r\n  includeMainElement,\r\n  useSubpropertyProxy\r\n) {\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  let result = {\r\n    default: fallback,\r\n    get() {\r\n      // console.log \"Layer.#{name}.get #{@_properties[name]}\", @_properties.hasOwnProperty(name)\r\n\r\n      let value;\r\n      if (this._properties.hasOwnProperty(name)) {\r\n        value = this._properties[name];\r\n      }\r\n      if (value == null) {\r\n        value = fallback;\r\n      }\r\n\r\n      if (useSubpropertyProxy) {\r\n        return layerProxiedValue(value, this, name);\r\n      }\r\n      return value;\r\n    },\r\n\r\n    set(value) {\r\n      if (transformer) {\r\n        value = transformer(value, this, name);\r\n      }\r\n\r\n      const oldValue = this._properties[name];\r\n      if (value === oldValue) {\r\n        return;\r\n      }\r\n\r\n      if (value && validator && !validator(value)) {\r\n        layerValueTypeError(name, value);\r\n      }\r\n\r\n      this._properties[name] = value;\r\n\r\n      if (cssProperty !== null) {\r\n        let mainElement, subElement;\r\n        let elementContainer = this;\r\n        if (Array.from(this._stylesAppliedToParent).includes(cssProperty)) {\r\n          elementContainer = this._parent;\r\n          this._parent._properties[name] = fallback;\r\n        }\r\n        if (includeMainElement || !targetElement) {\r\n          mainElement = elementContainer._element;\r\n        }\r\n        if (targetElement != null) {\r\n          subElement = elementContainer[targetElement];\r\n        }\r\n        if (name === cssProperty && LayerStyle[cssProperty] == null) {\r\n          if (mainElement != null) {\r\n            mainElement.style[cssProperty] = this._properties[name];\r\n          }\r\n          if (subElement != null) {\r\n            subElement.style[cssProperty] = this._properties[name];\r\n          }\r\n          // These values are set multiple times during applyDefaults, so ignore them here, and set the style in the constructor\r\n        } else if (\r\n          !this.__applyingDefaults ||\r\n          !Array.from(delayedStyles).includes(cssProperty)\r\n        ) {\r\n          const style = LayerStyle[cssProperty](this);\r\n          if (mainElement != null) {\r\n            mainElement.style[cssProperty] = style;\r\n          }\r\n          if (subElement != null) {\r\n            subElement.style[cssProperty] = style;\r\n          }\r\n        }\r\n      }\r\n      if (typeof set === \"function\") {\r\n        set(this, value);\r\n      }\r\n\r\n      // We try to not send any events while we run the constructor, it just\r\n      // doesn't make sense, because no one can listen to use yet.\r\n      if (this.__constructor) {\r\n        return;\r\n      }\r\n\r\n      this.emit(`change:${name}`, value, oldValue);\r\n      if ([\"x\", \"y\"].includes(name)) {\r\n        this.emit(\"change:point\", value);\r\n      }\r\n      if ([\"width\", \"height\"].includes(name)) {\r\n        this.emit(\"change:size\", value);\r\n      }\r\n      if ([\"x\", \"y\", \"width\", \"height\"].includes(name)) {\r\n        this.emit(\"change:frame\", value);\r\n      }\r\n      if ([\"rotationZ\"].includes(name)) {\r\n        return this.emit(\"change:rotation\", value);\r\n      }\r\n    },\r\n  };\r\n\r\n  return (result = _.extend(result, options));\r\n};\r\n\r\nexport var layerProxiedValue = function (value, layer, property) {\r\n  if (!_.isObject(value)) {\r\n    return value;\r\n  }\r\n  return new LayerPropertyProxy(value, function (\r\n    proxiedValue,\r\n    subProperty,\r\n    subValue\r\n  ) {\r\n    proxiedValue[subProperty] = subValue;\r\n    return (layer[property] = proxiedValue);\r\n  });\r\n};\r\n\r\nexports.layerProxiedValue = layerProxiedValue;\r\n\r\nconst layerPropertyPointTransformer = function (value, layer, property) {\r\n  if (_.isFunction(value)) {\r\n    value = value(layer, property);\r\n  }\r\n\r\n  return value;\r\n};\r\n\r\nconst layerPropertyIgnore = function (options, propertyName, properties) {\r\n  if (!options.hasOwnProperty(propertyName)) {\r\n    return options;\r\n  }\r\n\r\n  for (var p of Array.from(properties)) {\r\n    if (options.hasOwnProperty(p)) {\r\n      delete options[propertyName];\r\n      return options;\r\n    }\r\n  }\r\n\r\n  return options;\r\n};\r\n\r\nconst asBorderRadius = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n\r\n  if (_.isString(value)) {\r\n    if (!_.endsWith(value, \"%\")) {\r\n      console.error(\r\n        \"Layer.borderRadius only correctly supports percentages in strings\"\r\n      );\r\n    }\r\n    return value;\r\n  }\r\n\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n\r\n  const result = {};\r\n  let isValidObject = false;\r\n  for (var key of [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst asBorderWidth = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n  const result = {};\r\n  let isValidObject = false;\r\n  for (var key of [\"left\", \"right\", \"bottom\", \"top\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst parentOrContext = function (layerOrContext) {\r\n  if (layerOrContext.parent != null) {\r\n    return layerOrContext.parent;\r\n  } else {\r\n    return layerOrContext.context;\r\n  }\r\n};\r\n\r\nconst proxiedShadowValue = function (layer, value, index) {\r\n  if (index == null) {\r\n    index = 0;\r\n  }\r\n  const v = _.defaults(_.clone(value), Framer.Defaults.Shadow);\r\n  if (v.color !== null) {\r\n    if (v != null) {\r\n      v.color = new Color(v.color);\r\n    }\r\n  }\r\n  return layerProxiedValue(v, layer, `shadow${index + 1}`);\r\n};\r\n\r\nexport class Layer extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"context\", {\r\n      get() {\r\n        return this._context;\r\n      },\r\n    });\r\n\r\n    this.define(\"label\", {\r\n      get() {\r\n        return this._label;\r\n      },\r\n      set(value) {\r\n        if (value === this._label) {\r\n          return;\r\n        }\r\n        this._label = value;\r\n        return Utils.labelLayer(this, this._label);\r\n      },\r\n    });\r\n\r\n    // A placeholder for layer bound properties defined by the user:\r\n    this.define(\"custom\", this.simpleProperty(\"custom\", undefined));\r\n\r\n    // Default animation options for every animation of this layer\r\n    this.define(\r\n      \"animationOptions\",\r\n      this.simpleProperty(\"animationOptions\", {})\r\n    );\r\n\r\n    // Behaviour properties\r\n    this.define(\r\n      \"ignoreEvents\",\r\n      layerProperty(this, \"ignoreEvents\", \"pointerEvents\", true, _.isBoolean)\r\n    );\r\n\r\n    // Css properties\r\n    this.define(\r\n      \"width\",\r\n      layerProperty(\r\n        this,\r\n        \"width\",\r\n        \"width\",\r\n        100,\r\n        _.isNumber,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (layer.constraintValues == null || layer.isLayouting) {\r\n            return;\r\n          }\r\n          layer.constraintValues.width = value;\r\n          layer.constraintValues.aspectRatioLocked = false;\r\n          layer.constraintValues.widthFactor = null;\r\n          return layer._layoutX();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"height\",\r\n      layerProperty(\r\n        this,\r\n        \"height\",\r\n        \"height\",\r\n        100,\r\n        _.isNumber,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (layer.constraintValues == null || layer.isLayouting) {\r\n            return;\r\n          }\r\n          layer.constraintValues.height = value;\r\n          layer.constraintValues.aspectRatioLocked = false;\r\n          layer.constraintValues.heightFactor = null;\r\n          return layer._layoutY();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"visible\",\r\n      layerProperty(this, \"visible\", \"display\", true, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"opacity\",\r\n      layerProperty(this, \"opacity\", \"opacity\", 1, _.isNumber, parseFloat)\r\n    );\r\n    this.define(\r\n      \"index\",\r\n      layerProperty(this, \"index\", \"zIndex\", 0, _.isNumber, null, {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"clip\",\r\n      layerProperty(\r\n        this,\r\n        \"clip\",\r\n        \"overflow\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        null,\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"scrollHorizontal\",\r\n      layerProperty(\r\n        this,\r\n        \"scrollHorizontal\",\r\n        \"overflowX\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === true) {\r\n            return (layer.ignoreEvents = false);\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"scrollVertical\",\r\n      layerProperty(\r\n        this,\r\n        \"scrollVertical\",\r\n        \"overflowY\",\r\n        false,\r\n        _.isBoolean,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === true) {\r\n            return (layer.ignoreEvents = false);\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\"scroll\", {\r\n      get() {\r\n        return this.scrollHorizontal === true || this.scrollVertical === true;\r\n      },\r\n      set(value) {\r\n        return (this.scrollHorizontal = this.scrollVertical = value);\r\n      },\r\n    });\r\n\r\n    // Matrix properties\r\n    this.define(\r\n      \"x\",\r\n      layerProperty(\r\n        this,\r\n        \"x\",\r\n        \"webkitTransform\",\r\n        0,\r\n        _.isNumber,\r\n        layerPropertyPointTransformer,\r\n        { depends: [\"width\", \"height\"] },\r\n        function (layer) {\r\n          if (layer.isLayouting) {\r\n            return;\r\n          }\r\n          return (layer.constraintValues = null);\r\n        }\r\n      )\r\n    );\r\n    this.define(\r\n      \"y\",\r\n      layerProperty(\r\n        this,\r\n        \"y\",\r\n        \"webkitTransform\",\r\n        0,\r\n        _.isNumber,\r\n        layerPropertyPointTransformer,\r\n        { depends: [\"width\", \"height\"] },\r\n        function (layer) {\r\n          if (layer.isLayouting) {\r\n            return;\r\n          }\r\n          return (layer.constraintValues = null);\r\n        }\r\n      )\r\n    );\r\n    this.define(\r\n      \"z\",\r\n      layerProperty(this, \"z\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"scaleX\",\r\n      layerProperty(this, \"scaleX\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scaleY\",\r\n      layerProperty(this, \"scaleY\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scaleZ\",\r\n      layerProperty(this, \"scaleZ\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"scale\",\r\n      layerProperty(this, \"scale\", \"webkitTransform\", 1, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"skewX\",\r\n      layerProperty(this, \"skewX\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"skewY\",\r\n      layerProperty(this, \"skewY\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"skew\",\r\n      layerProperty(this, \"skew\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n\r\n    // @define \"scale\",\r\n    // \tget: -> (@scaleX + @scaleY + @scaleZ) / 3.0\r\n    // \tset: (value) -> @scaleX = @scaleY = @scaleZ = value\r\n\r\n    this.define(\r\n      \"originX\",\r\n      layerProperty(this, \"originX\", \"webkitTransformOrigin\", 0.5, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"originY\",\r\n      layerProperty(this, \"originY\", \"webkitTransformOrigin\", 0.5, _.isNumber)\r\n    );\r\n    this.define(\"originZ\", layerProperty(this, \"originZ\", null, 0, _.isNumber));\r\n\r\n    this.define(\r\n      \"perspective\",\r\n      layerProperty(\r\n        this,\r\n        \"perspective\",\r\n        \"webkitPerspective\",\r\n        0,\r\n        (v) => Utils.webkitPerspectiveForValue(v) !== null\r\n      )\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginX\",\r\n      layerProperty(\r\n        this,\r\n        \"perspectiveOriginX\",\r\n        \"webkitPerspectiveOrigin\",\r\n        0.5,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginY\",\r\n      layerProperty(\r\n        this,\r\n        \"perspectiveOriginY\",\r\n        \"webkitPerspectiveOrigin\",\r\n        0.5,\r\n        _.isNumber\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"rotationX\",\r\n      layerProperty(this, \"rotationX\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"rotationY\",\r\n      layerProperty(this, \"rotationY\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"rotationZ\",\r\n      layerProperty(this, \"rotationZ\", \"webkitTransform\", 0, _.isNumber)\r\n    );\r\n    this.define(\"rotation\", {\r\n      //exportable: false\r\n      get() {\r\n        return this.rotationZ;\r\n      },\r\n      set(value) {\r\n        return (this.rotationZ = value);\r\n      },\r\n    });\r\n\r\n    // Filter properties\r\n    this.define(\r\n      \"blur\",\r\n      layerProperty(this, \"blur\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"brightness\",\r\n      layerProperty(this, \"brightness\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"saturate\",\r\n      layerProperty(this, \"saturate\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"hueRotate\",\r\n      layerProperty(this, \"hueRotate\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"contrast\",\r\n      layerProperty(this, \"contrast\", \"webkitFilter\", 100, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"invert\",\r\n      layerProperty(this, \"invert\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"grayscale\",\r\n      layerProperty(this, \"grayscale\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"sepia\",\r\n      layerProperty(this, \"sepia\", \"webkitFilter\", 0, _.isNumber)\r\n    );\r\n\r\n    this.define(\r\n      \"blending\",\r\n      layerProperty(this, \"blending\", \"mixBlendMode\", null, _.isString)\r\n    );\r\n\r\n    this.define(\r\n      \"backgroundBlur\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundBlur\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundBrightness\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundBrightness\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundSaturate\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSaturate\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundHueRotate\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundHueRotate\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundContrast\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundContrast\",\r\n        \"webkitBackdropFilter\",\r\n        100,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundInvert\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundInvert\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundGrayscale\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundGrayscale\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n    this.define(\r\n      \"backgroundSepia\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSepia\",\r\n        \"webkitBackdropFilter\",\r\n        0,\r\n        _.isNumber\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"backgroundSize\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundSize\",\r\n        \"backgroundSize\",\r\n        \"fill\",\r\n        _.isString\r\n      )\r\n    );\r\n\r\n    for (let i = 0; i <= 8; i++) {\r\n      ((i) => {\r\n        return this.define(`shadow${i + 1}`, {\r\n          exportable: false,\r\n          depends: [\r\n            \"shadowX\",\r\n            \"shadowY\",\r\n            \"shadowBlur\",\r\n            \"shadowSpread\",\r\n            \"shadowColor\",\r\n            \"shadowType\",\r\n          ],\r\n          get() {\r\n            if (this.shadows == null) {\r\n              this.shadows = [];\r\n            }\r\n            if (this.shadows[i] == null) {\r\n              this.shadows[i] = proxiedShadowValue(this, {}, i);\r\n            }\r\n            return this.shadows[i];\r\n          },\r\n          set(value) {\r\n            if (this.shadows == null) {\r\n              this.shadows = [];\r\n            }\r\n            this.shadows[i] = proxiedShadowValue(this, value, i);\r\n            return this.updateShadowStyle();\r\n          },\r\n        });\r\n      })(i);\r\n    }\r\n\r\n    // Shadow properties\r\n    for (var shadowProp of [\"X\", \"Y\", \"Blur\", \"Spread\", \"Color\", \"Type\"]) {\r\n      ((shadowProp) => {\r\n        return this.define(`shadow${shadowProp}`, {\r\n          get() {\r\n            if (this.shadows == null || this.shadows.length === 0) {\r\n              return null;\r\n            }\r\n            return this.shadows[0][shadowProp.toLowerCase()];\r\n          },\r\n          set(value) {\r\n            return this.updateShadowsProperty(shadowProp.toLowerCase(), value);\r\n          },\r\n        });\r\n      })(shadowProp);\r\n    }\r\n\r\n    this.define(\"shadows\", {\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"shadows\");\r\n      },\r\n      set(value) {\r\n        if (value == null) {\r\n          value = [];\r\n        }\r\n        const shadows = [];\r\n        for (let index = 0; index < value.length; index++) {\r\n          var shadow = value[index];\r\n          if (shadow === null) {\r\n            shadows.push(null);\r\n          } else {\r\n            shadows.push(proxiedShadowValue(this, shadow, index));\r\n          }\r\n        }\r\n        this._setPropertyValue(\"shadows\", shadows);\r\n        return this.updateShadowStyle();\r\n      },\r\n    });\r\n\r\n    // Color properties\r\n    this.define(\r\n      \"backgroundColor\",\r\n      layerProperty(\r\n        this,\r\n        \"backgroundColor\",\r\n        \"backgroundColor\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor\r\n      )\r\n    );\r\n    this.define(\r\n      \"color\",\r\n      layerProperty(\r\n        this,\r\n        \"color\",\r\n        \"color\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        null,\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    // Border properties\r\n    this.define(\r\n      \"borderRadius\",\r\n      layerProperty(\r\n        this,\r\n        \"borderRadius\",\r\n        \"borderRadius\",\r\n        0,\r\n        null,\r\n        asBorderRadius,\r\n        null,\r\n        null,\r\n        \"_elementBorder\",\r\n        true,\r\n        true\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderColor\",\r\n      layerProperty(\r\n        this,\r\n        \"borderColor\",\r\n        \"borderColor\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        null,\r\n        \"_elementBorder\"\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderWidth\",\r\n      layerProperty(\r\n        this,\r\n        \"borderWidth\",\r\n        \"borderWidth\",\r\n        0,\r\n        null,\r\n        asBorderWidth,\r\n        null,\r\n        null,\r\n        \"_elementBorder\",\r\n        false,\r\n        true\r\n      )\r\n    );\r\n    this.define(\r\n      \"borderStyle\",\r\n      layerProperty(\r\n        this,\r\n        \"borderStyle\",\r\n        \"borderStyle\",\r\n        \"solid\",\r\n        _.isString,\r\n        null,\r\n        null,\r\n        null,\r\n        \"_elementBorder\"\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"force2d\",\r\n      layerProperty(this, \"force2d\", \"webkitTransform\", false, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"flat\",\r\n      layerProperty(this, \"flat\", \"webkitTransformStyle\", false, _.isBoolean)\r\n    );\r\n    this.define(\r\n      \"backfaceVisible\",\r\n      layerProperty(\r\n        this,\r\n        \"backfaceVisible\",\r\n        \"webkitBackfaceVisibility\",\r\n        true,\r\n        _.isBoolean\r\n      )\r\n    );\r\n\r\n    //#############################################################\r\n    // Identity\r\n\r\n    this.define(\"name\", {\r\n      default: \"\",\r\n      get() {\r\n        const name = this._getPropertyValue(\"name\");\r\n        if (name != null) {\r\n          return `${name}`;\r\n        } else {\r\n          return \"\";\r\n        }\r\n      },\r\n\r\n      set(value) {\r\n        this._setPropertyValue(\"name\", value);\r\n        // Set the name attribute of the dom element too\r\n        // See: https://github.com/koenbok/Framer/issues/63\r\n        return this._element.setAttribute(\"name\", value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Matrices\r\n\r\n    // matrix of layer transforms\r\n    this.define(\"matrix\", {\r\n      get() {\r\n        if (this.force2d) {\r\n          return this._matrix2d;\r\n        }\r\n        return Matrix.identity3d()\r\n          .translate(this.x, this.y, this.z)\r\n          .scale(this.scale)\r\n          .scale(this.scaleX, this.scaleY, this.scaleZ)\r\n          .skew(this.skew)\r\n          .skewX(this.skewX)\r\n          .skewY(this.skewY)\r\n          .translate(0, 0, this.originZ)\r\n          .rotate(this.rotationX, 0, 0)\r\n          .rotate(0, this.rotationY, 0)\r\n          .rotate(0, 0, this.rotationZ)\r\n          .translate(0, 0, -this.originZ);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms when 2d is forced\r\n    this.define(\"_matrix2d\", {\r\n      get() {\r\n        return Matrix.identity3d()\r\n          .translate(this.x, this.y)\r\n          .scale(this.scale)\r\n          .scale(this.scaleX, this.scaleY)\r\n          .skewX(this.skew)\r\n          .skewY(this.skew)\r\n          .rotate(0, 0, this.rotationZ);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms with transform origin applied\r\n    this.define(\"transformMatrix\", {\r\n      get() {\r\n        return Matrix.identity3d()\r\n          .translate(this.originX * this.width, this.originY * this.height)\r\n          .multiply(this.matrix)\r\n          .translate(-this.originX * this.width, -this.originY * this.height);\r\n      },\r\n    });\r\n\r\n    // matrix of layer transforms with perspective applied\r\n    this.define(\"matrix3d\", {\r\n      get() {\r\n        const parent = this.parent || this.context;\r\n        const ppm = Utils.perspectiveMatrix(parent);\r\n        return Matrix.identity3d().multiply(ppm).multiply(this.transformMatrix);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Border radius compatibility\r\n\r\n    // Because it should be cornerRadius, we alias it here\r\n    this.define(\"cornerRadius\", {\r\n      importable: false,\r\n      exportable: false,\r\n      // exportable: no\r\n      get() {\r\n        return this.borderRadius;\r\n      },\r\n      set(value) {\r\n        return (this.borderRadius = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"point\", {\r\n      importable: true,\r\n      exportable: false,\r\n      depends: [\"width\", \"height\", \"size\", \"parent\"],\r\n      get() {\r\n        return Utils.point(this);\r\n      },\r\n      set(input) {\r\n        input = layerPropertyPointTransformer(input, this, \"point\");\r\n        return this._setGeometryValues(input, [\"x\", \"y\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"midPoint\", {\r\n      importable: true,\r\n      exportable: false,\r\n      depends: [\"width\", \"height\", \"size\", \"parent\", \"point\"],\r\n      get() {\r\n        return {\r\n          x: this.midX,\r\n          y: this.midY,\r\n        };\r\n      },\r\n      set(input) {\r\n        input = layerPropertyPointTransformer(input, this, \"midPoint\");\r\n        if (!_.isNumber(input)) {\r\n          input = _.pick(input, [\"x\", \"y\", \"midX\", \"midY\"]);\r\n          if (input.x != null && input.midX == null) {\r\n            input.midX = input.x;\r\n            delete input.x;\r\n          }\r\n          if (input.y != null && input.midY == null) {\r\n            input.midY = input.y;\r\n            delete input.y;\r\n          }\r\n        }\r\n        return this._setGeometryValues(input, [\"midX\", \"midY\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"size\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.size(this);\r\n      },\r\n      set(input) {\r\n        return this._setGeometryValues(input, [\"width\", \"height\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"frame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frame(this);\r\n      },\r\n      set(input) {\r\n        return this._setGeometryValues(input, [\"x\", \"y\", \"width\", \"height\"]);\r\n      },\r\n    });\r\n\r\n    this.define(\"minX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this.x;\r\n      },\r\n      set(value) {\r\n        return (this.x = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"midX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMidX(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMidX(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"maxX\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMaxX(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMaxX(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"minY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this.y;\r\n      },\r\n      set(value) {\r\n        return (this.y = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"midY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMidY(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMidY(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"maxY\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.frameGetMaxY(this);\r\n      },\r\n      set(value) {\r\n        return Utils.frameSetMaxY(this, value);\r\n      },\r\n    });\r\n\r\n    this.define(\"constraintValues\", {\r\n      importable: true,\r\n      exportable: false,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"constraintValues\");\r\n      },\r\n      set(value) {\r\n        let newValue;\r\n        if (value === null) {\r\n          newValue = null;\r\n          this.off(\"change:parent\", this.parentChanged);\r\n          Screen.off(\"resize\", this.layout);\r\n        } else {\r\n          let needle3;\r\n          newValue = _.defaults(_.clone(value), {\r\n            left: 0,\r\n            right: null,\r\n            top: 0,\r\n            bottom: null,\r\n            centerAnchorX: 0,\r\n            centerAnchorY: 0,\r\n            widthFactor: null,\r\n            heightFactor: null,\r\n            aspectRatioLocked: false,\r\n            width: this.width,\r\n            height: this.height,\r\n          });\r\n          if (this.parent != null) {\r\n            let needle, needle1;\r\n            if (\r\n              !((needle = this.layout),\r\n              Array.from(this.parent.listeners(\"change:width\")).includes(\r\n                needle\r\n              ))\r\n            ) {\r\n              this.parent.on(\"change:width\", this.layout);\r\n            }\r\n            if (\r\n              !((needle1 = this.layout),\r\n              Array.from(this.parent.listeners(\"change:height\")).includes(\r\n                needle1\r\n              ))\r\n            ) {\r\n              this.parent.on(\"change:height\", this.layout);\r\n            }\r\n          } else {\r\n            let needle2;\r\n            if (\r\n              !((needle2 = this.layout),\r\n              Array.from(Screen.listeners(\"resize\")).includes(needle2))\r\n            ) {\r\n              Screen.on(\"resize\", this.layout);\r\n            }\r\n          }\r\n          if (\r\n            !((needle3 = this.parentChanged),\r\n            Array.from(this.listeners(\"change:parent\")).includes(needle3))\r\n          ) {\r\n            this.on(\"change:parent\", this.parentChanged);\r\n          }\r\n        }\r\n        return this._setPropertyValue(\"constraintValues\", newValue);\r\n      },\r\n    });\r\n\r\n    this.define(\"htmlIntrinsicSize\", {\r\n      importable: true,\r\n      exportable: true,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"htmlIntrinsicSize\");\r\n      },\r\n      set(value) {\r\n        if (value === null) {\r\n          return this._setPropertyValue(\"htmlIntrinsicSize\", value);\r\n        } else {\r\n          if (!_.isFinite(value.width) || !_.isFinite(value.height)) {\r\n            return;\r\n          }\r\n          return this._setPropertyValue(\"htmlIntrinsicSize\", {\r\n            width: value.width,\r\n            height: value.height,\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"canvasFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.boundingFrame(this);\r\n      },\r\n      set(frame) {\r\n        return (this.frame = Utils.convertFrameFromContext(\r\n          frame,\r\n          this,\r\n          true,\r\n          false\r\n        ));\r\n      },\r\n    });\r\n\r\n    this.define(\"screenFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return Utils.boundingFrame(this, false);\r\n      },\r\n      set(frame) {\r\n        return (this.frame = Utils.convertFrameFromContext(\r\n          frame,\r\n          this,\r\n          false,\r\n          false\r\n        ));\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // CSS\r\n\r\n    this.define(\"style\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this._element.style;\r\n      },\r\n      set(value) {\r\n        _.extend(this._element.style, value);\r\n        return this.emit(\"change:style\");\r\n      },\r\n    });\r\n\r\n    this.define(\"classList\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        return this._element.classList;\r\n      },\r\n    });\r\n\r\n    this.define(\"html\", {\r\n      get() {\r\n        return (\r\n          (this._elementHTML != null\r\n            ? this._elementHTML.innerHTML\r\n            : undefined) || \"\"\r\n        );\r\n      },\r\n\r\n      set(value) {\r\n        // Insert some html directly into this layer. We actually create\r\n        // a child node to insert it in, so it won't mess with Framers\r\n        // layer hierarchy.\r\n        this._createHTMLElementIfNeeded();\r\n        const ids = Utils.getIdAttributesFromString(value);\r\n        for (var id of Array.from(ids)) {\r\n          var existingElement = document.querySelector(`[id='${id}']`);\r\n          if (existingElement != null) {\r\n            Utils.throwInStudioOrWarnInProduction(\r\n              Layer.ExistingIdMessage(\"html\", id)\r\n            );\r\n            return;\r\n          }\r\n        }\r\n\r\n        this._elementHTML.innerHTML = value;\r\n        this._updateHTMLScale();\r\n\r\n        // If the contents contains something else than plain text\r\n        // then we turn off ignoreEvents so buttons etc will work.\r\n\r\n        // if not (\r\n        // \t@_elementHTML.childNodes.length is 1 and\r\n        // \t@_elementHTML.childNodes[0].nodeName is \"#text\")\r\n        // \t@ignoreEvents = false\r\n\r\n        return this.emit(\"change:html\");\r\n      },\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      default: \"\",\r\n      get() {\r\n        return this._getPropertyValue(\"image\");\r\n      },\r\n      set(value) {\r\n        const currentValue = this._getPropertyValue(\"image\");\r\n        const defaults = Defaults.getDefaults(\"Layer\", {});\r\n        const isBackgroundColorDefault =\r\n          this.backgroundColor != null\r\n            ? this.backgroundColor.isEqual(defaults.backgroundColor)\r\n            : undefined;\r\n\r\n        if (Gradient.isGradientObject(value)) {\r\n          this.emit(\"change:gradient\", value, currentValue);\r\n          this.emit(\"change:image\", value, currentValue);\r\n          this._setPropertyValue(\"image\", value);\r\n          this.style[\"background-image\"] = value.toCSS();\r\n          if (isBackgroundColorDefault) {\r\n            this.backgroundColor = null;\r\n          }\r\n          return;\r\n        }\r\n\r\n        if (!(_.isString(value) || value === null)) {\r\n          layerValueTypeError(\"image\", value);\r\n        }\r\n\r\n        if (currentValue === value) {\r\n          return this.emit(\"load\");\r\n        }\r\n\r\n        // Unset the background color only if its the default color\r\n        if (isBackgroundColorDefault) {\r\n          this.backgroundColor = null;\r\n        }\r\n\r\n        // Set the property value\r\n        this._setPropertyValue(\"image\", value);\r\n        if ([null, \"\"].includes(value)) {\r\n          if (this._imageLoader != null) {\r\n            this._imageEventManager.removeAllListeners();\r\n            this._imageLoader.src = null;\r\n          }\r\n\r\n          this.style[\"background-image\"] = null;\r\n\r\n          if (this._imageLoader != null) {\r\n            this.emit(Events.ImageLoadCancelled, this._imageLoader);\r\n            this._cleanupImageLoader();\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        // Show placeholder image on any browser that doesn't support inline pdf\r\n        if (\r\n          _.endsWith(\r\n            typeof value.toLowerCase === \"function\"\r\n              ? value.toLowerCase()\r\n              : undefined,\r\n            \".pdf\"\r\n          ) &&\r\n          (!Utils.isWebKit() || Utils.isChrome())\r\n        ) {\r\n          this.style[\"background-image\"] =\r\n            \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAVlJREFUaAXtlwEOwiAMRdF4Cr3/0fQaSre9ZFSYLCrQpSSG/FLW9v92agghXJdP3KZlCp/J2up+WiUuzMt6zNukzPDYvALCsKme1/maV8BnQHqw9/IZ6KmAz0BP9ontMwATPXafgR6s65g+A5qRlrhmBu6FhG6LXf9/+JU/YclROkVWEs/8r9FLrChb2apSqVqWZgKmtRKz9/f+CdPxoVl8CAWylcWKUQZGwfhjB3OOHcw5djDn2MH6fBNLC42yaEnyoTXB2V36+lPlz+zN9x6HKfxrZwZ/HUbf5/lJviMpoBPWBWWxFJCtLNqplItIWuvPffx5Dphz7GB9vonNv4X2zICWuMTM3p7Gv/b5iVLmFaiZgb3M/Ns/Ud68AvIGkJ6ir8xh8wrQrzAve9Jjo2PzCsC8z4Aw0WP5DPRgXcf07wHNSEvsM9CS7VIsn4ESMy3sPgMtWN6K8QKfubDo2UqVogAAAABJRU5ErkJggg==')\";\r\n          return;\r\n        }\r\n\r\n        let imageUrl = value;\r\n\r\n        // Optional base image value\r\n        // imageUrl = Config.baseUrl + imageUrl\r\n\r\n        if (\r\n          this._alwaysUseImageCache === false &&\r\n          Utils.isLocalAssetUrl(imageUrl)\r\n        ) {\r\n          imageUrl += /\\?/.test(imageUrl) ? \"&\" : \"?\";\r\n          imageUrl += `nocache=${NoCacheDateKey}`;\r\n        }\r\n\r\n        // As an optimization, we will only use a loader\r\n        // if something is explicitly listening to the load event\r\n\r\n        if (\r\n          this.listeners(Events.ImageLoaded, true) ||\r\n          this.listeners(Events.ImageLoadError, true) ||\r\n          this.listeners(Events.ImageLoadCancelled, true)\r\n        ) {\r\n          this._imageLoader = new Image();\r\n          this._imageLoader.name = imageUrl;\r\n          this._imageLoader.src = imageUrl;\r\n          this._imageEventManager = this._context.domEventManager.wrap(\r\n            this._imageLoader\r\n          );\r\n          this._imageEventManager.addEventListener(\"load\", () => {\r\n            this.style[\"background-image\"] = `url('${imageUrl}')`;\r\n            this.emit(Events.ImageLoaded, this._imageLoader);\r\n            return this._cleanupImageLoader();\r\n          });\r\n\r\n          return this._imageEventManager.addEventListener(\"error\", () => {\r\n            this.emit(Events.ImageLoadError, this._imageLoader);\r\n            return this._cleanupImageLoader();\r\n          });\r\n        } else {\r\n          return (this.style[\"background-image\"] = `url('${imageUrl}')`);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"gradient\", {\r\n      get() {\r\n        if (Gradient.isGradientObject(this.image)) {\r\n          return layerProxiedValue(this.image, this, \"gradient\");\r\n        }\r\n        return null;\r\n      },\r\n      set(value) {\r\n        // Copy semantics!\r\n        if (Gradient.isGradient(value)) {\r\n          return (this.image = new Gradient(value));\r\n        } else if (!value && Gradient.isGradientObject(this.image)) {\r\n          return (this.image = null);\r\n        }\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# HIERARCHY\r\n\r\n    this.define(\"parent\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: true,\r\n      get() {\r\n        return this._parent || null;\r\n      },\r\n      set(layer) {\r\n        if (layer === this._parent) {\r\n          return;\r\n        }\r\n\r\n        if (layer === this) {\r\n          throw Error(\"Layer.parent: a layer cannot be it's own parent.\");\r\n        }\r\n\r\n        // Check the type\r\n        if (!layer instanceof Layer) {\r\n          throw Error(\"Layer.parent needs to be a Layer object\");\r\n        }\r\n\r\n        // Cancel previous pending insertions\r\n        Utils.domCompleteCancel(this.__insertElement);\r\n\r\n        // Remove from previous parent children\r\n        if (this._parent) {\r\n          this._parent._children = _.pull(this._parent._children, this);\r\n          this._parent._element.removeChild(this._element);\r\n          this._parent.emit(\"change:children\", { added: [], removed: [this] });\r\n          this._parent.emit(\"change:subLayers\", { added: [], removed: [this] });\r\n        }\r\n\r\n        // Either insert the element to the new parent element or into dom\r\n        if (layer) {\r\n          layer._element.appendChild(this._element);\r\n          layer._children.push(this);\r\n          layer.emit(\"change:children\", { added: [this], removed: [] });\r\n          layer.emit(\"change:subLayers\", { added: [this], removed: [] });\r\n        } else {\r\n          this._insertElement();\r\n        }\r\n\r\n        const oldParent = this._parent;\r\n        // Set the parent\r\n        this._parent = layer;\r\n\r\n        // Place this layer on top of its siblings\r\n        this.bringToFront();\r\n\r\n        this.emit(\"change:parent\", this._parent, oldParent);\r\n        return this.emit(\"change:superLayer\", this._parent, oldParent);\r\n      },\r\n    });\r\n\r\n    this.define(\"children\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this._children.map(function (c) {\r\n          if (\r\n            c instanceof SVGLayer &&\r\n            c.children.length === 1 &&\r\n            _.startsWith(c.name, \".\")\r\n          ) {\r\n            return c.children[0];\r\n          } else {\r\n            return c;\r\n          }\r\n        });\r\n      },\r\n    });\r\n\r\n    this.define(\"siblings\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        // If there is no parent we need to walk through the root\r\n        if (this.parent === null) {\r\n          return _.filter(this._context.layers, (layer) => {\r\n            return layer !== this && layer.parent === null;\r\n          });\r\n        }\r\n\r\n        return _.without(this.parent.children, this);\r\n      },\r\n    });\r\n\r\n    this.define(\"descendants\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        const result = [];\r\n\r\n        var f = function (layer) {\r\n          result.push(layer);\r\n          return layer.children.map(f);\r\n        };\r\n\r\n        this.children.map(f);\r\n\r\n        return result;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Backwards superLayer and children compatibility\r\n\r\n    this.define(\"superLayer\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.parent;\r\n      },\r\n      set(value) {\r\n        return (this.parent = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"subLayers\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.children;\r\n      },\r\n    });\r\n\r\n    this.define(\"siblingLayers\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.siblings;\r\n      },\r\n    });\r\n\r\n    this.define(\"isAnimating\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this.animations().length !== 0;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# STATES\r\n\r\n    this.define(\"states\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        if (this._states == null) {\r\n          this._states = new LayerStates(this);\r\n        }\r\n        return this._states;\r\n      },\r\n      set(states) {\r\n        this.states.machine.reset();\r\n        return _.extend(this.states, states);\r\n      },\r\n    });\r\n\r\n    this.define(\"stateNames\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        return this.states.machine.stateNames;\r\n      },\r\n    });\r\n\r\n    //############################################################################\r\n    //# Draggable, Pinchable\r\n\r\n    this.define(\"draggable\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._draggable != null\r\n          ? this._draggable\r\n          : (this._draggable = new LayerDraggable(this));\r\n      },\r\n      set(value) {\r\n        if (_.isBoolean(value)) {\r\n          return (this.draggable.enabled = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"pinchable\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._pinchable != null\r\n          ? this._pinchable\r\n          : (this._pinchable = new LayerPinchable(this));\r\n      },\r\n      set(value) {\r\n        if (_.isBoolean(value)) {\r\n          return (this.pinchable.enabled = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# SCROLLING\r\n\r\n    this.define(\"scrollFrame\", {\r\n      importable: false,\r\n      get() {\r\n        let frame;\r\n        return (frame = {\r\n          x: this.scrollX,\r\n          y: this.scrollY,\r\n          width: this.width,\r\n          height: this.height,\r\n        });\r\n      },\r\n      set(frame) {\r\n        this.scrollX = frame.x;\r\n        return (this.scrollY = frame.y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollX\", {\r\n      get() {\r\n        return this._element.scrollLeft;\r\n      },\r\n      set(value) {\r\n        if (!_.isNumber(value)) {\r\n          layerValueTypeError(\"scrollX\", value);\r\n        }\r\n        return (this._element.scrollLeft = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollY\", {\r\n      get() {\r\n        return this._element.scrollTop;\r\n      },\r\n      set(value) {\r\n        if (!_.isNumber(value)) {\r\n          layerValueTypeError(\"scrollY\", value);\r\n        }\r\n        return (this._element.scrollTop = value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    //# EVENTS\r\n\r\n    this.define(\"_domEventManager\", {\r\n      get() {\r\n        return this._context.domEventManager.wrap(this._element);\r\n      },\r\n    });\r\n\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n  }\r\n\r\n  constructor(options) {\r\n    // Make sure we never call the constructor twice\r\n    this.parentChanged = this.parentChanged.bind(this);\r\n    this._layoutX = this._layoutX.bind(this);\r\n    this._layoutY = this._layoutY.bind(this);\r\n    this.layout = this.layout.bind(this);\r\n    this.convertPointToScreen = this.convertPointToScreen.bind(this);\r\n    this.convertPointToCanvas = this.convertPointToCanvas.bind(this);\r\n    this.convertPointToLayer = this.convertPointToLayer.bind(this);\r\n    this.updateForDevicePixelRatioChange =\r\n      this.updateForDevicePixelRatioChange.bind(this);\r\n    this.updateForSizeChange = this.updateForSizeChange.bind(this);\r\n    this.once = this.once.bind(this);\r\n    this.addListener = this.addListener.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (this.__constructorCalled) {\r\n      throw Error(`Layer.constructor ${this.toInspect()} called twice`);\r\n    }\r\n    this.__constructorCalled = true;\r\n    this.__constructor = true;\r\n\r\n    // Set needed private variables\r\n    this._properties = {};\r\n    this._style = {};\r\n    this._children = [];\r\n\r\n    if (this._stylesAppliedToParent == null) {\r\n      this._stylesAppliedToParent = [];\r\n    }\r\n\r\n    // Special power setting for 2d rendering path. Only enable this\r\n    // if you know what you are doing. See LayerStyle for more info.\r\n    this._prefer2d = false;\r\n    this._alwaysUseImageCache = false;\r\n\r\n    // Private setting for canceling of click event if wrapped in moved draggable\r\n    this._cancelClickEventInDragSession = true;\r\n\r\n    // We have to create the element before we set the defaults\r\n    this._createElement();\r\n\r\n    if (options.createHTMLElement) {\r\n      this._createHTMLElementIfNeeded();\r\n    }\r\n\r\n    // Create border element\r\n    this._createBorderElement();\r\n\r\n    // Sanitize calculated property setters so direct properties always win\r\n    layerPropertyIgnore(options, \"point\", [\"x\", \"y\"]);\r\n    layerPropertyIgnore(options, \"midPoint\", [\"midX\", \"midY\"]);\r\n    layerPropertyIgnore(options, \"size\", [\"width\", \"height\"]);\r\n    layerPropertyIgnore(options, \"frame\", [\"x\", \"y\", \"width\", \"height\"]);\r\n\r\n    // Backwards compatibility for superLayer\r\n    if (\r\n      !options.hasOwnProperty(\"parent\") &&\r\n      options.hasOwnProperty(\"superLayer\")\r\n    ) {\r\n      options.parent = options.superLayer;\r\n      delete options.superLayer;\r\n    }\r\n\r\n    this.__applyingDefaults = true;\r\n    super(Defaults.getDefaults(\"Layer\", options));\r\n    delete this.__applyingDefaults;\r\n\r\n    for (var cssProperty of Array.from(delayedStyles)) {\r\n      var element = this._element;\r\n      if (Array.from(this._stylesAppliedToParent).includes(cssProperty)) {\r\n        element = this._parent._element;\r\n      }\r\n      element.style[cssProperty] = LayerStyle[cssProperty](this);\r\n    }\r\n\r\n    // Add this layer to the current context\r\n    this._context.addLayer(this);\r\n    this._id = this._context.layerCounter;\r\n\r\n    // Insert the layer into the dom or the parent element\r\n    if (!options.parent) {\r\n      if (!options.shadow) {\r\n        this._insertElement();\r\n      }\r\n    } else {\r\n      this.parent = options.parent;\r\n    }\r\n\r\n    // Set some calculated properties\r\n    // Make sure we set the right index\r\n    if (options.hasOwnProperty(\"index\")) {\r\n      this.index = options.index;\r\n    }\r\n\r\n    // x and y always win from point, frame or size\r\n    for (var p of [\"x\", \"y\", \"width\", \"height\"]) {\r\n      if (options.hasOwnProperty(p)) {\r\n        this[p] = options[p];\r\n      }\r\n    }\r\n\r\n    this._context.emit(\"layer:create\", this);\r\n\r\n    // Make sure the layer is always centered\r\n    this.label = this.label;\r\n\r\n    delete this.__constructor;\r\n\r\n    this.updateShadowStyle();\r\n\r\n    this.onChange(\"size\", this.updateForSizeChange);\r\n  }\r\n\r\n  static ExistingIdMessage(type, id) {\r\n    return `Can not set ${type}: There's already an element with id '${id}' in this document'`;\r\n  }\r\n\r\n  updateShadowsProperty(prop, value) {\r\n    if (this.shadows == null) {\r\n      this.shadows = [];\r\n    }\r\n    if (this.shadows.filter((s) => s !== null).length === 0) {\r\n      this.shadows[0] = proxiedShadowValue(this, Framer.Defaults.Shadow);\r\n    }\r\n    for (var shadow of Array.from(this.shadows)) {\r\n      if (shadow != null) {\r\n        shadow[prop] = value;\r\n      }\r\n    }\r\n    return this.updateShadowStyle();\r\n  }\r\n\r\n  updateShadowStyle() {\r\n    if (this.__constructor) {\r\n      return;\r\n    }\r\n    this._element.style.boxShadow = LayerStyle[\"boxShadow\"](this);\r\n    this._element.style.textShadow = LayerStyle[\"textShadow\"](this);\r\n    return (this._element.style.webkitFilter =\r\n      LayerStyle[\"webkitFilter\"](this));\r\n  }\r\n\r\n  //#############################################################\r\n  // Geometry\r\n\r\n  _setGeometryValues(input, keys) {\r\n    // If this is a number, we set everything to that number\r\n    if (_.isNumber(input)) {\r\n      return (() => {\r\n        const result = [];\r\n        for (var k of Array.from(keys)) {\r\n          if (this[k] !== input) {\r\n            result.push((this[k] = input));\r\n          } else {\r\n            result.push(undefined);\r\n          }\r\n        }\r\n        return result;\r\n      })();\r\n    } else {\r\n      // If there is nothing to work with we exit\r\n      if (!input) {\r\n        return;\r\n      }\r\n\r\n      // Set every numeric value for eacht key\r\n      return (() => {\r\n        const result1 = [];\r\n        for (var k of Array.from(keys)) {\r\n          if (_.isNumber(input[k]) && this[k] !== input[k]) {\r\n            result1.push((this[k] = input[k]));\r\n          } else {\r\n            result1.push(undefined);\r\n          }\r\n        }\r\n        return result1;\r\n      })();\r\n    }\r\n  }\r\n\r\n  parentChanged(newParent, oldParent) {\r\n    if (oldParent != null) {\r\n      oldParent.off(\"change:width\", this.layout);\r\n      oldParent.off(\"change:height\", this.layout);\r\n    } else {\r\n      Screen.off(\"resize\", this.layout);\r\n    }\r\n    return (this.constraintValues = null);\r\n  }\r\n\r\n  setParentPreservingConstraintValues(parent) {\r\n    const tmp = this.constraintValues;\r\n    this.parent = parent;\r\n    this.constraintValues = tmp;\r\n    return this.layout();\r\n  }\r\n\r\n  _layoutX() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.x = Utils.calculateLayoutX(\r\n      parentFrame,\r\n      this.constraintValues,\r\n      this.width\r\n    );\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  _layoutY() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.y = Utils.calculateLayoutY(\r\n      parentFrame,\r\n      this.constraintValues,\r\n      this.height\r\n    );\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  layout() {\r\n    if (this.constraintValues == null) {\r\n      return;\r\n    }\r\n    if (this.parent == null && !this.context.autoLayout) {\r\n      return;\r\n    }\r\n    const parentFrame =\r\n      (this.parent != null ? this.parent.frame : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent.frame\r\n          : undefined\r\n        : this.context.innerFrame;\r\n    this.isLayouting = true;\r\n    this.frame = Utils.calculateLayoutFrame(parentFrame, this);\r\n    return (this.isLayouting = false);\r\n  }\r\n\r\n  convertPointToScreen(point) {\r\n    return Utils.convertPointToContext(point, this, false);\r\n  }\r\n\r\n  convertPointToCanvas(point) {\r\n    return Utils.convertPointToContext(point, this, true);\r\n  }\r\n\r\n  convertPointToLayer(point, layer, rootContext) {\r\n    if (rootContext == null) {\r\n      rootContext = true;\r\n    }\r\n    return Utils.convertPoint(point, this, layer, rootContext);\r\n  }\r\n\r\n  contentFrame() {\r\n    if (!this._children.length) {\r\n      return { x: 0, y: 0, width: 0, height: 0 };\r\n    }\r\n    return Utils.frameMerge(_.map(this._children, \"frame\"));\r\n  }\r\n\r\n  totalFrame() {\r\n    return Utils.frameMerge(this.frame, this.contentFrame());\r\n  }\r\n\r\n  centerFrame() {\r\n    // Get the centered frame for its parent\r\n    let frame;\r\n    if (this.parent) {\r\n      ({ frame } = this);\r\n      Utils.frameSetMidX(\r\n        frame,\r\n        parseInt(this.parent.width / 2.0 - this.parent.borderWidth)\r\n      );\r\n      Utils.frameSetMidY(\r\n        frame,\r\n        parseInt(this.parent.height / 2.0 - this.parent.borderWidth)\r\n      );\r\n      return frame;\r\n    } else {\r\n      ({ frame } = this);\r\n      Utils.frameSetMidX(frame, parseInt(this._context.innerWidth / 2.0));\r\n      Utils.frameSetMidY(frame, parseInt(this._context.innerHeight / 2.0));\r\n      return frame;\r\n    }\r\n  }\r\n\r\n  center() {\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.left = null;\r\n      this.constraintValues.right = null;\r\n      this.constraintValues.top = null;\r\n      this.constraintValues.bottom = null;\r\n      this.constraintValues.centerAnchorX = 0.5;\r\n      this.constraintValues.centerAnchorY = 0.5;\r\n      this._layoutX();\r\n      this._layoutY();\r\n    } else {\r\n      this.frame = this.centerFrame(); // Center  in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  centerX(offset) {\r\n    if (offset == null) {\r\n      offset = 0;\r\n    }\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.left = null;\r\n      this.constraintValues.right = null;\r\n      this.constraintValues.centerAnchorX = 0.5;\r\n      this._layoutX();\r\n    } else {\r\n      this.x = this.centerFrame().x + offset; // Center x in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  centerY(offset) {\r\n    if (offset == null) {\r\n      offset = 0;\r\n    }\r\n    if (this.constraintValues != null) {\r\n      this.constraintValues.top = null;\r\n      this.constraintValues.bottom = null;\r\n      this.constraintValues.centerAnchorY = 0.5;\r\n      this._layoutY();\r\n    } else {\r\n      this.y = this.centerFrame().y + offset; // Center y in parent\r\n    }\r\n    return this;\r\n  }\r\n\r\n  pixelAlign() {\r\n    this.x = parseInt(this.x);\r\n    return (this.y = parseInt(this.y));\r\n  }\r\n\r\n  updateForDevicePixelRatioChange() {\r\n    return [\r\n      \"width\",\r\n      \"height\",\r\n      \"webkitTransform\",\r\n      \"boxShadow\",\r\n      \"textShadow\",\r\n      \"webkitFilter\",\r\n      \"borderRadius\",\r\n      \"borderWidth\",\r\n      \"fontSize\",\r\n      \"letterSpacing\",\r\n      \"wordSpacing\",\r\n      \"textIndent\",\r\n    ].map(\r\n      (cssProperty) =>\r\n        (this._element.style[cssProperty] = LayerStyle[cssProperty](this))\r\n    );\r\n  }\r\n\r\n  updateForSizeChange() {\r\n    return (this._elementBorder.style.borderWidth =\r\n      LayerStyle[\"borderWidth\"](this));\r\n  }\r\n\r\n  //#############################################################\r\n  // SCREEN GEOMETRY\r\n\r\n  // TODO: Rotation/Skew\r\n\r\n  // screenOriginX = ->\r\n  // \tif @_parentOrContext()\r\n  // \t\treturn @_parentOrContext().screenOriginX()\r\n  // \treturn @originX\r\n\r\n  // screenOriginY = ->\r\n  // \tif @_parentOrContext()\r\n  // \t\treturn @_parentOrContext().screenOriginY()\r\n  // \treturn @originY\r\n\r\n  canvasScaleX(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleX;\r\n    }\r\n    for (var parent of Array.from(this.containers(true))) {\r\n      scale *= parent.scale;\r\n      if (parent.scaleX != null) {\r\n        scale *= parent.scaleX;\r\n      }\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  canvasScaleY(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleY;\r\n    }\r\n    for (var parent of Array.from(this.containers(true))) {\r\n      scale *= parent.scale;\r\n      if (parent.scaleY != null) {\r\n        scale *= parent.scaleY;\r\n      }\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaleX(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleX;\r\n    }\r\n    for (var parent of Array.from(this.containers(false))) {\r\n      scale *= parent.scale * parent.scaleX;\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaleY(self) {\r\n    if (self == null) {\r\n      self = true;\r\n    }\r\n    let scale = 1;\r\n    if (self) {\r\n      scale = this.scale * this.scaleY;\r\n    }\r\n    for (var parent of Array.from(this.containers(false))) {\r\n      scale *= parent.scale * parent.scaleY;\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  screenScaledFrame() {\r\n    // TODO: Scroll position\r\n\r\n    const frame = {\r\n      x: 0,\r\n      y: 0,\r\n      width: this.width * this.screenScaleX(),\r\n      height: this.height * this.screenScaleY(),\r\n    };\r\n\r\n    const layers = this.containers(true);\r\n    layers.push(this);\r\n    layers.reverse();\r\n\r\n    for (var parent of Array.from(layers)) {\r\n      var left, left1, left2;\r\n      var p = parentOrContext(parent);\r\n      var factorX =\r\n        (left = __guardMethod__(p, \"screenScaleX\", (o) => o.screenScaleX())) !=\r\n        null\r\n          ? left\r\n          : 1;\r\n      var factorY =\r\n        (left1 = __guardMethod__(p, \"screenScaleY\", (o1) =>\r\n          o1.screenScaleY()\r\n        )) != null\r\n          ? left1\r\n          : 1;\r\n      var layerScaledFrame =\r\n        (left2 =\r\n          typeof parent.scaledFrame === \"function\"\r\n            ? parent.scaledFrame()\r\n            : undefined) != null\r\n          ? left2\r\n          : { x: 0, y: 0 };\r\n      frame.x += layerScaledFrame.x * factorX;\r\n      frame.y += layerScaledFrame.y * factorY;\r\n    }\r\n\r\n    return frame;\r\n  }\r\n\r\n  scaledFrame() {\r\n    // Get the scaled frame for a layer, taking into account\r\n    // the transform origins.\r\n\r\n    const { frame } = this;\r\n    const scaleX = this.scale * this.scaleX;\r\n    const scaleY = this.scale * this.scaleY;\r\n\r\n    frame.width *= scaleX;\r\n    frame.height *= scaleY;\r\n    frame.x += (1 - scaleX) * this.originX * this.width;\r\n    frame.y += (1 - scaleY) * this.originY * this.height;\r\n\r\n    return frame;\r\n  }\r\n\r\n  computedStyle() {\r\n    // This is an expensive operation\r\n\r\n    let { getComputedStyle } = document.defaultView;\r\n    if (getComputedStyle == null) {\r\n      ({ getComputedStyle } = window);\r\n    }\r\n\r\n    return getComputedStyle(this._element);\r\n  }\r\n\r\n  //#############################################################\r\n  // DOM ELEMENTS\r\n\r\n  _createElement() {\r\n    if (this._element != null) {\r\n      return;\r\n    }\r\n    this._element = document.createElement(\"div\");\r\n    return this._element.classList.add(\"framerLayer\");\r\n  }\r\n\r\n  _createBorderElement() {\r\n    if (this._elementBorder != null) {\r\n      return;\r\n    }\r\n    this._elementBorder = document.createElement(\"div\");\r\n    this._elementBorder.style.position = \"absolute\";\r\n    this._elementBorder.style.top = \"0\";\r\n    this._elementBorder.style.bottom = \"0\";\r\n    this._elementBorder.style.left = \"0\";\r\n    this._elementBorder.style.right = \"0\";\r\n    this._elementBorder.style.boxSizing = \"border-box\";\r\n    this._elementBorder.style.zIndex = \"1000\";\r\n    this._elementBorder.style.pointerEvents = \"none\";\r\n    return this._element.appendChild(this._elementBorder);\r\n  }\r\n\r\n  _insertElement() {\r\n    this.bringToFront();\r\n    return this._context.element.appendChild(this._element);\r\n  }\r\n\r\n  // This method is called as soon as the @_element is part of the DOM\r\n  // If layers are initialized before the DOM is complete,\r\n  // the contexts calls this methods on all Layers as soon as it appends itself to the document\r\n  elementInsertedIntoDocument() {}\r\n\r\n  _createHTMLElementIfNeeded() {\r\n    if (!this._elementHTML) {\r\n      this._elementHTML = document.createElement(\"div\");\r\n      return this._element.insertBefore(this._elementHTML, this._elementBorder);\r\n    }\r\n  }\r\n\r\n  _updateHTMLScale() {\r\n    if (this._elementHTML == null) {\r\n      return;\r\n    }\r\n\r\n    if (this.htmlIntrinsicSize == null) {\r\n      return (this._elementHTML.style.zoom = this.context.scale);\r\n    } else {\r\n      this._elementHTML.style.transformOrigin = \"0 0\";\r\n      this._elementHTML.style.transform = `scale(${\r\n        (this.context.scale * this.width) / this.htmlIntrinsicSize.width\r\n      }, ${\r\n        (this.context.scale * this.height) / this.htmlIntrinsicSize.height\r\n      })`;\r\n      this._elementHTML.style.width = `${this.htmlIntrinsicSize.width}px`;\r\n      return (this._elementHTML.style.height = `${this.htmlIntrinsicSize.height}px`);\r\n    }\r\n  }\r\n\r\n  querySelector(query) {\r\n    return this._element.querySelector(query);\r\n  }\r\n  querySelectorAll(query) {\r\n    return this._element.querySelectorAll(query);\r\n  }\r\n\r\n  selectChild(selector) {\r\n    return Utils.findLayer(this.descendants, selector);\r\n  }\r\n\r\n  selectAllChildren(selector) {\r\n    return Utils.filterLayers(this.descendants, selector);\r\n  }\r\n\r\n  static select(selector) {\r\n    return Framer.CurrentContext.selectLayer(selector);\r\n  }\r\n\r\n  static selectAll(selector) {\r\n    return Framer.CurrentContext.selectAllLayers(selector);\r\n  }\r\n\r\n  destroy() {\r\n    // Todo: check this\r\n\r\n    if (this.parent) {\r\n      this.parent._children = _.without(this.parent._children, this);\r\n    }\r\n\r\n    if (this._element.parentNode != null) {\r\n      this._element.parentNode.removeChild(this._element);\r\n    }\r\n    this.removeAllListeners();\r\n\r\n    this._context.removeLayer(this);\r\n    this._context.emit(\"layer:destroy\", this);\r\n    return this._context.domEventManager.remove(this._element);\r\n  }\r\n\r\n  //#############################################################\r\n  //# COPYING\r\n\r\n  copy() {\r\n    const layer = this.copySingle();\r\n\r\n    for (var child of Array.from(this._children)) {\r\n      var copiedChild = child.copy();\r\n      if (copiedChild !== null) {\r\n        copiedChild.parent = layer;\r\n      }\r\n    }\r\n\r\n    return layer;\r\n  }\r\n\r\n  copySingle() {\r\n    const copy = new this.constructor(this.props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n\r\n  //#############################################################\r\n  //# IMAGE\r\n\r\n  _cleanupImageLoader() {\r\n    if (this._imageEventManager != null) {\r\n      this._imageEventManager.removeAllListeners();\r\n    }\r\n    this._imageEventManager = null;\r\n    return (this._imageLoader = null);\r\n  }\r\n\r\n  addChild(layer) {\r\n    return (layer.parent = this);\r\n  }\r\n\r\n  removeChild(layer) {\r\n    if (!Array.from(this._children).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    return (layer.parent = null);\r\n  }\r\n\r\n  childrenWithName(name) {\r\n    return _.filter(this.children, (layer) => layer.name === name);\r\n  }\r\n\r\n  siblingsWithName(name) {\r\n    return _.filter(this.siblingLayers, (layer) => layer.name === name);\r\n  }\r\n\r\n  // Get all containers of this layer, including containing contexts\r\n  // `toRoot` specifies if you want to bubble up across contexts,\r\n  // so specifiying `false` will stop at the first context\r\n  // and thus the results will never contain any context\r\n  containers(toRoot, result) {\r\n    if (toRoot == null) {\r\n      toRoot = false;\r\n    }\r\n    if (result == null) {\r\n      result = [];\r\n    }\r\n    if (this.parent != null) {\r\n      result.push(this.parent);\r\n      return this.parent.containers(toRoot, result);\r\n    } else if (toRoot) {\r\n      result.push(this.context);\r\n      return this.context.containers(true, result);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  ancestors() {\r\n    return this.containers();\r\n  }\r\n\r\n  root() {\r\n    if (this.parent === null) {\r\n      return this;\r\n    }\r\n    return _.last(this.ancestors());\r\n  }\r\n\r\n  childrenAbove(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).y < point.y\r\n    );\r\n  }\r\n  childrenBelow(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).y > point.y\r\n    );\r\n  }\r\n  childrenLeft(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).x < point.x\r\n    );\r\n  }\r\n  childrenRight(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.filter(\r\n      this.children,\r\n      (layer) =>\r\n        Utils.framePointForOrigin(layer.frame, originX, originY).x > point.x\r\n    );\r\n  }\r\n\r\n  _parentOrContext() {\r\n    if (this.parent) {\r\n      return this.parent;\r\n    }\r\n    if (this._context._parent) {\r\n      return this._context._parent;\r\n    }\r\n  }\r\n\r\n  addSubLayer(layer) {\r\n    return this.addChild(layer);\r\n  }\r\n  removeSubLayer(layer) {\r\n    return this.removeChild(layer);\r\n  }\r\n  subLayersByName(name) {\r\n    return this.childrenWithName(name);\r\n  }\r\n  siblingLayersByName(name) {\r\n    return this.siblingsWithName(name);\r\n  }\r\n  subLayersAbove(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenAbove(point, originX, originY);\r\n  }\r\n  subLayersBelow(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenBelow(point, originX, originY);\r\n  }\r\n  subLayersLeft(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenLeft(point, originX, originY);\r\n  }\r\n  subLayersRight(point, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return this.childrenRight(point, originX, originY);\r\n  }\r\n\r\n  //#############################################################\r\n  //# ANIMATION\r\n\r\n  animate(properties, options) {\r\n    // If the properties are a string, we assume it's a state name\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (_.isString(properties)) {\r\n      const stateName = properties;\r\n\r\n      // Support options as an object\r\n      if (options.options != null) {\r\n        ({ options } = options);\r\n      }\r\n\r\n      return this.states.machine.switchTo(stateName, options);\r\n    }\r\n    // We need to clone the properties so we don't modify them unexpectedly\r\n    properties = _.clone(properties);\r\n\r\n    // Support the old properties syntax, we add all properties top level and\r\n    // move the options into an options property.\r\n    if (properties.properties != null) {\r\n      options = properties;\r\n      ({ properties } = options);\r\n      delete options.properties;\r\n    }\r\n\r\n    // With the new api we treat the properties as animatable properties, and use\r\n    // the special options keyword for animation options.\r\n    if (properties.options != null) {\r\n      options = _.defaults({}, options, properties.options);\r\n      delete properties.options;\r\n    }\r\n\r\n    // Merge the animation options with the default animation options for this layer\r\n    options = _.defaults({}, options, this.animationOptions);\r\n    if (options.start == null) {\r\n      options.start = true;\r\n    }\r\n\r\n    const animation = new Animation(this, properties, options);\r\n    if (options.start) {\r\n      animation.start();\r\n    }\r\n\r\n    return animation;\r\n  }\r\n\r\n  stateCycle(...args) {\r\n    let options;\r\n    const states = _.flatten(args);\r\n    if (_.isObject(_.last(states))) {\r\n      options = states.pop();\r\n    }\r\n    return this.animate(this.states.machine.next(states), options);\r\n  }\r\n\r\n  stateSwitch(stateName, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (stateName == null) {\r\n      throw new Error(\"Missing required argument 'stateName' in stateSwitch()\");\r\n    }\r\n    if (options.animate === true) {\r\n      return this.animate(stateName, options);\r\n    }\r\n    return this.animate(stateName, _.defaults({}, options, { instant: true }));\r\n  }\r\n\r\n  animations(includePending) {\r\n    // Current running animations on this layer\r\n    if (includePending == null) {\r\n      includePending = false;\r\n    }\r\n    return _.filter(this._context.animations, (animation) => {\r\n      if (animation.layer !== this) {\r\n        return false;\r\n      }\r\n      return includePending || !animation.isPending;\r\n    });\r\n  }\r\n\r\n  animatingProperties() {\r\n    const properties = {};\r\n\r\n    for (var animation of Array.from(this.animations())) {\r\n      for (var propertyName of Array.from(animation.animatingProperties())) {\r\n        properties[propertyName] = animation;\r\n      }\r\n    }\r\n\r\n    return properties;\r\n  }\r\n\r\n  animateStop() {\r\n    _.invokeMap(this.animations(), \"stop\");\r\n    return this._draggable != null ? this._draggable.animateStop() : undefined;\r\n  }\r\n\r\n  //#############################################################\r\n  //# INDEX ORDERING\r\n\r\n  bringToFront() {\r\n    let maxIndex = null;\r\n    const siblings =\r\n      (this.parent != null ? this.parent._children : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent._children\r\n          : undefined\r\n        : this.context._layers;\r\n    if (siblings.count <= 1) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(siblings)) {\r\n      if (layer === this) {\r\n        continue;\r\n      }\r\n      if (maxIndex == null) {\r\n        maxIndex = layer.index;\r\n      }\r\n      if (layer.index > maxIndex) {\r\n        maxIndex = layer.index;\r\n      }\r\n    }\r\n    if (maxIndex != null) {\r\n      return (this.index = maxIndex + 1);\r\n    }\r\n  }\r\n\r\n  sendToBack() {\r\n    let minIndex = null;\r\n    const siblings =\r\n      (this.parent != null ? this.parent._children : undefined) != null\r\n        ? this.parent != null\r\n          ? this.parent._children\r\n          : undefined\r\n        : this.context._layers;\r\n    if (siblings.count <= 1) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(siblings)) {\r\n      if (layer === this) {\r\n        continue;\r\n      }\r\n      if (minIndex == null) {\r\n        minIndex = layer.index;\r\n      }\r\n      if (layer.index < minIndex) {\r\n        minIndex = layer.index;\r\n      }\r\n    }\r\n    if (minIndex != null) {\r\n      return (this.index = minIndex - 1);\r\n    }\r\n  }\r\n\r\n  placeBefore(layer) {\r\n    if (!Array.from(this.siblingLayers).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    for (var l of Array.from(this.siblingLayers)) {\r\n      if (l.index <= layer.index) {\r\n        l.index -= 1;\r\n      }\r\n    }\r\n\r\n    return (this.index = layer.index + 1);\r\n  }\r\n\r\n  placeBehind(layer) {\r\n    if (!Array.from(this.siblingLayers).includes(layer)) {\r\n      return;\r\n    }\r\n\r\n    for (var l of Array.from(this.siblingLayers)) {\r\n      if (l.index >= layer.index) {\r\n        l.index += 1;\r\n      }\r\n    }\r\n\r\n    return (this.index = layer.index - 1);\r\n  }\r\n\r\n  emit(eventName, ...args) {\r\n    // If this layer has a parent draggable view and its position moved\r\n    // while dragging we automatically cancel click events. This is what\r\n    // you expect when you add a button to a scroll content layer. We only\r\n    // want to do this if this layer is not draggable itself because that\r\n    // would break nested ScrollComponents.\r\n\r\n    if (this._cancelClickEventInDragSession && !this._draggable) {\r\n      if (\r\n        [\r\n          Events.Click,\r\n          Events.Tap,\r\n          Events.TapStart,\r\n          Events.TapEnd,\r\n          Events.LongPress,\r\n          Events.LongPressStart,\r\n          Events.LongPressEnd,\r\n        ].includes(eventName)\r\n      ) {\r\n        // If we dragged any layer, we should cancel click events\r\n        if (LayerDraggable._globalDidDrag === true) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    // See if we need to convert coordinates for this event. Mouse events by\r\n    // default have the screen coordinates so we make sure that event.point and\r\n    // event.contextPoint always have the proper coordinates.\r\n\r\n    if (\r\n      (args[0] != null ? args[0].clientX : undefined) != null ||\r\n      (args[0] != null ? args[0].clientY : undefined) != null\r\n    ) {\r\n      const event = args[0];\r\n      let point = { x: event.clientX, y: event.clientY };\r\n\r\n      event.point = Utils.convertPointFromContext(point, this, true);\r\n      event.contextPoint = Utils.convertPointFromContext(\r\n        point,\r\n        this.context,\r\n        true\r\n      );\r\n\r\n      if (event.touches != null) {\r\n        for (var touch of Array.from(event.touches)) {\r\n          point = { x: touch.clientX, y: touch.clientY };\r\n          touch.point = Utils.convertPointFromContext(point, this, true);\r\n          touch.contextPoint = Utils.convertPointFromContext(\r\n            point,\r\n            this.context,\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    // Always scope the event this to the layer and pass the layer as\r\n    // last argument for every event.\r\n    return super.emit(eventName, ...Array.from(args), this);\r\n  }\r\n\r\n  once(eventName, listener) {\r\n    super.once(eventName, listener);\r\n    return this._addListener(eventName, listener);\r\n  }\r\n\r\n  addListener(eventName, listener) {\r\n    if (!eventName) {\r\n      throw Error(\"Layer.on needs a valid event name\");\r\n    }\r\n    if (!listener) {\r\n      throw Error(\"Layer.on needs an event listener\");\r\n    }\r\n    super.addListener(eventName, listener);\r\n    return this._addListener(eventName, listener);\r\n  }\r\n\r\n  removeListener(eventName, listener) {\r\n    if (!eventName) {\r\n      throw Error(\"Layer.off needs a valid event name\");\r\n    }\r\n    super.removeListener(eventName, listener);\r\n    return this._removeListener(eventName, listener);\r\n  }\r\n\r\n  _addListener(eventName, listener) {\r\n    // Make sure we stop ignoring events once we add a user event listener\r\n    let needle;\r\n    if (!_.startsWith(eventName, \"change:\")) {\r\n      this.ignoreEvents = false;\r\n    }\r\n\r\n    // If this is a dom event, we want the actual dom node to let us know\r\n    // when it gets triggered, so we can emit the event through the system.\r\n    if (\r\n      Utils.domValidEvent(this._element, eventName) ||\r\n      ((needle = eventName), Array.from(_.values(Gestures)).includes(needle))\r\n    ) {\r\n      if (!this._domEventManager.listeners(eventName).length) {\r\n        return this._domEventManager.addEventListener(eventName, (event) => {\r\n          return this.emit(eventName, event);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _removeListener(eventName, listener) {\r\n    // Do cleanup for dom events if this is the last one of it's type.\r\n    // We are assuming we're the only ones adding dom events to the manager.\r\n    if (!this.listeners(eventName).length) {\r\n      return this._domEventManager.removeAllListeners(eventName);\r\n    }\r\n  }\r\n\r\n  _parentDraggableLayer() {\r\n    for (var layer of Array.from(this.ancestors())) {\r\n      if (layer._draggable != null ? layer._draggable.enabled : undefined) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onClick(cb) {\r\n    return this.on(Events.Click, cb);\r\n  }\r\n  onDoubleClick(cb) {\r\n    return this.on(Events.DoubleClick, cb);\r\n  }\r\n  onScrollStart(cb) {\r\n    return this.on(Events.ScrollStart, cb);\r\n  }\r\n  onScroll(cb) {\r\n    return this.on(Events.Scroll, cb);\r\n  }\r\n  onScrollEnd(cb) {\r\n    return this.on(Events.ScrollEnd, cb);\r\n  }\r\n  onScrollAnimationDidStart(cb) {\r\n    return this.on(Events.ScrollAnimationDidStart, cb);\r\n  }\r\n  onScrollAnimationDidEnd(cb) {\r\n    return this.on(Events.ScrollAnimationDidEnd, cb);\r\n  }\r\n\r\n  onTouchStart(cb) {\r\n    return this.on(Events.TouchStart, cb);\r\n  }\r\n  onTouchEnd(cb) {\r\n    return this.on(Events.TouchEnd, cb);\r\n  }\r\n  onTouchMove(cb) {\r\n    return this.on(Events.TouchMove, cb);\r\n  }\r\n\r\n  onMouseUp(cb) {\r\n    return this.on(Events.MouseUp, cb);\r\n  }\r\n  onMouseDown(cb) {\r\n    return this.on(Events.MouseDown, cb);\r\n  }\r\n  onMouseOver(cb) {\r\n    return this.on(Events.MouseOver, cb);\r\n  }\r\n  onMouseOut(cb) {\r\n    return this.on(Events.MouseOut, cb);\r\n  }\r\n  onMouseEnter(cb) {\r\n    return this.on(Events.MouseEnter, cb);\r\n  }\r\n  onMouseLeave(cb) {\r\n    return this.on(Events.MouseLeave, cb);\r\n  }\r\n  onMouseMove(cb) {\r\n    return this.on(Events.MouseMove, cb);\r\n  }\r\n  onMouseWheel(cb) {\r\n    return this.on(Events.MouseWheel, cb);\r\n  }\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n  onAnimationDidStart(cb) {\r\n    return this.on(Events.AnimationDidStart, cb);\r\n  } // Deprecated\r\n  onAnimationDidStop(cb) {\r\n    return this.on(Events.AnimationDidStop, cb);\r\n  } // Deprecated\r\n  onAnimationDidEnd(cb) {\r\n    return this.on(Events.AnimationDidEnd, cb);\r\n  } // Deprecated\r\n\r\n  onImageLoaded(cb) {\r\n    return this.on(Events.ImageLoaded, cb);\r\n  }\r\n  onImageLoadError(cb) {\r\n    return this.on(Events.ImageLoadError, cb);\r\n  }\r\n  onImageLoadCancelled(cb) {\r\n    return this.on(Events.ImageLoadCancelled, cb);\r\n  }\r\n\r\n  onMove(cb) {\r\n    return this.on(Events.Move, cb);\r\n  }\r\n  onDragStart(cb) {\r\n    return this.on(Events.DragStart, cb);\r\n  }\r\n  onDragWillMove(cb) {\r\n    return this.on(Events.DragWillMove, cb);\r\n  }\r\n  onDragMove(cb) {\r\n    return this.on(Events.DragMove, cb);\r\n  }\r\n  onDragDidMove(cb) {\r\n    return this.on(Events.DragDidMove, cb);\r\n  }\r\n  onDrag(cb) {\r\n    return this.on(Events.Drag, cb);\r\n  }\r\n  onDragEnd(cb) {\r\n    return this.on(Events.DragEnd, cb);\r\n  }\r\n  onDragAnimationStart(cb) {\r\n    return this.on(Events.DragAnimationStart, cb);\r\n  }\r\n  onDragAnimationEnd(cb) {\r\n    return this.on(Events.DragAnimationEnd, cb);\r\n  }\r\n  onDirectionLockStart(cb) {\r\n    return this.on(Events.DirectionLockStart, cb);\r\n  }\r\n\r\n  onStateSwitchStart(cb) {\r\n    return this.on(Events.StateSwitchStart, cb);\r\n  }\r\n  onStateSwitchStop(cb) {\r\n    return this.on(Events.StateSwitchStop, cb);\r\n  }\r\n  onStateSwitchEnd(cb) {\r\n    return this.on(Events.StateSwitchEnd, cb);\r\n  }\r\n\r\n  onStateWillSwitch(cb) {\r\n    return this.on(Events.StateSwitchStart, cb);\r\n  } // Deprecated\r\n  onStateDidSwitch(cb) {\r\n    return this.on(Events.StateSwitchEnd, cb);\r\n  } // Deprecated\r\n\r\n  // Gestures\r\n\r\n  // Tap\r\n  onTap(cb) {\r\n    return this.on(Events.Tap, cb);\r\n  }\r\n  onTapStart(cb) {\r\n    return this.on(Events.TapStart, cb);\r\n  }\r\n  onTapEnd(cb) {\r\n    return this.on(Events.TapEnd, cb);\r\n  }\r\n  onDoubleTap(cb) {\r\n    return this.on(Events.DoubleTap, cb);\r\n  }\r\n\r\n  // Force Tap\r\n  onForceTap(cb) {\r\n    return this.on(Events.ForceTap, cb);\r\n  }\r\n  onForceTapChange(cb) {\r\n    return this.on(Events.ForceTapChange, cb);\r\n  }\r\n  onForceTapStart(cb) {\r\n    return this.on(Events.ForceTapStart, cb);\r\n  }\r\n  onForceTapEnd(cb) {\r\n    return this.on(Events.ForceTapEnd, cb);\r\n  }\r\n\r\n  // Press\r\n  onLongPress(cb) {\r\n    return this.on(Events.LongPress, cb);\r\n  }\r\n  onLongPressStart(cb) {\r\n    return this.on(Events.LongPressStart, cb);\r\n  }\r\n  onLongPressEnd(cb) {\r\n    return this.on(Events.LongPressEnd, cb);\r\n  }\r\n\r\n  // Swipe\r\n  onSwipe(cb) {\r\n    return this.on(Events.Swipe, cb);\r\n  }\r\n  onSwipeStart(cb) {\r\n    return this.on(Events.SwipeStart, cb);\r\n  }\r\n  onSwipeEnd(cb) {\r\n    return this.on(Events.SwipeEnd, cb);\r\n  }\r\n\r\n  onSwipeUp(cb) {\r\n    return this.on(Events.SwipeUp, cb);\r\n  }\r\n  onSwipeUpStart(cb) {\r\n    return this.on(Events.SwipeUpStart, cb);\r\n  }\r\n  onSwipeUpEnd(cb) {\r\n    return this.on(Events.SwipeUpEnd, cb);\r\n  }\r\n\r\n  onSwipeDown(cb) {\r\n    return this.on(Events.SwipeDown, cb);\r\n  }\r\n  onSwipeDownStart(cb) {\r\n    return this.on(Events.SwipeDownStart, cb);\r\n  }\r\n  onSwipeDownEnd(cb) {\r\n    return this.on(Events.SwipeDownEnd, cb);\r\n  }\r\n\r\n  onSwipeLeft(cb) {\r\n    return this.on(Events.SwipeLeft, cb);\r\n  }\r\n  onSwipeLeftStart(cb) {\r\n    return this.on(Events.SwipeLeftStart, cb);\r\n  }\r\n  onSwipeLeftEnd(cb) {\r\n    return this.on(Events.SwipeLeftEnd, cb);\r\n  }\r\n\r\n  onSwipeRight(cb) {\r\n    return this.on(Events.SwipeRight, cb);\r\n  }\r\n  onSwipeRightStart(cb) {\r\n    return this.on(Events.SwipeRightStart, cb);\r\n  }\r\n  onSwipeRightEnd(cb) {\r\n    return this.on(Events.SwipeRightEnd, cb);\r\n  }\r\n\r\n  // Pan\r\n  onPan(cb) {\r\n    return this.on(Events.Pan, cb);\r\n  }\r\n  onPanStart(cb) {\r\n    return this.on(Events.PanStart, cb);\r\n  }\r\n  onPanEnd(cb) {\r\n    return this.on(Events.PanEnd, cb);\r\n  }\r\n  onPanLeft(cb) {\r\n    return this.on(Events.PanLeft, cb);\r\n  }\r\n  onPanRight(cb) {\r\n    return this.on(Events.PanRight, cb);\r\n  }\r\n  onPanUp(cb) {\r\n    return this.on(Events.PanUp, cb);\r\n  }\r\n  onPanDown(cb) {\r\n    return this.on(Events.PanDown, cb);\r\n  }\r\n\r\n  // Pinch\r\n  onPinch(cb) {\r\n    return this.on(Events.Pinch, cb);\r\n  }\r\n  onPinchStart(cb) {\r\n    return this.on(Events.PinchStart, cb);\r\n  }\r\n  onPinchEnd(cb) {\r\n    return this.on(Events.PinchEnd, cb);\r\n  }\r\n\r\n  // Scale\r\n  onScale(cb) {\r\n    return this.on(Events.Scale, cb);\r\n  }\r\n  onScaleStart(cb) {\r\n    return this.on(Events.ScaleStart, cb);\r\n  }\r\n  onScaleEnd(cb) {\r\n    return this.on(Events.ScaleEnd, cb);\r\n  }\r\n\r\n  // Rotate\r\n  onRotate(cb) {\r\n    return this.on(Events.Rotate, cb);\r\n  }\r\n  onRotateStart(cb) {\r\n    return this.on(Events.RotateStart, cb);\r\n  }\r\n  onRotateEnd(cb) {\r\n    return this.on(Events.RotateEnd, cb);\r\n  }\r\n\r\n  //#############################################################\r\n  //# HINT\r\n\r\n  _showHint(targetLayer) {\r\n    // If this layer isnt visible we can just exit\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n    if (this.opacity === 0) {\r\n      return;\r\n    }\r\n\r\n    // If we don't need to show a hint exit but pass to children\r\n    if (!this.shouldShowHint(targetLayer)) {\r\n      for (var layer of Array.from(this.children)) {\r\n        layer._showHint(targetLayer);\r\n      }\r\n      return null;\r\n    }\r\n\r\n    // Figure out the frame we want to show the hint in, if any of the\r\n    // parent layers clip, we need to intersect the rectangle with it.\r\n    let frame = this.canvasFrame;\r\n\r\n    for (var parent of Array.from(this.ancestors())) {\r\n      if (parent.clip) {\r\n        frame = Utils.frameIntersection(frame, parent.canvasFrame);\r\n      }\r\n      if (!frame) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Show the actual hint\r\n    this.showHint(frame);\r\n\r\n    // Tell the children to show their hints\r\n    return _.invokeMap(this.children, \"_showHint\");\r\n  }\r\n\r\n  willSeemToDoSomething() {\r\n    if (this.ignoreEvents) {\r\n      return false;\r\n    }\r\n\r\n    if (this._draggable) {\r\n      if (\r\n        this._draggable.isDragging === false &&\r\n        this._draggable.isMoving === false\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  shouldShowHint() {\r\n    // Don't show hints if the layer is not interactive\r\n    if (this.ignoreEvents === true) {\r\n      return false;\r\n    }\r\n\r\n    // Don't show any hints while we are animating\r\n    if (this.isAnimating) {\r\n      return false;\r\n    }\r\n\r\n    for (var parent of Array.from(this.ancestors())) {\r\n      if (parent.isAnimating) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Don't show hints if there is a draggable that cannot be dragged.\r\n    if (\r\n      this._draggable &&\r\n      this._draggable.horizontal === false &&\r\n      this._draggable.vertical === false\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    // Don't show hint if this layer is invisible\r\n    if (this.opacity === 0) {\r\n      return false;\r\n    }\r\n\r\n    // If we don't ignore events on this layer, make sure the layer is listening to\r\n    // an interactive event so there is a decent change something is happening after\r\n    // we click it.\r\n\r\n    for (var eventName of Array.from(this.listenerEvents())) {\r\n      if (Events.isInteractive(eventName)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  showHint(highlightFrame) {\r\n    // Don't show anything if this element covers the entire screen\r\n    // if Utils.frameInFrame(@context.canvasFrame, highlightFrame)\r\n    //\treturn\r\n\r\n    // Start an animation with a rectangle fading out over time\r\n    const layer = new Layer({\r\n      frame: Utils.frameInset(highlightFrame, -1),\r\n      backgroundColor: null,\r\n      borderColor: Framer.Defaults.Hints.color,\r\n      borderRadius:\r\n        this.borderRadius *\r\n        Utils.average([this.canvasScaleX(), this.canvasScaleY()]),\r\n      borderWidth: 3,\r\n    });\r\n\r\n    // Only show outlines for draggables\r\n    if (this._draggable) {\r\n      layer.backgroundColor = null;\r\n    }\r\n\r\n    // Only show outlines if a highlight is fullscreen\r\n    if (Utils.frameInFrame(this.context.canvasFrame, highlightFrame)) {\r\n      layer.backgroundColor = null;\r\n    }\r\n\r\n    const animation = layer.animate({\r\n      properties: { opacity: 0 },\r\n      curve: \"ease-out\",\r\n      time: 0.5,\r\n    });\r\n\r\n    return animation.onAnimationEnd(() => layer.destroy());\r\n  }\r\n\r\n  //#############################################################\r\n  //# DESCRIPTOR\r\n\r\n  toName() {\r\n    if (this.name) {\r\n      return name;\r\n    }\r\n    return (\r\n      (this.__framerInstanceInfo != null\r\n        ? this.__framerInstanceInfo.name\r\n        : undefined) || \"\"\r\n    );\r\n  }\r\n\r\n  toInspect(constructor) {\r\n    if (constructor == null) {\r\n      constructor = this.constructor.name;\r\n    }\r\n    const name = this.name ? `name:${this.name} ` : \"\";\r\n    return `<${constructor} ${this.toName()} id:${this.id} ${name} \\\r\n(${Utils.roundWhole(this.x)}, ${Utils.roundWhole(this.y)}) \\\r\n${Utils.roundWhole(this.width)}x${Utils.roundWhole(this.height)}>`;\r\n  }\r\n}\r\n\r\nLayer.initClass();\r\n\r\nfunction __guardMethod__(obj, methodName, transform) {\r\n  if (\r\n    typeof obj !== \"undefined\" &&\r\n    obj !== null &&\r\n    typeof obj[methodName] === \"function\"\r\n  ) {\r\n    return transform(obj, methodName);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n","import { Layer } from \"./Layer\";\r\n\r\n`\\\r\nTodo: make it work in a parent layer\\\r\n`;\r\n\r\nexport class BackgroundLayer extends Layer {\r\n  constructor(options) {\r\n    this.layout = this.layout.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (options.backgroundColor == null) {\r\n      options.backgroundColor = \"#fff\";\r\n    }\r\n    console.warn(\r\n      `BackgroundLayer is deprecated, please use\\n\\nScreen.backgroundColor = \\\"${options.backgroundColor}\\\"\\n\\ninstead.`\r\n    );\r\n\r\n    super(options);\r\n\r\n    this.sendToBack();\r\n    this.layout();\r\n    this._context.domEventManager\r\n      .wrap(window)\r\n      .addEventListener(\"resize\", this.layout);\r\n    if (Framer.Device != null) {\r\n      Framer.Device.on(\"change:orientation\", this.layout);\r\n    }\r\n  }\r\n\r\n  layout() {\r\n    if (this.parent) {\r\n      return (this.frame = this.parent.frame);\r\n    } else {\r\n      return (this.frame = this._context.frame);\r\n    }\r\n  }\r\n}\r\n","import { Layer } from \"./Layer.js\";\r\n\r\nexport class VideoLayer extends Layer {\r\n  constructor(options = {}) {\r\n    // Create video element before adding options\r\n    super(options);\r\n\r\n    this.player = document.createElement(\"video\");\r\n    this.player.setAttribute(\"webkit-playsinline\", \"true\");\r\n    this.player.setAttribute(\"playsinline\", \"\");\r\n    this.player.style.width = \"100%\";\r\n    this.player.style.height = \"100%\";\r\n\r\n    // Wrap with DOM event manager for .on/.off\r\n    this.player.on = this._context?.domEventManager?.wrap(\r\n      this.player\r\n    ).addEventListener;\r\n    this.player.off = this._context?.domEventManager?.wrap(\r\n      this.player\r\n    ).removeEventListener;\r\n\r\n    // Set initial video if provided\r\n    if (options.video) this.video = options.video;\r\n\r\n    // Append player to the layer element\r\n    this._element.appendChild(this.player);\r\n  }\r\n}\r\n\r\nVideoLayer.define(\"video\", {\r\n  get() {\r\n    return this.player.src;\r\n  },\r\n  set(video) {\r\n    this.player.src = video;\r\n  },\r\n});\r\n","import { LayerStyle } from \"./LayerStyle\";\r\nimport { Layer, layerProperty } from \"./Layer\";\r\nimport Utils from \"./Utils\";\r\n\r\nlet _svgMeasureElement = null;\r\n\r\nconst denyCopy = () =>\r\n  Utils.throwInStudioOrWarnInProduction(\r\n    \"SVGGroup and SVGPath do not support the `copy` method\"\r\n  );\r\n\r\nconst getSVGMeasureElement = (constraints = {}) => {\r\n  if (!_svgMeasureElement) {\r\n    _svgMeasureElement = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    _svgMeasureElement.id = \"_svgMeasure\";\r\n    Object.assign(_svgMeasureElement.style, {\r\n      position: \"fixed\",\r\n      visibility: \"hidden\",\r\n      top: \"-10000px\",\r\n      left: \"-10000px\",\r\n    });\r\n\r\n    if (!document.body) {\r\n      document.write(_svgMeasureElement.outerHTML);\r\n      _svgMeasureElement = document.getElementById(\"_svgMeasure\");\r\n    } else {\r\n      document.body.appendChild(_svgMeasureElement);\r\n    }\r\n  }\r\n\r\n  while (_svgMeasureElement.firstChild) {\r\n    _svgMeasureElement.removeChild(_svgMeasureElement.lastChild);\r\n  }\r\n\r\n  return _svgMeasureElement;\r\n};\r\n\r\nconst originTransform = (value, layer, name) => {\r\n  const sizeProp =\r\n    name === \"originX\" ? \"width\" : name === \"originY\" ? \"height\" : null;\r\n  if (!sizeProp) return value;\r\n\r\n  const layerSize = layer[sizeProp];\r\n  const svgSize = layer._svgSize[sizeProp];\r\n  if (!(layerSize >= 0) || !(svgSize > 0)) return value;\r\n\r\n  return (layerSize / svgSize) * value;\r\n};\r\n\r\nexport class SVGBaseLayer extends Layer {\r\n  static initClass() {\r\n    this.define(\"parent\", {\r\n      enumerable: false,\r\n      exportable: false,\r\n      importable: false,\r\n      get() {\r\n        if (this._parent instanceof SVGLayer) return this._parent.parent;\r\n        return this._parent ?? null;\r\n      },\r\n    });\r\n\r\n    this.define(\"html\", { get: () => this._element.outerHTML || \"\" });\r\n\r\n    this.define(\"width\", { get: () => this._width });\r\n    this.define(\"height\", { get: () => this._height });\r\n    this.define(\r\n      \"originX\",\r\n      layerProperty(\r\n        this,\r\n        \"originX\",\r\n        \"webkitTransformOrigin\",\r\n        0.5,\r\n        Number.isFinite,\r\n        originTransform\r\n      )\r\n    );\r\n    this.define(\r\n      \"originY\",\r\n      layerProperty(\r\n        this,\r\n        \"originY\",\r\n        \"webkitTransformOrigin\",\r\n        0.5,\r\n        Number.isFinite,\r\n        originTransform\r\n      )\r\n    );\r\n\r\n    // Disabled properties\r\n    this.undefine([\r\n      \"label\",\r\n      \"blending\",\r\n      \"image\",\r\n      \"blur\",\r\n      \"brightness\",\r\n      \"saturate\",\r\n      \"hueRotate\",\r\n      \"contrast\",\r\n      \"invert\",\r\n      \"grayscale\",\r\n      \"sepia\",\r\n      \"backgroundBlur\",\r\n      \"backgroundBrightness\",\r\n      \"backgroundSaturate\",\r\n      \"backgroundHueRotate\",\r\n      \"backgroundContrast\",\r\n      \"backgroundInvert\",\r\n      \"backgroundGrayscale\",\r\n      \"backgroundSepia\",\r\n      ...Array.from({ length: 9 }, (_, i) => `shadow${i + 1}`),\r\n      \"shadows\",\r\n      \"borderRadius\",\r\n      \"cornerRadius\",\r\n      \"borderStyle\",\r\n      \"constraintValues\",\r\n      \"htmlIntrinsicSize\",\r\n      \"gradient\",\r\n    ]);\r\n\r\n    // Aliases\r\n    this.alias(\"borderColor\", \"stroke\");\r\n    this.alias(\"strokeColor\", \"stroke\");\r\n    this.alias(\"borderWidth\", \"strokeWidth\");\r\n    this.alias(\"backgroundColor\", \"fill\");\r\n    this.alias(\"color\", \"fill\");\r\n\r\n    // Disabled layer tree functions\r\n    [\r\n      \"addChild\",\r\n      \"removeChild\",\r\n      \"addSubLayer\",\r\n      \"removeSubLayer\",\r\n      \"bringToFront\",\r\n      \"sendToBack\",\r\n      \"placeBefore\",\r\n      \"placeBehind\",\r\n    ].forEach((fn) => (this.prototype[fn] = undefined));\r\n  }\r\n\r\n  static alias(propName, proxiedName) {\r\n    return this.define(propName, {\r\n      get() {\r\n        return this[proxiedName];\r\n      },\r\n      set(value) {\r\n        if (!this.__applyingDefaults) this[proxiedName] = value;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.updateForDevicePixelRatioChange =\r\n      this.updateForDevicePixelRatioChange.bind(this);\r\n    this.resetViewbox = this.resetViewbox.bind(this);\r\n\r\n    const { element } = options;\r\n    this._element = element;\r\n    this._elementBorder = element;\r\n    this._elementHTML = element;\r\n    this._parent = options.parent;\r\n\r\n    delete options.parent;\r\n    delete options.element;\r\n\r\n    if (this._parent instanceof SVGLayer) {\r\n      this._stylesAppliedToParent = [\r\n        \"webkitTransform\",\r\n        \"webkitTransformOrigin\",\r\n      ];\r\n      [\r\n        \"x\",\r\n        \"y\",\r\n        \"z\",\r\n        \"scaleX\",\r\n        \"scaleY\",\r\n        \"scaleZ\",\r\n        \"scale\",\r\n        \"skewX\",\r\n        \"skewY\",\r\n        \"skew\",\r\n        \"rotationX\",\r\n        \"rotationY\",\r\n        \"rotationZ\",\r\n        \"force2d\",\r\n        \"originX\",\r\n        \"originY\",\r\n      ].forEach((prop) => {\r\n        if (options[prop] == null) options[prop] = this._parent[prop];\r\n      });\r\n    } else {\r\n      this._pixelMultiplierOverride = 1;\r\n    }\r\n\r\n    let svgLayer = this._parent;\r\n    while (svgLayer && !(svgLayer instanceof SVGLayer))\r\n      svgLayer = svgLayer._parent;\r\n\r\n    this._svgLayer = svgLayer;\r\n    this._svg = svgLayer.svg;\r\n    this._svgSize = svgLayer.size;\r\n\r\n    const pathProps = [\r\n      \"fill\",\r\n      \"stroke\",\r\n      \"stroke-width\",\r\n      \"stroke-linecap\",\r\n      \"stroke-linejoin\",\r\n      \"stroke-miterlimit\",\r\n      \"stroke-opacity\",\r\n      \"stroke-dasharray\",\r\n      \"stroke-dashoffset\",\r\n      \"name\",\r\n      \"opacity\",\r\n    ];\r\n\r\n    Object.assign(\r\n      options,\r\n      this.constructor.attributesFromElement(pathProps, element)\r\n    );\r\n\r\n    // Extract transforms\r\n    if (this._element.transform.baseVal.numberOfItems > 0) {\r\n      let transform,\r\n        indicesToRemove = [];\r\n      options.x ??= 0;\r\n      options.y ??= 0;\r\n      options.rotationZ ??= 0;\r\n\r\n      for (let i = 0; i < this._element.transform.baseVal.numberOfItems; i++) {\r\n        transform = this._element.transform.baseVal.getItem(i);\r\n        const { matrix } = transform;\r\n        switch (transform.type) {\r\n          case 2: // SVG_TRANSFORM_TRANSLATE\r\n            options.x += matrix.e;\r\n            options.y += matrix.f;\r\n            indicesToRemove.push(i);\r\n            break;\r\n          case 4: // SVG_TRANSFORM_ROTATE\r\n            options.rotationZ +=\r\n              -(Math.atan2(matrix.c, matrix.d) / Math.PI) * 180;\r\n            indicesToRemove.push(i);\r\n            break;\r\n        }\r\n      }\r\n\r\n      indicesToRemove\r\n        .reverse()\r\n        .forEach((i) => this._element.transform.baseVal.removeItem(i));\r\n    }\r\n\r\n    this.calculateSize();\r\n    super(options);\r\n    this.resetViewbox();\r\n\r\n    [\r\n      \"frame\",\r\n      \"stroke\",\r\n      \"strokeWidth\",\r\n      \"strokeLinecap\",\r\n      \"strokeLinejoin\",\r\n      \"strokeMiterlimit\",\r\n      \"strokeDasharray\",\r\n      \"strokeDashoffset\",\r\n      \"rotation\",\r\n      \"scale\",\r\n    ].forEach((prop) => this.on(`change:${prop}`, this.resetViewbox));\r\n  }\r\n\r\n  calculateSize() {\r\n    let parent,\r\n      reference,\r\n      measuredElement = null;\r\n    let scaleX = 1,\r\n      scaleY = 1;\r\n    let element = this._element;\r\n\r\n    if (typeof Framer !== \"undefined\" && Framer?.CurrentContext?.elementInDOM) {\r\n      scaleX = this._parent.canvasScaleX();\r\n      scaleY = this._parent.canvasScaleY();\r\n    } else {\r\n      parent = element.parentElement;\r\n      reference = element.nextSibling;\r\n      const svgMeasure = getSVGMeasureElement();\r\n      svgMeasure.appendChild(element);\r\n      measuredElement = svgMeasure.firstChild;\r\n      element = measuredElement;\r\n    }\r\n\r\n    const rect = element.getBoundingClientRect();\r\n    this._width = rect.width / scaleX;\r\n    this._height = rect.height / scaleY;\r\n\r\n    if (measuredElement) {\r\n      if (reference) parent.insertBefore(measuredElement, reference);\r\n      else parent.appendChild(measuredElement);\r\n    }\r\n  }\r\n\r\n  resetViewbox() {\r\n    this._svg.setAttribute(\"viewBox\", `0,0,${this.width},${this.height}`);\r\n    this._svg.removeAttribute(\"viewBox\");\r\n  }\r\n\r\n  updateForDevicePixelRatioChange() {\r\n    [\"width\", \"height\", \"webkitTransform\"].forEach((cssProp) => {\r\n      this._element.style[cssProp] = LayerStyle[cssProp](this);\r\n    });\r\n  }\r\n\r\n  copy() {\r\n    return denyCopy();\r\n  }\r\n  copySingle() {\r\n    return denyCopy();\r\n  }\r\n\r\n  static attributesFromElement(attributes, element) {\r\n    const options = {};\r\n    for (const attribute of attributes) {\r\n      const key = attribute.replace(/-([a-z])/g, (_, char) =>\r\n        char.toUpperCase()\r\n      );\r\n      options[key] = element.getAttribute(attribute);\r\n    }\r\n    return options;\r\n  }\r\n}\r\n\r\nSVGBaseLayer.initClass();\r\n","import { SVGBaseLayer } from \"./SVGBaseLayer\";\r\nimport { SVG } from \"./SVG\";\r\n\r\nconst dasharrayTransform = (value) => {\r\n  if (typeof value === \"string\") {\r\n    let values = value.includes(\",\") ? value.split(\",\") : value.split(\" \");\r\n    return values.map((v) => parseFloat(v.trim())).filter((v) => !isNaN(v));\r\n  }\r\n  return value;\r\n};\r\n\r\nconst dashoffsetTransform = (value) => {\r\n  const v = parseFloat(value);\r\n  return isNaN(v) ? null : v;\r\n};\r\n\r\nexport class SVGPath extends SVGBaseLayer {\r\n  static initClass() {\r\n    const defineProp = (name, validator, transformer, options = {}) =>\r\n      this.define(\r\n        name,\r\n        layerProperty(this, name, name, null, validator, transformer, options)\r\n      );\r\n\r\n    defineProp(\"fill\", SVG.validFill, SVG.toFill);\r\n    defineProp(\"stroke\", SVG.validFill, SVG.toFill);\r\n    defineProp(\"strokeWidth\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeLinecap\", (val) => typeof val === \"string\");\r\n    defineProp(\"strokeLinejoin\", (val) => typeof val === \"string\");\r\n    defineProp(\"strokeMiterlimit\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeOpacity\", Number.isFinite, parseFloat);\r\n    defineProp(\"strokeDasharray\", Array.isArray, dasharrayTransform);\r\n    defineProp(\"strokeDashoffset\", Number.isFinite, dashoffsetTransform);\r\n\r\n    // strokeLength\r\n    this.define(\r\n      \"strokeLength\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeLength\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (value, path) => Math.max(0, Math.min(value, path.length)),\r\n        {},\r\n        (path, value) => {\r\n          const strokeStart = path.strokeStart ?? 0;\r\n          let strokeEnd = strokeStart + value;\r\n          if (strokeEnd > path.length) strokeEnd -= path.length;\r\n          Object.assign(path._properties, {\r\n            strokeStart,\r\n            strokeEnd,\r\n            strokeFraction: value / path.length,\r\n          });\r\n          return path.updateStroke();\r\n        }\r\n      )\r\n    );\r\n\r\n    this.define(\r\n      \"strokeFraction\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeFraction\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (value, path) => Math.max(0, Math.min(value, 1)),\r\n        {},\r\n        (path, value) => (path.strokeLength = path.length * value)\r\n      )\r\n    );\r\n\r\n    const strokeStartEndUpdater = (path, value, isStart = true) => {\r\n      const strokeStart = path.strokeStart ?? 0;\r\n      const strokeEnd = path.strokeEnd ?? path.strokeLength;\r\n      if (isStart) {\r\n        const left = strokeEnd ?? path.length;\r\n        path.strokeLength =\r\n          left >= value ? left - value : path.length - value + left;\r\n      } else {\r\n        path.strokeLength =\r\n          value >= strokeStart\r\n            ? value - strokeStart\r\n            : path.length - strokeStart + value;\r\n      }\r\n    };\r\n\r\n    this.define(\r\n      \"strokeStart\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeStart\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (v, p) => Math.max(0, Math.min(v, p.length)),\r\n        {},\r\n        (p, v) => strokeStartEndUpdater(p, v, true)\r\n      )\r\n    );\r\n    this.define(\r\n      \"strokeEnd\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeEnd\",\r\n        null,\r\n        undefined,\r\n        Number.isFinite,\r\n        (v, p) => Math.max(0, Math.min(v, p.length)),\r\n        {},\r\n        (p, v) => strokeStartEndUpdater(p, v, false)\r\n      )\r\n    );\r\n\r\n    this.define(\"length\", {\r\n      get() {\r\n        return this._length;\r\n      },\r\n    });\r\n    this.define(\"reversed\", this.simpleProperty(\"reversed\", false));\r\n  }\r\n\r\n  constructor(path, options = {}) {\r\n    super({ element: path, ...options });\r\n\r\n    if (path instanceof SVGPath) path = path.element;\r\n\r\n    if (path instanceof SVGPathElement) {\r\n      this._path = path;\r\n    } else if (path instanceof SVGUseElement) {\r\n      const link = path.getAttribute(\"xlink:href\");\r\n      this._path = this._svg.querySelector(link);\r\n    }\r\n\r\n    this._length = this._path.getTotalLength();\r\n  }\r\n\r\n  updateStroke() {\r\n    const startLength = this.strokeStart ?? 0;\r\n    const endLength = this.strokeEnd ?? this.length;\r\n    let dasharray = [];\r\n    let remaining;\r\n\r\n    if (endLength === startLength) {\r\n      if (startLength) dasharray.push(0, startLength);\r\n      remaining = this.length - endLength;\r\n      if (remaining) dasharray.push(0, remaining);\r\n    } else if (endLength < startLength) {\r\n      const gap = startLength - endLength;\r\n      remaining = this.length - startLength;\r\n      dasharray.push(endLength, gap);\r\n      if (remaining) dasharray.push(remaining, 0);\r\n    } else {\r\n      const length = endLength - startLength;\r\n      remaining = this.length - endLength;\r\n      if (startLength) dasharray.push(0, startLength);\r\n      if (length !== this.length || length !== 0 || startLength === 0) {\r\n        dasharray.push(length);\r\n        if (length !== remaining && remaining) dasharray.push(remaining);\r\n      }\r\n    }\r\n\r\n    if (this.reversed) {\r\n      if (dasharray.length % 2 === 0) dasharray.push(0);\r\n      dasharray.reverse();\r\n    }\r\n\r\n    this.strokeDasharray = dasharray;\r\n  }\r\n\r\n  pointAtFraction(fraction) {\r\n    if (this.reversed) fraction = 1 - fraction;\r\n    return this._path.getPointAtLength(this.length * fraction);\r\n  }\r\n\r\n  rotationAtFraction(fraction, delta = 0.01) {\r\n    if (this.reversed) fraction = 1 - fraction;\r\n    delta = Math.max(delta, 0.01);\r\n    const from = this.pointAtFraction(Math.max(fraction - delta, 0));\r\n    const to = this.pointAtFraction(Math.min(fraction + delta, 1));\r\n    let angle = (Math.atan2(from.y - to.y, from.x - to.x) * 180) / Math.PI - 90;\r\n    if (this.reversed) angle = 360 - angle;\r\n    return angle;\r\n  }\r\n\r\n  start(relativeToLayer = null) {\r\n    const point = this.convertPointToLayer(\r\n      this.pointAtFraction(0),\r\n      relativeToLayer?.parent,\r\n      false\r\n    );\r\n    point.rotation = this.rotationAtFraction(0);\r\n    return point;\r\n  }\r\n\r\n  end(relativeToLayer = null) {\r\n    const point = this.convertPointToLayer(\r\n      this.pointAtFraction(1),\r\n      relativeToLayer?.parent,\r\n      false\r\n    );\r\n    point.rotation = this.rotationAtFraction(1);\r\n    return point;\r\n  }\r\n\r\n  valueUpdater(axis, target, offset) {\r\n    switch (axis) {\r\n      case \"horizontal\":\r\n        offset -= this.pointAtFraction(0).x;\r\n        return (key, value) =>\r\n          (target[key] = offset + this.pointAtFraction(value).x);\r\n      case \"vertical\":\r\n        offset -= this.pointAtFraction(0).y;\r\n        return (key, value) =>\r\n          (target[key] = offset + this.pointAtFraction(value).y);\r\n      case \"angle\":\r\n        offset -= this.rotationAtFraction(0);\r\n        return (key, value, delta = 0) => {\r\n          if (delta === 0) return;\r\n          target[key] = offset + this.rotationAtFraction(value, delta);\r\n        };\r\n    }\r\n  }\r\n}\r\n\r\nSVGPath.initClass();\r\n","import { SVG } from \"./SVG\";\r\nimport { SVGBaseLayer } from \"./SVGBaseLayer\";\r\nimport { SVGPath } from \"./SVGPath\";\r\nimport Utils from \"./Utils\";\r\n\r\nexport class SVGGroup extends SVGBaseLayer {\r\n  static initClass() {\r\n    this.defineGroupProxyProp(\"fill\");\r\n    this.defineGroupProxyProp(\"stroke\");\r\n    this.defineGroupProxyProp(\"strokeWidth\", Number.isFinite, parseInt);\r\n    this.defineGroupProxyProp(\r\n      \"strokeWidthMultiplier\",\r\n      Number.isFinite,\r\n      parseInt\r\n    );\r\n    this.defineGroupProxyProp(\r\n      \"ignoreEvents\",\r\n      (val) => typeof val === \"boolean\",\r\n      (val) => !!val\r\n    );\r\n  }\r\n\r\n  constructor(group, options = {}) {\r\n    options.element = group;\r\n    super(options);\r\n\r\n    const { children, targets } = SVG.constructSVGElements(\r\n      this,\r\n      this._element.childNodes,\r\n      SVGPath,\r\n      SVGGroup\r\n    );\r\n    this._children = children;\r\n    this.elements = targets;\r\n\r\n    SVG.updateGradientSVG(this);\r\n  }\r\n\r\n  static defineGroupProxyProp(\r\n    propertyName,\r\n    validator = SVG.validFill,\r\n    transformer = SVG.toFill\r\n  ) {\r\n    const privateProp = `_${propertyName}`;\r\n\r\n    return this.define(propertyName, {\r\n      get() {\r\n        // Return externally set value if exists\r\n        if (this[privateProp] != null) return this[privateProp];\r\n\r\n        // Check children's values for homogeneous value\r\n        let value = null;\r\n        for (const child of this._children) {\r\n          const childValue = child[propertyName];\r\n          if (value === null) {\r\n            value = childValue;\r\n          } else if (!Utils.equal(childValue, value)) {\r\n            return this[privateProp] ?? null;\r\n          }\r\n        }\r\n\r\n        return value;\r\n      },\r\n\r\n      set(value) {\r\n        if (!validator(value)) value = transformer(value);\r\n        this[privateProp] = validator(value) ? value : null;\r\n\r\n        const persistedValue = this[privateProp];\r\n        this._children.forEach(\r\n          (child) => (child[propertyName] = persistedValue)\r\n        );\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nSVGGroup.initClass();\r\n","import _ from \"./Underscore.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Layer, layerProperty, layerProxiedValue } from \"./Layer.js\";\r\nimport { SVG } from \"./SVG.js\";\r\nimport { SVGGroup } from \"./SVGGroup.js\";\r\nimport { SVGPath } from \"./SVGPath.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\nconst updateIdsToBeUnique = function (htmlString) {\r\n  const ids = Utils.getIdAttributesFromString(htmlString);\r\n  for (var id of Array.from(ids)) {\r\n    var uniqueId = Utils.getUniqueId(id);\r\n    if (id !== uniqueId) {\r\n      id = Utils.escapeForRegex(id);\r\n      htmlString = htmlString.replace(\r\n        new RegExp(`((id|xlink:href)=[\"'']\\\\#?)${id}([\"'])`, \"g\"),\r\n        `$1${uniqueId}$3`\r\n      );\r\n      htmlString = htmlString.replace(\r\n        new RegExp(`([\"'']url\\\\(\\\\#)${id}(\\\\)[\"'])`, \"g\"),\r\n        `$1${uniqueId}$2`\r\n      );\r\n    }\r\n  }\r\n  return htmlString;\r\n};\r\n\r\nexport class SVGLayer extends Layer {\r\n  static initClass() {\r\n    this.define(\"elements\", this.simpleProperty(\"elements\", {}));\r\n\r\n    this.define(\r\n      \"fill\",\r\n      layerProperty(this, \"fill\", \"fill\", null, SVG.validFill, SVG.toFill)\r\n    );\r\n    this.define(\r\n      \"stroke\",\r\n      layerProperty(this, \"stroke\", \"stroke\", null, SVG.validFill, SVG.toFill)\r\n    );\r\n    this.define(\r\n      \"strokeWidthMultiplier\",\r\n      layerProperty(this, \"strokeWidthMultiplier\", null, null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"strokeWidth\",\r\n      layerProperty(\r\n        this,\r\n        \"strokeWidth\",\r\n        \"strokeWidth\",\r\n        null,\r\n        _.isNumber,\r\n        null,\r\n        { depends: [\"strokeWidthMultiplier\"] }\r\n      )\r\n    );\r\n    this.define(\r\n      \"color\",\r\n      layerProperty(\r\n        this,\r\n        \"color\",\r\n        \"color\",\r\n        null,\r\n        Color.validColorValue,\r\n        Color.toColor,\r\n        null,\r\n        (layer, value) => (layer.fill = value),\r\n        \"_elementHTML\",\r\n        true\r\n      )\r\n    );\r\n\r\n    this.define(\"gradient\", {\r\n      get() {\r\n        if (Gradient.isGradientObject(this._gradient)) {\r\n          return layerProxiedValue(this._gradient, this, \"gradient\");\r\n        }\r\n        return null;\r\n      },\r\n      set(value) {\r\n        // Copy semantics!\r\n        if (Gradient.isGradient(value)) {\r\n          this._gradient = new Gradient(value);\r\n        } else if (!value && Gradient.isGradientObject(this._gradient)) {\r\n          this._gradient = null;\r\n        }\r\n        return SVG.updateGradientSVG(this);\r\n      },\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      get() {\r\n        return this._image;\r\n      },\r\n      set(value) {\r\n        this._image = value;\r\n        return SVG.updateImagePatternSVG(this);\r\n      },\r\n    });\r\n\r\n    this.define(\"imageSize\", {\r\n      importable: true,\r\n      exportable: true,\r\n      default: null,\r\n      get() {\r\n        return this._getPropertyValue(\"imageSize\");\r\n      },\r\n      set(value) {\r\n        if (value === null) {\r\n          return this._setPropertyValue(\"imageSize\", value);\r\n        } else {\r\n          if (!_.isFinite(value.width) || !_.isFinite(value.height)) {\r\n            return;\r\n          }\r\n          this._setPropertyValue(\"imageSize\", {\r\n            width: value.width,\r\n            height: value.height,\r\n          });\r\n          return SVG.updateImagePatternSVG(this);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"svg\", {\r\n      get() {\r\n        const svgNode = _.first(\r\n          this._elementHTML != null ? this._elementHTML.children : undefined\r\n        );\r\n        if (svgNode instanceof SVGElement) {\r\n          return svgNode;\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      set(value) {\r\n        if (typeof value === \"string\") {\r\n          return (this.html = updateIdsToBeUnique(value));\r\n        } else if (value instanceof SVGElement) {\r\n          const idElements = value.querySelectorAll(\"[id]\");\r\n          for (var element of Array.from(idElements)) {\r\n            var existingElement = document.querySelector(\r\n              `[id='${element.id}']`\r\n            );\r\n            if (existingElement != null) {\r\n              Utils.throwInStudioOrWarnInProduction(\r\n                Layer.ExistingIdMessage(\"svg\", element.id)\r\n              );\r\n              return;\r\n            }\r\n          }\r\n          this._createHTMLElementIfNeeded();\r\n          while (this._elementHTML.firstChild) {\r\n            this._elementHTML.removeChild(this._elementHTML.firstChild);\r\n          }\r\n          if (value.parentNode != null) {\r\n            value = value.cloneNode(true);\r\n          }\r\n          return this._elementHTML.appendChild(value);\r\n        }\r\n      },\r\n    });\r\n  }\r\n  constructor(options) {\r\n    // Ugly: detect Vekter export with html intrinsic size\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (options.htmlIntrinsicSize != null && options.backgroundColor != null) {\r\n      // Backwards compatibility for old Vekter exporter that would\r\n      // set backgroundColor instead of color\r\n      if (options.color == null) {\r\n        options.color = options.backgroundColor;\r\n      }\r\n      options.backgroundColor = null;\r\n    }\r\n    if (options.clip == null) {\r\n      options.clip = false;\r\n    }\r\n    if (options.svg != null || options.html != null) {\r\n      if (options.backgroundColor == null) {\r\n        options.backgroundColor = null;\r\n      }\r\n    }\r\n    super(options);\r\n\r\n    const { svg } = this;\r\n    if (svg != null) {\r\n      const { targets, children } = SVG.constructSVGElements(\r\n        this,\r\n        svg.childNodes,\r\n        SVGPath,\r\n        SVGGroup\r\n      );\r\n      this.elements = targets;\r\n      this._children = children;\r\n    } else {\r\n      this.elements = [];\r\n    }\r\n\r\n    SVG.updateImagePatternSVG(this);\r\n    SVG.updateGradientSVG(this);\r\n\r\n    this.onChange(\"backgroundSize\", () => SVG.updateImagePatternSVG(this));\r\n    this.onChange(\"image\", () => SVG.updateImagePatternSVG(this));\r\n  }\r\n\r\n  copy() {\r\n    const layer = this.copySingle();\r\n    return layer;\r\n  }\r\n\r\n  copySingle() {\r\n    const { props } = this;\r\n    if (props.html != null && props.svg != null) {\r\n      delete props.svg;\r\n    }\r\n    props.html = updateIdsToBeUnique(props.html);\r\n    const copy = new this.constructor(props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n}\r\nSVGLayer.initClass();\r\n","let _measureElement = null;\r\n\r\nconst getMeasureElement = function (constraints) {\r\n  if (constraints == null) {\r\n    constraints = {};\r\n  }\r\n  const shouldCreateElement = !_measureElement;\r\n  if (shouldCreateElement) {\r\n    _measureElement = document.createElement(\"div\");\r\n    _measureElement.id = \"_measureElement\";\r\n    _measureElement.style.position = \"fixed\";\r\n    _measureElement.style.visibility = \"hidden\";\r\n    _measureElement.style.top = \"-10000px\";\r\n    _measureElement.style.left = \"-10000px\";\r\n\r\n    // This is a trick to call this function before the document ready event\r\n    if (!window.document.body) {\r\n      document.write(_measureElement.outerHTML);\r\n      _measureElement = document.getElementById(\"_measureElement\");\r\n    } else {\r\n      window.document.body.appendChild(_measureElement);\r\n    }\r\n  }\r\n\r\n  while (_measureElement.hasChildNodes()) {\r\n    _measureElement.removeChild(_measureElement.lastChild);\r\n  }\r\n\r\n  _measureElement.style.width = \"10000px\";\r\n  if (constraints.max) {\r\n    if (constraints.width) {\r\n      _measureElement.style.maxWidth = `${constraints.width}px`;\r\n    }\r\n    if (constraints.height) {\r\n      _measureElement.style.maxHeight = `${constraints.height}px`;\r\n    }\r\n  } else {\r\n    if (constraints.width) {\r\n      _measureElement.style.width = `${constraints.width}px`;\r\n    }\r\n    if (constraints.height) {\r\n      _measureElement.style.height = `${constraints.height}px`;\r\n    }\r\n  }\r\n\r\n  return _measureElement;\r\n};\r\n\r\nclass InlineStyle {\r\n  static initClass() {\r\n    this.prototype.startIndex = 0;\r\n    this.prototype.endIndex = 0;\r\n    this.prototype.css = null;\r\n    this.prototype.text = \"\";\r\n    this.prototype.element = null;\r\n  }\r\n\r\n  constructor(configuration, text) {\r\n    if (_.isString(configuration)) {\r\n      this.text = configuration;\r\n      this.startIndex = 0;\r\n      this.endIndex = this.text.length;\r\n      this.css = text;\r\n    } else {\r\n      this.startIndex = configuration.startIndex;\r\n      this.endIndex = configuration.endIndex;\r\n      this.css = configuration.css;\r\n      this.text = text.substring(this.startIndex, this.endIndex);\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    const c = new InlineStyle(this.text, this.css);\r\n    c.startIndex = this.startIndex;\r\n    c.endIndex = this.endIndex;\r\n    return c;\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      startIndex: this.startIndex,\r\n      endIndex: this.endIndex,\r\n      css: _.clone(this.css),\r\n    };\r\n  }\r\n\r\n  createElement(maybeLineBreak) {\r\n    const span = document.createElement(\"span\");\r\n    for (var prop in this.css) {\r\n      var value = this.css[prop];\r\n      span.style[prop] = value;\r\n    }\r\n    if (this.text === \"\" && maybeLineBreak) {\r\n      span.innerHTML = \"<br/>\";\r\n    } else {\r\n      span.textContent = this.text;\r\n    }\r\n    return span;\r\n  }\r\n\r\n  setText(text) {\r\n    this.text = text;\r\n    return (this.endIndex = this.startIndex + text.length);\r\n  }\r\n\r\n  resetStyle(style) {\r\n    delete this.css[style];\r\n    if (style === \"color\") {\r\n      return delete this.css[\"WebkitTextFillColor\"];\r\n    }\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    this.css[style] = value;\r\n    return this.element != null\r\n      ? (this.element.style[style] = value)\r\n      : undefined;\r\n  }\r\n\r\n  getStyle(style) {\r\n    if (style === \"color\") {\r\n      return this.css[\"color\"] != null\r\n        ? this.css[\"color\"]\r\n        : this.css[\"WebkitTextFillColor\"];\r\n    }\r\n    return this.css[style];\r\n  }\r\n\r\n  measure() {\r\n    const rect = this.element.getBoundingClientRect();\r\n    const size = {\r\n      width: rect.right - rect.left,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n    return size;\r\n  }\r\n\r\n  replaceText(search, replace) {\r\n    let regex = null;\r\n    if (_.isString(search)) {\r\n      regex = new RegExp(Utils.escapeForRegex(search), \"g\");\r\n    } else if (search instanceof RegExp) {\r\n      regex = search;\r\n    }\r\n    if (regex != null) {\r\n      this.text = this.text.replace(regex, replace);\r\n      return (this.endIndex = this.startIndex + this.text.length);\r\n    }\r\n  }\r\n\r\n  addRangesFrom(regex, block, inline, templateRanges) {\r\n    const { text } = this;\r\n    regex.lastIndex = 0;\r\n    while (true) {\r\n      var m = regex.exec(text);\r\n      if (!m) {\r\n        return;\r\n      }\r\n      var name = m[1];\r\n      if (!name) {\r\n        return;\r\n      }\r\n      if (templateRanges[name]) {\r\n        continue;\r\n      }\r\n      templateRanges[name] = {\r\n        block,\r\n        inline,\r\n        start: m.index,\r\n        length: m[0].length,\r\n        name,\r\n      };\r\n    }\r\n  }\r\n\r\n  replaceRange(start, length, text) {\r\n    this.text =\r\n      this.text.slice(0, start) + text + this.text.slice(start + length);\r\n    return (this.endIndex = this.startIndex + this.text.length);\r\n  }\r\n\r\n  validate() {\r\n    return (\r\n      this.startIndex !== this.endIndex &&\r\n      this.endIndex === this.startIndex + this.text.length\r\n    );\r\n  }\r\n}\r\nInlineStyle.initClass();\r\n\r\nclass StyledTextBlock {\r\n  static initClass() {\r\n    this.prototype.text = \"\";\r\n    this.prototype.inlineStyles = [];\r\n    this.prototype.element = null;\r\n  }\r\n\r\n  constructor(configuration) {\r\n    const { text } = configuration;\r\n    this.text = text;\r\n    if (configuration.inlineStyles != null) {\r\n      this.inlineStyles = configuration.inlineStyles.map(\r\n        (i) => new InlineStyle(i, text)\r\n      );\r\n    } else if (configuration.css != null) {\r\n      const inlineStyle = new InlineStyle(this.text, configuration.css);\r\n      this.inlineStyles = [inlineStyle];\r\n    } else {\r\n      throw new Error(\"Should specify inlineStyles or css\");\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    const c = new StyledTextBlock({ text: this.text, inlineStyles: [] });\r\n    c.inlineStyles = this.inlineStyles.map((inline) => inline.copy());\r\n    return c;\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      text: this.text,\r\n      inlineStyles: this.inlineStyles.map((i) => i.getOptions()),\r\n    };\r\n  }\r\n\r\n  createElement() {\r\n    const div = document.createElement(\"div\");\r\n    div.style.fontSize = \"1px\";\r\n    div.style.webkitFontSmoothing = \"antialiased\";\r\n    const maybeLineBreak = this.inlineStyles.length === 1;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      var span = style.createElement(maybeLineBreak);\r\n      style.element = span;\r\n      div.appendChild(span);\r\n    }\r\n    return div;\r\n  }\r\n\r\n  measure() {\r\n    let totalWidth = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      totalWidth += style.measure().width;\r\n    }\r\n    const rect = this.element.getBoundingClientRect();\r\n    const size = {\r\n      width: totalWidth,\r\n      height: rect.bottom - rect.top,\r\n    };\r\n    return size;\r\n  }\r\n\r\n  clone() {\r\n    return new StyledTextBlock({\r\n      text: \"\",\r\n      css: _.clone(_.first(this.inlineStyles).css),\r\n    });\r\n  }\r\n\r\n  setText(text) {\r\n    this.text = text;\r\n    const firstStyle = _.first(this.inlineStyles);\r\n    firstStyle.setText(text);\r\n    return (this.inlineStyles = [firstStyle]);\r\n  }\r\n\r\n  setTextOverflow(textOverflow, maxLines) {\r\n    if (maxLines == null) {\r\n      maxLines = 1;\r\n    }\r\n    if ([\"ellipsis\", \"clip\"].includes(textOverflow)) {\r\n      this.setStyle(\"overflow\", \"hidden\");\r\n\r\n      const multiLineOverflow = textOverflow === \"ellipsis\";\r\n      if (multiLineOverflow) {\r\n        this.setStyle(\"WebkitLineClamp\", maxLines);\r\n        this.setStyle(\"WebkitBoxOrient\", \"vertical\");\r\n        return this.setStyle(\"display\", \"-webkit-box\");\r\n      } else {\r\n        this.resetStyle(\"WebkitLineClamp\");\r\n        this.resetStyle(\"WebkitBoxOrient\");\r\n        this.setStyle(\"display\", \"block\");\r\n        this.setStyle(\"whiteSpace\", \"nowrap\");\r\n        return this.setStyle(\"textOverflow\", textOverflow);\r\n      }\r\n    } else {\r\n      this.resetStyle(\"whiteSpace\");\r\n      this.resetStyle(\"textOverflow\");\r\n\r\n      this.resetStyle(\"display\");\r\n      this.resetStyle(\"overflow\");\r\n      this.resetStyle(\"WebkitLineClamp\");\r\n      return this.resetStyle(\"WebkitBoxOrient\");\r\n    }\r\n  }\r\n\r\n  resetStyle(style) {\r\n    return this.inlineStyles.map((inlineStyle) =>\r\n      inlineStyle.resetStyle(style)\r\n    );\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    return this.inlineStyles.map((inlineStyle) =>\r\n      inlineStyle.setStyle(style, value)\r\n    );\r\n  }\r\n\r\n  getStyle(style) {\r\n    return _.first(this.inlineStyles).getStyle(style);\r\n  }\r\n\r\n  getFonts() {\r\n    const fonts = [];\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      var font = style.getStyle(\"fontFamily\");\r\n      if (font != null) {\r\n        fonts.push(font);\r\n      }\r\n    }\r\n    return fonts;\r\n  }\r\n\r\n  replaceText(search, replace) {\r\n    let currentIndex = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      style.startIndex = currentIndex;\r\n      style.replaceText(search, replace);\r\n      currentIndex = style.endIndex;\r\n    }\r\n    const newText = this.inlineStyles.map((i) => i.text).join(\"\");\r\n    this.text = newText;\r\n    return newText !== this.text;\r\n  }\r\n\r\n  addRangesFrom(regex, block, templateRanges) {\r\n    return this.inlineStyles.forEach((inline, index) =>\r\n      inline.addRangesFrom(regex, block, index, templateRanges)\r\n    );\r\n  }\r\n\r\n  replaceRange(inline, start, length, text) {\r\n    let currentIndex = 0;\r\n    for (let index = 0; index < this.inlineStyles.length; index++) {\r\n      var style = this.inlineStyles[index];\r\n      style.startIndex = currentIndex;\r\n      if (index === inline) {\r\n        style.replaceRange(start, length, text);\r\n      }\r\n      currentIndex += style.text.length;\r\n      style.endIndex = currentIndex;\r\n    }\r\n    const newText = this.inlineStyles.map((i) => i.text).join(\"\");\r\n    return (this.text = newText);\r\n  }\r\n\r\n  validate() {\r\n    let combinedText = \"\";\r\n    let currentIndex = 0;\r\n    for (var style of Array.from(this.inlineStyles)) {\r\n      if (!(currentIndex === style.startIndex)) {\r\n        return false;\r\n      }\r\n      if (!style.validate()) {\r\n        return false;\r\n      }\r\n      currentIndex = style.endIndex;\r\n      combinedText += style.text;\r\n    }\r\n    return this.text === combinedText;\r\n  }\r\n}\r\nStyledTextBlock.initClass();\r\n\r\nexport class StyledText {\r\n  static initClass() {\r\n    this.prototype.blocks = null;\r\n    this.prototype.textAlign = null;\r\n    this.prototype.element = null;\r\n    this.prototype.autoWidth = false;\r\n    this.prototype.autoHeight = false;\r\n    this.prototype.textOverflow = null;\r\n\r\n    this.defaultStyles = {\r\n      fontStyle: \"normal\",\r\n      fontVariantCaps: \"normal\",\r\n      fontWeight: \"normal\",\r\n      fontSize: \"16px\",\r\n      lineHeight: \"normal\",\r\n      fontFamily: \"-apple-system, BlinkMacSystemFont\",\r\n      outline: \"none\",\r\n      whiteSpace: \"pre-wrap\",\r\n      wordWrap: \"break-word\",\r\n    };\r\n  }\r\n\r\n  constructor(configuration) {\r\n    this.textAlign =\r\n      (configuration != null ? configuration.alignment : undefined) != null\r\n        ? configuration != null\r\n          ? configuration.alignment\r\n          : undefined\r\n        : \"left\";\r\n    if ((configuration != null ? configuration.blocks : undefined) != null) {\r\n      this.blocks = configuration.blocks.map((b) => new StyledTextBlock(b));\r\n    } else {\r\n      this.blocks = [];\r\n    }\r\n  }\r\n\r\n  getOptions() {\r\n    return {\r\n      blocks: this.blocks.map((b) => b.getOptions()),\r\n      alignment: this.textAlign,\r\n    };\r\n  }\r\n\r\n  static isStyledText(styledText) {\r\n    return (\r\n      (styledText != null ? styledText.blocks : undefined) != null &&\r\n      (styledText != null ? styledText.alignment : undefined) != null &&\r\n      _.isArray(styledText.blocks) &&\r\n      _.isString(styledText.alignment)\r\n    );\r\n  }\r\n\r\n  setElement(element) {\r\n    let style;\r\n    if (element == null) {\r\n      return;\r\n    }\r\n    this.element = element;\r\n    for (style in StyledText.defaultStyles) {\r\n      var value = StyledText.defaultStyles[style];\r\n      if (!this.element.style[style]) {\r\n        this.element.style[style] = value;\r\n      }\r\n    }\r\n    if (this.textAlign != null && !this.element.style[\"textAlign\"]) {\r\n      return (this.element.style[\"textAlign\"] = this.textAlign);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.element == null) {\r\n      return;\r\n    }\r\n\r\n    while (this.element.hasChildNodes()) {\r\n      this.element.removeChild(this.element.lastChild);\r\n    }\r\n\r\n    return (() => {\r\n      const result = [];\r\n      for (var block of Array.from(this.blocks)) {\r\n        var blockDiv = block.createElement();\r\n        block.element = blockDiv;\r\n        result.push(this.element.appendChild(blockDiv));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  addBlock(text, css = null) {\r\n    let block;\r\n    if (css != null) {\r\n      block = new StyledTextBlock({\r\n        text,\r\n        css,\r\n      });\r\n    } else if (this.blocks.length > 0) {\r\n      block = _.last(this.blocks).clone();\r\n      block.setText(text);\r\n    } else {\r\n      block = new StyledTextBlock({\r\n        text,\r\n        css: {},\r\n      });\r\n    }\r\n\r\n    return this.blocks.push(block);\r\n  }\r\n\r\n  getText() {\r\n    return this.blocks.map((b) => b.text).join(\"\\n\");\r\n  }\r\n\r\n  setText(text) {\r\n    const values = text.split(\"\\n\");\r\n    this.blocks = this.blocks.slice(0, values.length);\r\n    return (() => {\r\n      const result = [];\r\n      for (let index = 0; index < values.length; index++) {\r\n        var value = values[index];\r\n        if (this.blocks[index] != null) {\r\n          var block = this.blocks[index];\r\n          result.push(block.setText(value));\r\n        } else {\r\n          result.push(this.addBlock(value));\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  setTextOverflow(textOverflow) {\r\n    return (this.textOverflow = textOverflow);\r\n  }\r\n\r\n  setStyle(style, value) {\r\n    return this.blocks.map((block) => block.setStyle(style, value));\r\n  }\r\n\r\n  resetStyle(style) {\r\n    return this.blocks.map((block) => block.resetStyle(style));\r\n  }\r\n\r\n  getStyle(style, block = null) {\r\n    let left;\r\n    return (left = __guard__(\r\n      block != null ? block : _.first(this.blocks),\r\n      (x) => x.getStyle(style)\r\n    )) != null\r\n      ? left\r\n      : this.element != null\r\n      ? this.element.style[style]\r\n      : undefined;\r\n  }\r\n\r\n  getFonts() {\r\n    let fonts = [];\r\n    const elementFont =\r\n      this.element != null ? this.element.style[\"fontFamily\"] : undefined;\r\n    if (elementFont != null) {\r\n      fonts.push(elementFont);\r\n    }\r\n    for (var block of Array.from(this.blocks)) {\r\n      fonts = fonts.concat(block.getFonts());\r\n    }\r\n    return _.uniq(fonts);\r\n  }\r\n\r\n  measure(currentSize) {\r\n    const constraints = {};\r\n    constraints.width = currentSize.width * currentSize.multiplier;\r\n    constraints.height = currentSize.height * currentSize.multiplier;\r\n    const m = getMeasureElement(constraints);\r\n    let measuredWidth = 0;\r\n    let measuredHeight = 0;\r\n    const parent = this.element.parentNode;\r\n    m.appendChild(this.element);\r\n    for (var block of Array.from(this.blocks)) {\r\n      var size = block.measure();\r\n      measuredWidth = Math.max(measuredWidth, size.width);\r\n      var constrainedHeight =\r\n        constraints.height != null\r\n          ? constraints.height / currentSize.multiplier\r\n          : null;\r\n      if (\r\n        !this.autoWidth &&\r\n        this.textOverflow != null &&\r\n        [\"clip\", \"ellipsis\"].includes(this.textOverflow) &&\r\n        constrainedHeight != null &&\r\n        measuredHeight + size.height > constrainedHeight\r\n      ) {\r\n        var fontSize = parseFloat(this.getStyle(\"fontSize\", block));\r\n        var lineHeight = parseFloat(this.getStyle(\"lineHeight\", block));\r\n        var availableHeight = constrainedHeight - measuredHeight;\r\n        if (availableHeight > 0) {\r\n          var visibleLines = Math.max(\r\n            1,\r\n            Math.floor(availableHeight / (fontSize * lineHeight))\r\n          );\r\n          block.setTextOverflow(this.textOverflow, visibleLines);\r\n        } else {\r\n          block.setStyle(\"visibility\", \"hidden\");\r\n        }\r\n        size.height = availableHeight;\r\n      } else {\r\n        block.setTextOverflow(null);\r\n      }\r\n      measuredHeight += size.height;\r\n    }\r\n\r\n    m.removeChild(this.element);\r\n    if (parent != null) {\r\n      parent.appendChild(this.element);\r\n    }\r\n    const result = {};\r\n    if (this.autoWidth) {\r\n      result.width = Math.ceil(measuredWidth);\r\n    }\r\n    if (this.autoHeight) {\r\n      result.height = Math.ceil(measuredHeight);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  textReplace(search, replace) {\r\n    return this.blocks.map((b) => b.replaceText(search, replace));\r\n  }\r\n\r\n  // must be called first, calling it repeatedly does nothing, returns the first name from the templates\r\n  buildTemplate() {\r\n    if (this._templateRanges) {\r\n      return this._firstTemplateName;\r\n    }\r\n\r\n    // find all \"{name}\"\" text ranges, building a name->{blocks.index,inlines.index,start,length,start} index\r\n    const regex = /\\{\\s*(\\w+)\\s*\\}/g;\r\n    const templateRanges = {};\r\n    this.blocks.forEach((b, index) =>\r\n      b.addRangesFrom(regex, index, templateRanges)\r\n    );\r\n\r\n    // turn that into a reverse sorted list of ranges\r\n    this._templateRanges = Object.keys(templateRanges)\r\n      .map((k) => templateRanges[k])\r\n      .sort(function (l, r) {\r\n        const b = r.block - l.block;\r\n        if (b !== 0) {\r\n          return b;\r\n        }\r\n        const i = r.inline - l.inline;\r\n        if (i !== 0) {\r\n          return i;\r\n        }\r\n        return r.start - l.start;\r\n      });\r\n    const firstRange = this._templateRanges[this._templateRanges.length - 1];\r\n    this._firstTemplateName = firstRange ? firstRange.name : null;\r\n\r\n    // we store the initial template data, so template() can be called more than once\r\n    this._templateBlocks = this.blocks.map((b) => b.copy());\r\n    return this._firstTemplateName;\r\n  }\r\n\r\n  template(data) {\r\n    // restore the original template\r\n    this.blocks = this._templateBlocks.map((b) => b.copy());\r\n\r\n    // replace all ranges that are in data; @_templateRanges is reverse sorted, so ranges stay valid throughout\r\n    return (() => {\r\n      const result = [];\r\n      for (var range of Array.from(this._templateRanges)) {\r\n        var text = data[range.name];\r\n        if (text == null) {\r\n          continue;\r\n        }\r\n        if (_.isFunction(range.formatter)) {\r\n          text = range.formatter.call(this, text);\r\n        }\r\n        var block = this.blocks[range.block];\r\n        result.push(\r\n          block.replaceRange(range.inline, range.start, range.length, text)\r\n        );\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  templateFormatter(data) {\r\n    return (() => {\r\n      const result = [];\r\n      for (var range of Array.from(this._templateRanges)) {\r\n        var formatter = data[range.name];\r\n        if (formatter == null) {\r\n          continue;\r\n        }\r\n        result.push((range.formatter = formatter));\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  validate() {\r\n    for (var block of Array.from(this.blocks)) {\r\n      if (!block.validate()) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\nStyledText.initClass();\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { Layer, layerProperty } from \"./Layer\";\r\nimport { LayerStyle } from \"./LayerStyle\";\r\nimport { StyledText } from \"./StyledText\";\r\n\r\nconst validateFont = (arg) => _.isString(arg) || _.isObject(arg);\r\n\r\nconst fontFamilyFromObject = function (font) {\r\n  if (_.isObject(font)) {\r\n    return font.fontFamily;\r\n  } else {\r\n    return font;\r\n  }\r\n};\r\n\r\nconst textProperty = (obj, name, fallback, validator, transformer, set) =>\r\n  layerProperty(\r\n    obj,\r\n    name,\r\n    name,\r\n    fallback,\r\n    validator,\r\n    transformer,\r\n    {},\r\n    set,\r\n    \"_elementHTML\"\r\n  );\r\n\r\nconst asPadding = function (value) {\r\n  if (_.isNumber(value)) {\r\n    return value;\r\n  }\r\n  if (!_.isObject(value)) {\r\n    return 0;\r\n  }\r\n  const result = {};\r\n  let isValidObject = false;\r\n  if (value.horizontal != null) {\r\n    if (value.left == null) {\r\n      value.left = value.horizontal;\r\n    }\r\n    if (value.right == null) {\r\n      value.right = value.horizontal;\r\n    }\r\n  }\r\n  if (value.vertical != null) {\r\n    if (value.top == null) {\r\n      value.top = value.vertical;\r\n    }\r\n    if (value.bottom == null) {\r\n      value.bottom = value.vertical;\r\n    }\r\n  }\r\n  for (var key of [\"left\", \"right\", \"bottom\", \"top\"]) {\r\n    if (!isValidObject) {\r\n      isValidObject = _.has(value, key);\r\n    }\r\n    result[key] = value[key] != null ? value[key] : 0;\r\n  }\r\n  if (!isValidObject) {\r\n    return 0;\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nexport class TextLayer extends Layer {\r\n  static initClass() {\r\n    this._textProperties = [\r\n      \"text\",\r\n      \"fontFamily\",\r\n      \"fontSize\",\r\n      \"fontWeight\",\r\n      \"fontStyle\",\r\n      \"lineHeight\",\r\n      \"letterSpacing\",\r\n      \"wordSpacing\",\r\n      \"textAlign\",\r\n      \"textTransform\",\r\n      \"textIndent\",\r\n      \"textDecoration\",\r\n      \"textOverflow\",\r\n      \"whiteSpace\",\r\n      \"direction\",\r\n      \"font\",\r\n      \"borderWidth\",\r\n      \"padding\",\r\n    ];\r\n\r\n    this._textStyleProperties = _.pull(\r\n      _.clone(TextLayer._textProperties),\r\n      \"text\"\r\n    ).concat([\"color\", \"shadowX\", \"shadowY\", \"shadowBlur\", \"shadowColor\"]);\r\n\r\n    this.define(\"_styledText\", {\r\n      get() {\r\n        if (this.__styledText == null) {\r\n          this.__styledText = new StyledText();\r\n        }\r\n        return this.__styledText;\r\n      },\r\n      set(value) {\r\n        if (!(value instanceof StyledText)) {\r\n          return;\r\n        }\r\n        return (this.__styledText = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"styledTextOptions\", {\r\n      get() {\r\n        return this._styledText != null\r\n          ? this._styledText.getOptions()\r\n          : undefined;\r\n      },\r\n      set(value) {\r\n        this._styledText = new StyledText(value);\r\n        this._styledText.setElement(this._elementHTML);\r\n        const fonts = this._styledText.getFonts();\r\n        const promise = Utils.isFontFamilyLoaded(fonts);\r\n        if (_.isObject(promise)) {\r\n          return promise.then(() => {\r\n            return this.renderText();\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    //Vekter properties\r\n    this.define(\r\n      \"autoWidth\",\r\n      this.proxyProperty(\"_styledText.autoWidth\", {\r\n        didSet(layer, value) {\r\n          return layer.renderText();\r\n        },\r\n      })\r\n    );\r\n    this.define(\r\n      \"autoHeight\",\r\n      this.proxyProperty(\"_styledText.autoHeight\", {\r\n        didSet(layer, value) {\r\n          return layer.renderText();\r\n        },\r\n      })\r\n    );\r\n\r\n    this.define(\"autoSize\", {\r\n      get() {\r\n        return this.autoWidth && this.autoHeight;\r\n      },\r\n      set(value) {\r\n        this.autoWidth = value;\r\n        this.autoHeight = value;\r\n        return this.renderText();\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"fontFamily\",\r\n      textProperty(\r\n        this,\r\n        \"fontFamily\",\r\n        null,\r\n        _.isString,\r\n        fontFamilyFromObject,\r\n        function (layer, value) {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          layer.font = value;\r\n          const promise = Utils.isFontFamilyLoaded(value);\r\n          if (_.isObject(promise)) {\r\n            return promise.then(() => setTimeout(layer.renderText, 0));\r\n          }\r\n        }\r\n      )\r\n    );\r\n    this.define(\"fontWeight\", textProperty(this, \"fontWeight\", null));\r\n    this.define(\r\n      \"fontStyle\",\r\n      textProperty(this, \"fontStyle\", \"normal\", _.isString)\r\n    );\r\n    this.define(\r\n      \"textDecoration\",\r\n      textProperty(this, \"textDecoration\", null, _.isString)\r\n    );\r\n    this.define(\r\n      \"fontSize\",\r\n      textProperty(\r\n        this,\r\n        \"fontSize\",\r\n        null,\r\n        _.isNumber,\r\n        null,\r\n        function (layer, value) {\r\n          if (value === null || layer.__constructor) {\r\n            return;\r\n          }\r\n          const style = LayerStyle[\"fontSize\"](layer);\r\n          return layer._styledText.setStyle(\"fontSize\", style);\r\n        }\r\n      )\r\n    );\r\n    this.define(\"textAlign\", textProperty(this, \"textAlign\", null));\r\n    this.define(\r\n      \"letterSpacing\",\r\n      textProperty(this, \"letterSpacing\", null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"lineHeight\",\r\n      textProperty(this, \"lineHeight\", null, _.isNumber)\r\n    );\r\n\r\n    //Custom properties\r\n    this.define(\r\n      \"wordSpacing\",\r\n      textProperty(this, \"wordSpacing\", null, _.isNumber)\r\n    );\r\n    this.define(\r\n      \"textTransform\",\r\n      textProperty(this, \"textTransform\", \"none\", _.isString)\r\n    );\r\n    this.define(\r\n      \"textIndent\",\r\n      textProperty(this, \"textIndent\", null, _.isNumber)\r\n    );\r\n    this.define(\"wordWrap\", textProperty(this, \"wordWrap\", null, _.isString));\r\n\r\n    this.define(\"textOverflow\", {\r\n      get() {\r\n        return this._styledText.textOverflow;\r\n      },\r\n      set(value) {\r\n        this.clip = _.isString(value);\r\n        this._styledText.setTextOverflow(value);\r\n        return this.renderText(true);\r\n      },\r\n    });\r\n\r\n    this.define(\"truncate\", {\r\n      get() {\r\n        return this.textOverflow === \"ellipsis\";\r\n      },\r\n      set(truncate) {\r\n        if (truncate) {\r\n          this.autoSize = false;\r\n          return (this.textOverflow = \"ellipsis\");\r\n        } else {\r\n          return (this.textOverflow = null);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"whiteSpace\",\r\n      textProperty(this, \"whiteSpace\", null, _.isString)\r\n    );\r\n    this.define(\"direction\", textProperty(this, \"direction\", null, _.isString));\r\n\r\n    this.define(\"html\", {\r\n      get() {\r\n        return (\r\n          (this._elementHTML != null\r\n            ? this._elementHTML.innerHTML\r\n            : undefined) || \"\"\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"font\",\r\n      layerProperty(\r\n        this,\r\n        \"font\",\r\n        null,\r\n        null,\r\n        validateFont,\r\n        null,\r\n        {},\r\n        function (layer, value) {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          if (_.isObject(value)) {\r\n            layer.fontFamily = value.fontFamily;\r\n            layer.fontWeight = value.fontWeight;\r\n            return;\r\n          }\r\n          // Check if value contains number. We then assume proper use of font.\r\n          // Otherwise, we default to setting the fontFamily.\r\n          if (/\\d/.test(value)) {\r\n            return layer._styledText.setStyle(\"font\", value);\r\n          } else {\r\n            return (layer.fontFamily = value);\r\n          }\r\n        },\r\n        \"_elementHTML\"\r\n      )\r\n    );\r\n\r\n    this.define(\"textDirection\", {\r\n      get() {\r\n        return this.direction;\r\n      },\r\n      set(value) {\r\n        return (this.direction = value);\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"padding\",\r\n      layerProperty(this, \"padding\", \"padding\", 0, null, asPadding)\r\n    );\r\n\r\n    this.define(\"text\", {\r\n      get() {\r\n        return this._styledText.getText();\r\n      },\r\n      set(value) {\r\n        if (!_.isString(value)) {\r\n          value = String(value);\r\n        }\r\n        this._styledText.setText(value);\r\n        this.renderText();\r\n        return this.emit(\"change:text\", value);\r\n      },\r\n    });\r\n\r\n    // we remember the template data, and merge it with new data\r\n    this.define(\"template\", {\r\n      get() {\r\n        return _.clone(this._templateData);\r\n      },\r\n      set(data) {\r\n        if (!this._templateData) {\r\n          this._templateData = {};\r\n        }\r\n\r\n        const firstName = this._styledText.buildTemplate();\r\n        if (!_.isObject(data)) {\r\n          if (!firstName) {\r\n            return;\r\n          }\r\n          this._templateData[firstName] = data;\r\n        } else {\r\n          _.assign(this._templateData, data);\r\n        }\r\n\r\n        const oldText = this.text;\r\n        this._styledText.template(this._templateData);\r\n        if (this.text !== oldText) {\r\n          this.renderText();\r\n          return this.emit(\"change:text\", this.text);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"templateFormatter\", {\r\n      get() {\r\n        return this._templateFormatter;\r\n      },\r\n      set(data) {\r\n        const firstName = this._styledText.buildTemplate();\r\n        if (_.isFunction(data) || !_.isObject(data)) {\r\n          if (!firstName) {\r\n            return;\r\n          }\r\n          const tmp = {};\r\n          tmp[firstName] = data;\r\n          data = tmp;\r\n        }\r\n        return this._styledText.templateFormatter(data);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    let fontWeight, lineHeight;\r\n    this.updateAutoWidth = this.updateAutoWidth.bind(this);\r\n    this.updateAutoHeight = this.updateAutoHeight.bind(this);\r\n    this.renderText = this.renderText.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      shadowType: \"text\",\r\n      clip: false,\r\n      createHTMLElement: true,\r\n    });\r\n    if (options.styledTextOptions != null) {\r\n      options.styledText = options.styledTextOptions;\r\n      delete options.styledTextOptions;\r\n    }\r\n    if (options.styledText != null) {\r\n      delete options.text;\r\n      this.styledTextOptions = options.styledText;\r\n      if (options.color == null) {\r\n        options.color = this._styledText.getStyle(\"color\");\r\n      }\r\n      if (options.fontSize == null) {\r\n        options.fontSize = parseFloat(this._styledText.getStyle(\"fontSize\"));\r\n      }\r\n      if (options.fontFamily == null) {\r\n        options.fontFamily = this._styledText.getStyle(\"fontFamily\");\r\n      }\r\n      if (options.letterSpacing == null) {\r\n        options.letterSpacing = parseFloat(\r\n          this._styledText.getStyle(\"letterSpacing\")\r\n        );\r\n      }\r\n      if (options.textAlign == null) {\r\n        options.textAlign = this._styledText.textAlign;\r\n      }\r\n      fontWeight = this._styledText.getStyle(\"fontWeight\");\r\n      if (fontWeight != null) {\r\n        options.fontWeight = parseFloat(fontWeight);\r\n      }\r\n\r\n      lineHeight = this._styledText.getStyle(\"lineHeight\");\r\n      if (lineHeight == null || lineHeight === \"normal\") {\r\n        lineHeight = 1.25;\r\n      } else {\r\n        lineHeight = parseFloat(lineHeight);\r\n      }\r\n      if (options.lineHeight == null) {\r\n        options.lineHeight = lineHeight;\r\n      }\r\n    } else {\r\n      _.defaults(options, {\r\n        backgroundColor: \"transparent\",\r\n        text: \"Hello World\",\r\n        color: \"#888\",\r\n        fontSize: 40,\r\n        fontWeight: 400,\r\n        lineHeight: 1.25,\r\n        padding: 0,\r\n      });\r\n      if (options.font == null && options.fontFamily == null) {\r\n        options.fontFamily = this.defaultFont();\r\n      }\r\n\r\n      let { text } = options;\r\n      if (!_.isString(text)) {\r\n        text = String(text);\r\n      }\r\n      this._styledText.addBlock(text, { fontSize: `${options.fontSize}px` });\r\n    }\r\n\r\n    super(options);\r\n    this.__constructor = true;\r\n\r\n    // the goal is:\r\n    // - autoSize elements should not soft wrap, only hard wrap (based on newlines)\r\n    // - fixed (given a box) elements should soft wrap\r\n    // - when the height is not fixed, it should be allowed to grow\r\n\r\n    if (options.autoSize) {\r\n      this.autoWidth = true;\r\n      this.autoHeight = true;\r\n    } else if (options.autoSize !== false && !options.truncate) {\r\n      // if not explicitly disabled auto sizing, auto size width/height, unless they were explicitly set\r\n      if (options.autoWidth == null) {\r\n        const explicitWidth =\r\n          options.width != null ||\r\n          _.isNumber(options.size) ||\r\n          (options.size != null ? options.size.width : undefined) != null ||\r\n          (options.frame != null ? options.frame.width : undefined) != null;\r\n        this.autoWidth = !explicitWidth;\r\n      }\r\n      if (options.autoHeight == null) {\r\n        const explicitHeight =\r\n          options.height != null ||\r\n          _.isNumber(options.size) ||\r\n          (options.size != null ? options.size.height : undefined) != null ||\r\n          (options.frame != null ? options.frame.height : undefined) != null;\r\n        this.autoHeight = !explicitHeight;\r\n      }\r\n    }\r\n\r\n    // if constraints from design, autoHeight depends on if the element is allowed to grow in height\r\n    const { constraintValues } = options;\r\n    if (constraintValues) {\r\n      const topAndBottom =\r\n        _.isNumber(constraintValues.top) && _.isNumber(constraintValues.bottom);\r\n      const heightFactor = _.isNumber(constraintValues.heightFactor);\r\n      this.autoHeight = !(heightFactor || topAndBottom);\r\n    }\r\n\r\n    if (options.styledText == null) {\r\n      if (this.font == null) {\r\n        this.font = this.fontFamily;\r\n      }\r\n    }\r\n\r\n    this._styledText.setElement(this._elementHTML);\r\n\r\n    delete this.__constructor;\r\n\r\n    this.renderText();\r\n\r\n    // Executing function properties like Align.center again\r\n    for (var key in options) {\r\n      var value = options[key];\r\n      if (_.isFunction(value) && this[key] != null) {\r\n        this[key] = value;\r\n      }\r\n    }\r\n\r\n    for (var property of Array.from(TextLayer._textStyleProperties)) {\r\n      ((property) => {\r\n        return this.on(`change:${property}`, (value) => {\r\n          if (value === null) {\r\n            return;\r\n          }\r\n          // make an exception for fontSize, as it needs to be set on the inner style\r\n          if (![\"fontSize\", \"font\"].includes(property)) {\r\n            this._styledText.resetStyle(property);\r\n          }\r\n          return this.renderText();\r\n        });\r\n      })(property);\r\n    }\r\n\r\n    this.on(\"change:width\", this.updateAutoWidth);\r\n    this.on(\"change:height\", this.updateAutoHeight);\r\n    this.on(\"change:parent\", this.renderText);\r\n  }\r\n\r\n  updateAutoWidth(value) {\r\n    if (this.disableAutosizeUpdating) {\r\n      return;\r\n    }\r\n    return (this.autoWidth = false);\r\n  }\r\n\r\n  updateAutoHeight(value) {\r\n    if (this.disableAutosizeUpdating) {\r\n      return;\r\n    }\r\n    return (this.autoHeight = false);\r\n  }\r\n\r\n  copySingle() {\r\n    const { props } = this;\r\n    if (this.autoWidth) {\r\n      delete props[\"width\"];\r\n    }\r\n    if (this.autoHeight) {\r\n      delete props[\"height\"];\r\n    }\r\n    const copy = new this.constructor(props);\r\n    copy.style = this.style;\r\n    return copy;\r\n  }\r\n\r\n  renderText(forceRender) {\r\n    let constrainedHeight, constrainedWidth;\r\n    if (forceRender == null) {\r\n      forceRender = false;\r\n    }\r\n    if (this.__constructor) {\r\n      return;\r\n    }\r\n    this._styledText.render();\r\n    this._updateHTMLScale();\r\n    if (!this.autoSize) {\r\n      if (\r\n        this.width < this._elementHTML.clientWidth ||\r\n        this.height < this._elementHTML.clientHeight\r\n      ) {\r\n        this.clip = true;\r\n      }\r\n    }\r\n    if (\r\n      !forceRender &&\r\n      !this.autoHeight &&\r\n      !this.autoWidth &&\r\n      this.textOverflow === null\r\n    ) {\r\n      return;\r\n    }\r\n    const padding = Utils.rectZero(Utils.parseRect(this.padding));\r\n    if (this.autoWidth) {\r\n      constrainedWidth = null;\r\n    } else {\r\n      constrainedWidth = this.size.width - (padding.left + padding.right);\r\n    }\r\n    if (this.autoHeight) {\r\n      constrainedHeight = null;\r\n    } else {\r\n      constrainedHeight = this.size.height - (padding.top + padding.bottom);\r\n    }\r\n    const constraints = {\r\n      width: constrainedWidth,\r\n      height: constrainedHeight,\r\n      multiplier: this.context.pixelMultiplier,\r\n    };\r\n\r\n    const calculatedSize = this._styledText.measure(constraints);\r\n    this.disableAutosizeUpdating = true;\r\n    if (calculatedSize.width != null) {\r\n      this.width = calculatedSize.width + padding.left + padding.right;\r\n    }\r\n    if (calculatedSize.height != null) {\r\n      this.height = calculatedSize.height + padding.top + padding.bottom;\r\n    }\r\n    return (this.disableAutosizeUpdating = false);\r\n  }\r\n\r\n  defaultFont() {\r\n    return Utils.deviceFont(Framer.Device.platform());\r\n  }\r\n\r\n  textReplace(search, replace) {\r\n    const oldText = this.text;\r\n    this._styledText.textReplace(search, replace);\r\n    if (this.text !== oldText) {\r\n      this.renderText();\r\n      return this.emit(\"change:text\", this.text);\r\n    }\r\n  }\r\n}\r\nTextLayer.initClass();\r\n","import { BaseClass } from \"./BaseClass\";\r\nimport { Events } from \"./Events\";\r\nimport { Utils } from \"./Utils\";\r\n\r\nexport class AnimationGroup extends BaseClass {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this._animations = args.flat();\r\n    this.stopAnimations = true;\r\n    this.stop();\r\n  }\r\n\r\n  start() {\r\n    return this._start(this._animations);\r\n  }\r\n\r\n  stop() {\r\n    this._stop();\r\n    this._started = [];\r\n    this._halted = [];\r\n    this._stopped = [];\r\n    this._ended = [];\r\n  }\r\n\r\n  _start(animations) {\r\n    this.stop();\r\n    this._onStart();\r\n\r\n    return animations.map((animation) => {\r\n      this._started.push(animation);\r\n\r\n      animation.onAnimationHalt(() => {\r\n        this._halted.push(animation);\r\n        if (this._halted.length > 1) return;\r\n        this._stop();\r\n        this._onHalt();\r\n      });\r\n\r\n      animation.onAnimationStop(() => {\r\n        this._stopped.push(animation);\r\n        if (this._stopped.length === this._started.length) this._onStop();\r\n      });\r\n\r\n      animation.onAnimationEnd(() => {\r\n        this._ended.push(animation);\r\n        if (this._ended.length === this._started.length) this._onEnd();\r\n      });\r\n\r\n      return animation.start();\r\n    });\r\n  }\r\n\r\n  _stop() {\r\n    if (!this._started || !this.stopAnimations) return;\r\n    return this._started.map((a) => (a.isAnimating ? a.stop() : undefined));\r\n  }\r\n\r\n  _onStart() {\r\n    this.emit(Events.AnimationStart);\r\n  }\r\n  _onHalt() {\r\n    this.emit(Events.AnimationHalt);\r\n  }\r\n  _onStop() {\r\n    this.emit(Events.AnimationStop);\r\n  }\r\n  _onEnd() {\r\n    this.emit(Events.AnimationEnd);\r\n  }\r\n\r\n  onAnimationStart(cb) {\r\n    return this.on(Events.AnimationStart, cb);\r\n  }\r\n  onAnimationHalt(cb) {\r\n    return this.on(Events.AnimationHalt, cb);\r\n  }\r\n  onAnimationStop(cb) {\r\n    return this.on(Events.AnimationStop, cb);\r\n  }\r\n  onAnimationEnd(cb) {\r\n    return this.on(Events.AnimationEnd, cb);\r\n  }\r\n\r\n  onStart(cb) {\r\n    return this.onAnimationStart(cb);\r\n  }\r\n  onHalt(cb) {\r\n    return this.onAnimationHalt(cb);\r\n  }\r\n  onStop(cb) {\r\n    return this.onAnimationStop(cb);\r\n  }\r\n  onEnd(cb) {\r\n    return this.onAnimationEnd(cb);\r\n  }\r\n}\r\n\r\nexport class AnimationStateGroup extends AnimationGroup {\r\n  static initClass() {\r\n    this.define(\"state\", { get: () => this._state });\r\n\r\n    this.define(\"states\", {\r\n      get() {\r\n        const states = [];\r\n        for (const layer of this._layers ?? []) {\r\n          for (const state of Object.keys(layer.states ?? {})) {\r\n            if (!states.includes(state)) states.push(state);\r\n          }\r\n        }\r\n        return states;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(...layers) {\r\n    super(...layers);\r\n    this._layers = layers.flat();\r\n    this._state = \"default\";\r\n  }\r\n\r\n  animate(state) {\r\n    const animations = [];\r\n    for (const layer of this._layers) {\r\n      if (layer.states?.[state]) {\r\n        animations.push(layer.animate(state, { start: false }));\r\n      }\r\n    }\r\n    if (!animations.length) return;\r\n    this._start(animations);\r\n    this._state = state;\r\n  }\r\n\r\n  stateCycle(...args) {\r\n    let states = args.flat();\r\n    if (!states.length) states = this.states;\r\n    return this.animate(Utils.arrayNext(states, this.state));\r\n  }\r\n}\r\n\r\nAnimationStateGroup.initClass();\r\n","import { BaseClass } from \"./BaseClass\";\r\n\r\nexport class ScreenClass extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"width\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.screenSize.width;\r\n        }\r\n        return Canvas.width;\r\n      },\r\n    });\r\n    this.define(\"height\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.screenSize.height;\r\n        }\r\n        return Canvas.height;\r\n      },\r\n    });\r\n    this.define(\"canvasFrame\", {\r\n      get() {\r\n        if (this.device) {\r\n          return this.device.context.canvasFrame;\r\n        }\r\n        return this.frame;\r\n      },\r\n    });\r\n    this.define(\"midX\", {\r\n      get() {\r\n        return Utils.frameGetMidX(this.frame);\r\n      },\r\n    });\r\n    this.define(\"midY\", {\r\n      get() {\r\n        return Utils.frameGetMidY(this.frame);\r\n      },\r\n    });\r\n    this.define(\"size\", {\r\n      get() {\r\n        return Utils.size(this);\r\n      },\r\n    });\r\n    this.define(\"frame\", {\r\n      get() {\r\n        return Utils.frame(this);\r\n      },\r\n    });\r\n    this.define(\"device\", {\r\n      get() {\r\n        return Framer.CurrentContext.device;\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"backgroundColor\",\r\n      this.proxyProperty(\"device.screen.backgroundColor\")\r\n    );\r\n    this.define(\r\n      \"perspective\",\r\n      this.proxyProperty(\"device.context.perspective\")\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginX\",\r\n      this.proxyProperty(\"device.context.perspectiveOriginX\")\r\n    );\r\n    this.define(\r\n      \"perspectiveOriginY\",\r\n      this.proxyProperty(\"device.context.perspectiveOriginY\")\r\n    );\r\n  }\r\n\r\n  toInspect() {\r\n    return `<Screen ${Utils.roundWhole(this.width)}x${Utils.roundWhole(\r\n      this.height\r\n    )}>`;\r\n  }\r\n\r\n  // Triggered from outside by Canvas and DeviceComponent\r\n  onResize(cb) {\r\n    return this.on(\"resize\", cb);\r\n  }\r\n\r\n  // Point Conversion\r\n\r\n  convertPointToLayer(point, layer) {\r\n    return Utils.convertPointFromContext(point, layer, false, true);\r\n  }\r\n\r\n  convertPointToCanvas(point) {\r\n    const ctx = Framer.Device.context;\r\n    return Utils.convertPointToContext(point, ctx, true, false);\r\n  }\r\n\r\n  // Edge Swipe\r\n\r\n  onEdgeSwipe(cb) {\r\n    return this.on(Events.EdgeSwipe, cb);\r\n  }\r\n  onEdgeSwipeStart(cb) {\r\n    return this.on(Events.EdgeSwipeStart, cb);\r\n  }\r\n  onEdgeSwipeEnd(cb) {\r\n    return this.on(Events.EdgeSwipeEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeTop(cb) {\r\n    return this.on(Events.EdgeSwipeTop, cb);\r\n  }\r\n  onEdgeSwipeTopStart(cb) {\r\n    return this.on(Events.EdgeSwipeTopStart, cb);\r\n  }\r\n  onEdgeSwipeTopEnd(cb) {\r\n    return this.on(Events.EdgeSwipeTopEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeRight(cb) {\r\n    return this.on(Events.EdgeSwipeRight, cb);\r\n  }\r\n  onEdgeSwipeRightStart(cb) {\r\n    return this.on(Events.EdgeSwipeRightStart, cb);\r\n  }\r\n  onEdgeSwipeRightEnd(cb) {\r\n    return this.on(Events.EdgeSwipeRightEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeBottom(cb) {\r\n    return this.on(Events.EdgeSwipeBottom, cb);\r\n  }\r\n  onEdgeSwipeBottomStart(cb) {\r\n    return this.on(Events.EdgeSwipeBottomStart, cb);\r\n  }\r\n  onEdgeSwipeBottomEnd(cb) {\r\n    return this.on(Events.EdgeSwipeBottomEnd, cb);\r\n  }\r\n\r\n  onEdgeSwipeLeft(cb) {\r\n    return this.on(Events.EdgeSwipeLeft, cb);\r\n  }\r\n  onEdgeSwipeLeftStart(cb) {\r\n    return this.on(Events.EdgeSwipeLeftStart, cb);\r\n  }\r\n  onEdgeSwipeLeftEnd(cb) {\r\n    return this.on(Events.EdgeSwipeLeftEnd, cb);\r\n  }\r\n}\r\nScreenClass.initClass();\r\n\r\n// We use this as a singleton\r\nexport const Screen = new ScreenClass();\r\n","const pixelRound = parseInt;\r\n\r\nconst center = (layer, property, offset = 0) => {\r\n  let parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n\r\n  const x = pixelRound(\r\n    parent.width / 2 - layer.width / 2 - borderWidth + offset\r\n  );\r\n  const y = pixelRound(\r\n    parent.height / 2 - layer.height / 2 - borderWidth + offset\r\n  );\r\n\r\n  if (property === \"x\") return x;\r\n  if (property === \"y\") return y;\r\n  if (property === \"point\") return { x, y };\r\n  return 0;\r\n};\r\n\r\nconst left = (layer, property, offset = 0) => {\r\n  if (property !== \"x\") throw new Error(\"Align.left only works for x\");\r\n  return pixelRound(offset);\r\n};\r\n\r\nconst right = (layer, property, offset = 0) => {\r\n  if (property !== \"x\") throw new Error(\"Align.right only works for x\");\r\n  const parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n  return pixelRound(parent.width - 2 * borderWidth - layer.width + offset);\r\n};\r\n\r\nconst top = (layer, property, offset = 0) => {\r\n  if (property !== \"y\") throw new Error(\"Align.top only works for y\");\r\n  return pixelRound(offset);\r\n};\r\n\r\nconst bottom = (layer, property, offset = 0) => {\r\n  if (property !== \"y\") throw new Error(\"Align.bottom only works for y\");\r\n  const parent = layer.parent ?? Screen;\r\n  const borderWidth = parent.borderWidth ?? 0;\r\n  return pixelRound(parent.height - 2 * borderWidth - layer.height + offset);\r\n};\r\n\r\n// Helper to wrap function or value for flexible usage\r\nconst wrapper = (f, name) => {\r\n  const align = (a, b) => {\r\n    if (a == null || typeof a === \"number\") {\r\n      return (layer, property) => f(layer, property, a ?? 0);\r\n    }\r\n    return f(a, b, 0);\r\n  };\r\n  align.toInspect = () => `Align.${name}`;\r\n  return align;\r\n};\r\n\r\nexport const Align = {\r\n  center: wrapper(center, \"center\"),\r\n  left: wrapper(left, \"left\"),\r\n  right: wrapper(right, \"right\"),\r\n  top: wrapper(top, \"top\"),\r\n  bottom: wrapper(bottom, \"bottom\"),\r\n};\r\n","export const Blending = {\r\n  normal: \"normal\",\r\n  multiply: \"multiply\",\r\n  screen: \"screen\",\r\n  overlay: \"overlay\",\r\n  darken: \"darken\",\r\n  lighten: \"lighten\",\r\n  colorDodge: \"color-dodge\",\r\n  colorBurn: \"color-burn\",\r\n  hardLight: \"hard-light\",\r\n  softLight: \"soft-light\",\r\n  difference: \"difference\",\r\n  exclusion: \"exclusion\",\r\n  hue: \"hue\",\r\n  saturation: \"saturation\",\r\n  color: \"color\",\r\n  luminosity: \"luminosity\",\r\n};\r\n","import _ from \"./Underscore.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\nimport * as Utils from \"./Utils.js\";\r\n\r\nlet EventManagerIdCounter = 1;\r\n\r\nclass DOMEventManagerElement extends EventEmitter {\r\n  static initClass() {\r\n    // Keep the DOM API working\r\n    this.prototype.addEventListener = this.prototype.addListener;\r\n    this.prototype.removeEventListener = this.prototype.removeListener;\r\n\r\n    // Keep the Node API working\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n  }\r\n\r\n  constructor(element) {\r\n    super();\r\n    this.element = element;\r\n  }\r\n\r\n  addListener(eventName, listener, capture = false) {\r\n    listener.capture = capture; // store capture too\r\n    super.addListener(eventName, listener);\r\n    this.element.addEventListener(eventName, listener, capture);\r\n  }\r\n\r\n  removeListener(eventName, listener, capture = false) {\r\n    super.removeListener(eventName, listener);\r\n    this.element.removeEventListener(eventName, listener.capture);\r\n  }\r\n}\r\n\r\nDOMEventManagerElement.initClass();\r\n\r\nexport class DOMEventManager {\r\n  constructor() {\r\n    this.wrap = this.wrap.bind(this);\r\n    this.remove = this.remove.bind(this);\r\n    this._elements = {};\r\n  }\r\n\r\n  wrap(element) {\r\n    if (!element._eventManagerId) {\r\n      element._eventManagerId = EventManagerIdCounter++;\r\n    }\r\n\r\n    if (!this._elements[element._eventManagerId]) {\r\n      this._elements[element._eventManagerId] = new DOMEventManagerElement(\r\n        element\r\n      );\r\n    }\r\n\r\n    return this._elements[element._eventManagerId];\r\n  }\r\n\r\n  remove(element) {\r\n    if (!element._eventManagerId) return;\r\n    delete this._elements[element._eventManagerId];\r\n    element._eventManagerId = 0;\r\n  }\r\n\r\n  reset() {\r\n    for (const key in this._elements) {\r\n      this._elements[key].removeAllListeners();\r\n    }\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { DOMEventManager } from \"./DOMEventManager.js\";\r\n\r\nconst Contexts = [];\r\n\r\nexport class Context extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"parent\", {\r\n      get() {\r\n        return this._parent;\r\n      },\r\n    });\r\n\r\n    this.define(\"element\", {\r\n      get() {\r\n        return this._element;\r\n      },\r\n    });\r\n\r\n    this.define(\"devicePixelRatio\", {\r\n      get() {\r\n        return this._devicePixelRatio != null ? this._devicePixelRatio : 1;\r\n      },\r\n      set(value) {\r\n        if (value === this._devicePixelRatio) {\r\n          return;\r\n        }\r\n        this._devicePixelRatio = value;\r\n        return Array.from(this._layers).map((l) =>\r\n          l.updateForDevicePixelRatioChange()\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"renderUsingNativePixelRatio\",\r\n      this.simpleProperty(\"renderUsingNativePixelRatio\", false)\r\n    );\r\n    this.define(\"autoLayout\", this.simpleProperty(\"autoLayout\", true));\r\n\r\n    this.define(\"pixelMultiplier\", {\r\n      get() {\r\n        if (this.renderUsingNativePixelRatio) {\r\n          return 1;\r\n        } else {\r\n          return this.devicePixelRatio;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"scale\", {\r\n      get() {\r\n        return this.pixelMultiplier;\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Collections\r\n\r\n    // Layers\r\n    this.define(\"layers\", {\r\n      get() {\r\n        return _.clone(this._layers);\r\n      },\r\n    });\r\n    this.define(\"layerCounter\", {\r\n      get() {\r\n        return this._layerCounter;\r\n      },\r\n    });\r\n    this.define(\"rootLayers\", {\r\n      get() {\r\n        return _.filter(this._layers, (layer) => layer.parent === null);\r\n      },\r\n    });\r\n\r\n    this.define(\"visible\", {\r\n      get() {\r\n        return this._visible || true;\r\n      },\r\n      set(value) {\r\n        if (value === this._visible) {\r\n          return;\r\n        }\r\n        if (this._element != null) {\r\n          this._element.style.visibility = value ? \"visible\" : \"hidden\";\r\n        }\r\n        return (this._visible = value);\r\n      },\r\n    });\r\n\r\n    // Animations\r\n    this.define(\"animations\", {\r\n      get() {\r\n        return _.clone(this._animations);\r\n      },\r\n    });\r\n\r\n    // Timers\r\n    this.define(\"timers\", {\r\n      get() {\r\n        return _.clone(this._timers);\r\n      },\r\n    });\r\n\r\n    // Intervals\r\n    this.define(\"intervals\", {\r\n      get() {\r\n        return _.clone(this._intervals);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Geometry\r\n\r\n    // Remember the context doesn't really have height. These are just a reference\r\n    // to it's parent or document.\r\n\r\n    this.define(\"width\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.width;\r\n        }\r\n        return window.innerWidth;\r\n      },\r\n    });\r\n\r\n    this.define(\"height\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.height;\r\n        }\r\n        return window.innerHeight;\r\n      },\r\n    });\r\n\r\n    this.define(\"innerWidth\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.width / this.devicePixelRatio;\r\n        }\r\n        return window.innerWidth;\r\n      },\r\n    });\r\n\r\n    this.define(\"innerHeight\", {\r\n      get() {\r\n        if (this.parent != null) {\r\n          return this.parent.height / this.devicePixelRatio;\r\n        }\r\n        return window.innerHeight;\r\n      },\r\n    });\r\n\r\n    this.define(\"frame\", {\r\n      get() {\r\n        return { x: 0, y: 0, width: this.width, height: this.height };\r\n      },\r\n    });\r\n    this.define(\"innerFrame\", {\r\n      get() {\r\n        return { x: 0, y: 0, width: this.innerWidth, height: this.innerHeight };\r\n      },\r\n    });\r\n    this.define(\"size\", {\r\n      get() {\r\n        return _.pick(this.frame, [\"width\", \"height\"]);\r\n      },\r\n    });\r\n    this.define(\"point\", {\r\n      get() {\r\n        return _.pick(this.frame, [\"x\", \"y\"]);\r\n      },\r\n    });\r\n    this.define(\"canvasFrame\", {\r\n      get() {\r\n        if (this.parent == null) {\r\n          return this.frame;\r\n        }\r\n        return this.parent.canvasFrame;\r\n      },\r\n    });\r\n\r\n    this.define(\"backgroundColor\", {\r\n      get() {\r\n        if (Color.isColor(this._backgroundColor)) {\r\n          return this._backgroundColor;\r\n        }\r\n        return \"transparent\";\r\n      },\r\n      set(value) {\r\n        if (Color.isColor(value)) {\r\n          this._backgroundColor = value;\r\n          return this._element != null\r\n            ? (this._element.style[\"backgroundColor\"] = new Color(\r\n                value.toString()\r\n              ))\r\n            : undefined;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspective\", {\r\n      get() {\r\n        return this._perspective;\r\n      },\r\n      set(value) {\r\n        const webkitPerspective = Utils.webkitPerspectiveForValue(value);\r\n        if (webkitPerspective != null) {\r\n          this._perspective = value;\r\n          return this._element != null\r\n            ? (this._element.style[\"webkitPerspective\"] = webkitPerspective)\r\n            : undefined;\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspectiveOriginX\", {\r\n      get() {\r\n        if (_.isNumber(this._perspectiveOriginX)) {\r\n          return this._perspectiveOriginX;\r\n        }\r\n        return 0.5;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) {\r\n          this._perspectiveOriginX = value;\r\n          return this._updatePerspective();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"perspectiveOriginY\", {\r\n      get() {\r\n        if (_.isNumber(this._perspectiveOriginY)) {\r\n          return this._perspectiveOriginY;\r\n        }\r\n        return 0.5;\r\n      },\r\n      set(value) {\r\n        if (_.isNumber(value)) {\r\n          this._perspectiveOriginY = value;\r\n          return this._updatePerspective();\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"index\", {\r\n      get() {\r\n        return (\r\n          (this._element != null\r\n            ? this._element.style[\"z-index\"]\r\n            : undefined) ||\r\n          0 ||\r\n          0\r\n        );\r\n      },\r\n      set(value) {\r\n        if (!this._element) {\r\n          return;\r\n        }\r\n        return (this._element.style[\"z-index\"] = value);\r\n      },\r\n    });\r\n  }\r\n\r\n  static all() {\r\n    return _.clone(Contexts);\r\n  }\r\n\r\n  constructor(options) {\r\n    this.layout = this.layout.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options = Defaults.getDefaults(\"Context\", options);\r\n\r\n    super(...arguments);\r\n\r\n    if (!options.name) {\r\n      throw Error(\"Contexts need a name\");\r\n    }\r\n\r\n    this._parent = options.parent;\r\n    this._name = options.name;\r\n\r\n    this.perspective = options.perspective;\r\n    this.perspectiveOriginX = options.perspectiveOriginX;\r\n    this.perspectiveOriginY = options.perspectiveOriginY;\r\n\r\n    this.elementInDOM = false;\r\n    this.reset();\r\n\r\n    if (options.hasOwnProperty(\"index\")) {\r\n      this.index = options.index;\r\n    } else {\r\n      this.index = this.id;\r\n    }\r\n\r\n    Contexts.push(this);\r\n  }\r\n\r\n  reset() {\r\n    this._createDOMEventManager();\r\n    this._createRootElement();\r\n\r\n    this.resetFrozenEvents();\r\n    this.resetLayers();\r\n    this.resetAnimations();\r\n    this.resetTimers();\r\n    this.resetIntervals();\r\n\r\n    return this.emit(\"reset\", this);\r\n  }\r\n\r\n  destroy() {\r\n    this.reset();\r\n    this._destroyRootElement();\r\n    return _.remove(Contexts, this);\r\n  }\r\n\r\n  addLayer(layer) {\r\n    if (Array.from(this._layers).includes(layer)) {\r\n      return;\r\n    }\r\n    this._layerCounter++;\r\n    return this._layers.push(layer);\r\n  }\r\n\r\n  removeLayer(layer) {\r\n    return (this._layers = _.without(this._layers, layer));\r\n  }\r\n\r\n  resetLayers() {\r\n    this.resetGestures();\r\n    this._layers = [];\r\n    return (this._layerCounter = 0);\r\n  }\r\n\r\n  layerForId(layerId) {\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer.id === layerId) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _layerForElement(element) {\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer._element === element) {\r\n        return layer;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  layerForElement(element) {\r\n    // Returns the framer layer containing the element\r\n    if (!element) {\r\n      return null;\r\n    }\r\n    const layer = this._layerForElement(element);\r\n    if (layer) {\r\n      return layer;\r\n    }\r\n    return this.layerForElement(element.parentNode);\r\n  }\r\n\r\n  selectLayer(selector) {\r\n    return Utils.findLayer(this._layers, selector);\r\n  }\r\n\r\n  selectAllLayers(selector) {\r\n    return Utils.filterLayers(this._layers, selector);\r\n  }\r\n\r\n  layout() {\r\n    return this.rootLayers.map((l) => l.layout());\r\n  }\r\n\r\n  addAnimation(animation) {\r\n    if (Array.from(this._animations).includes(animation)) {\r\n      return;\r\n    }\r\n    return this._animations.push(animation);\r\n  }\r\n\r\n  removeAnimation(animation) {\r\n    return (this._animations = _.without(this._animations, animation));\r\n  }\r\n\r\n  resetAnimations() {\r\n    this.stopAnimations();\r\n    return (this._animations = []);\r\n  }\r\n\r\n  stopAnimations() {\r\n    if (!this._animations) {\r\n      return;\r\n    }\r\n    return this._animations.map((animation) => animation.stop(true));\r\n  }\r\n\r\n  resetFrozenEvents() {\r\n    return delete this._frozenEvents;\r\n  }\r\n\r\n  addTimer(timer) {\r\n    if (Array.from(this._timers).includes(timer)) {\r\n      return;\r\n    }\r\n    return this._timers.push(timer);\r\n  }\r\n\r\n  removeTimer(timer) {\r\n    window.clearTimeout(timer);\r\n    return (this._timers = _.without(this._timers, timer));\r\n  }\r\n\r\n  resetTimers() {\r\n    if (this._timers) {\r\n      this._timers.map(window.clearTimeout);\r\n    }\r\n    return (this._timers = []);\r\n  }\r\n\r\n  addInterval(interval) {\r\n    if (Array.from(this._intervals).includes(interval)) {\r\n      return;\r\n    }\r\n    return this._intervals.push(interval);\r\n  }\r\n\r\n  removeInterval(interval) {\r\n    return (this._intervals = _.without(this._intervals, interval));\r\n  }\r\n\r\n  resetIntervals() {\r\n    if (this._intervals) {\r\n      this._intervals.map(window.clearInterval);\r\n    }\r\n    return (this._intervals = []);\r\n  }\r\n\r\n  // Gestures\r\n  resetGestures() {\r\n    if (!this._layers) {\r\n      return;\r\n    }\r\n    for (var layer of Array.from(this._layers)) {\r\n      if (layer._gestures) {\r\n        layer._gestures.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  // Run\r\n\r\n  run(fn) {\r\n    const previousContext = Framer.CurrentContext;\r\n    Framer.CurrentContext = this;\r\n    fn();\r\n    return (Framer.CurrentContext = previousContext);\r\n  }\r\n\r\n  //#############################################################\r\n  // Freezing\r\n\r\n  freeze() {\r\n    if (this._frozenEvents != null) {\r\n      throw new Error(\"Context is already frozen\");\r\n    }\r\n\r\n    this._frozenEvents = {};\r\n\r\n    for (var layer of Array.from(this._layers)) {\r\n      var layerListeners = {};\r\n\r\n      for (var eventName of Array.from(layer.listenerEvents())) {\r\n        layerListeners[eventName] = layer.listeners(eventName);\r\n      }\r\n\r\n      layer.removeAllListeners();\r\n      var layerId = this._layers.indexOf(layer);\r\n\r\n      this._frozenEvents[layerId] = layerListeners;\r\n    }\r\n\r\n    this.stopAnimations();\r\n\r\n    // TODO: It would be nice to continue at least intervals after a resume\r\n    this.resetTimers();\r\n    return this.resetIntervals();\r\n  }\r\n\r\n  resume() {\r\n    if (this._frozenEvents == null) {\r\n      throw new Error(\"Context is not frozen, cannot resume\");\r\n    }\r\n\r\n    for (var layerId in this._frozenEvents) {\r\n      var events = this._frozenEvents[layerId];\r\n      var layer = this._layers[layerId];\r\n      for (var eventName in events) {\r\n        var listeners = events[eventName];\r\n        for (var listener of Array.from(listeners)) {\r\n          layer.on(eventName, listener);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.resetFrozenEvents();\r\n  }\r\n\r\n  //#############################################################\r\n  // DOM\r\n\r\n  _createDOMEventManager() {\r\n    // This manages all dom events for any node in this context centrally,\r\n    // so we can clean them up on a reset, avoiding memory leaks and whatnot.\r\n\r\n    if (this.domEventManager != null) {\r\n      this.domEventManager.reset();\r\n    }\r\n    return (this.domEventManager = new DOMEventManager());\r\n  }\r\n\r\n  _createRootElement() {\r\n    // Everything under the context lives in a single div that we either insert\r\n    // directly on the root, or attach to the parent layer. The element append\r\n    // can be pending if the document isn't ready yet.\r\n\r\n    this._destroyRootElement();\r\n\r\n    this._element = document.createElement(\"div\");\r\n    this._element.id = `FramerContextRoot-${this._name}`;\r\n    this._element.classList.add(\"framerContext\");\r\n    const webkitPerspective = Utils.webkitPerspectiveForValue(this.perspective);\r\n    if (webkitPerspective != null) {\r\n      this._element.style[\"webkitPerspective\"] = webkitPerspective;\r\n    }\r\n    this._element.style[\"backgroundColor\"] = this.backgroundColor;\r\n\r\n    this.__pendingElementAppend = () => {\r\n      let parentElement =\r\n        this._parent != null ? this._parent._element : undefined;\r\n      if (parentElement == null) {\r\n        parentElement = document.body;\r\n      }\r\n      parentElement.appendChild(this._element);\r\n      this.elementInDOM = true;\r\n      return this._layers != null\r\n        ? this._layers.map((l) => l.elementInsertedIntoDocument())\r\n        : undefined;\r\n    };\r\n\r\n    return Utils.domComplete(this.__pendingElementAppend);\r\n  }\r\n\r\n  _destroyRootElement() {\r\n    // This removes the context element and cancels async insertion if the\r\n    // document wasn't ready yet.\r\n\r\n    if (this._element != null ? this._element.parentNode : undefined) {\r\n      this._element.parentNode.removeChild(this._element);\r\n      this.elementInDOM = false;\r\n    }\r\n\r\n    if (this.__pendingElementAppend) {\r\n      Utils.domCompleteCancel(this.__pendingElementAppend);\r\n      this.__pendingElementAppend = null;\r\n    }\r\n\r\n    return (this._element = null);\r\n  }\r\n\r\n  _updatePerspective() {\r\n    return this._element != null\r\n      ? (this._element.style[\"webkitPerspectiveOrigin\"] = `${\r\n          this.perspectiveOriginX * 100\r\n        }% ${this.perspectiveOriginY * 100}%`)\r\n      : undefined;\r\n  }\r\n\r\n  containers(ignoredArgument, result) {\r\n    if (ignoredArgument == null) {\r\n      ignoredArgument = true;\r\n    }\r\n    if (result == null) {\r\n      result = [];\r\n    }\r\n    if (this._parent != null) {\r\n      result.push(this._parent);\r\n      return this._parent != null\r\n        ? this._parent.containers(true, result)\r\n        : undefined;\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  toInspect() {\r\n    const round = function (value) {\r\n      if (parseInt(value) === value) {\r\n        return parseInt(value);\r\n      }\r\n      return Utils.round(value, 1);\r\n    };\r\n\r\n    return `<${this.constructor.name} id:${this.id} name:${this._name} ${round(\r\n      this.width\r\n    )}x${round(this.height)}>`;\r\n  }\r\n}\r\nContext.initClass();\r\n","import { Utils } from \"./Utils\";\r\nimport { Context } from \"./Context\";\r\nimport { Layer } from \"./Layer\";\r\n\r\nclass Printer {\r\n  constructor() {\r\n    this.createLayer = this.createLayer.bind(this);\r\n    this.resize = this.resize.bind(this);\r\n    this.print = this.print.bind(this);\r\n    this.scrollToBottom = this.scrollToBottom.bind(this);\r\n\r\n    this._context = new Context({ name: \"PrintConsole\" });\r\n\r\n    this._context.run(() => {\r\n      window.addEventListener(\"resize\", this.resize);\r\n    });\r\n  }\r\n\r\n  createLayer() {\r\n    if (this._printLayer) return this._printLayer;\r\n\r\n    this._context.run(() => {\r\n      this._container = new Layer({\r\n        backgroundColor: null,\r\n      });\r\n      this._container.style.zIndex = 999; // Always on top\r\n\r\n      this._printLayer = new Layer({\r\n        parent: this._container,\r\n        scrollVertical: true,\r\n        ignoreEvents: false,\r\n        html: \"\",\r\n        style: {\r\n          font: \"12px/1.35em Menlo, Consolas, monospace\",\r\n          color: \"rgba(0, 0, 0, .7)\",\r\n          padding: \"8px\",\r\n          paddingBottom: \"30px\",\r\n          borderTop: \"1px solid #d9d9d9\",\r\n        },\r\n        opacity: 0.9,\r\n        visible: true,\r\n        backgroundColor: \"white\",\r\n      });\r\n\r\n      this._closeButton = new Layer({\r\n        parent: this._container,\r\n        html: `\r\n          <svg>\r\n            <g stroke=\"#B8B8B8\">\r\n              <path d=\"M1,1 L8,8\"></path>\r\n              <path d=\"M1,8 L8,1\"></path>\r\n            </g>\r\n          </svg>\r\n        `,\r\n        y: 9,\r\n        width: 9,\r\n        height: 9,\r\n        backgroundColor: null,\r\n        style: { cursor: \"auto\" },\r\n      });\r\n\r\n      this._closeButton.onClick(() => this.hide());\r\n    });\r\n\r\n    this.resize();\r\n    return this._printLayer;\r\n  }\r\n\r\n  resize() {\r\n    if (!this._printLayer) return;\r\n\r\n    this._container.width = window.innerWidth;\r\n    this._container.height = 160;\r\n    this._container.maxY = window.innerHeight;\r\n\r\n    this._printLayer.size = this._container.size;\r\n    this._closeButton.maxX = this._container.maxX - this._closeButton.y + 1;\r\n  }\r\n\r\n  hide() {\r\n    this._context.visible = false;\r\n  }\r\n\r\n  print(...args) {\r\n    this.createLayer();\r\n    this._context.visible = true;\r\n    const printPrefix = \" \";\r\n\r\n    const printNode = document.createElement(\"div\");\r\n    printNode.style.userSelect = \"text\";\r\n    printNode.style.cursor = \"auto\";\r\n    printNode.innerHTML =\r\n      Utils.escape(\r\n        printPrefix + args.map((obj) => Utils.inspect(obj)).join(\", \")\r\n      ) + \"<br>\";\r\n\r\n    this._printLayer._element.appendChild(printNode);\r\n    this.scrollToBottom();\r\n\r\n    // Ensure scroll after DOM updates\r\n    return Utils.delay(0, this.scrollToBottom);\r\n  }\r\n\r\n  scrollToBottom() {\r\n    if (!this._printLayer) return;\r\n    this._printLayer._element.scrollTop =\r\n      this._printLayer._element.scrollHeight;\r\n  }\r\n}\r\n\r\n// Singleton printer\r\nlet _printer = null;\r\n\r\nexport function print(...args) {\r\n  if (!_printer) _printer = new Printer();\r\n  return _printer.print(...args);\r\n}\r\n","import _ from \"../Underscore.js\";\r\nimport Utils from \"../Utils.js\";\r\n\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\n\r\n`\\\r\nScrollComponent\r\n\r\ncontent <Layer>\r\ncontentSize <{width:n, height:n}>\r\ncontentInset <{top:n, right:n, bottom:n, left:n}> TODO\r\ncontentOffset <{x:n, y:n}> TODO\r\nscrollFrame <{x:n, y:n, width:n, height:n}>\r\nscrollPoint <{x:n, y:n}>\r\nscrollHorizontal <bool>\r\nscrollVertical <bool>\r\nspeedX <number>\r\nspeedY <number>\r\ndelaysContentTouches <bool> TODO\r\nloadPreset(<\"ios\"|\"android\">) TODO\r\nscrollToPoint(<{x:n, y:n}>, animate=true, animationOptions={})\r\nscrollToLayer(contentLayer, originX=0, originY=0)\r\nscrollFrameForContentLayer(<x:n, y:n>) <{x:n, y:n, width:n, height:n}> TODO\r\nclosestContentLayer(<x:n, y:n>) <Layer> TODO\r\n\r\nScrollComponent Events\r\n\r\n(all of the draggable events)\r\nScrollStart -> DragStart\r\nScrollWillMove -> DragWillMove\r\nScrollDidMove -> DragDidMove\r\nscroll -> DragMove (html compat)\r\nScrollEnd -> DragEnd\\\r\n`;\r\n\r\n// Define new scroll-related events\r\nEvents.ScrollStart = \"scrollstart\";\r\nEvents.Scroll = \"scroll\";\r\nEvents.ScrollMove = Events.Scroll;\r\nEvents.ScrollEnd = \"scrollend\";\r\nEvents.ScrollAnimationDidStart = \"scrollanimationdidstart\";\r\nEvents.ScrollAnimationDidEnd = \"scrollanimationdidend\";\r\n\r\n// Map scroll events to drag events\r\nconst EventMappers = {};\r\nEventMappers[Events.Move] = Events.Move;\r\nEventMappers[Events.ScrollStart] = Events.DragStart;\r\nEventMappers[Events.ScrollMove] = Events.DragMove;\r\nEventMappers[Events.ScrollEnd] = Events.DragEnd;\r\nEventMappers[Events.ScrollAnimationDidStart] = Events.DragAnimationStart;\r\nEventMappers[Events.ScrollAnimationDidEnd] = Events.DragAnimationEnd;\r\nEventMappers[Events.DirectionLockStart] = Events.DirectionLockStart;\r\n\r\nexport class ScrollComponent extends Layer {\r\n  static initClass() {\r\n    // Proxy properties directly from the draggable\r\n    this.define(\r\n      \"velocity\",\r\n      this.proxyProperty(\"content.draggable.velocity\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"scrollHorizontal\",\r\n      this.proxyProperty(\"content.draggable.horizontal\")\r\n    );\r\n    this.define(\r\n      \"scrollVertical\",\r\n      this.proxyProperty(\"content.draggable.vertical\")\r\n    );\r\n    this.define(\"speedX\", this.proxyProperty(\"content.draggable.speedX\"));\r\n    this.define(\"speedY\", this.proxyProperty(\"content.draggable.speedY\"));\r\n    this.define(\r\n      \"isDragging\",\r\n      this.proxyProperty(\"content.draggable.isDragging\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"isMoving\",\r\n      this.proxyProperty(\"content.draggable.isMoving\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"isAnimating\",\r\n      this.proxyProperty(\"content.draggable.isAnimating\", {\r\n        importable: false,\r\n        exportable: false,\r\n      })\r\n    );\r\n    this.define(\r\n      \"propagateEvents\",\r\n      this.proxyProperty(\"content.draggable.propagateEvents\")\r\n    );\r\n    this.define(\r\n      \"directionLock\",\r\n      this.proxyProperty(\"content.draggable.directionLock\")\r\n    );\r\n    this.define(\r\n      \"directionLockThreshold\",\r\n      this.proxyProperty(\"content.draggable.directionLockThreshold\")\r\n    );\r\n\r\n    this.define(\"content\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        return this._content;\r\n      },\r\n    });\r\n\r\n    this.define(\r\n      \"mouseWheelSpeedMultiplier\",\r\n      this.simpleProperty(\"mouseWheelSpeedMultiplier\", 1)\r\n    );\r\n\r\n    this.define(\"scroll\", {\r\n      exportable: false,\r\n      get() {\r\n        return this.scrollHorizontal === true || this.scrollVertical === true;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        if (value === false) {\r\n          this.content.animateStop();\r\n        }\r\n        return (this.scrollHorizontal = this.scrollVertical = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollX\", {\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return 0 - this.content.x + this.contentInset.left;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.content.draggable.animateStop();\r\n        return (this.content.x = this._calculateContentPoint({\r\n          x: value,\r\n          y: 0,\r\n        }).x);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollY\", {\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return 0 - this.content.y + this.contentInset.top;\r\n      },\r\n      set(value) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.content.draggable.animateStop();\r\n        return (this.content.y = this._calculateContentPoint({\r\n          x: 0,\r\n          y: value,\r\n        }).y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollPoint\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        let point;\r\n        return (point = {\r\n          x: this.scrollX,\r\n          y: this.scrollY,\r\n        });\r\n      },\r\n      set(point) {\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n        this.scrollX = point.x;\r\n        return (this.scrollY = point.y);\r\n      },\r\n    });\r\n\r\n    this.define(\"scrollFrame\", {\r\n      importable: true,\r\n      exportable: false,\r\n      get() {\r\n        const rect = this.scrollPoint;\r\n        rect.width = this.width;\r\n        rect.height = this.height;\r\n        return rect;\r\n      },\r\n      set(value) {\r\n        return (this.scrollPoint = value);\r\n      },\r\n    });\r\n\r\n    this.define(\"contentInset\", {\r\n      get() {\r\n        return _.clone(this._contentInset);\r\n      },\r\n      set(contentInset) {\r\n        this._contentInset = Utils.rectZero(Utils.parseRect(contentInset));\r\n\r\n        if (!this.content) {\r\n          return;\r\n        }\r\n\r\n        // If we reset the content inset, we need to reset the content position\r\n        const contentFrame = this.calculateContentFrame();\r\n        contentFrame.x = contentFrame.x + this._contentInset.left;\r\n        contentFrame.y = contentFrame.y + this._contentInset.top;\r\n        this.content.frame = contentFrame;\r\n        return this.updateContent();\r\n      },\r\n    });\r\n\r\n    this.define(\"direction\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        const { direction } = this.content.draggable;\r\n        if (direction === \"down\") {\r\n          return \"up\";\r\n        }\r\n        if (direction === \"up\") {\r\n          return \"down\";\r\n        }\r\n        if (direction === \"right\") {\r\n          return \"left\";\r\n        }\r\n        if (direction === \"left\") {\r\n          return \"right\";\r\n        }\r\n        return direction;\r\n      },\r\n    });\r\n\r\n    this.define(\"angle\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get() {\r\n        if (!this.content) {\r\n          return 0;\r\n        }\r\n        return -this.content.draggable.angle;\r\n      },\r\n    });\r\n\r\n    this.prototype.on = this.prototype.addListener;\r\n    this.prototype.off = this.prototype.removeListener;\r\n\r\n    //#############################################################\r\n    // MouseWheel handling\r\n\r\n    this.define(\"mouseWheelEnabled\", {\r\n      get() {\r\n        return this._mouseWheelEnabled;\r\n      },\r\n      set(value) {\r\n        this._mouseWheelEnabled = value;\r\n        return this._enableMouseWheelHandling(value);\r\n      },\r\n    });\r\n\r\n    // Because there is no real scroll end event on a mousewheel, we use a timeout to see if\r\n    // events stop coming in, and throw a scroll event after. Better than nothing.\r\n    this.prototype._onMouseWheelEnd = Utils.debounce(0.3, function (event) {\r\n      this.emit(Events.ScrollEnd, event);\r\n      return (this._mouseWheelScrolling = false);\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this.updateContent = this.updateContent.bind(this);\r\n    this._onAnimationStart = this._onAnimationStart.bind(this);\r\n    this._onAnimationStep = this._onAnimationStep.bind(this);\r\n    this._onAnimationStop = this._onAnimationStop.bind(this);\r\n    this._onMouseWheel = this._onMouseWheel.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    super(Defaults.getDefaults(\"ScrollComponent\", options));\r\n\r\n    this._contentInset = options.contentInset || Utils.rectZero();\r\n    this.setContentLayer(new Layer());\r\n\r\n    // Only at this point we can set all the proxy properties, because before\r\n    // this the content layer did not exist. So we have to apply those again.\r\n    this._applyProxyDefaults(options);\r\n\r\n    this._enableMouseWheelHandling(options.mouseWheelEnabled);\r\n\r\n    if (options.hasOwnProperty(\"wrap\")) {\r\n      wrapComponent(this, options.wrap);\r\n    }\r\n  }\r\n\r\n  calculateContentFrame() {\r\n    let size;\r\n    if (!this.content) {\r\n      return Utils.rectZero();\r\n    }\r\n\r\n    // Calculates the size of the content. By default this returns the total\r\n    // size of all the content layers based on width and height. You can override\r\n    // this for example to take scaling into account.\r\n\r\n    const contentFrame = this.content.contentFrame();\r\n\r\n    return (size = {\r\n      x: 0,\r\n      y: 0,\r\n      width: Math.max(this.width, contentFrame.x + contentFrame.width),\r\n      height: Math.max(this.height, contentFrame.y + contentFrame.height),\r\n    });\r\n  }\r\n\r\n  setContentLayer(layer) {\r\n    // Sets the content layer if you happen to want to replace the default one\r\n    // yourself. Sets some sane defaults too.\r\n\r\n    if (this.content) {\r\n      this._onAnimationStop();\r\n      this.content.off(Events.AnimationStart, this._onAnimationStart);\r\n      this.content.off(Events.AnimationStop, this._onAnimationStop);\r\n      this._content.destroy();\r\n    }\r\n\r\n    this._content = layer;\r\n    this._content.parent = this;\r\n    this._content.name = \"content\";\r\n    this._content.clip = true;\r\n    this._content.draggable.enabled = true;\r\n    this._content.draggable.momentum = true;\r\n    this._content.on(\"change:children\", this.updateContent);\r\n\r\n    // Update the content view size on resizing the ScrollComponent\r\n    this.on(\"change:width\", this.updateContent);\r\n    this.on(\"change:height\", this.updateContent);\r\n\r\n    this.updateContent();\r\n\r\n    this.scrollPoint = { x: 0, y: 0 };\r\n\r\n    this.content.on(Events.AnimationStart, this._onAnimationStart);\r\n    this.content.on(Events.AnimationStop, this._onAnimationStop);\r\n\r\n    return this._content;\r\n  }\r\n\r\n  updateContent() {\r\n    // This function re-calculates the size of the content, updates the content layer\r\n    // size and the dragging constraints based on the content size and contentInset.\r\n    // It defaults to just the direct sub layers of the content, not recursive.\r\n\r\n    // This function automatically gets called when you add or remove content layers,\r\n    // but not when you change the size of the content layers. It's totally okay to\r\n    // call it yourself, but make sure you don't overdo it.\r\n\r\n    if (!this.content) {\r\n      return;\r\n    }\r\n\r\n    const contentFrame = this.calculateContentFrame();\r\n    this.content.width = contentFrame.width;\r\n    this.content.height = contentFrame.height;\r\n\r\n    let constraintsFrame = this.calculateContentFrame();\r\n    constraintsFrame = {\r\n      x: -constraintsFrame.width + this.width - this._contentInset.right,\r\n      y: -constraintsFrame.height + this.height - this._contentInset.bottom,\r\n      width:\r\n        constraintsFrame.width +\r\n        constraintsFrame.width -\r\n        this.width +\r\n        this._contentInset.left +\r\n        this._contentInset.right,\r\n      height:\r\n        constraintsFrame.height +\r\n        constraintsFrame.height -\r\n        this.height +\r\n        this._contentInset.top +\r\n        this._contentInset.bottom,\r\n    };\r\n\r\n    this.content.draggable.constraints = constraintsFrame;\r\n\r\n    // Reset the scroll points to the right postions, this is needed so it can calculate\r\n    // the new scroll points within the updated constraints for this new size.\r\n    this.scrollPoint = this.scrollPoint;\r\n\r\n    // Change the default background color if we added children. We keep the default\r\n    // color around until you set a content layer so you can see the ScrollComponent\r\n    // on your screen after creation.\r\n    if (this.content.children.length) {\r\n      if (\r\n        this.content.backgroundColor != null\r\n          ? this.content.backgroundColor.isEqual(\r\n              Framer.Defaults.Layer.backgroundColor\r\n            )\r\n          : undefined\r\n      ) {\r\n        return (this.content.backgroundColor = null);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calculateContentPoint(scrollPoint) {\r\n    scrollPoint = _.defaults(scrollPoint, { x: 0, y: 0 });\r\n    scrollPoint.x -= this.contentInset.left;\r\n    scrollPoint.y -= this.contentInset.top;\r\n    const point = this._pointInConstraints(scrollPoint);\r\n    return Utils.pointInvert(point);\r\n  }\r\n\r\n  scrollToPoint(point, animate, animationOptions) {\r\n    // We never let you scroll to a point that does not make sense (out of bounds). If you still\r\n    // would like to do that, access the .content.y directly.\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    const contentPoint = this._calculateContentPoint(point);\r\n    this.content.draggable.animateStop();\r\n\r\n    if (animate) {\r\n      point = {};\r\n      if (contentPoint.hasOwnProperty(\"x\")) {\r\n        point.x = contentPoint.x;\r\n      }\r\n      if (contentPoint.hasOwnProperty(\"y\")) {\r\n        point.y = contentPoint.y;\r\n      }\r\n      this.content.animateStop();\r\n      return this.content.animate(point, animationOptions);\r\n    } else {\r\n      return (this.content.point = contentPoint);\r\n    }\r\n  }\r\n\r\n  scrollToTop(animate, animationOptions) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    return this.scrollToPoint({ x: 0, y: 0 }, animate, animationOptions);\r\n  }\r\n\r\n  scrollToLayer(contentLayer, originX, originY, animate, animationOptions) {\r\n    let scrollPoint;\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    if (contentLayer && contentLayer.parent !== this.content) {\r\n      throw Error(\r\n        \"Can't scroll to this layer because it's not in the ScrollComponent. Add it to the content like layer.parent = scroll.content.\"\r\n      );\r\n    }\r\n\r\n    if (!contentLayer || this.content.children.length === 0) {\r\n      scrollPoint = { x: 0, y: 0 };\r\n    } else {\r\n      scrollPoint = this._scrollPointForLayer(contentLayer, originX, originY);\r\n      scrollPoint.x -= this.width * originX;\r\n      scrollPoint.y -= this.height * originY;\r\n    }\r\n\r\n    this.scrollToPoint(scrollPoint, animate, animationOptions);\r\n\r\n    return contentLayer;\r\n  }\r\n\r\n  scrollToClosestLayer(originX, originY, animate, animationOptions) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(500, 50, 0)\" };\r\n    }\r\n    const closestLayer = this.closestContentLayer(\r\n      originX,\r\n      originY,\r\n      animate,\r\n      animationOptions\r\n    );\r\n    if (closestLayer) {\r\n      this.scrollToLayer(closestLayer, originX, originY);\r\n      return closestLayer;\r\n    } else {\r\n      if (!closestLayer) {\r\n        this.scrollToPoint({ x: 0, y: 0 });\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n\r\n  closestContentLayer(originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    const scrollPoint = Utils.framePointForOrigin(\r\n      this.scrollFrame,\r\n      originX,\r\n      originY\r\n    );\r\n    return this.closestContentLayerForScrollPoint(\r\n      scrollPoint,\r\n      originX,\r\n      originY\r\n    );\r\n  }\r\n\r\n  closestContentLayerForScrollPoint(scrollPoint, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return _.head(\r\n      this._contentLayersSortedByDistanceForScrollPoint(\r\n        scrollPoint,\r\n        originX,\r\n        originY\r\n      )\r\n    );\r\n  }\r\n\r\n  _onAnimationStart(event) {\r\n    return this.content.on(\"change:frame\", this._onAnimationStep);\r\n  }\r\n\r\n  _onAnimationStep(event) {\r\n    this.content.emit(Events.Move, this.content.point);\r\n    return this.emit(Events.Scroll, event);\r\n  }\r\n\r\n  _onAnimationStop() {\r\n    return this.content.off(\"change:frame\", this._onAnimationStep);\r\n  }\r\n\r\n  _scrollPointForLayer(layer, originX, originY, clamp) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    if (clamp == null) {\r\n      clamp = true;\r\n    }\r\n    return Utils.framePointForOrigin(layer, originX, originY);\r\n  }\r\n\r\n  _contentLayersSortedByDistanceForScrollPoint(scrollPoint, originX, originY) {\r\n    if (originX == null) {\r\n      originX = 0;\r\n    }\r\n    if (originY == null) {\r\n      originY = 0;\r\n    }\r\n    return Utils.frameSortByAbsoluteDistance(\r\n      scrollPoint,\r\n      this.content.children,\r\n      originX,\r\n      originY\r\n    );\r\n  }\r\n\r\n  _pointInConstraints(point) {\r\n    const { minX, maxX, minY, maxY } =\r\n      this.content.draggable._calculateConstraints(\r\n        this.content.draggable.constraints\r\n      );\r\n\r\n    point = {\r\n      x: -Utils.clamp(-point.x, minX, maxX),\r\n      y: -Utils.clamp(-point.y, minY, maxY),\r\n    };\r\n\r\n    return point;\r\n  }\r\n\r\n  //#############################################################\r\n  // Map scroll events to content.draggable\r\n\r\n  addListener(...args) {\r\n    const adjustedLength = Math.max(args.length, 1),\r\n      eventNames = args.slice(0, adjustedLength - 1),\r\n      listener = args[adjustedLength - 1];\r\n    super.addListener(...arguments);\r\n    return (() => {\r\n      const result = [];\r\n      for (var eventName of Array.from(eventNames)) {\r\n        var needle;\r\n        if (\r\n          ((needle = eventName),\r\n          Array.from(_.keys(EventMappers)).includes(needle))\r\n        ) {\r\n          result.push(this.content.on(EventMappers[eventName], listener));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  removeListener(...args) {\r\n    const adjustedLength = Math.max(args.length, 1),\r\n      eventNames = args.slice(0, adjustedLength - 1),\r\n      listener = args[adjustedLength - 1];\r\n    super.removeListener(...arguments);\r\n    return (() => {\r\n      const result = [];\r\n      for (var eventName of Array.from(eventNames)) {\r\n        var needle;\r\n        if (\r\n          ((needle = eventName),\r\n          Array.from(_.keys(EventMappers)).includes(needle))\r\n        ) {\r\n          result.push(this.content.off(EventMappers[eventName], listener));\r\n        } else {\r\n          result.push(undefined);\r\n        }\r\n      }\r\n      return result;\r\n    })();\r\n  }\r\n\r\n  _enableMouseWheelHandling(enable) {\r\n    if (enable) {\r\n      return this.on(Events.MouseWheel, this._onMouseWheel);\r\n    } else {\r\n      return this.off(Events.MouseWheel, this._onMouseWheel);\r\n    }\r\n  }\r\n\r\n  _onMouseWheel(event) {\r\n    let deltaX = 0;\r\n    let deltaY = 0;\r\n    if (this.scrollHorizontal) {\r\n      deltaX = event.wheelDeltaX;\r\n    }\r\n    if (this.scrollVertical) {\r\n      deltaY = event.wheelDeltaY;\r\n    }\r\n\r\n    if (deltaX === 0 && deltaY === 0) {\r\n      return;\r\n    }\r\n\r\n    if (!this._mouseWheelScrolling) {\r\n      this._mouseWheelScrolling = true;\r\n      this.emit(Events.ScrollStart, event);\r\n    }\r\n\r\n    this.content.animateStop();\r\n\r\n    const { minX, maxX, minY, maxY } =\r\n      this.content.draggable._calculateConstraints(\r\n        this.content.draggable.constraints\r\n      );\r\n\r\n    const point = {\r\n      x: Utils.clamp(\r\n        this.content.x + deltaX * this.mouseWheelSpeedMultiplier,\r\n        minX,\r\n        maxX\r\n      ),\r\n      y: Utils.clamp(\r\n        this.content.y + deltaY * this.mouseWheelSpeedMultiplier,\r\n        minY,\r\n        maxY\r\n      ),\r\n    };\r\n\r\n    this.content.point = point;\r\n\r\n    this.content.emit(Events.Move, point);\r\n    this.emit(Events.Scroll, event);\r\n    return this._onMouseWheelEnd(event);\r\n  }\r\n\r\n  //#############################################################\r\n  // Copying\r\n\r\n  copy() {\r\n    const copy = super.copy(...arguments);\r\n    const contentLayer = _.head(_.without(copy.children, copy.content));\r\n    copy.setContentLayer(contentLayer);\r\n    copy.props = this.props;\r\n    return copy;\r\n  }\r\n\r\n  //#############################################################\r\n  // Convenience function to make a single layer scrollable\r\n\r\n  static wrap(layer, options) {\r\n    return wrapComponent(new this(options), layer, options);\r\n  }\r\n}\r\nScrollComponent.initClass();\r\n\r\nvar wrapComponent = function (instance, layer, options) {\r\n  if (options == null) {\r\n    options = { correct: true };\r\n  }\r\n  if (!(layer instanceof Layer)) {\r\n    throw new Error(\r\n      `ScrollComponent.wrap expects a layer, not ${layer}. Are you sure the layer exists?`\r\n    );\r\n  }\r\n\r\n  // This function wraps the given layer into a scroll or page component. This is\r\n  // great for importing from Sketch or Photoshop.\r\n\r\n  const scroll = instance;\r\n\r\n  // Do some special case handling for the PageComponent subclass\r\n  // as this function is outside of the class scope so we cant simply\r\n  // override\r\n  const isPageComponent = instance.constructor.name === \"PageComponent\";\r\n\r\n  // If we actually forgot to add a sub layer, so for example if\r\n  // there is just one layer and we want to make it scrollable we\r\n  // correct that here.\r\n\r\n  if (options.correct === true) {\r\n    if (layer.children.length === 0 && !isPageComponent) {\r\n      const wrapper = new Layer();\r\n      wrapper.frame = layer.frame;\r\n      layer.parent = wrapper;\r\n      layer.x = layer.y = 0;\r\n      layer = wrapper;\r\n    }\r\n  }\r\n\r\n  // console.info \"Corrected the scroll component without sub layers\"\r\n\r\n  scroll.frame = layer.frame;\r\n  scroll.parent = layer.parent;\r\n  scroll.index = layer.index;\r\n\r\n  if (layer.name != null && !isPageComponent) {\r\n    scroll.name = layer.name;\r\n  }\r\n  if (scroll.__framerInstanceInfo == null) {\r\n    scroll.__framerInstanceInfo = {};\r\n  }\r\n  if (scroll.__framerInstanceInfo != null) {\r\n    scroll.__framerInstanceInfo.name = instance.constructor.name;\r\n  }\r\n\r\n  // If we have an image set, it makes way more sense to add it to the\r\n  // background of the wrapper then the content.\r\n  // Note: I ran into a situation where this had a weird result, maybe\r\n  // we should revise this in the future.\r\n  if (layer.image && !isPageComponent) {\r\n    scroll.image = layer.image;\r\n    layer.image = null;\r\n  }\r\n\r\n  if (isPageComponent) {\r\n    // Just add the layer as a page\r\n    scroll.addPage(layer);\r\n  } else {\r\n    // Set the original layer as the content layer for the scroll\r\n    scroll.setContentLayer(layer);\r\n  }\r\n\r\n  // https://github.com/motif/Company/issues/208\r\n\r\n  // This could potentially be smart to avoid an unexpected state if\r\n  // you forgot to add a mask in sketch or photoshop and the scroll\r\n  // component size becomes the same as it's content.\r\n\r\n  // This only makes sense if your scroll component is on the screen\r\n  // to begin with so we check that first. Because maybe you put it\r\n  // offscreen to move it onscreen later.\r\n\r\n  // You can turn this off by setting correct to false\r\n\r\n  if (options.correct === true) {\r\n    const { screenFrame } = scroll;\r\n\r\n    if (screenFrame.x < Screen.width) {\r\n      if (screenFrame.x + screenFrame.width > Screen.width) {\r\n        scroll.width = Screen.width - screenFrame.x;\r\n      }\r\n    }\r\n    // console.info \"Corrected the scroll width to #{scroll.width}\"\r\n\r\n    if (screenFrame.y < Screen.height) {\r\n      if (screenFrame.y + screenFrame.height > Screen.height) {\r\n        scroll.height = Screen.height - screenFrame.y;\r\n      }\r\n    }\r\n  }\r\n  // console.info \"Corrected the scroll height to #{scroll.height}\"\r\n\r\n  return scroll;\r\n};\r\n","import { Events } from \"../Events.js\";\r\nimport { ScrollComponent } from \"./ScrollComponent.js\";\r\n\r\n`\\\r\nPageComponent\r\n\r\noriginX <number>\r\noriginY <number>\r\n\r\nvelocityThreshold <number>\r\nanimationOptions <animationOptions={}>\r\ncurrentPage <Layer>\r\nclosestPage(<originX:n, originY:n>) <Layer>\r\n\r\nnextPage(direction=\"\", currentPage)\r\nsnapToNextPage(direction=\"\", animate, animationOptions={})\r\n\\\r\n`;\r\n\r\nexport class PageComponent extends ScrollComponent {\r\n  static initClass() {\r\n    this.define(\"originX\", this.simpleProperty(\"originX\", 0.5));\r\n    this.define(\"originY\", this.simpleProperty(\"originY\", 0.5));\r\n    this.define(\r\n      \"velocityThreshold\",\r\n      this.simpleProperty(\"velocityThreshold\", 0.1)\r\n    );\r\n\r\n    this.define(\"closestPage\", {\r\n      get() {\r\n        return this.closestContentLayerForScrollPoint(\r\n          this._originScrollPoint(),\r\n          this.originX,\r\n          this.originY\r\n        );\r\n      },\r\n    });\r\n    this.define(\"currentPage\", {\r\n      get() {\r\n        return _.last(this._previousPages);\r\n      },\r\n    });\r\n    this.define(\"previousPage\", {\r\n      get() {\r\n        return this._previousPages[this._previousPages.length - 2];\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._scrollStart = this._scrollStart.bind(this);\r\n    this._scrollMove = this._scrollMove.bind(this);\r\n    this._scrollEnd = this._scrollEnd.bind(this);\r\n    this._resetHistory = this._resetHistory.bind(this);\r\n    super(\r\n      _.defaults(options, {\r\n        animationOptions: {\r\n          curve: \"spring(500, 50, 0)\",\r\n        },\r\n      })\r\n    );\r\n\r\n    this.content.draggable.momentum = false;\r\n    this.content.draggable.bounce = false;\r\n\r\n    this.content.on(Events.DragSessionStart, this._scrollStart);\r\n    this.content.on(Events.DragSessionEnd, this._scrollEnd);\r\n\r\n    this.content.on(\"change:frame\", _.debounce(this._scrollMove, 16));\r\n    this.content.on(\"change:children\", this._resetHistory);\r\n\r\n    this._resetHistory();\r\n  }\r\n\r\n  nextPage(direction, currentPage = null, withoutCurrentPage) {\r\n    let layers;\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    if (withoutCurrentPage == null) {\r\n      withoutCurrentPage = true;\r\n    }\r\n    if (currentPage == null) {\r\n      ({ currentPage } = this);\r\n    }\r\n\r\n    // Figure out the point from where to look for next layers in a direction\r\n    let point = { x: 0, y: 0 };\r\n    if (currentPage) {\r\n      point = Utils.framePointForOrigin(\r\n        currentPage,\r\n        this.originX,\r\n        this.originY\r\n      );\r\n    }\r\n    if (!withoutCurrentPage) {\r\n      point = {\r\n        x: this.scrollX + this.originX * this.width,\r\n        y: this.scrollY + this.originY * this.height,\r\n      };\r\n    }\r\n\r\n    if ([\"up\", \"top\", \"north\"].includes(direction)) {\r\n      layers = this.content.childrenAbove(point, this.originX, this.originY);\r\n    }\r\n    if ([\"down\", \"bottom\", \"south\"].includes(direction)) {\r\n      layers = this.content.childrenBelow(point, this.originX, this.originY);\r\n    }\r\n    if ([\"left\", \"west\"].includes(direction)) {\r\n      layers = this.content.childrenLeft(point, this.originX, this.originY);\r\n    }\r\n    if ([\"right\", \"east\"].includes(direction)) {\r\n      layers = this.content.childrenRight(point, this.originX, this.originY);\r\n    }\r\n\r\n    // See if there is one close by that we should go to\r\n    if (withoutCurrentPage) {\r\n      layers = _.without(layers, currentPage);\r\n    }\r\n\r\n    layers = Utils.frameSortByAbsoluteDistance(\r\n      point,\r\n      layers,\r\n      this.originX,\r\n      this.originY\r\n    );\r\n\r\n    return _.head(layers);\r\n  }\r\n\r\n  snapToPage(page, animate, animationOptions = null) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    this.scrollToLayer(\r\n      page,\r\n      this.originX,\r\n      this.originY,\r\n      animate,\r\n      animationOptions\r\n    );\r\n\r\n    if (this.currentPage !== page) {\r\n      this._previousPages.push(page);\r\n      this.emit(\"change:previousPage\", this.previousPage);\r\n      return this.emit(\"change:currentPage\", this.currentPage);\r\n    }\r\n  }\r\n\r\n  snapToNextPage(direction, animate, animationOptions = null) {\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (animationOptions == null) {\r\n      ({ animationOptions } = this);\r\n    }\r\n    let nextPage = this.nextPage(direction);\r\n    if (nextPage == null) {\r\n      nextPage = this.closestPage;\r\n    }\r\n    return this.snapToPage(nextPage, animate, animationOptions);\r\n  }\r\n\r\n  snapToPreviousPage(animate, animationOptions = null) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (!this.previousPage) {\r\n      return;\r\n    }\r\n    if (animationOptions == null) {\r\n      ({ animationOptions } = this);\r\n    }\r\n    this.snapToPage(this.previousPage, animate, animationOptions);\r\n\r\n    // Modify the previous page stack so we don\"t end up in a loop\r\n    return (this._previousPages = this._previousPages.slice(\r\n      0,\r\n      +(this._previousPages.length - 3) + 1 || undefined\r\n    ));\r\n  }\r\n\r\n  addPage(page, direction) {\r\n    // We only allow adding pages to the right and bottom for now, because it shouldn\"t\r\n    // be hard to insert them in the right order, and if we need to manage that for you\r\n    // we\"d have to change the position of every content layer so the new page fits.\r\n    // Ergo: too much magic.\r\n    if (direction == null) {\r\n      direction = \"right\";\r\n    }\r\n    const directions = [\"down\", \"bottom\", \"south\"] + [\"right\", \"east\"];\r\n\r\n    if (Array.from(directions).includes(!direction)) {\r\n      direction = \"right\";\r\n      throw new Error(`${direction} should be in ${directions}`);\r\n    }\r\n\r\n    // If you add pages it makes sense they end up in the default place .\r\n    const point = { x: 0, y: 0 };\r\n\r\n    if (this.content.children.length) {\r\n      if ([\"right\", \"east\"].includes(direction)) {\r\n        point.x = Utils.frameGetMaxX(this.content.contentFrame());\r\n      }\r\n      if ([\"down\", \"bottom\", \"south\"].includes(direction)) {\r\n        point.y = Utils.frameGetMaxY(this.content.contentFrame());\r\n      }\r\n    }\r\n\r\n    page.point = point;\r\n\r\n    if (page.parent !== this.content) {\r\n      return (page.parent = this.content);\r\n    } else {\r\n      return this.updateContent();\r\n    }\r\n  }\r\n\r\n  horizontalPageIndex(page) {\r\n    return _.sortBy(this.content.children, (l) => l.x).indexOf(page);\r\n  }\r\n\r\n  verticalPageIndex(page) {\r\n    return _.sortBy(this.content.children, (l) => l.y).indexOf(page);\r\n  }\r\n\r\n  _scrollStart() {\r\n    return (this._currentPage = this.currentPage);\r\n  }\r\n\r\n  _scrollMove() {\r\n    let needle;\r\n    const { currentPage } = this;\r\n\r\n    if (\r\n      ((needle = currentPage),\r\n      ![_.last(this._previousPages), undefined].includes(needle))\r\n    ) {\r\n      this._previousPages.push(currentPage);\r\n      return this.emit(\"change:currentPage\", {\r\n        old: this.previousPage,\r\n        new: currentPage,\r\n      });\r\n    }\r\n  }\r\n\r\n  _scrollEnd() {\r\n    if (this.content.isAnimating) {\r\n      return;\r\n    }\r\n\r\n    const { velocity } = this.content.draggable;\r\n\r\n    // See if we meet the minimum velocity to scroll to the next page. If not we snap\r\n    // to the layer closest to the scroll point.\r\n\r\n    const xDisabled =\r\n      !this.scrollHorizontal &&\r\n      (this.direction === \"right\" || this.direction === \"left\");\r\n    const yDisabled =\r\n      !this.scrollVertical &&\r\n      (this.direction === \"down\" || this.direction === \"up\");\r\n\r\n    const xLock =\r\n      this.content.draggable._directionLockEnabledX &&\r\n      (this.direction === \"right\" || this.direction === \"left\");\r\n    const yLock =\r\n      this.content.draggable._directionLockEnabledY &&\r\n      (this.direction === \"down\" || this.direction === \"up\");\r\n\r\n    const maximumVelocity = Math.max(\r\n      Math.abs(velocity.x),\r\n      Math.abs(velocity.y)\r\n    );\r\n\r\n    if (\r\n      maximumVelocity < this.velocityThreshold ||\r\n      xLock ||\r\n      yLock ||\r\n      xDisabled ||\r\n      yDisabled\r\n    ) {\r\n      return this.snapToPage(this.closestPage, true, this.animationOptions);\r\n    }\r\n\r\n    // Figure out which direction we are scrolling to and make a sorted list of\r\n    // layers on that side, sorted by absolute distance so we can pick the first.\r\n    let nextPage = this.nextPage(this.direction, this._currentPage, false);\r\n\r\n    // If not, we scroll to the closest layer that we have available, often the one\r\n    // that we are already at.\r\n    if (nextPage == null) {\r\n      nextPage = this.closestPage;\r\n    }\r\n\r\n    // print @content, maximumVelocity, @velocityThreshold\r\n    // print @direction, nextPage\r\n\r\n    return this.snapToPage(nextPage, true, this.animationOptions);\r\n  }\r\n\r\n  _originScrollPoint() {\r\n    const { scrollPoint } = this;\r\n    scrollPoint.x += this.width * this.originX;\r\n    scrollPoint.y += this.height * this.originY;\r\n    return scrollPoint;\r\n  }\r\n\r\n  _resetHistory() {\r\n    this._currentPage = this.closestPage;\r\n    return (this._previousPages = [this._currentPage]);\r\n  }\r\n}\r\nPageComponent.initClass();\r\n","const Utils = require(\"../Utils\");\r\nconst { Layer } = require(\"../Layer\");\r\nconst { Events } = require(\"../Events\");\r\n\r\n`\\\r\nSliderComponent\r\n\r\nknob <layer>\r\nknobSize <width, height>\r\nfill <layer>\r\nmin <number>\r\nmax <number>\r\n\r\npointForValue(<n>)\r\nvalueForPoint(<n>)\r\n\r\nanimateToValue(value, animationOptions={})\\\r\n`;\r\n\r\nEvents.SliderValueChange = \"sliderValueChange\";\r\n\r\nclass Knob extends Layer {\r\n  constructor(options) {\r\n    super(options);\r\n  }\r\n}\r\n\r\nexport class SliderComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"constrained\", this.simpleProperty(\"constrained\", false));\r\n\r\n    this.define(\"knobSize\", {\r\n      get() {\r\n        return this._knobSize;\r\n      },\r\n      set(value) {\r\n        const isRound = this.knob.borderRadius * 2 === this._knobSize;\r\n        this._knobSize = value;\r\n        this.knob.width = this._knobSize;\r\n        this.knob.height = this._knobSize;\r\n        if (isRound) {\r\n          this.knob.borderRadius = this._knobSize / 2;\r\n        }\r\n        return this._updateFrame();\r\n      },\r\n    });\r\n\r\n    this.define(\"hitArea\", {\r\n      get() {\r\n        return this._hitArea;\r\n      },\r\n      set(value) {\r\n        this._hitArea = value;\r\n        if (this.width > this.height) {\r\n          this.sliderOverlay.width = this.width + this.hitArea;\r\n          return (this.sliderOverlay.height = this.hitArea);\r\n        } else {\r\n          this.sliderOverlay.width = this.hitArea;\r\n          return (this.sliderOverlay.height = this.height + this.hitArea);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"min\", {\r\n      get() {\r\n        return this._min || 0;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._min = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"max\", {\r\n      get() {\r\n        return this._max || 1;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._max = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"value\", {\r\n      get() {\r\n        return this._value;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n\r\n        this._value = Utils.clamp(value, this.min, this.max);\r\n\r\n        if (this.width > this.height) {\r\n          this.knob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.knob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._tapStart = this._tapStart.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._updateFill = this._updateFill.bind(this);\r\n    this._updateKnob = this._updateKnob.bind(this);\r\n    this._updateFrame = this._updateFrame.bind(this);\r\n    this._setRadius = this._setRadius.bind(this);\r\n    this._knobDidMove = this._knobDidMove.bind(this);\r\n    this._updateValue = this._updateValue.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#ccc\",\r\n      borderRadius: 50,\r\n      clip: false,\r\n      width: 300,\r\n      height: 10,\r\n      value: 0,\r\n      knobSize: 30,\r\n    });\r\n\r\n    // Set some sensible default for the hit area\r\n    if (options.hitArea == null) {\r\n      options.hitArea = options.knobSize;\r\n    }\r\n\r\n    this.knob = new Knob({\r\n      backgroundColor: \"#fff\",\r\n      shadowY: 2,\r\n      shadowBlur: 4,\r\n      shadowColor: \"rgba(0, 0, 0, 0.3)\",\r\n      name: \"knob\",\r\n    });\r\n\r\n    this.fill = new Layer({\r\n      backgroundColor: \"#333\",\r\n      width: 0,\r\n      force2d: true,\r\n      name: \"fill\",\r\n    });\r\n\r\n    this.sliderOverlay = new Layer({\r\n      backgroundColor: null,\r\n      name: \"sliderOverlay\",\r\n    });\r\n\r\n    super(options);\r\n\r\n    this.knobSize = options.knobSize;\r\n    this.knob.parent = this.fill.parent = this.sliderOverlay.parent = this;\r\n\r\n    // Set fill initially\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n    } else {\r\n      this.fill.width = this.width;\r\n    }\r\n\r\n    this.fill.borderRadius = this.sliderOverlay.borderRadius =\r\n      this.borderRadius;\r\n\r\n    this.knob.draggable.enabled = true;\r\n    this.knob.draggable.overdrag = false;\r\n    this.knob.draggable.momentum = true;\r\n    this.knob.draggable.momentumOptions = { friction: 5, tolerance: 0.25 };\r\n    this.knob.draggable.bounce = false;\r\n    this.knob.borderRadius = this.knobSize / 2;\r\n\r\n    this._updateFrame();\r\n    this._updateKnob();\r\n    this._updateFill();\r\n\r\n    this.on(\"change:frame\", this._updateFrame);\r\n    this.on(\"change:borderRadius\", this._setRadius);\r\n    this.knob.on(\"change:size\", this._updateKnob);\r\n    this.knob.on(\"change:frame\", this._updateFill);\r\n    this.knob.on(\"change:frame\", this._knobDidMove);\r\n\r\n    this.sliderOverlay.on(Events.TapStart, this._tapStart);\r\n    this.sliderOverlay.on(Events.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  _tapStart(event) {\r\n    event.preventDefault();\r\n\r\n    if (this.width > this.height) {\r\n      const touchX = Events.touchEvent(event).clientX - Screen.canvasFrame.x;\r\n      const scaleX = this.canvasScaleX();\r\n      this.value = this.valueForPoint(touchX / scaleX - this.screenFrame.x);\r\n    } else {\r\n      const touchY = Events.touchEvent(event).clientY - Screen.canvasFrame.y;\r\n      const scaleY = this.canvasScaleY();\r\n      this.value = this.valueForPoint(touchY / scaleY - this.screenFrame.y);\r\n    }\r\n\r\n    this.knob.draggable._panStart(event);\r\n    return this._updateValue();\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._updateValue();\r\n  }\r\n\r\n  _updateFill() {\r\n    if (this.width > this.height) {\r\n      return (this.fill.width = this.knob.midX);\r\n    } else {\r\n      return (this.fill.height = this.knob.midY);\r\n    }\r\n  }\r\n\r\n  _updateKnob() {\r\n    if (this.width > this.height) {\r\n      this.knob.midX = this.fill.width;\r\n      return this.knob.centerY();\r\n    } else {\r\n      this.knob.midY = this.fill.height;\r\n      return this.knob.centerX();\r\n    }\r\n  }\r\n\r\n  _updateFrame() {\r\n    this.knob.draggable.constraints = {\r\n      x: -this.knob.width / 2,\r\n      y: -this.knob.height / 2,\r\n      width: this.width + this.knob.width,\r\n      height: this.height + this.knob.height,\r\n    };\r\n\r\n    if (this.constrained) {\r\n      this.knob.draggable.constraints = {\r\n        x: 0,\r\n        y: 0,\r\n        width: this.width,\r\n        height: this.height,\r\n      };\r\n    }\r\n\r\n    this.hitArea = this.hitArea;\r\n\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n      this.knob.midX = this.pointForValue(this.value);\r\n      this.knob.centerY();\r\n    } else {\r\n      this.fill.width = this.width;\r\n      this.knob.midY = this.pointForValue(this.value);\r\n      this.knob.centerX();\r\n    }\r\n\r\n    if (this.width > this.height) {\r\n      this.knob.draggable.speedY = 0;\r\n      this.knob.draggable.speedX = 1;\r\n    } else {\r\n      this.knob.draggable.speedX = 0;\r\n      this.knob.draggable.speedY = 1;\r\n    }\r\n\r\n    return this.sliderOverlay.center();\r\n  }\r\n\r\n  _setRadius() {\r\n    const radius = this.borderRadius;\r\n    return (this.fill.borderRadius = {\r\n      topLeft: radius,\r\n      bottomLeft: radius,\r\n    });\r\n  }\r\n\r\n  _knobDidMove() {\r\n    if (this.width > this.height) {\r\n      return (this.value = this.valueForPoint(this.knob.midX));\r\n    } else {\r\n      return (this.value = this.valueForPoint(this.knob.midY));\r\n    }\r\n  }\r\n\r\n  _updateValue() {\r\n    if (this._lastUpdatedValue === this.value) {\r\n      return;\r\n    }\r\n\r\n    this._lastUpdatedValue = this.value;\r\n    this.emit(\"change:value\", this.value);\r\n    return this.emit(Events.SliderValueChange, this.value);\r\n  }\r\n\r\n  pointForValue(value) {\r\n    if (this.width > this.height) {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0 + this.knob.width / 2, this.width - this.knob.width / 2],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0, this.width],\r\n          true\r\n        );\r\n      }\r\n    } else {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0 + this.knob.height / 2, this.height - this.knob.height / 2],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [this.min, this.max],\r\n          [0, this.height],\r\n          true\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  valueForPoint(value) {\r\n    if (this.width > this.height) {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [0 + this.knob.width / 2, this.width - this.knob.width / 2],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [0, this.width],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      }\r\n    } else {\r\n      if (this.constrained) {\r\n        return Utils.modulate(\r\n          value,\r\n          [0 + this.knob.height / 2, this.height - this.knob.height / 2],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      } else {\r\n        return Utils.modulate(\r\n          value,\r\n          [0, this.height],\r\n          [this.min, this.max],\r\n          true\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  animateToValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(300, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.knob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.knob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.knob.animate(animationOptions);\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.SliderValueChange, cb);\r\n  }\r\n}\r\nSliderComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\n`\\\r\nRangeSliderComponent\r\n\r\nminKnob <layer>\r\nmaxKnob <layer>\r\nknobSize <width, height>\r\nfill <layer>\r\n\r\nmin <number>\r\nmax <number>\r\nminValue <number>\r\nmaxValue <number>\r\n\r\npointForValue(<n>)\r\nvalueForPoint(<n>)\r\n\r\nanimateToMinValue(value, animationOptions={})\r\nanimateToMaxValue(value, animationOptions={})\\\r\n`;\r\n\r\nEvents.SliderValueChange = \"sliderValueChange\";\r\nEvents.SliderMinValueChange = \"sliderMinValueChange\";\r\nEvents.SliderMaxValueChange = \"sliderMaxValueChange\";\r\n\r\nclass Knob extends Layer {\r\n  constructor(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#fff\",\r\n      shadowY: 2,\r\n      shadowBlur: 4,\r\n      shadowColor: \"rgba(0, 0, 0, 0.3)\",\r\n    });\r\n\r\n    super(options);\r\n  }\r\n}\r\nexport class RangeSliderComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"constrained\", this.simpleProperty(\"constrained\", false));\r\n\r\n    this.define(\"knobSize\", {\r\n      get() {\r\n        return this._knobSize;\r\n      },\r\n      set(value) {\r\n        for (var knob of [this.minKnob, this.maxKnob]) {\r\n          var isRound = knob.borderRadius * 2 === this._knobSize;\r\n          this._knobSize = value;\r\n          knob.size = this._knobSize;\r\n          if (isRound) {\r\n            knob.borderRadius = this._knobSize / 2;\r\n          }\r\n        }\r\n\r\n        return this._updateFrame();\r\n      },\r\n    });\r\n\r\n    this.define(\"hitArea\", {\r\n      get() {\r\n        return this._hitArea;\r\n      },\r\n      set(value) {\r\n        this._hitArea = value;\r\n        if (this.width > this.height) {\r\n          this.sliderOverlay.width = this.width + this.hitArea;\r\n          return (this.sliderOverlay.height = this.hitArea);\r\n        } else {\r\n          this.sliderOverlay.width = this.hitArea;\r\n          return (this.sliderOverlay.height = this.height + this.hitArea);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"min\", {\r\n      get() {\r\n        return this._min || 0;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._min = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"max\", {\r\n      get() {\r\n        return this._max || 1;\r\n      },\r\n      set(value) {\r\n        if (_.isFinite(value)) {\r\n          return (this._max = value);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"minValue\", {\r\n      get() {\r\n        return this._minValue || 0;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n        this._minValue = value;\r\n\r\n        if (this.width > this.height) {\r\n          this.minKnob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.minKnob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n\r\n    this.define(\"maxValue\", {\r\n      get() {\r\n        return this._maxValue || 0.5;\r\n      },\r\n      set(value) {\r\n        if (!_.isFinite(value)) {\r\n          return;\r\n        }\r\n        this._maxValue = value;\r\n\r\n        if (this.width > this.height) {\r\n          this.maxKnob.midX = this.pointForValue(value);\r\n        } else {\r\n          this.maxKnob.midY = this.pointForValue(value);\r\n        }\r\n\r\n        this._updateFill();\r\n        return this._updateValue();\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._tapStart = this._tapStart.bind(this);\r\n    this._tapEnd = this._tapEnd.bind(this);\r\n    this._styleKnob = this._styleKnob.bind(this);\r\n    this._updateFill = this._updateFill.bind(this);\r\n    this._updateKnob = this._updateKnob.bind(this);\r\n    this._updateFrame = this._updateFrame.bind(this);\r\n    this._setRadius = this._setRadius.bind(this);\r\n    this._knobDidMove = this._knobDidMove.bind(this);\r\n    this._updateValue = this._updateValue.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    _.defaults(options, {\r\n      backgroundColor: \"#ccc\",\r\n      borderRadius: 50,\r\n      clip: false,\r\n      width: 300,\r\n      height: 10,\r\n      value: 0,\r\n      knobSize: 30,\r\n    });\r\n\r\n    // Set some sensible default for the hit area\r\n    if (options.hitArea == null) {\r\n      options.hitArea = options.knobSize;\r\n    }\r\n\r\n    this.minKnob = new Knob({\r\n      name: \"minKnob\",\r\n      size: this.knobSize || 30,\r\n    });\r\n\r\n    this.maxKnob = new Knob({\r\n      name: \"maxKnob\",\r\n      size: this.knobSize || 30,\r\n    });\r\n\r\n    this.fill = new Layer({\r\n      backgroundColor: \"#333\",\r\n      width: 0,\r\n      force2d: true,\r\n      name: \"fill\",\r\n    });\r\n\r\n    this.sliderOverlay = new Layer({\r\n      backgroundColor: null,\r\n      name: \"sliderOverlay\",\r\n    });\r\n\r\n    super(options);\r\n\r\n    // Set fill initially\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n    } else {\r\n      this.fill.width = this.width;\r\n    }\r\n\r\n    this.fill.borderRadius = this.sliderOverlay.borderRadius =\r\n      this.borderRadius;\r\n    this.knobSize = options.knobSize;\r\n\r\n    this._styleKnob(this.minKnob);\r\n    this._styleKnob(this.maxKnob);\r\n    this._updateFrame();\r\n    this._updateFill();\r\n    this._updateKnob();\r\n\r\n    this.on(\"change:frame\", this._updateFrame);\r\n    this.on(\"change:borderRadius\", this._setRadius);\r\n\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      knob.on(\"change:size\", this._updateKnob);\r\n      knob.on(\"change:frame\", this._updateFill);\r\n      knob.on(\"change:frame\", this._knobDidMove);\r\n      knob.on(\"change:frame\", this._updateFrame);\r\n    }\r\n\r\n    this.sliderOverlay.on(Events.TapStart, this._tapStart);\r\n    this.sliderOverlay.on(Events.TapEnd, this._tapEnd);\r\n  }\r\n\r\n  _tapStart(event) {\r\n    let clickedValue;\r\n    event.preventDefault();\r\n\r\n    if (this.width > this.height) {\r\n      const touchX = Events.touchEvent(event).clientX - Screen.canvasFrame.x;\r\n      const scaleX = this.canvasScaleX();\r\n      clickedValue = this.valueForPoint(touchX / scaleX - this.x);\r\n\r\n      if (clickedValue > this.maxValue) {\r\n        this.maxValue = clickedValue;\r\n        this.maxKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n      }\r\n\r\n      if (clickedValue < this.minValue) {\r\n        this.minValue = clickedValue;\r\n        this.minKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMinValueChange, this.minValue);\r\n      }\r\n    } else {\r\n      const touchY = Events.touchEvent(event).clientY - Screen.canvasFrame.y;\r\n      const scaleY = this.canvasScaleY();\r\n      clickedValue = this.valueForPoint(touchY / scaleY - this.y);\r\n\r\n      if (clickedValue > this.maxValue) {\r\n        this.maxValue = clickedValue;\r\n        this.maxKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n      }\r\n\r\n      if (clickedValue < this.minValue) {\r\n        this.minValue = clickedValue;\r\n        this.minKnob.draggable._panStart(event);\r\n        this.emit(Events.SliderMinValueChange, this.minValue);\r\n      }\r\n    }\r\n\r\n    return this._updateValue();\r\n  }\r\n\r\n  _tapEnd(event) {\r\n    return this._updateValue();\r\n  }\r\n\r\n  _styleKnob(knob) {\r\n    knob.parent = this.fill.parent = this.sliderOverlay.parent = this;\r\n    knob.borderRadius = this.knobSize / 2;\r\n\r\n    return _.extend(knob.draggable, {\r\n      enabled: true,\r\n      overdrag: false,\r\n      momentum: true,\r\n      bounce: false,\r\n      momentumOptions: { friction: 5, tolerance: 0.25 },\r\n    });\r\n  }\r\n\r\n  _updateFill() {\r\n    if (this.width > this.height) {\r\n      this.fill.x = this.minKnob.midX;\r\n      return (this.fill.width = this.maxKnob.midX - this.minKnob.midX);\r\n    } else {\r\n      this.fill.y = this.minKnob.midY;\r\n      return (this.fill.height = this.maxKnob.midY - this.minKnob.midY);\r\n    }\r\n  }\r\n\r\n  _updateKnob() {\r\n    if (this.width > this.height) {\r\n      this.minKnob.midX = this.fill.x;\r\n      this.minKnob.centerY();\r\n\r\n      this.maxKnob.midX = this.fill.x + this.fill.width;\r\n      return this.maxKnob.centerY();\r\n    } else {\r\n      this.minKnob.midY = this.fill.y;\r\n      this.minKnob.centerX();\r\n\r\n      this.maxKnob.midY = this.fill.y + this.fill.height;\r\n      return this.maxKnob.centerX();\r\n    }\r\n  }\r\n\r\n  _updateFrame() {\r\n    let knob;\r\n    this.minKnob.draggable.constraints = {\r\n      x: -this.minKnob.width / 2,\r\n      y: -this.minKnob.height / 2,\r\n      width: this.maxKnob.midX,\r\n      height: this.maxKnob.midY,\r\n    };\r\n\r\n    this.maxKnob.draggable.constraints = {\r\n      x: this.minKnob.maxX,\r\n      y: this.minKnob.maxY,\r\n      width: this.width + this.maxKnob.width,\r\n      height: this.height + this.maxKnob.height,\r\n    };\r\n\r\n    this.hitArea = this.hitArea;\r\n\r\n    if (this.width > this.height) {\r\n      this.fill.height = this.height;\r\n      this.minKnob.midX = this.pointForValue(this.minValue);\r\n      this.maxKnob.midX = this.pointForValue(this.maxValue);\r\n      this.minKnob.centerY();\r\n    } else {\r\n      this.fill.width = this.width;\r\n      this.minKnob.midY = this.pointForValue(this.minValue);\r\n      this.maxKnob.midY = this.pointForValue(this.maxValue);\r\n      this.minKnob.centerX();\r\n    }\r\n\r\n    if (this.width > this.height) {\r\n      for (knob of [this.minKnob, this.maxKnob]) {\r\n        knob.draggable.speedY = 0;\r\n        knob.draggable.speedX = 1;\r\n      }\r\n    } else {\r\n      for (knob of [this.minKnob, this.maxKnob]) {\r\n        knob.draggable.speedX = 0;\r\n        knob.draggable.speedY = 1;\r\n      }\r\n    }\r\n\r\n    return this.sliderOverlay.center();\r\n  }\r\n\r\n  _setRadius() {\r\n    const radius = this.borderRadius;\r\n    return (this.fill.borderRadius = {\r\n      topLeft: radius,\r\n      bottomLeft: radius,\r\n    });\r\n  }\r\n\r\n  _knobDidMove() {\r\n    if (this.width > this.height) {\r\n      this.minValue = this.valueForPoint(this.minKnob.midX);\r\n      return (this.maxValue = this.valueForPoint(this.maxKnob.midX));\r\n    } else {\r\n      this.minValue = this.valueForPoint(this.minKnob.midY);\r\n      return (this.maxValue = this.valueForPoint(this.maxKnob.midY));\r\n    }\r\n  }\r\n\r\n  _updateValue() {\r\n    this.emit(Events.SliderValueChange);\r\n\r\n    if (this.minKnob.draggable.isMoving) {\r\n      this.emit(Events.SliderMinValueChange, this.minValue);\r\n    }\r\n\r\n    if (this.maxKnob.draggable.isMoving) {\r\n      return this.emit(Events.SliderMaxValueChange, this.maxValue);\r\n    }\r\n  }\r\n\r\n  // Retrieve the point (x or y coordinate) of a certain numeric value.\r\n  pointForValue(value) {\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      // For horizontal (default) sliders.\r\n      if (this.width > this.height) {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0 + knob.width / 2, this.width - knob.width / 2],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0, this.width],\r\n            true\r\n          );\r\n        }\r\n\r\n        // For vertical sliders.\r\n      } else {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0 + knob.height / 2, this.height - knob.height / 2],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [this.min, this.max],\r\n            [0, this.height],\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Retrieve the numeric value of a certain point (x or y coordinate).\r\n  valueForPoint(value) {\r\n    for (var knob of [this.minKnob, this.maxKnob]) {\r\n      // For horizontal (default) sliders.\r\n      if (this.width > this.height) {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [0 + knob.width / 2, this.width - knob.width / 2],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [0, this.width],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        }\r\n\r\n        // For vertical sliders.\r\n      } else {\r\n        if (this.constrained) {\r\n          return Utils.modulate(\r\n            value,\r\n            [0 + knob.height / 2, this.height - knob.height / 2],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        } else {\r\n          return Utils.modulate(\r\n            value,\r\n            [0, this.height],\r\n            [this.min, this.max],\r\n            true\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  animateToMinValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(250, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.minKnob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.minKnob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.minKnob.animate(animationOptions);\r\n  }\r\n\r\n  animateToMaxValue(value, animationOptions) {\r\n    if (animationOptions == null) {\r\n      animationOptions = { curve: \"spring(250, 25, 0)\" };\r\n    }\r\n    if (!_.isFinite(value)) {\r\n      return;\r\n    }\r\n    if (this.width > this.height) {\r\n      animationOptions.properties = {\r\n        x: this.pointForValue(value) - this.maxKnob.width / 2,\r\n      };\r\n    } else {\r\n      animationOptions.properties = {\r\n        y: this.pointForValue(value) - this.maxKnob.height / 2,\r\n      };\r\n    }\r\n\r\n    return this.maxKnob.animate(animationOptions);\r\n  }\r\n\r\n  //#############################################################\r\n  //# EVENT HELPERS\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.SliderValueChange, cb);\r\n  }\r\n  onMinValueChange(cb) {\r\n    return this.on(Events.SliderMinValueChange, cb);\r\n  }\r\n  onMaxValueChange(cb) {\r\n    return this.on(Events.SliderMaxValueChange, cb);\r\n  }\r\n}\r\nRangeSliderComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport _ from \"../Underscore.js\";\r\n\r\nimport { BaseClass } from \"../BaseClass.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\nimport { Events } from \"../Events.js\";\r\n\r\nexport const centerLayer = (layer, snapToPixels = false) => {\r\n  const { frame } = layer;\r\n\r\n  if (layer.parent) {\r\n    Utils.frameSetMidX(\r\n      frame,\r\n      layer.parent.width / 2.0 - layer.parent.borderWidth\r\n    );\r\n    Utils.frameSetMidY(\r\n      frame,\r\n      layer.parent.height / 2.0 - layer.parent.borderWidth\r\n    );\r\n  } else {\r\n    Utils.frameSetMidX(frame, layer._context.innerWidth / 2.0);\r\n    Utils.frameSetMidY(frame, layer._context.innerHeight / 2.0);\r\n  }\r\n\r\n  if (snapToPixels) {\r\n    frame.x = Math.round(frame.x);\r\n    frame.y = Math.round(frame.y);\r\n  }\r\n\r\n  layer.frame = frame;\r\n  return layer.frame;\r\n};\r\n\r\nexport class DeviceComponent extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"context\", {\r\n      get() {\r\n        return this._context;\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // FULLSCREEN\r\n\r\n    this.define(\"fullScreen\", {\r\n      get() {\r\n        return this._fullScreen;\r\n      },\r\n      set(fullScreen) {\r\n        return this._setFullScreen(fullScreen);\r\n      },\r\n    });\r\n\r\n    this.define(\"screenSize\", {\r\n      get() {\r\n        let size;\r\n        if (this._shouldRenderFullScreen()) {\r\n          ({ size } = Canvas);\r\n        } else if (this.isLandscape) {\r\n          size = {\r\n            width: this._device.screenHeight,\r\n            height: this._device.screenWidth,\r\n          };\r\n        } else {\r\n          size = {\r\n            width: this._device.screenWidth,\r\n            height: this._device.screenHeight,\r\n          };\r\n        }\r\n        size.width /= this._context.devicePixelRatio;\r\n        size.height /= this._context.devicePixelRatio;\r\n        return size;\r\n      },\r\n    });\r\n\r\n    this.define(\"deviceType\", {\r\n      get() {\r\n        return this._deviceType;\r\n      },\r\n      set(deviceType) {\r\n        if (deviceType === this._deviceType && deviceType !== \"custom\") {\r\n          return;\r\n        }\r\n\r\n        let device = null;\r\n\r\n        if (_.isString(deviceType)) {\r\n          const lDevicetype = deviceType.toLowerCase();\r\n          for (var key of Array.from(_.keys(Devices))) {\r\n            var lKey = key.toLowerCase();\r\n            if (lDevicetype === lKey) {\r\n              device = Devices[key];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!device) {\r\n          throw Error(\r\n            `No device named ${deviceType}. Options are: ${_.keys(Devices)}`\r\n          );\r\n        }\r\n\r\n        if (this._device === device) {\r\n          return;\r\n        }\r\n\r\n        // If we switch from fullscreen to a device, we should zoom to fit\r\n        const shouldZoomToFit = this._deviceType === \"fullscreen\";\r\n\r\n        this.screen.backgroundColor = \"black\";\r\n        if (device.backgroundColor != null) {\r\n          this.screen.backgroundColor = device.backgroundColor;\r\n        }\r\n\r\n        if (device.deviceType === \"computer\") {\r\n          Utils.domComplete(() => (document.body.style.cursor = \"auto\"));\r\n        }\r\n\r\n        this._device = _.clone(device);\r\n        this._deviceType = deviceType;\r\n        this.fullscreen = false;\r\n        this._updateDeviceImage();\r\n        this._updateMaskImage();\r\n        this._update();\r\n        this.emit(\"change:deviceType\");\r\n\r\n        this.viewport.point = this._viewportOrientationOffset();\r\n\r\n        if (shouldZoomToFit) {\r\n          return (this.deviceScale = \"fit\");\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"hideBezel\", {\r\n      get() {\r\n        if (this._forceHideBezel) {\r\n          return true;\r\n        }\r\n        if (!Utils.isFramerStudio() && this._forceHide) {\r\n          return false;\r\n        }\r\n        return this._hideBezel != null ? this._hideBezel : false;\r\n      },\r\n      set(hideBezel) {\r\n        if (!Utils.isFramerStudio()) {\r\n          return;\r\n        }\r\n        this._hideBezel = hideBezel;\r\n        return this._update();\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // DEVICE ZOOM\r\n\r\n    this.define(\"deviceScale\", {\r\n      get() {\r\n        if (this._shouldRenderFullScreen()) {\r\n          return 1;\r\n        }\r\n        return this._deviceScale || 1;\r\n      },\r\n      set(deviceScale) {\r\n        return this.setDeviceScale(deviceScale, false);\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // CONTENT SCALE\r\n\r\n    this.define(\"contentScale\", {\r\n      get() {\r\n        return this._contentScale || 1;\r\n      },\r\n      set(contentScale) {\r\n        return this.setContentScale(contentScale, false);\r\n      },\r\n    });\r\n\r\n    //##########################################################################\r\n    // PHONE ORIENTATION\r\n\r\n    this.define(\"orientation\", {\r\n      get() {\r\n        if (Utils.isMobile()) {\r\n          return window.orientation;\r\n        }\r\n        return this._orientation || 0;\r\n      },\r\n\r\n      set(orientation) {\r\n        return this.setOrientation(orientation, false);\r\n      },\r\n    });\r\n\r\n    this.define(\"isPortrait\", {\r\n      get() {\r\n        return Math.abs(this.orientation) % 180 === 0;\r\n      },\r\n    });\r\n    this.define(\"isLandscape\", {\r\n      get() {\r\n        return !this.isPortrait;\r\n      },\r\n    });\r\n\r\n    this.define(\"orientationName\", {\r\n      get() {\r\n        if (this.isPortrait) {\r\n          return \"portrait\";\r\n        }\r\n        if (this.isLandscape) {\r\n          return \"landscape\";\r\n        }\r\n      },\r\n      set(orientationName) {\r\n        return this.setOrientation(orientationName, false);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this._update = this._update.bind(this);\r\n    this.customize = this.customize.bind(this);\r\n    this._updateDeviceImage = this._updateDeviceImage.bind(this);\r\n    this._updateMaskImage = this._updateMaskImage.bind(this);\r\n    this.forceHideBezel = this.forceHideBezel.bind(this);\r\n    this._viewportOrientationOffset =\r\n      this._viewportOrientationOffset.bind(this);\r\n    this._orientationChange = this._orientationChange.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    let defaults = Defaults.getDefaults(\"DeviceComponent\", options);\r\n\r\n    // If we have defaults for DeviceView, we are likely using an older version of\r\n    // Framer Studio. It's best to default to those then for now.\r\n    if (Framer.Defaults.hasOwnProperty(\"DeviceView\")) {\r\n      defaults = _.extend(defaults, Framer.Defaults.DeviceView);\r\n    }\r\n\r\n    this._setup();\r\n\r\n    this.animationOptions = defaults.animationOptions;\r\n    this.deviceType = defaults.deviceType;\r\n\r\n    _.extend(this, _.defaults(options, defaults));\r\n\r\n    this.Type = {\r\n      Tablet: \"tablet\",\r\n      Phone: \"phone\",\r\n      Computer: \"computer\",\r\n    };\r\n  }\r\n\r\n  _setup() {\r\n    if (this._setupDone) {\r\n      return;\r\n    }\r\n\r\n    this._setupDone = true;\r\n\r\n    this.background = new Layer();\r\n    this.background.clip = true;\r\n    this.background.backgroundColor = \"transparent\";\r\n    this.background.classList.add(\"DeviceBackground\");\r\n\r\n    this.hands = new Layer({ name: \"hands\" });\r\n    this.handsImageLayer = new Layer({\r\n      parent: this.hands,\r\n      name: \"handsImage\",\r\n    });\r\n    this.phone = new Layer({ parent: this.hands, name: \"phone\" });\r\n    // This background is made slightly bigger than the screen to prevent the background shining through cracks\r\n    this.screenBackground = new Layer({\r\n      parent: this.hands,\r\n      name: \"screenBackground\",\r\n      backgroundColor: \"black\",\r\n    });\r\n    this.screen = new Layer({ parent: this.hands, name: \"phone\" });\r\n    this.viewport = new Layer({ parent: this.screen, name: \"screen\" });\r\n    this.content = new Layer({ parent: this.viewport, name: \"viewport\" });\r\n    this.screenMask = new Layer({\r\n      parent: this.screen,\r\n      name: \"mask\",\r\n      backgroundColor: null,\r\n    });\r\n\r\n    this.content.classList.add(\"DeviceContent\");\r\n\r\n    this.hands.backgroundColor = \"transparent\";\r\n    this.hands._alwaysUseImageCache = true;\r\n    this.handsImageLayer.backgroundColor = \"transparent\";\r\n    this.hands.classList.add(\"DeviceHands\");\r\n\r\n    this.phone.backgroundColor = \"transparent\";\r\n    this.phone.classList.add(\"DevicePhone\");\r\n\r\n    this.screen.classList.add(\"DeviceScreen\");\r\n    this.screen.clip = true;\r\n\r\n    this.viewport.backgroundColor = \"transparent\";\r\n    this.viewport.classList.add(\"DeviceComponentPort\");\r\n\r\n    this.content.backgroundColor = \"transparent\";\r\n    this.content.classList.add(\"DeviceContent\");\r\n\r\n    this.content.originX = 0;\r\n    this.content.originY = 0;\r\n\r\n    if (!Utils.isMobile()) {\r\n      Framer.CurrentContext.domEventManager\r\n        .wrap(window)\r\n        .addEventListener(\"resize\", this._update);\r\n    }\r\n    if (Utils.isMobile()) {\r\n      Framer.CurrentContext.domEventManager\r\n        .wrap(window)\r\n        .addEventListener(\"resize\", this._orientationChange);\r\n    }\r\n\r\n    // This avoids rubber banding on mobile\r\n    for (var layer of [\r\n      this.background,\r\n      this.phone,\r\n      this.viewport,\r\n      this.content,\r\n      this.screen,\r\n      this.screenMask,\r\n    ]) {\r\n      layer.on(\"touchmove\", (event) => event.preventDefault());\r\n    }\r\n\r\n    this.screenMask.ignoreEvents = true;\r\n    this.phone.ignoreEvents = true;\r\n\r\n    this._context = new Framer.Context({\r\n      parent: this.content,\r\n      name: \"DeviceScreen\",\r\n    });\r\n    this._context.perspective = 1200;\r\n    this._context.device = this;\r\n    return this.on(\"change:orientation\", function () {\r\n      if (Screen.size !== Screen.height) {\r\n        return Screen.emit(\"resize\");\r\n      }\r\n    });\r\n  }\r\n\r\n  _update() {\r\n    // Todo: pixel align at zoom level 1, 0.5\r\n\r\n    let height, width;\r\n    let contentScaleFactor = this.contentScale;\r\n    if (contentScaleFactor > 1) {\r\n      contentScaleFactor = 1;\r\n    }\r\n    let screenSizeChanged = false;\r\n    if (this._shouldRenderFullScreen()) {\r\n      const { clientWidth } = document.documentElement;\r\n      const { clientHeight } = document.documentElement;\r\n      if (Utils.isMobile()) {\r\n        // This uses the actual screen size, which only make sense if the prototype\r\n        // takes up the whole screen of the device\r\n        width = screen.width * window.devicePixelRatio;\r\n        height = screen.height * window.devicePixelRatio;\r\n        // If the width and height don't match up with the client width and height\r\n        // the device is rotated, so flip them\r\n        if (\r\n          (clientWidth < clientHeight && width > height) ||\r\n          (clientWidth > clientHeight && width < height)\r\n        ) {\r\n          const newHeight = width;\r\n          width = height;\r\n          height = newHeight;\r\n        }\r\n      } else {\r\n        width = clientWidth / contentScaleFactor;\r\n        height = clientHeight / contentScaleFactor;\r\n      }\r\n      screenSizeChanged =\r\n        this.content.width !== width || this.content.height !== height;\r\n      for (var layer of [\r\n        this.background,\r\n        this.hands,\r\n        this.phone,\r\n        this.viewport,\r\n        this.content,\r\n        this.screen,\r\n        this.screenMask,\r\n      ]) {\r\n        layer.x = layer.y = 0;\r\n        layer.width = width;\r\n        layer.height = height;\r\n        layer.scale = 1;\r\n      }\r\n\r\n      this.content.scale = contentScaleFactor;\r\n      if (this.deviceType !== \"fullscreen\" || Utils.isMobile()) {\r\n        screenSizeChanged =\r\n          screenSizeChanged ||\r\n          this._context.devicePixelRatio !== window.devicePixelRatio;\r\n        this._context.devicePixelRatio = window.devicePixelRatio;\r\n      }\r\n      this.screenBackground.visible = this.deviceType !== \"fullscreen\";\r\n\r\n      if (Utils.isMobile()) {\r\n        this.screenMask.visible = false;\r\n      } else {\r\n        this._updateMaskImage();\r\n      }\r\n    } else {\r\n      const backgroundOverlap = 100;\r\n\r\n      this.background.x = 0 - backgroundOverlap;\r\n      this.background.y = 0 - backgroundOverlap;\r\n      this.background.width = window.innerWidth + 2 * backgroundOverlap;\r\n      this.background.height = window.innerHeight + 2 * backgroundOverlap;\r\n      if (this.disableSizeUpdates) {\r\n        return;\r\n      }\r\n      this._updateDeviceImage();\r\n      this._updateMaskImage();\r\n      this.screenMask.visible = this.hideBezel;\r\n      this.hands.scale = this._calculatePhoneScale();\r\n      centerLayer(this.hands, true);\r\n      centerLayer(this.phone);\r\n\r\n      [width, height] = Array.from(\r\n        this._getOrientationDimensions(\r\n          this._device.screenWidth / contentScaleFactor,\r\n          this._device.screenHeight / contentScaleFactor\r\n        )\r\n      );\r\n\r\n      this.screenMask.width =\r\n        this.screen.width =\r\n        this.viewport.width =\r\n          this._device.screenWidth;\r\n      this.screenMask.height =\r\n        this.screen.height =\r\n        this.viewport.height =\r\n          this._device.screenHeight;\r\n      screenSizeChanged =\r\n        this.content.width !== width || this.content.height !== height;\r\n      this.content.width = width;\r\n      this.content.height = height;\r\n      this.screenBackground.width = this.screen.width + 40;\r\n      this.screenBackground.height = this.screen.height + 40;\r\n      if (this.selectedHand && this._orientation === 0) {\r\n        this.setHand(this.selectedHand);\r\n      }\r\n      centerLayer(this.screenBackground, true);\r\n      centerLayer(this.screen, true);\r\n      centerLayer(this.screenMask, true);\r\n\r\n      const pixelRatio =\r\n        this._device.devicePixelRatio != null\r\n          ? this._device.devicePixelRatio\r\n          : 1;\r\n      screenSizeChanged =\r\n        screenSizeChanged || this._context.devicePixelRatio !== pixelRatio;\r\n      this._context.devicePixelRatio = pixelRatio;\r\n      if (window.devicePixelRatio === pixelRatio && Utils.isDesktop()) {\r\n        // On desktop rendering natively without scaling looks better, so do that\r\n        this._context.renderUsingNativePixelRatio = true;\r\n        this.content.scale = pixelRatio;\r\n      } else {\r\n        this._context.renderUsingNativePixelRatio = false;\r\n        this.content.scale = 1;\r\n      }\r\n    }\r\n\r\n    if (screenSizeChanged) {\r\n      return Screen.emit(\"resize\");\r\n    }\r\n  }\r\n\r\n  _shouldRenderFullScreen() {\r\n    if (!this._device) {\r\n      return true;\r\n    }\r\n\r\n    if (this.fullScreen === true) {\r\n      return true;\r\n    }\r\n\r\n    if (this.deviceType === \"fullscreen\") {\r\n      return true;\r\n    }\r\n\r\n    if (Utils.isInsideIframe()) {\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"phone\" &&\r\n      Utils.deviceType() === this._device.deviceType\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"tablet\" &&\r\n      Utils.deviceType() === this._device.deviceType\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      Utils.deviceType() === \"phone\" &&\r\n      this._device.deviceType === \"tablet\"\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  setupContext() {\r\n    // Sets this device up as the default context so everything renders\r\n    // into the device screen\r\n    return (Framer.CurrentContext = this._context);\r\n  }\r\n\r\n  platform() {\r\n    if (/google|nexus|htc|samsung|sony-smartwatch/.test(this.deviceType)) {\r\n      return \"Android\";\r\n    }\r\n    if (/iphone|ipad/.test(this.deviceType)) {\r\n      return \"iOS\";\r\n    }\r\n    if (/apple-watch|applewatch/.test(this.deviceType)) {\r\n      return \"watchOS\";\r\n    }\r\n    if (/apple|safari/.test(this.deviceType)) {\r\n      return \"macOS\";\r\n    }\r\n    if (/microsoft|dell/.test(this.deviceType)) {\r\n      return \"Windows\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _setFullScreen(fullScreen) {\r\n    if (this._deviceType === \"fullscreen\") {\r\n      return;\r\n    }\r\n\r\n    if (!_.isBoolean(fullScreen)) {\r\n      return;\r\n    }\r\n\r\n    if (fullScreen === this._fullScreen) {\r\n      return;\r\n    }\r\n\r\n    this._fullScreen = fullScreen;\r\n\r\n    if (fullScreen === true) {\r\n      this.phone.image = \"\";\r\n      this.hands.image = \"\";\r\n    } else {\r\n      this._updateDeviceImage();\r\n    }\r\n    this._updateMaskImage();\r\n\r\n    this._update();\r\n    return this.emit(\"change:fullScreen\");\r\n  }\r\n\r\n  //##########################################################################\r\n  // DEVICE TYPE\r\n\r\n  customize(deviceProps) {\r\n    Devices.custom = _.defaults(deviceProps, Devices.custom);\r\n    this.deviceType = \"custom\";\r\n    return this._update();\r\n  }\r\n\r\n  _updateDeviceImage() {\r\n    if (/PhantomJS/.test(navigator.userAgent)) {\r\n      return;\r\n    }\r\n\r\n    if (this._shouldRenderFullScreen() || this.hideBezel) {\r\n      this.phone.image = \"\";\r\n      return (this.hands.image = \"\");\r\n    } else if (!this._deviceImageUrl(this._deviceImageName())) {\r\n      return (this.phone.image = \"\");\r\n    } else {\r\n      this.phone._alwaysUseImageCache = true;\r\n      this.phone.image = this._deviceImageUrl(this._deviceImageName());\r\n      this.phone.width = this._device.deviceImageWidth;\r\n      this.phone.height = this._device.deviceImageHeight;\r\n      this.hands.width = this.phone.width;\r\n      return (this.hands.height = this.phone.height);\r\n    }\r\n  }\r\n\r\n  _updateMaskImage() {\r\n    if (this._device.screenMask) {\r\n      this.phone.bringToFront();\r\n      this.screenMask.image = this._deviceImageUrl(this._device.screenMask);\r\n      return (this.screenMask.visible = true);\r\n    } else {\r\n      this.screenMask.image = null;\r\n      this.screenMask.visible = false;\r\n      return this.phone.placeBehind(this.screen);\r\n    }\r\n  }\r\n\r\n  _deviceImageName() {\r\n    if (this._device.hasOwnProperty(\"deviceImage\")) {\r\n      return this._device.deviceImage;\r\n    }\r\n    return `${this._deviceType}.png`;\r\n  }\r\n\r\n  _deviceImageUrl(name) {\r\n    if (!name) {\r\n      return null;\r\n    }\r\n\r\n    // If the image is externally hosted, we'd like to use that\r\n    if (_.startsWith(name, \"http://\") || _.startsWith(name, \"https://\")) {\r\n      return name;\r\n    }\r\n\r\n    // If this device is added by the user we use the name as it is\r\n    if (\r\n      !Array.from(BuiltInDevices).includes(this._deviceType) ||\r\n      this._deviceType === \"custom\"\r\n    ) {\r\n      return name;\r\n    }\r\n\r\n    // We want to get these image from our public resources server\r\n    let resourceUrl = \"//resources.framerjs.com/static/DeviceResources\";\r\n\r\n    // If we are running a local copy of Framer from the drive, get the resource online\r\n    if (Utils.isFileUrl(window.location.href)) {\r\n      resourceUrl = `http:${resourceUrl}`;\r\n    }\r\n\r\n    // If we're running Framer Studio and have local files, we'd like to use those.\r\n    // For now we always use jp2 inside framer stusio\r\n    if (Utils.isFramerStudio() && window.FramerStudioInfo) {\r\n      if (\r\n        (this._device.minStudioVersion &&\r\n          Utils.framerStudioVersion() >= this._device.minStudioVersion) ||\r\n        !this._device.minStudioVersion\r\n      ) {\r\n        if (\r\n          (this._device.maxStudioVersion &&\r\n            Utils.framerStudioVersion() <= this._device.maxStudioVersion) ||\r\n          !this._device.maxStudioVersion\r\n        ) {\r\n          resourceUrl = window.FramerStudioInfo.deviceImagesUrl;\r\n          return `${resourceUrl}/${name.replace(\".png\", \".jp2\")}`;\r\n        }\r\n      }\r\n    }\r\n\r\n    // We'd like to use jp2/webp if possible, or check if we don't for this specific device\r\n    if (this._device.deviceImageCompression === true) {\r\n      if (Utils.isWebPSupported()) {\r\n        return `${resourceUrl}/${name.replace(\".png\", \".webp\")}`;\r\n      }\r\n      if (Utils.isJP2Supported()) {\r\n        return `${resourceUrl}/${name.replace(\".png\", \".jp2\")}`;\r\n      }\r\n    }\r\n\r\n    return `${resourceUrl}/${name}`;\r\n  }\r\n\r\n  forceHideBezel(forceHide) {\r\n    if (forceHide == null) {\r\n      forceHide = true;\r\n    }\r\n    this._forceHideBezel = forceHide;\r\n    return this._update();\r\n  }\r\n\r\n  setDeviceScale(deviceScale, animate) {\r\n    let phoneScale;\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    if (deviceScale === \"fit\" || deviceScale < 0) {\r\n      deviceScale = \"fit\";\r\n    } else {\r\n      deviceScale = parseFloat(deviceScale);\r\n    }\r\n\r\n    if (deviceScale === this._deviceScale) {\r\n      return;\r\n    }\r\n\r\n    this._deviceScale = deviceScale;\r\n\r\n    if (this._shouldRenderFullScreen()) {\r\n      return;\r\n    }\r\n\r\n    if (deviceScale === \"fit\") {\r\n      phoneScale = this._calculatePhoneScale();\r\n    } else {\r\n      phoneScale = deviceScale;\r\n    }\r\n\r\n    this.hands.animateStop();\r\n\r\n    if (animate) {\r\n      this.hands.animate(\r\n        _.extend(this.animationOptions, { properties: { scale: phoneScale } })\r\n      );\r\n    } else {\r\n      this.hands.scale = phoneScale;\r\n      centerLayer(this.hands, true);\r\n    }\r\n\r\n    return this.emit(\"change:deviceScale\");\r\n  }\r\n\r\n  _calculatePhoneScale(windowWidth, windowHeight) {\r\n    // Calculates a phone scale that fits the screen unless a fixed value is set\r\n    let padding;\r\n    const dimension = this.hideBezel ? this.screen : this.phone;\r\n\r\n    const [width, height] = Array.from(\r\n      this._getOrientationDimensions(dimension.width, dimension.height)\r\n    );\r\n\r\n    if (this.hideBezel) {\r\n      padding = 0;\r\n    } else {\r\n      const paddingOffset =\r\n        (this._device != null ? this._device.paddingOffset : undefined) || 0;\r\n      padding = (this.padding + paddingOffset) * 2;\r\n    }\r\n\r\n    if (windowWidth == null) {\r\n      windowWidth = window.innerWidth;\r\n    }\r\n    if (windowHeight == null) {\r\n      windowHeight = window.innerHeight;\r\n    }\r\n    let phoneScale = _.min([\r\n      (windowWidth - padding) / width,\r\n      (windowHeight - padding) / height,\r\n    ]);\r\n\r\n    // Only scale in fixed steps, to reduce blurriness, and pixel cracks\r\n    phoneScale = Math.floor(phoneScale * 1024.0) / 1024.0;\r\n    if (phoneScale < 1 / 64.0) {\r\n      phoneScale = 1 / 64.0;\r\n    }\r\n\r\n    if (!Utils.isFramerStudio() || !this.hideBezel) {\r\n      // If close to a nice round scaling, snap to it\r\n      if (30 / 64 < phoneScale && phoneScale < 35 / 64) {\r\n        phoneScale = 32 / 64;\r\n      } else if (15 / 64 < phoneScale && phoneScale < 18 / 64) {\r\n        phoneScale = 16 / 64;\r\n      }\r\n    }\r\n\r\n    // Never scale the phone beyond 100%\r\n    if (phoneScale > 1 && !this.hideBezel) {\r\n      phoneScale = 1;\r\n    }\r\n\r\n    this.emit(\"change:phoneScale\", phoneScale);\r\n\r\n    // If the device has a set scale we use that one\r\n    if (this._deviceScale && this._deviceScale !== \"fit\") {\r\n      return this._deviceScale;\r\n    }\r\n\r\n    return phoneScale;\r\n  }\r\n\r\n  setContentScale(contentScale, animate) {\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    contentScale = parseFloat(contentScale);\r\n\r\n    if (contentScale <= 0) {\r\n      return;\r\n    }\r\n\r\n    if (contentScale === this._contentScale) {\r\n      return;\r\n    }\r\n\r\n    this._contentScale = contentScale;\r\n\r\n    if (animate) {\r\n      this.content.animate(\r\n        _.extend(this.animationOptions, {\r\n          properties: { scale: this._contentScale },\r\n        })\r\n      );\r\n    } else {\r\n      this.content.scale = this._contentScale;\r\n    }\r\n\r\n    this._update();\r\n\r\n    return this.emit(\"change:contentScale\");\r\n  }\r\n\r\n  setOrientation(orientation, animate, suggestedSize = null) {\r\n    let scale;\r\n    if (animate == null) {\r\n      animate = false;\r\n    }\r\n    if (Utils.framerStudioVersion() === oldDeviceMaxVersion) {\r\n      orientation *= -1;\r\n    }\r\n\r\n    if (orientation === \"portrait\") {\r\n      orientation = 0;\r\n    }\r\n\r\n    if (orientation === \"landscape\") {\r\n      orientation = 90;\r\n    }\r\n\r\n    if (this._shouldRenderFullScreen()) {\r\n      return;\r\n    }\r\n\r\n    orientation = parseInt(orientation);\r\n\r\n    if (![0, 90, -90].includes(orientation)) {\r\n      return;\r\n    }\r\n\r\n    if (orientation === this._orientation) {\r\n      return;\r\n    }\r\n\r\n    this._orientation = orientation;\r\n\r\n    // Calculate properties for the phone\r\n    const handsProperties = { rotationZ: -this._orientation };\r\n\r\n    const options = _.clone(this.animationOptions);\r\n    if (suggestedSize != null) {\r\n      scale = this._calculatePhoneScale(\r\n        suggestedSize.width,\r\n        suggestedSize.height\r\n      );\r\n      handsProperties.x = suggestedSize.width / 2 - this.hands.width / 2.0;\r\n      handsProperties.y = suggestedSize.height / 2 - this.hands.height / 2.0;\r\n      options.time = null;\r\n      // Converted with Origami from Bounciness 5, Speed 12\r\n      options.curve = Spring({ tension: 342.10059, friction: 28.97662 });\r\n    } else {\r\n      scale = this._calculatePhoneScale();\r\n    }\r\n\r\n    handsProperties.scale = scale;\r\n    const contentProperties = this._viewportOrientationOffset();\r\n\r\n    this.hands.animateStop();\r\n    this.viewport.animateStop();\r\n\r\n    if (animate) {\r\n      const previousBackgroundColor = this.background.backgroundColor;\r\n      const previousScreenBackgroundVisiblity = this.screenBackground.visible;\r\n      if (this.hideBezel) {\r\n        this.screenBackground.visible = false;\r\n        this.background.backgroundColor = this.screen.backgroundColor;\r\n        this.disableSizeUpdates = true;\r\n      }\r\n      const animation = this.hands.animate(\r\n        _.extend(options, { properties: handsProperties })\r\n      );\r\n      this.viewport.animate(\r\n        _.extend(options, { properties: contentProperties })\r\n      );\r\n\r\n      animation.on(Events.AnimationEnd, () => {\r\n        return this._update();\r\n      });\r\n\r\n      animation.on(Events.AnimationStop, () => {\r\n        this.disableSizeUpdates = false;\r\n        this.background.backgroundColor = previousBackgroundColor;\r\n        return (this.screenBackground.visible =\r\n          previousScreenBackgroundVisiblity);\r\n      });\r\n    } else {\r\n      this.hands.props = handsProperties;\r\n      this.viewport.props = contentProperties;\r\n      this._update();\r\n    }\r\n\r\n    if (this._orientation !== 0) {\r\n      this.handsImageLayer.image = \"\";\r\n    }\r\n\r\n    return this.emit(\"change:orientation\", this._orientation);\r\n  }\r\n\r\n  _viewportOrientationOffset() {\r\n    let contentProperties;\r\n    const [width, height] = Array.from(\r\n      this._getOrientationDimensions(\r\n        this._device.screenWidth,\r\n        this._device.screenHeight\r\n      )\r\n    );\r\n\r\n    this.content.width = width;\r\n    this.content.height = height;\r\n\r\n    let offset = (this.screen.width - width) / 2;\r\n    if (this._orientation === -90) {\r\n      offset *= -1;\r\n    }\r\n\r\n    let [x, y] = Array.from([0, 0]);\r\n\r\n    if (this.isLandscape) {\r\n      x = offset;\r\n      y = offset;\r\n    }\r\n\r\n    return (contentProperties = {\r\n      rotationZ: this._orientation,\r\n      x,\r\n      y,\r\n    });\r\n  }\r\n\r\n  _orientationChange() {\r\n    this._orientation = window.orientation;\r\n    this._update();\r\n    return this.emit(\"change:orientation\", window.orientation);\r\n  }\r\n\r\n  rotateLeft(animate) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (this.orientation === 90) {\r\n      return;\r\n    }\r\n    return this.setOrientation(this.orientation + 90, animate);\r\n  }\r\n\r\n  rotateRight(animate) {\r\n    if (animate == null) {\r\n      animate = true;\r\n    }\r\n    if (this.orientation === -90) {\r\n      return;\r\n    }\r\n    return this.setOrientation(this.orientation - 90, animate);\r\n  }\r\n\r\n  _getOrientationDimensions(width, height) {\r\n    if (this.isLandscape) {\r\n      return [height, width];\r\n    } else {\r\n      return [width, height];\r\n    }\r\n  }\r\n\r\n  //##########################################################################\r\n  // HANDS\r\n\r\n  handSwitchingSupported() {\r\n    return this._device.hands !== undefined && !this.hideBezel;\r\n  }\r\n\r\n  nextHand() {\r\n    if (this.hands.rotationZ !== 0) {\r\n      return;\r\n    }\r\n    if (this.handSwitchingSupported()) {\r\n      const hands = _.keys(this._device.hands);\r\n      if (hands.length > 0) {\r\n        const nextHandIndex = hands.indexOf(this.selectedHand) + 1;\r\n        let nextHand = \"\";\r\n        if (nextHandIndex < hands.length) {\r\n          nextHand = hands[nextHandIndex];\r\n        }\r\n        const hand = this.setHand(nextHand);\r\n        this._update();\r\n        return hand;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setHand(hand) {\r\n    this.selectedHand = hand;\r\n    if (!hand || !this.handSwitchingSupported()) {\r\n      return (this.handsImageLayer.image = \"\");\r\n    }\r\n\r\n    const handData = this._device.hands[hand];\r\n    if (handData) {\r\n      this.hands.width = handData.width;\r\n      this.hands.height = handData.height;\r\n      centerLayer(this.hands, true);\r\n      centerLayer(this.phone);\r\n      this.handsImageLayer.size = this.hands.size;\r\n      this.handsImageLayer.y = 0;\r\n      if (handData.offset) {\r\n        this.handsImageLayer.y = handData.offset;\r\n      }\r\n      this.handsImageLayer.image = this.handImageUrl(hand);\r\n      return hand;\r\n    }\r\n  }\r\n\r\n  handImageUrl(hand) {\r\n    // We want to get these image from our public resources server\r\n    let resourceUrl = \"//resources.framerjs.com/static/DeviceResources\";\r\n\r\n    // If we are running a local copy of Framer from the drive, get the resource online\r\n    if (Utils.isFileUrl(window.location.href)) {\r\n      resourceUrl = `http://${resourceUrl}`;\r\n    }\r\n\r\n    // If we're running Framer Studio and have local files, we'd like to use those\r\n    if (\r\n      Utils.isFramerStudio() &&\r\n      window.FramerStudioInfo &&\r\n      Utils.framerStudioVersion() >= newDeviceMinVersion\r\n    ) {\r\n      resourceUrl = window.FramerStudioInfo.deviceImagesUrl;\r\n      return `${resourceUrl}/${hand}.png`;\r\n    }\r\n\r\n    if (Utils.isWebPSupported()) {\r\n      return `${resourceUrl}/${hand}.webp`;\r\n    }\r\n    if (Utils.isJP2Supported()) {\r\n      return `${resourceUrl}/${hand}.jp2`;\r\n    }\r\n\r\n    return `${resourceUrl}/${hand}.png`;\r\n  }\r\n\r\n  toInspect() {\r\n    return `<Device '${this.deviceType}' ${this.screenSize.width}x${this.screenSize.height}>`;\r\n  }\r\n\r\n  prepareForSnapshot() {\r\n    this.hideBezel = true;\r\n    this.setDeviceScale(-1, true);\r\n    this.screenMask.visible = false;\r\n    this.screenBackground.visible = false;\r\n    return (this.background.backgroundColor = null);\r\n  }\r\n}\r\nDeviceComponent.initClass();\r\n\r\n//##########################################################################\r\n// DEVICE CONFIGURATIONS\r\n\r\nconst iPhoneXReleaseVersion = 105;\r\nconst googlePixelReleaseVersion = 75;\r\nconst desktopReleaseVersion = 70;\r\nvar newDeviceMinVersion = 53;\r\nvar oldDeviceMaxVersion = 52;\r\nconst redesignMaxVersion = 92;\r\n\r\nconst iPadAir2BaseDevice = {\r\n  deviceImageWidth: 1856,\r\n  deviceImageHeight: 2608,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPadMini4BaseDevice = {\r\n  deviceImageWidth: 1936,\r\n  deviceImageHeight: 2688,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPadProBaseDevice = {\r\n  deviceImageWidth: 2448,\r\n  deviceImageHeight: 3432,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2048,\r\n  screenHeight: 2732,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst iPhoneXBaseDevice = {\r\n  deviceImageWidth: 1405,\r\n  deviceImageHeight: 2796,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1125,\r\n  screenHeight: 2436,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"apple-iphone-x-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3567,\r\n      height: 5558,\r\n      offset: -15,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3567,\r\n      height: 5558,\r\n      offset: -15,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone8BaseDevice = {\r\n  deviceImageWidth: 871,\r\n  deviceImageHeight: 1776,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2399,\r\n      height: 3738,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2399,\r\n      height: 3738,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone8PlusBaseDevice = {\r\n  deviceImageWidth: 1436,\r\n  deviceImageHeight: 2876,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3949,\r\n      height: 6154,\r\n      offset: -15,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3949,\r\n      height: 6154,\r\n      offset: -15,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone7BaseDevice = {\r\n  deviceImageWidth: 874,\r\n  deviceImageHeight: 1792,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: 71,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone7PlusBaseDevice = {\r\n  deviceImageWidth: 1452,\r\n  deviceImageHeight: 2968,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: 71,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone6BaseDevice = {\r\n  deviceImageWidth: 874,\r\n  deviceImageHeight: 1792,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2400,\r\n      height: 3740,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone6PlusBaseDevice = {\r\n  deviceImageWidth: 1452,\r\n  deviceImageHeight: 2968,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3987,\r\n      height: 6212,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhoneSEBaseDevice = {\r\n  deviceImageWidth: 768,\r\n  deviceImageHeight: 1610,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone5BaseDevice = {\r\n  deviceImageWidth: 768,\r\n  deviceImageHeight: 1612,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 19,\r\n    },\r\n  },\r\n};\r\n\r\nconst iPhone5CBaseDevice = {\r\n  deviceImageWidth: 776,\r\n  deviceImageHeight: 1620,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 28,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2098,\r\n      height: 3269,\r\n      offset: 28,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus4BaseDevice = {\r\n  deviceImageWidth: 860,\r\n  deviceImageHeight: 1668,\r\n  deviceImageCompression: true,\r\n  screenWidth: 768,\r\n  screenHeight: 1280,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 2362,\r\n      height: 3681,\r\n      offset: -52,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 2362,\r\n      height: 3681,\r\n      offset: -52,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus5BaseDevice = {\r\n  deviceImageWidth: 1204,\r\n  deviceImageHeight: 2432,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3292,\r\n      height: 5130,\r\n      offset: 8,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3292,\r\n      height: 5130,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus6BaseDevice = {\r\n  deviceImageWidth: 1576,\r\n  deviceImageHeight: 3220,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 3.5,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4304,\r\n      height: 6707,\r\n      offset: 8,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4304,\r\n      height: 6707,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nconst PixelBaseDevice = {\r\n  deviceImageWidth: 1224,\r\n  deviceImageHeight: 2492,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 2.627,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: googlePixelReleaseVersion,\r\n  maxStudioVersion: iPhoneXReleaseVersion - 1,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3344,\r\n      height: 5211,\r\n      offset: 23,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3344,\r\n      height: 5211,\r\n      offset: 23,\r\n    },\r\n  },\r\n};\r\n\r\nconst Pixel2BaseDevice = {\r\n  deviceImageWidth: 1210,\r\n  deviceImageHeight: 2513,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 2.627,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3316,\r\n      height: 5167,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3316,\r\n      height: 5167,\r\n    },\r\n  },\r\n};\r\n\r\nconst Pixel2XLBaseDevice = {\r\n  deviceImageWidth: 1650,\r\n  deviceImageHeight: 3364,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2880,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"google-pixel-2-xl-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4530,\r\n      height: 7059,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4521,\r\n      height: 7045,\r\n    },\r\n  },\r\n};\r\n\r\nconst Nexus9BaseDevice = {\r\n  deviceImageWidth: 1896,\r\n  deviceImageHeight: 2648,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n};\r\n\r\nconst HTCa9BaseDevice = {\r\n  deviceImageWidth: 1252,\r\n  deviceImageHeight: 2592,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 36,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 36,\r\n    },\r\n  },\r\n};\r\n\r\nconst HTCm8BaseDevice = {\r\n  deviceImageWidth: 1232,\r\n  deviceImageHeight: 2572,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 12,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 3436,\r\n      height: 5354,\r\n      offset: 12,\r\n    },\r\n  },\r\n};\r\n\r\nconst MSFTLumia950BaseDevice = {\r\n  deviceImageWidth: 1660,\r\n  deviceImageHeight: 3292,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4494,\r\n      height: 7003,\r\n      offset: -84,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4494,\r\n      height: 7003,\r\n      offset: -84,\r\n    },\r\n  },\r\n};\r\n\r\nconst SamsungGalaxyNote5BaseDevice = {\r\n  deviceImageWidth: 1572,\r\n  deviceImageHeight: 3140,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2560,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: newDeviceMinVersion,\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4279,\r\n      height: 6668,\r\n      offset: -24,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4279,\r\n      height: 6668,\r\n      offset: -84,\r\n    },\r\n  },\r\n};\r\n\r\nconst SamsungGalaxyS8BaseDevice = {\r\n  deviceImageWidth: 1536,\r\n  deviceImageHeight: 3334,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 2960,\r\n  devicePixelRatio: 4,\r\n  deviceType: \"phone\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n  screenMask: \"samsung-galaxy-s8-mask.svg\",\r\n  hands: {\r\n    \"iphone-hands-2\": {\r\n      width: 4210,\r\n      height: 6560,\r\n    },\r\n    \"iphone-hands-1\": {\r\n      width: 4210,\r\n      height: 6560,\r\n    },\r\n  },\r\n};\r\n\r\nconst AppleWatchSeries242Device = {\r\n  deviceImageWidth: 512,\r\n  deviceImageHeight: 990,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: 71,\r\n};\r\n\r\nconst AppleWatchSeries238Device = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 772,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: 71,\r\n};\r\n\r\nconst AppleWatch42Device = {\r\n  deviceImageWidth: 512,\r\n  deviceImageHeight: 990,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst AppleWatch38Device = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 772,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst AppleWatch38BlackLeatherDevice = {\r\n  deviceImageWidth: 472,\r\n  deviceImageHeight: 796,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  minStudioVersion: newDeviceMinVersion,\r\n  maxStudioVersion: redesignMaxVersion,\r\n};\r\n\r\nconst SonySmartwatch3Base = {\r\n  deviceImageWidth: 444,\r\n  deviceImageHeight: 780,\r\n  deviceImageCompression: true,\r\n  screenWidth: 320,\r\n  screenHeight: 320,\r\n  devicePixelRatio: 1.5,\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst AppleMacBook = {\r\n  deviceImageWidth: 3084,\r\n  deviceImageHeight: 1860,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2304,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleMacBookAir = {\r\n  deviceImageWidth: 2000,\r\n  deviceImageHeight: 1220,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1440,\r\n  screenHeight: 900,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleMacBookPro = {\r\n  deviceImageWidth: 3820,\r\n  deviceImageHeight: 2320,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2880,\r\n  screenHeight: 1800,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleIMac = {\r\n  deviceImageWidth: 5600,\r\n  deviceImageHeight: 5880,\r\n  deviceImageCompression: true,\r\n  screenWidth: 5120,\r\n  screenHeight: 2880,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst AppleThunderboltDisplay = {\r\n  deviceImageWidth: 2788,\r\n  deviceImageHeight: 2580,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2560,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst DellXPS = {\r\n  deviceImageWidth: 5200,\r\n  deviceImageHeight: 3040,\r\n  deviceImageCompression: true,\r\n  screenWidth: 3840,\r\n  screenHeight: 2160,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst SonyW85OC = {\r\n  deviceImageWidth: 1320,\r\n  deviceImageHeight: 860,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1280,\r\n  screenHeight: 720,\r\n  devicePixelRatio: 1,\r\n  minStudioVersion: desktopReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfaceBook = {\r\n  deviceImageWidth: 4102,\r\n  deviceImageHeight: 2474,\r\n  deviceImageCompression: true,\r\n  screenWidth: 3000,\r\n  screenHeight: 2000,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"computer\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfacePro3 = {\r\n  deviceImageWidth: 2472,\r\n  deviceImageHeight: 1704,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2160,\r\n  screenHeight: 1440,\r\n  devicePixelRatio: 1.5,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\nconst MicrosoftSurfacePro4 = {\r\n  deviceImageWidth: 3064,\r\n  deviceImageHeight: 2120,\r\n  deviceImageCompression: true,\r\n  screenWidth: 2736,\r\n  screenHeight: 1824,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  minStudioVersion: iPhoneXReleaseVersion,\r\n};\r\n\r\n//##########################################################################\r\n// OLD DEVICE CONFIGURATIONS\r\n\r\nconst old_iPhone6BaseDevice = {\r\n  deviceImageWidth: 870,\r\n  deviceImageHeight: 1738,\r\n  deviceImageCompression: true,\r\n  screenWidth: 750,\r\n  screenHeight: 1334,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone6BaseDeviceHand = _.extend({}, old_iPhone6BaseDevice, {\r\n  deviceImageWidth: 1988,\r\n  deviceImageHeight: 2368,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -150,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone6PlusBaseDevice = {\r\n  deviceImageWidth: 1460,\r\n  deviceImageHeight: 2900,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1242,\r\n  screenHeight: 2208,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone6PlusBaseDeviceHand = _.extend({}, old_iPhone6PlusBaseDevice, {\r\n  deviceImageWidth: 3128,\r\n  deviceImageHeight: 3487,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -150,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone5BaseDevice = {\r\n  deviceImageWidth: 780,\r\n  deviceImageHeight: 1608,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone5BaseDeviceHand = _.extend({}, old_iPhone5BaseDevice, {\r\n  deviceImageWidth: 1884,\r\n  deviceImageHeight: 2234,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -200,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPhone5CBaseDevice = {\r\n  deviceImageWidth: 776,\r\n  deviceImageHeight: 1612,\r\n  deviceImageCompression: true,\r\n  screenWidth: 640,\r\n  screenHeight: 1136,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPhone5CBaseDeviceHand = _.extend({}, old_iPhone5CBaseDevice, {\r\n  deviceImageWidth: 1894,\r\n  deviceImageHeight: 2244,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -200,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPadMiniBaseDevice = {\r\n  deviceImageWidth: 872,\r\n  deviceImageHeight: 1292,\r\n  deviceImageCompression: true,\r\n  screenWidth: 768,\r\n  screenHeight: 1024,\r\n  devicePixelRatio: 1,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPadMiniBaseDeviceHand = _.extend({}, old_iPadMiniBaseDevice, {\r\n  deviceImageWidth: 1380,\r\n  deviceImageHeight: 2072,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_iPadAirBaseDevice = {\r\n  deviceImageWidth: 1769,\r\n  deviceImageHeight: 2509,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_iPadAirBaseDeviceHand = _.extend({}, old_iPadAirBaseDevice, {\r\n  deviceImageWidth: 4744,\r\n  deviceImageHeight: 4101,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_Nexus5BaseDevice = {\r\n  deviceImageWidth: 1208,\r\n  deviceImageHeight: 2440,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1080,\r\n  screenHeight: 1920,\r\n  devicePixelRatio: 3,\r\n  deviceType: \"phone\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_Nexus5BaseDeviceHand = _.extend({}, old_Nexus5BaseDevice, {\r\n  // 26922996\r\n  deviceImageWidth: 2692,\r\n  deviceImageHeight: 2996,\r\n  deviceImageCompression: true,\r\n  paddingOffset: -120,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n});\r\n\r\nconst old_Nexus9BaseDevice = {\r\n  deviceImageWidth: 1733,\r\n  deviceImageHeight: 2575,\r\n  deviceImageCompression: true,\r\n  screenWidth: 1536,\r\n  screenHeight: 2048,\r\n  devicePixelRatio: 2,\r\n  deviceType: \"tablet\",\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_AppleWatch42Device = {\r\n  deviceImageWidth: 552,\r\n  deviceImageHeight: 938,\r\n  deviceImageCompression: true,\r\n  screenWidth: 312,\r\n  screenHeight: 390,\r\n  devicePixelRatio: 2,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nconst old_AppleWatch38Device = {\r\n  deviceImageWidth: 508,\r\n  deviceImageHeight: 900,\r\n  deviceImageCompression: true,\r\n  screenWidth: 272,\r\n  screenHeight: 340,\r\n  devicePixelRatio: 2,\r\n  maxStudioVersion: oldDeviceMaxVersion,\r\n};\r\n\r\nvar Devices = {\r\n  fullscreen: {\r\n    name: \"Fullscreen\",\r\n    deviceType: \"desktop\",\r\n    backgroundColor: \"transparent\",\r\n  },\r\n\r\n  custom: {\r\n    name: \"Custom\",\r\n    deviceImageWidth: 874,\r\n    deviceImageHeight: 1792,\r\n    screenWidth: 750,\r\n    screenHeight: 1334,\r\n    devicePixelRatio: 2,\r\n    deviceType: \"phone\",\r\n  },\r\n\r\n  // iPad Air\r\n  \"apple-ipad-air-2-silver\": _.clone(iPadAir2BaseDevice),\r\n  \"apple-ipad-air-2-gold\": _.clone(iPadAir2BaseDevice),\r\n  \"apple-ipad-air-2-space-gray\": _.clone(iPadAir2BaseDevice),\r\n\r\n  // iPad Mini\r\n  \"apple-ipad-mini-4-silver\": _.clone(iPadMini4BaseDevice),\r\n  \"apple-ipad-mini-4-gold\": _.clone(iPadMini4BaseDevice),\r\n  \"apple-ipad-mini-4-space-gray\": _.clone(iPadMini4BaseDevice),\r\n\r\n  // iPad Pro\r\n  \"apple-ipad-pro-silver\": _.clone(iPadProBaseDevice),\r\n  \"apple-ipad-pro-gold\": _.clone(iPadProBaseDevice),\r\n  \"apple-ipad-pro-space-gray\": _.clone(iPadProBaseDevice),\r\n\r\n  // iPhone X\r\n  \"apple-iphone-x-silver\": _.clone(iPhoneXBaseDevice),\r\n  \"apple-iphone-x-space-gray\": _.clone(iPhoneXBaseDevice),\r\n\r\n  // iPhone 8\r\n  \"apple-iphone-8-silver\": _.clone(iPhone8BaseDevice),\r\n  \"apple-iphone-8-gold\": _.clone(iPhone8BaseDevice),\r\n  \"apple-iphone-8-space-gray\": _.clone(iPhone8BaseDevice),\r\n\r\n  // iPhone 8 Plus\r\n  \"apple-iphone-8-plus-silver\": _.clone(iPhone8PlusBaseDevice),\r\n  \"apple-iphone-8-plus-gold\": _.clone(iPhone8PlusBaseDevice),\r\n  \"apple-iphone-8-plus-space-gray\": _.clone(iPhone8PlusBaseDevice),\r\n\r\n  // iPhone 7\r\n  \"apple-iphone-7-gold\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-rose-gold\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-silver\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-black\": _.clone(iPhone7BaseDevice),\r\n  \"apple-iphone-7-jet-black\": _.clone(iPhone7BaseDevice),\r\n\r\n  // iPhone 7 Plus\r\n  \"apple-iphone-7-plus-gold\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-rose-gold\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-silver\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-black\": _.clone(iPhone7PlusBaseDevice),\r\n  \"apple-iphone-7-plus-jet-black\": _.clone(iPhone7PlusBaseDevice),\r\n\r\n  // iPhone 6s\r\n  \"apple-iphone-6s-gold\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-rose-gold\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-silver\": _.clone(iPhone6BaseDevice),\r\n  \"apple-iphone-6s-space-gray\": _.clone(iPhone6BaseDevice),\r\n\r\n  // iPhone 6s Plus\r\n  \"apple-iphone-6s-plus-gold\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-rose-gold\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-silver\": _.clone(iPhone6PlusBaseDevice),\r\n  \"apple-iphone-6s-plus-space-gray\": _.clone(iPhone6PlusBaseDevice),\r\n\r\n  // iPhone SE\r\n  \"apple-iphone-se-gold\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-silver\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-space-gray\": _.clone(iPhoneSEBaseDevice),\r\n  \"apple-iphone-se-rose-gold\": _.clone(iPhoneSEBaseDevice),\r\n\r\n  // iPhone 5S\r\n  \"apple-iphone-5s-gold\": _.clone(iPhone5BaseDevice),\r\n  \"apple-iphone-5s-silver\": _.clone(iPhone5BaseDevice),\r\n  \"apple-iphone-5s-space-gray\": _.clone(iPhone5BaseDevice),\r\n\r\n  // iPhone 5C\r\n  \"apple-iphone-5c-blue\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-green\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-red\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-white\": _.clone(iPhone5CBaseDevice),\r\n  \"apple-iphone-5c-yellow\": _.clone(iPhone5CBaseDevice),\r\n\r\n  // Apple Watch Series 2 38mm\r\n  \"apple-watch-series-2-38mm-black-steel-black\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-edition\": _.clone(AppleWatchSeries238Device),\r\n  \"apple-watch-series-2-38mm-rose-gold-aluminum-midnight-blue\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-cocoa\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-concrete\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-ocean-blue\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-red\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-turquoise\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-white\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-silver-aluminum-yellow\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-space-gray-aluminum-black\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-sport-aluminum-walnut\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-series-2-38mm-steel-white\": _.clone(AppleWatchSeries238Device),\r\n\r\n  // Apple Watch Series 2 42mm\r\n  \"apple-watch-series-2-42mm-edition\": _.clone(AppleWatchSeries242Device),\r\n  \"apple-watch-series-2-42mm-gold-aluminum-cocoa\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-rose-gold-aluminum-midnight-blue\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-concrete\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-green\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-light-pink\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-ocean-blue\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-pink-sand\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-red\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-turquoise\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-white\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-silver-aluminum-yellow\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-space-black-steel-black\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-space-gray-aluminum-black\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-series-2-42mm-steel-white\": _.clone(AppleWatchSeries242Device),\r\n\r\n  // Apple Watch Nike+ 38mm\r\n  \"apple-watch-nike-plus-38mm-silver-aluminum-flat-silver-volt\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-silver-aluminum-flat-silver-white\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-space-gray-aluminum-black-cool-gray\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n  \"apple-watch-nike-plus-38mm-space-gray-aluminum-black-volt\": _.clone(\r\n    AppleWatchSeries238Device\r\n  ),\r\n\r\n  // Apple Watch Nike+ 42mm\r\n  \"apple-watch-nike-plus-42mm-silver-aluminum-flat-silver-volt\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-silver-aluminum-flat-silver-white\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-space-gray-aluminum-black-cool-gray\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n  \"apple-watch-nike-plus-42mm-space-gray-aluminum-black-volt\": _.clone(\r\n    AppleWatchSeries242Device\r\n  ),\r\n\r\n  // Apple Watch 38mm\r\n\r\n  \"apple-watch-38mm-gold-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n  \"apple-watch-38mm-rose-gold-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n  \"apple-watch-38mm-stainless-steel-black-leather-closed\": _.clone(\r\n    AppleWatch38BlackLeatherDevice\r\n  ),\r\n\r\n  \"apple-watch-38mm-black-steel-black-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-gold-midnight-blue-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-rose-gold-lavender-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-blue-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-fog-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-green-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-red-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-walnut-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-white-closed\": _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-gold-antique-white-closed\":\r\n    _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-aluminum-rose-gold-stone-closed\":\r\n    _.clone(AppleWatch38Device),\r\n  \"apple-watch-38mm-sport-space-gray-black-closed\": _.clone(AppleWatch38Device),\r\n\r\n  // Apple Watch 42mm\r\n  \"apple-watch-42mm-black-steel-black-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-gold-black-leather-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-gold-midnight-blue-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-rose-gold-black-leather-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-rose-gold-lavender-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-blue-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-fog-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-green-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-red-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-walnut-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-white-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-gold-antique-white-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-aluminum-rose-gold-stone-closed\":\r\n    _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-sport-space-gray-black-closed\": _.clone(AppleWatch42Device),\r\n  \"apple-watch-42mm-stainless-steel-black-leather-closed\":\r\n    _.clone(AppleWatch42Device),\r\n\r\n  // Sony SmartWatch 3\r\n  \"sony-smartwatch-3-black\": _.clone(SonySmartwatch3Base),\r\n  \"sony-smartwatch-3-white\": _.clone(SonySmartwatch3Base),\r\n\r\n  // NEXUS\r\n  \"google-nexus-4\": _.clone(Nexus4BaseDevice),\r\n  \"google-nexus-5x\": _.clone(Nexus5BaseDevice),\r\n  \"google-nexus-6p\": _.clone(Nexus6BaseDevice),\r\n  \"google-nexus-9\": _.clone(Nexus9BaseDevice),\r\n\r\n  // Pixel\r\n  \"google-pixel-quite-black\": _.clone(PixelBaseDevice),\r\n  \"google-pixel-really-blue\": _.clone(PixelBaseDevice),\r\n  \"google-pixel-very-silver\": _.clone(PixelBaseDevice),\r\n\r\n  // Pixel 2\r\n  \"google-pixel-2-clearly-white\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-just-black\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-kinda-blue\": _.clone(Pixel2BaseDevice),\r\n  \"google-pixel-2-xl-black-and-white\": _.clone(Pixel2XLBaseDevice),\r\n  \"google-pixel-2-xl-just-black\": _.clone(Pixel2XLBaseDevice),\r\n\r\n  // HTC ONE A9\r\n  \"htc-one-a9-black\": _.clone(HTCa9BaseDevice),\r\n  \"htc-one-a9-white\": _.clone(HTCa9BaseDevice),\r\n\r\n  // HTC ONE M8\r\n  \"htc-one-m8-black\": _.clone(HTCm8BaseDevice),\r\n  \"htc-one-m8-gold\": _.clone(HTCm8BaseDevice),\r\n  \"htc-one-m8-silver\": _.clone(HTCm8BaseDevice),\r\n\r\n  // MICROSOFT LUMIA 950\r\n  \"microsoft-lumia-950-black\": _.clone(MSFTLumia950BaseDevice),\r\n  \"microsoft-lumia-950-white\": _.clone(MSFTLumia950BaseDevice),\r\n\r\n  // SAMSUNG NOTE 5\r\n  \"samsung-galaxy-note-5-black\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-gold\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-pink\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n  \"samsung-galaxy-note-5-silver-titanium\": _.clone(\r\n    SamsungGalaxyNote5BaseDevice\r\n  ),\r\n  \"samsung-galaxy-note-5-white\": _.clone(SamsungGalaxyNote5BaseDevice),\r\n\r\n  //Samsug Galaxy S8\r\n  \"samsung-galaxy-s8-orchid-gray\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-midnight-black\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-maple-gold\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-coral-blue\": _.clone(SamsungGalaxyS8BaseDevice),\r\n  \"samsung-galaxy-s8-arctic-silver\": _.clone(SamsungGalaxyS8BaseDevice),\r\n\r\n  // Notebooks\r\n  \"apple-macbook\": _.clone(AppleMacBook),\r\n  \"apple-macbook-air\": _.clone(AppleMacBookAir),\r\n  \"apple-macbook-pro\": _.clone(AppleMacBookPro),\r\n  \"dell-xps\": _.clone(DellXPS),\r\n\r\n  // Desktops\r\n  \"apple-imac\": _.clone(AppleIMac),\r\n  \"apple-thunderbolt-display\": _.clone(AppleThunderboltDisplay),\r\n  \"microsoft-surface-book\": _.clone(MicrosoftSurfaceBook),\r\n  \"microsoft-surface-pro-3\": _.clone(MicrosoftSurfacePro3),\r\n  \"microsoft-surface-pro-4\": _.clone(MicrosoftSurfacePro4),\r\n\r\n  // TV\r\n  \"sony-w85Oc\": _.clone(SonyW85OC),\r\n\r\n  // OLD DEVICES\r\n  \"desktop-safari-1024-600\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1024 x 600\",\r\n    screenWidth: 1024,\r\n    screenHeight: 600,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1136,\r\n    deviceImageHeight: 760,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n  \"desktop-safari-1280-800\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1280 x 800\",\r\n    screenWidth: 1280,\r\n    screenHeight: 800,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1392,\r\n    deviceImageHeight: 960,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n  \"desktop-safari-1440-900\": {\r\n    deviceType: \"browser\",\r\n    name: \"Desktop Safari 1440 x 900\",\r\n    screenWidth: 1440,\r\n    screenHeight: 900,\r\n    devicePixelRatio: 1,\r\n    deviceImageWidth: 1552,\r\n    deviceImageHeight: 1060,\r\n    deviceImageCompression: true,\r\n    backgroundColor: \"white\",\r\n  },\r\n\r\n  // iPhone 6\r\n  \"iphone-6-spacegray\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-spacegray-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n  \"iphone-6-silver\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-silver-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n  \"iphone-6-gold\": _.clone(old_iPhone6BaseDevice),\r\n  \"iphone-6-gold-hand\": _.clone(old_iPhone6BaseDeviceHand),\r\n\r\n  // iPhone 6+\r\n  \"iphone-6plus-spacegray\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-spacegray-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n  \"iphone-6plus-silver\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-silver-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n  \"iphone-6plus-gold\": _.clone(old_iPhone6PlusBaseDevice),\r\n  \"iphone-6plus-gold-hand\": _.clone(old_iPhone6PlusBaseDeviceHand),\r\n\r\n  // iPhone 5S\r\n  \"iphone-5s-spacegray\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-spacegray-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n  \"iphone-5s-silver\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-silver-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n  \"iphone-5s-gold\": _.clone(old_iPhone5BaseDevice),\r\n  \"iphone-5s-gold-hand\": _.clone(old_iPhone5BaseDeviceHand),\r\n\r\n  // iPhone 5C\r\n  \"iphone-5c-green\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-green-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-blue\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-blue-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-pink\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-pink-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-white\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-white-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n  \"iphone-5c-yellow\": _.clone(old_iPhone5CBaseDevice),\r\n  \"iphone-5c-yellow-hand\": _.clone(old_iPhone5CBaseDeviceHand),\r\n\r\n  // iPad Mini\r\n  \"ipad-mini-spacegray\": _.clone(old_iPadMiniBaseDevice),\r\n  \"ipad-mini-spacegray-hand\": _.clone(old_iPadMiniBaseDeviceHand),\r\n  \"ipad-mini-silver\": _.clone(old_iPadMiniBaseDevice),\r\n  \"ipad-mini-silver-hand\": _.clone(old_iPadMiniBaseDeviceHand),\r\n\r\n  // iPad Air\r\n  \"ipad-air-spacegray\": _.clone(old_iPadAirBaseDevice),\r\n  \"ipad-air-spacegray-hand\": _.clone(old_iPadAirBaseDeviceHand),\r\n  \"ipad-air-silver\": _.clone(old_iPadAirBaseDevice),\r\n  \"ipad-air-silver-hand\": _.clone(old_iPadAirBaseDeviceHand),\r\n\r\n  // Nexus 5\r\n  \"nexus-5-black\": _.clone(old_Nexus5BaseDevice),\r\n  \"nexus-5-black-hand\": _.clone(old_Nexus5BaseDeviceHand),\r\n\r\n  // Nexus 9\r\n  \"nexus-9\": _.clone(old_Nexus9BaseDevice),\r\n\r\n  // Apple Watch 38mm\r\n  \"applewatchsport-38-aluminum-sportband-black\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatchsport-38-aluminum-sportband-blue\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchsport-38-aluminum-sportband-green\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatchsport-38-aluminum-sportband-pink\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchsport-38-aluminum-sportband-white\": _.clone(\r\n    old_AppleWatch38Device\r\n  ),\r\n  \"applewatch-38-black-bracelet\": _.clone(old_AppleWatch38Device),\r\n  \"applewatch-38-steel-bracelet\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-blue\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-gray\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-buckle-red\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-sportband-black\": _.clone(old_AppleWatch38Device),\r\n  \"applewatchedition-38-gold-sportband-white\": _.clone(old_AppleWatch38Device),\r\n\r\n  // Apple Watch 42mm\r\n  \"applewatchsport-42-aluminum-sportband-black\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatchsport-42-aluminum-sportband-blue\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchsport-42-aluminum-sportband-green\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatchsport-42-aluminum-sportband-pink\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchsport-42-aluminum-sportband-white\": _.clone(\r\n    old_AppleWatch42Device\r\n  ),\r\n  \"applewatch-42-black-bracelet\": _.clone(old_AppleWatch42Device),\r\n  \"applewatch-42-steel-bracelet\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-blue\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-gray\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-buckle-red\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-sportband-black\": _.clone(old_AppleWatch42Device),\r\n  \"applewatchedition-42-gold-sportband-white\": _.clone(old_AppleWatch42Device),\r\n};\r\n\r\nexports.DeviceComponent.Devices = Devices;\r\n\r\nvar BuiltInDevices = _.keys(Devices);\r\n","import _ from \"../Underscore.js\";\r\nimport Utils from \"../Utils.js\";\r\nimport { Defaults } from \"../Defaults.js\";\r\nimport { Layer } from \"../Layer.js\";\r\n\r\nexport class GridComponent extends Layer {\r\n  static initClass() {\r\n    this.define(\"rows\", {\r\n      get: () => this._rows,\r\n      set: function (value) {\r\n        this._rows = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"columns\", {\r\n      get: () => this._columns,\r\n      set: function (value) {\r\n        this._columns = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"spacing\", {\r\n      get: function () {\r\n        return this._spacing || { horizontal: 0, vertical: 0 };\r\n      },\r\n      set: function (value) {\r\n        if (_.isNumber(value)) {\r\n          value = { horizontal: value, vertical: value };\r\n        }\r\n        this._spacing = value;\r\n        this._render();\r\n      },\r\n    });\r\n\r\n    this.define(\"renderCell\", {\r\n      get: function () {\r\n        return this._renderCell || this._defaultRenderCell;\r\n      },\r\n      set: function (f) {\r\n        if (f === this._renderCell) return;\r\n        if (!_.isFunction(f))\r\n          throw new Error(\r\n            `GridComponent.renderCell should be a function, not ${typeof f}`\r\n          );\r\n        this._renderCell = f;\r\n        this.render();\r\n      },\r\n    });\r\n\r\n    this.define(\"cellWidth\", {\r\n      get: function () {\r\n        return (\r\n          (this.width - this.spacing.horizontal * (this.columns - 1)) /\r\n          this.columns\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"cellHeight\", {\r\n      get: function () {\r\n        return (\r\n          (this.height - this.spacing.vertical * (this.rows - 1)) / this.rows\r\n        );\r\n      },\r\n    });\r\n\r\n    this.define(\"cells\", {\r\n      get: function () {\r\n        return _.values(this._cells);\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(Defaults.getDefaults(\"GridComponent\", options));\r\n  }\r\n\r\n  cellX(column) {\r\n    return column * (this.cellWidth + this.spacing.horizontal);\r\n  }\r\n\r\n  cellY(row) {\r\n    return row * (this.cellHeight + this.spacing.vertical);\r\n  }\r\n\r\n  cellFrame(column, row) {\r\n    return {\r\n      x: this.cellX(column),\r\n      y: this.cellY(row),\r\n      width: this.cellWidth,\r\n      height: this.cellHeight,\r\n    };\r\n  }\r\n\r\n  cell(column, row) {\r\n    return this._cells[`${column}:${row}`];\r\n  }\r\n\r\n  render() {\r\n    return this._render();\r\n  }\r\n\r\n  _render() {\r\n    this._reset();\r\n\r\n    for (let row = 0; row < this.rows; row++) {\r\n      for (let column = 0; column < this.columns; column++) {\r\n        const frame = this.cellFrame(column, row);\r\n        const cell = new Layer({\r\n          parent: this,\r\n          frame,\r\n          name: `Cell ${column}:${row}`,\r\n        });\r\n\r\n        this.renderCell(cell, row, column);\r\n        this._cells[`${column}:${row}`] = cell;\r\n      }\r\n    }\r\n\r\n    return this._cells;\r\n  }\r\n\r\n  _defaultRenderCell(cell, row, column) {\r\n    cell.backgroundColor = \"#28affa\";\r\n    cell.hueRotate =\r\n      column * 20 + (row % this.columns) * (20 / (this.columns + 1));\r\n    Utils.labelLayer(cell, `${row}:${column}`);\r\n    cell.style.fontSize = \"30px\";\r\n    return cell;\r\n  }\r\n\r\n  _reset() {\r\n    _.invokeMap(this.cells, \"destroy\");\r\n    this._cells = {};\r\n  }\r\n}\r\n\r\nGridComponent.initClass();\r\n","import Utils from \"../Utils.js\";\r\nimport { Layer } from \"../Layer.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { AnimationGroup } from \"../AnimationGroup.js\";\r\n\r\nEvents.TransitionStart = \"transitionstart\";\r\nEvents.TransitionHalt = \"transitionhalt\";\r\nEvents.TransitionStop = \"transitionstop\";\r\nEvents.TransitionEnd = \"transitionend\";\r\n\r\nexport class FlowComponent extends Layer {\r\n  static initClass() {\r\n    // @define \"isTransitioning\",\r\n    // \tget: -> @_runningTransition\r\n\r\n    this.define(\"isModal\", {\r\n      get() {\r\n        return this._isModal;\r\n      },\r\n    });\r\n\r\n    this.define(\"stack\", {\r\n      get() {\r\n        return this._stack.map((item) => item.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"current\", {\r\n      get() {\r\n        return __guard__(this._stack[this._stack.length - 1], (x) => x.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"previous\", {\r\n      get() {\r\n        return __guard__(this._stack[this._stack.length - 2], (x) => x.layer);\r\n      },\r\n    });\r\n\r\n    this.define(\"scroll\", {\r\n      get() {\r\n        return this.current != null ? this.current._flowScroll : undefined;\r\n      },\r\n    });\r\n\r\n    this.define(\"mouseWheelEnabled\", {\r\n      default: false,\r\n      get() {\r\n        return this._mouseWheelEnabled;\r\n      },\r\n      set(value) {\r\n        return (this._mouseWheelEnabled = value);\r\n      },\r\n    });\r\n\r\n    //#############################################################\r\n    // Header and footer\r\n\r\n    this.define(\"header\", {\r\n      get() {\r\n        return this._header;\r\n      },\r\n      set(layer) {\r\n        if (!(layer instanceof Layer)) {\r\n          return;\r\n        }\r\n        this._header = layer;\r\n        this._header.name = \"header\";\r\n        this._header.width = this.width;\r\n        this._header.setParentPreservingConstraintValues(this);\r\n        if (this._header.constraintValues == null) {\r\n          this._header.x = Align.center;\r\n          this._header.y = Align.top;\r\n        }\r\n        if (this.current) {\r\n          return this._wrapLayer(this.current);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.define(\"footer\", {\r\n      get() {\r\n        return this._footer;\r\n      },\r\n      set(layer) {\r\n        if (!(layer instanceof Layer)) {\r\n          return;\r\n        }\r\n        this._footer = layer;\r\n        this._footer.name = \"footer\";\r\n        this._footer.width = this.width;\r\n        this._footer.setParentPreservingConstraintValues(this);\r\n        if (this._footer.constraintValues == null) {\r\n          this._footer.x = Align.center;\r\n          this._footer.y = Align.bottom;\r\n        }\r\n        if (this.current) {\r\n          return this._wrapLayer(this.current);\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(layerOrOptions, options) {\r\n    this.showPrevious = this.showPrevious.bind(this);\r\n    this._handleOverlayTap = this._handleOverlayTap.bind(this);\r\n    this._forwardScrollEvents = this._forwardScrollEvents.bind(this);\r\n    this._runTransition = this._runTransition.bind(this);\r\n    if (layerOrOptions == null) {\r\n      layerOrOptions = {};\r\n    }\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    let layer = null;\r\n\r\n    if (layerOrOptions instanceof Layer) {\r\n      layer = layerOrOptions;\r\n      options = options;\r\n    } else {\r\n      options = layerOrOptions;\r\n    }\r\n\r\n    options = _.defaults({}, options, { backgroundColor: \"black\" });\r\n\r\n    if (!options.size) {\r\n      if (options.width == null) {\r\n        options.width = Screen.width;\r\n      }\r\n      if (options.height == null) {\r\n        options.height = Screen.height;\r\n      }\r\n    }\r\n\r\n    if (options.clip == null) {\r\n      options.clip = true;\r\n    }\r\n\r\n    super(options);\r\n\r\n    this.reset();\r\n\r\n    this.overlay = new Layer({\r\n      name: \"overlay\",\r\n      parent: this,\r\n      size: 0,\r\n      backgroundColor: \"black\",\r\n      visible: false,\r\n    });\r\n\r\n    this.overlay.onTap(this._handleOverlayTap);\r\n\r\n    if (layer) {\r\n      this.showNext(layer);\r\n    } else {\r\n      this._tempScroll = new ScrollComponent({\r\n        name: \"scrollComponent\",\r\n        parent: this,\r\n        width: this.width,\r\n        height: this.height,\r\n      });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    if (this._stack) {\r\n      for (var item of Array.from(this._stack)) {\r\n        if (item.layer !== this._initial) {\r\n          item.layer.visible = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._stack = [];\r\n    this._seen = [];\r\n    this._current = null;\r\n    this._isModal = false;\r\n\r\n    if (this._initial) {\r\n      return this.showNext(this._initial, { animate: false });\r\n    }\r\n  }\r\n\r\n  //#############################################################\r\n  // Transitions\r\n\r\n  transition(layer, transitionFunction, options) {\r\n    // Transition over to a new layer using a specific transtition function.\r\n\r\n    // Some basic error checking\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (!(layer instanceof Layer)) {\r\n      throw new Error(\"FlowComponent.transition expects a layer\");\r\n    }\r\n    if (!transitionFunction) {\r\n      throw new Error(\"FlowComponent.transition expects transitionFunction\");\r\n    }\r\n\r\n    if (layer === this.current) {\r\n      return;\r\n    }\r\n\r\n    // Remove the temporary scroll component when the first layer gets added\r\n    if (this._tempScroll != null) {\r\n      this._tempScroll.destroy();\r\n    }\r\n\r\n    // Set the default values so we get some expected results (visibility,\r\n    // correct parent, events, wrapping, etcetera).\r\n\r\n    // If this is the first layer we navigate to, we skip the animation\r\n\r\n    options = _.defaults({}, options, {\r\n      animate: this._firstTransition === true ? true : false,\r\n      scroll: true,\r\n      wrap: true,\r\n      modal: false,\r\n    });\r\n\r\n    // Deal with modal transitions, where a click on the overlay goes back\r\n    this._isModal = options.modal;\r\n\r\n    // Make sure the layer is visible\r\n    layer.visible = true;\r\n    layer.opacity = 1;\r\n\r\n    // We want the layer to block events so you can't click on layers\r\n    // that end up behind it without knowing it.\r\n    layer.ignoreEvents = false;\r\n\r\n    // Wrap the layer into a ScrollComponent if it exceeds the size\r\n    // and correct the parent if needed.\r\n    let wrappedLayer = layer;\r\n    if (options.scroll && options.wrap) {\r\n      wrappedLayer = this._wrapLayer(layer);\r\n    }\r\n\r\n    wrappedLayer.parent = this;\r\n    wrappedLayer.visible = !options.animate;\r\n\r\n    const layerA = this.current;\r\n    const layerB = wrappedLayer;\r\n    const { overlay } = this;\r\n\r\n    // Get the executed template data by passing in the layers for this transition\r\n    const template = transitionFunction(this, layerA, layerB, overlay);\r\n\r\n    // Build the transition function to setup all the states, using the\r\n    // transition, current and new layer, and optionally a background.\r\n    const transition = this._buildTransition(template, layerA, layerB, overlay);\r\n\r\n    // Run the transition and update the history\r\n    this._runTransition(\r\n      transition,\r\n      \"forward\",\r\n      options.animate,\r\n      this.current,\r\n      layer\r\n    );\r\n\r\n    return this._stack.push({ layer, transition });\r\n  }\r\n\r\n  showNext(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (this._initial == null) {\r\n      this._initial = layer;\r\n    }\r\n    return this.transition(layer, Transitions.show, options);\r\n  }\r\n\r\n  showPrevious(options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (!this.previous) {\r\n      return;\r\n    }\r\n    if (this.isTransitioning) {\r\n      return;\r\n    }\r\n\r\n    // Maybe people (Jorn) pass in a layer accidentally\r\n    if (options instanceof Framer._Layer) {\r\n      options = {};\r\n    }\r\n    options = _.defaults({}, options, { count: 1, animate: true });\r\n\r\n    if (options.count > 1) {\r\n      const { count } = options;\r\n      for (\r\n        let n = 2, end = count, asc = 2 <= end;\r\n        asc ? n <= end : n >= end;\r\n        asc ? n++ : n--\r\n      ) {\r\n        this.showPrevious({ animate: false, count: 1 });\r\n      }\r\n    }\r\n\r\n    const previous = this._stack.pop();\r\n    return this._runTransition(\r\n      previous != null ? previous.transition : undefined,\r\n      \"back\",\r\n      options.animate,\r\n      this.current,\r\n      previous.layer\r\n    );\r\n  }\r\n\r\n  showOverlayCenter(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayCenter, options);\r\n  }\r\n\r\n  showOverlayTop(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayTop, options);\r\n  }\r\n\r\n  showOverlayRight(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayRight, options);\r\n  }\r\n\r\n  showOverlayBottom(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayBottom, options);\r\n  }\r\n\r\n  showOverlayLeft(layer, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this._showOverlay(layer, Transitions.overlayLeft, options);\r\n  }\r\n\r\n  //#############################################################\r\n  // Internal methods\r\n\r\n  _showOverlay(layer, transition, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return this.transition(\r\n      layer,\r\n      transition,\r\n      _.defaults({}, options, { animate: true, scroll: false, modal: false })\r\n    );\r\n  }\r\n\r\n  _handleOverlayTap() {\r\n    if (!this.isModal) {\r\n      return this.showPrevious();\r\n    }\r\n  }\r\n\r\n  _wrapLayer(flowLayer) {\r\n    let needle, previousWrappingContent, previousWrappingScroll, scroll;\r\n    flowLayer._flowLayer = flowLayer;\r\n\r\n    if (flowLayer instanceof ScrollComponent) {\r\n      return flowLayer;\r\n    }\r\n    if (flowLayer._flowWrapped) {\r\n      return flowLayer;\r\n    }\r\n\r\n    // Make the layer at least match the device size\r\n    flowLayer.width = Math.max(flowLayer.width, this.width);\r\n    flowLayer.height = Math.max(flowLayer.height, this.height);\r\n\r\n    const { size } = this;\r\n    // Save the parent so we can clean up when we re-wrap this layer\r\n    if (((needle = this), Array.from(flowLayer.ancestors()).includes(needle))) {\r\n      const content = flowLayer != null ? flowLayer.parent : undefined;\r\n      scroll = content != null ? content.parent : undefined;\r\n      if (scroll instanceof ScrollComponent) {\r\n        previousWrappingScroll = scroll;\r\n        previousWrappingContent = content;\r\n      }\r\n    }\r\n    let layer = layoutPage(flowLayer, size);\r\n    layer = layoutScroll(layer, size);\r\n    if (\r\n      flowLayer !== layer &&\r\n      (previousWrappingContent != null\r\n        ? previousWrappingContent.children.length\r\n        : undefined) === 0 &&\r\n      (previousWrappingScroll != null\r\n        ? previousWrappingScroll.children.length\r\n        : undefined) === 1 &&\r\n      (previousWrappingScroll != null\r\n        ? previousWrappingScroll.children[0]\r\n        : undefined) === previousWrappingContent\r\n    ) {\r\n      // we wrapped the layer\r\n      previousWrappingScroll.destroy();\r\n    }\r\n\r\n    // Mark the layer so we don't layout it twice'\r\n    layer._flowLayer = flowLayer;\r\n\r\n    // Forward the scroll events from created scroll components\r\n    for (scroll of [layer, ...Array.from(layer.children)]) {\r\n      this._forwardScrollEvents(scroll);\r\n\r\n      if (scroll instanceof ScrollComponent) {\r\n        var inset = {};\r\n        if (scroll.y === 0) {\r\n          inset.top =\r\n            (this.header != null ? this.header.height : undefined) || 0;\r\n        }\r\n        if (scroll.maxY === this.height) {\r\n          inset.bottom =\r\n            (this.footer != null ? this.footer.height : undefined) || 0;\r\n        }\r\n        scroll.contentInset = inset;\r\n        flowLayer._flowScroll = scroll;\r\n        scroll.mouseWheelEnabled = this._mouseWheelEnabled;\r\n      }\r\n    }\r\n\r\n    // Set the background color for he created scroll component\r\n    if (layer instanceof ScrollComponent) {\r\n      layer.backgroundColor = this.backgroundColor;\r\n    }\r\n\r\n    return layer;\r\n  }\r\n\r\n  _forwardScrollEvents(scroll) {\r\n    if (!(scroll instanceof ScrollComponent)) {\r\n      return;\r\n    }\r\n    if (scroll._flowForward === true) {\r\n      return;\r\n    }\r\n\r\n    // But only the actual scroll events\r\n    for (var event of [\r\n      Events.Move,\r\n      Events.ScrollStart,\r\n      Events.ScrollMove,\r\n      Events.ScrollEnd,\r\n      Events.ScrollAnimationDidStart,\r\n      Events.ScrollAnimationDidEnd,\r\n    ]) {\r\n      ((event) => scroll.on(event, () => this.emit(event, scroll)))(event);\r\n    }\r\n\r\n    return (scroll._flowForward = true);\r\n  }\r\n\r\n  _runTransition(transition, direction, animate, from, to) {\r\n    let a, b;\r\n    if (direction === \"forward\") {\r\n      a = from;\r\n      b = to;\r\n    } else {\r\n      a = to;\r\n      b = from;\r\n    }\r\n\r\n    this.emit(Events.TransitionStart, a, b, direction);\r\n\r\n    // Start the transition with a small delay added so it only runs after all\r\n    // js has been processed. It's also important for hints, as they rely on\r\n    // ignoreEvents to be false at the moment of a click.\r\n\r\n    return Utils.delay(0, () => {\r\n      this._firstTransition = true;\r\n      return transition[direction](animate);\r\n    });\r\n  }\r\n\r\n  _buildTransition(template, layerA, layerB, overlay) {\r\n    // # Buld a new transtition object with empty states\r\n    const transition = {};\r\n\r\n    // Add the forward function for this state to transition forward\r\n    transition.forward = (animate, callback) => {\r\n      if (animate == null) {\r\n        animate = true;\r\n      }\r\n      const forwardEvents = (group, direction) => {\r\n        group.once(Events.AnimationHalt, () =>\r\n          this.emit(Events.TransitionHalt, layerA, layerB, direction)\r\n        );\r\n        group.once(Events.AnimationStop, () =>\r\n          this.emit(Events.TransitionStop, layerA, layerB, direction)\r\n        );\r\n        return group.once(Events.AnimationEnd, () =>\r\n          this.emit(Events.TransitionEnd, layerA, layerB, direction)\r\n        );\r\n      };\r\n\r\n      const animations = [];\r\n      const options = { instant: !animate };\r\n\r\n      if (layerA && template.layerA) {\r\n        layerA.visible = true;\r\n        animations.push(new Animation(layerA, template.layerA.hide, options));\r\n      }\r\n\r\n      if (layerB && template.layerB) {\r\n        layerB.props = template.layerB.hide;\r\n        // layerB.props = template.layerB.hide if animate # This breaks events now\r\n        layerB.bringToFront();\r\n        layerB.visible = true;\r\n        animations.push(new Animation(layerB, template.layerB.show, options));\r\n      }\r\n\r\n      if (overlay && template.overlay) {\r\n        overlay.visible = true;\r\n        overlay.ignoreEvents = false;\r\n        overlay.placeBehind(layerB);\r\n        overlay.props = template.overlay.hide;\r\n        animations.push(new Animation(overlay, template.overlay.show, options));\r\n      }\r\n\r\n      // Set the right layer indexes for the header and footer if they are there.\r\n      if (overlay && template.overlay) {\r\n        if (this.header) {\r\n          this.header.placeBehind(overlay);\r\n        }\r\n        if (this.footer) {\r\n          this.footer.placeBehind(overlay);\r\n        }\r\n      } else {\r\n        if (this.header) {\r\n          this.header.bringToFront();\r\n        }\r\n        if (this.footer) {\r\n          this.footer.bringToFront();\r\n        }\r\n      }\r\n\r\n      const group = new AnimationGroup(animations);\r\n      forwardEvents(group, \"forward\");\r\n\r\n      group.once(Events.AnimationEnd, function () {\r\n        if (layerA && template.layerA && !(overlay && template.overlay)) {\r\n          return (layerA.visible = false);\r\n        }\r\n      });\r\n\r\n      return group.start();\r\n    };\r\n\r\n    transition.back = (animate, callback) => {\r\n      if (animate == null) {\r\n        animate = true;\r\n      }\r\n      const forwardEvents = (group, direction) => {\r\n        group.once(Events.AnimationHalt, () =>\r\n          this.emit(Events.TransitionHalt, layerB, layerA, direction)\r\n        );\r\n        group.once(Events.AnimationStop, () =>\r\n          this.emit(Events.TransitionStop, layerB, layerA, direction)\r\n        );\r\n        return group.once(Events.AnimationEnd, () =>\r\n          this.emit(Events.TransitionEnd, layerB, layerA, direction)\r\n        );\r\n      };\r\n\r\n      const animations = [];\r\n      const options = { instant: !animate };\r\n\r\n      if (overlay && template.overlay) {\r\n        overlay.visible = true;\r\n        overlay.ignoreEvents = true;\r\n        animations.push(new Animation(overlay, template.overlay.hide, options));\r\n      }\r\n\r\n      if (layerA && template.layerA) {\r\n        layerA.visible = true;\r\n        animations.push(new Animation(layerA, template.layerA.show, options));\r\n      }\r\n\r\n      if (layerB && template.layerB) {\r\n        layerB.visible = true;\r\n        animations.push(new Animation(layerB, template.layerB.hide, options));\r\n      }\r\n\r\n      const group = new AnimationGroup(animations);\r\n      group.stopAnimations = false;\r\n      forwardEvents(group, \"back\");\r\n\r\n      group.once(Events.AnimationEnd, function () {\r\n        if (layerB && template.layerB) {\r\n          return (layerB.visible = false);\r\n        }\r\n      });\r\n\r\n      return group.start();\r\n    };\r\n\r\n    return transition;\r\n  }\r\n\r\n  //#############################################################\r\n  // Event helpers\r\n\r\n  onTransitionStart(cb) {\r\n    return this.on(Events.TransitionStart, cb);\r\n  }\r\n  onTransitionHalt(cb) {\r\n    return this.on(Events.TransitionHalt, cb);\r\n  }\r\n  onTransitionStop(cb) {\r\n    return this.on(Events.TransitionStop, cb);\r\n  }\r\n  onTransitionEnd(cb) {\r\n    return this.on(Events.TransitionEnd, cb);\r\n  }\r\n\r\n  onStart(cb) {\r\n    return this.onTransitionStart(cb);\r\n  }\r\n  onHalt(cb) {\r\n    return this.onTransitionHalt(cb);\r\n  }\r\n  onStop(cb) {\r\n    return this.onTransitionStop(cb);\r\n  }\r\n  onEnd(cb) {\r\n    return this.onTransitionEnd(cb);\r\n  }\r\n}\r\nFlowComponent.initClass();\r\n\r\n//#############################################################\r\n// Layout helpers\r\n\r\nconst findPossibleHeader = function (layer) {\r\n  let child;\r\n  let candidate = null;\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    var attachedLeft =\r\n      child.x === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.left\r\n        : undefined) === 0;\r\n    var atttachedRight =\r\n      child.width === layer.width ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.right\r\n        : undefined) === 0;\r\n    var attachedTop =\r\n      child.y === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.top\r\n        : undefined) === 0;\r\n    if (attachedLeft && atttachedRight && attachedTop) {\r\n      if (candidate) {\r\n        return;\r\n      }\r\n      candidate = child;\r\n    }\r\n  }\r\n\r\n  if (!candidate) {\r\n    return;\r\n  }\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    if (candidate === child) {\r\n      continue;\r\n    }\r\n    if (child.minY < candidate.maxY) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return candidate;\r\n};\r\n\r\nconst findPossibleFooter = function (layer) {\r\n  let child;\r\n  let candidate = null;\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    var attachedLeft =\r\n      child.x === 0 ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.left\r\n        : undefined) === 0;\r\n    var atttachedRight =\r\n      child.width === layer.width ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.right\r\n        : undefined) === 0;\r\n    var attachedBottom =\r\n      child.maxY === layer.height ||\r\n      (child.constraintValues != null\r\n        ? child.constraintValues.bottom\r\n        : undefined) === 0;\r\n    if (attachedLeft && atttachedRight && attachedBottom) {\r\n      if (candidate) {\r\n        return;\r\n      }\r\n      candidate = child;\r\n    }\r\n  }\r\n\r\n  if (!candidate) {\r\n    return;\r\n  }\r\n\r\n  for (child of Array.from(layer.children)) {\r\n    if (candidate === child) {\r\n      continue;\r\n    }\r\n    if (child.maxY > candidate.minY) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return candidate;\r\n};\r\n\r\nconst findHeader = function (layer) {\r\n  const header = findPossibleHeader(layer);\r\n  const footer = findPossibleFooter(layer);\r\n\r\n  if (header && footer) {\r\n    if (header.maxY === footer.minY) {\r\n      if (header.height >= footer.height) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  return header;\r\n};\r\n\r\nconst findFooter = function (layer) {\r\n  const header = findPossibleHeader(layer);\r\n  const footer = findPossibleFooter(layer);\r\n\r\n  if (header && footer) {\r\n    if (header.maxY === footer.minY) {\r\n      if (footer.height >= header.height) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  return footer;\r\n};\r\n\r\nconst findBody = function (layer, header, footer) {\r\n  if (!header && !footer) {\r\n    return;\r\n  }\r\n\r\n  for (var child of Array.from(layer.children)) {\r\n    if (child === header) {\r\n      continue;\r\n    }\r\n    if (child === footer) {\r\n      continue;\r\n    }\r\n\r\n    if (child.x === 0 && child.width === layer.width) {\r\n      if (\r\n        header &&\r\n        footer &&\r\n        child.minY === header.maxY &&\r\n        child.maxY === footer.minY\r\n      ) {\r\n        return child;\r\n      } else if (\r\n        header &&\r\n        child.minY === header.maxY &&\r\n        child.maxY === layer.height\r\n      ) {\r\n        return child;\r\n      } else if (footer && child.minY === 0 && child.maxY === footer.minY) {\r\n        return child;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst guessBodyFrame = function (layer, header, footer) {\r\n  let frame;\r\n  if (!header && !footer) {\r\n    return;\r\n  }\r\n  if (\r\n    (header != null ? header.maxY : undefined) ===\r\n    (footer != null ? footer.minY : undefined)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  if (header && footer) {\r\n    frame = {\r\n      x: 0,\r\n      y: header.height,\r\n      width: layer.width,\r\n      height: layer.height - header.height - footer.height,\r\n    };\r\n  } else if (header) {\r\n    frame = {\r\n      x: 0,\r\n      y: header.height,\r\n      width: layer.width,\r\n      height: layer.height - header.height,\r\n    };\r\n  } else if (footer) {\r\n    frame = {\r\n      x: 0,\r\n      y: 0,\r\n      width: layer.width,\r\n      height: layer.height - footer.height,\r\n    };\r\n  } else {\r\n    return;\r\n  }\r\n\r\n  if (((header != null ? header.height : undefined) || 0) > frame.height) {\r\n    return;\r\n  }\r\n  if (((footer != null ? footer.height : undefined) || 0) > frame.height) {\r\n    return;\r\n  }\r\n\r\n  return frame;\r\n};\r\n\r\nvar layoutPage = function (layer, size) {\r\n  let bodyFrame;\r\n  const header = findHeader(layer);\r\n  const footer = findFooter(layer);\r\n  if (!header && !footer) {\r\n    return layer;\r\n  }\r\n\r\n  let body = findBody(layer, header, footer);\r\n\r\n  if (!body) {\r\n    bodyFrame = guessBodyFrame(layer, header, footer);\r\n\r\n    if (bodyFrame) {\r\n      body = new Layer({\r\n        frame: bodyFrame,\r\n        backgroundColor: null,\r\n      });\r\n\r\n      for (var child of Array.from(layer.children)) {\r\n        if (child === header) {\r\n          continue;\r\n        }\r\n        if (child === footer) {\r\n          continue;\r\n        }\r\n        child.setParentPreservingConstraintValues(body);\r\n        var headerHeight = (header != null ? header.height : undefined) || 0;\r\n        if (child.constraintValues != null) {\r\n          if (\r\n            (child.constraintValues != null\r\n              ? child.constraintValues.top\r\n              : undefined) != null\r\n          ) {\r\n            if (child.constraintValues != null) {\r\n              child.constraintValues.top -= headerHeight;\r\n            }\r\n            child.layout();\r\n          }\r\n        } else {\r\n          child.y -= headerHeight;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!body) {\r\n    return layer;\r\n  }\r\n\r\n  bodyFrame = body.frame;\r\n  bodyFrame.width = size.width;\r\n  bodyFrame.height =\r\n    size.height -\r\n    ((header != null ? header.height : undefined) || 0) -\r\n    ((footer != null ? footer.height : undefined) || 0);\r\n\r\n  body.point = 0;\r\n  // Not scroll vertically if there's a header or footer\r\n  body.width = size.width;\r\n\r\n  const scroll = layoutScroll(body, bodyFrame);\r\n  scroll.parent = layer;\r\n  scroll.frame = bodyFrame;\r\n\r\n  layer.size = size;\r\n\r\n  if ((footer != null ? footer.maxY : undefined) > size.height) {\r\n    footer.maxY = size.height;\r\n  }\r\n\r\n  if (header != null) {\r\n    header.bringToFront();\r\n  }\r\n  if (footer != null) {\r\n    footer.bringToFront();\r\n  }\r\n\r\n  return layer;\r\n};\r\n\r\nvar layoutScroll = function (layer, size) {\r\n  if (layer.width <= size.width && layer.height <= size.height) {\r\n    return layer;\r\n  }\r\n\r\n  const scroll = new ScrollComponent({\r\n    size,\r\n    name: \"scroll\",\r\n  });\r\n\r\n  const { height } = layer;\r\n  scroll.propagateEvents = false;\r\n\r\n  const constraints = layer.constraintValues;\r\n\r\n  layer.point = 0;\r\n  layer.parent = scroll.content;\r\n  layer.constraintValues = constraints;\r\n\r\n  scroll.scrollHorizontal = layer.maxX > size.width;\r\n  scroll.scrollVertical = layer.maxY > size.height;\r\n\r\n  return scroll;\r\n};\r\n\r\nvar Transitions = {};\r\n\r\nTransitions.show = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  const options = { curve: \"spring(300, 35, 0)\" };\r\n  return (transition = {\r\n    layerA: {\r\n      show: { options, x: 0, y: 0 },\r\n      hide: {\r\n        options,\r\n        x: 0 - (layerA != null ? layerA.width : undefined) / 2,\r\n        y: 0,\r\n      },\r\n    },\r\n    layerB: {\r\n      show: { options, x: 0, y: 0 },\r\n      hide: { options, x: layerB.width, y: 0 },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayCenter = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(500, 35, 0)\" },\r\n        x: Align.center,\r\n        y: Align.center,\r\n        scale: 1.0,\r\n        opacity: 1,\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(500, 35, 0)\" },\r\n        x: Align.center,\r\n        y: Align.center,\r\n        scale: 0.5,\r\n        opacity: 0,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayLeft = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: { options: { curve: \"spring(300, 35, 0)\" }, y: 0, x: 0 },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x: 0 - (layerB != null ? layerB.width : undefined),\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayRight = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x:\r\n          (nav != null ? nav.width : undefined) -\r\n          (layerB != null ? layerB.width : undefined),\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        y: 0,\r\n        x: nav != null ? nav.width : undefined,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayTop = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: { options: { curve: \"spring(300, 35, 0)\" }, x: Align.center, y: 0 },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        maxY: 0,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nTransitions.overlayBottom = function (nav, layerA, layerB, overlay) {\r\n  let transition;\r\n  return (transition = {\r\n    layerB: {\r\n      show: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        y:\r\n          (nav != null ? nav.height : undefined) -\r\n          (layerB != null ? layerB.height : undefined),\r\n      },\r\n      hide: {\r\n        options: { curve: \"spring(300, 35, 0)\" },\r\n        x: Align.center,\r\n        y: nav != null ? nav.height : undefined,\r\n      },\r\n    },\r\n    overlay: {\r\n      show: {\r\n        options: { time: 0.1 },\r\n        opacity: 0.5,\r\n        x: 0,\r\n        y: 0,\r\n        size: nav.size,\r\n      },\r\n      hide: { options: { time: 0.1 }, opacity: 0, x: 0, y: 0, size: nav.size },\r\n    },\r\n  });\r\n};\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { Layer } from \"../Layer\";\r\nimport { Color } from \"../Color\"; // Assuming you have a Color utility\r\nimport { Utils } from \"../Utils\";\r\nimport _ from \"lodash\";\r\n\r\nexport class CircularProgressComponent extends Layer {\r\n  // Class fields with defaults\r\n  _strokeWidth = 1;\r\n  _progress = 0;\r\n  _progressColor = Color.grey(1);\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    this.svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    this.svg.setAttribute(\"width\", \"100%\");\r\n    this.svg.setAttribute(\"height\", \"100%\");\r\n    this.svg.setAttributeNS(\r\n      \"http://www.w3.org/2000/xmlns/\",\r\n      \"xmlns:xlink\",\r\n      \"http://www.w3.org/1999/xlink\"\r\n    );\r\n\r\n    this.backgroundColor = null;\r\n    this.rotation = -90;\r\n\r\n    this.rails = this.addShape(\"circle\");\r\n    this.rails.setAttribute(\"fill\", \"transparent\");\r\n\r\n    this.circle = this.addShape(\"circle\");\r\n    this.circle.setAttribute(\"fill\", \"transparent\");\r\n\r\n    this.strokeWidth = 1;\r\n    this.progress = 0;\r\n\r\n    this.railsColor = Color.grey(0.2);\r\n    this.progressColor = Color.grey(1);\r\n\r\n    this._element.appendChild(this.svg);\r\n  }\r\n\r\n  // Computed radius\r\n  get radius() {\r\n    return this.width / 2 - this.strokeWidth / 2;\r\n  }\r\n\r\n  get strokeWidth() {\r\n    return this._strokeWidth;\r\n  }\r\n\r\n  set strokeWidth(value) {\r\n    this._strokeWidth = value;\r\n\r\n    // Update rails\r\n    this.rails.cx.baseVal.value = this.width / 2;\r\n    this.rails.cy.baseVal.value = this.width / 2;\r\n    this.rails.r.baseVal.value = this.radius;\r\n    this.rails.setAttribute(\"stroke-width\", value);\r\n\r\n    // Update circle\r\n    this.circle.cx.baseVal.value = this.width / 2;\r\n    this.circle.cy.baseVal.value = this.width / 2;\r\n    this.circle.r.baseVal.value = this.radius;\r\n    this.circle.setAttribute(\"stroke-width\", value);\r\n  }\r\n\r\n  get progressColor() {\r\n    return this._progressColor;\r\n  }\r\n\r\n  set progressColor(value) {\r\n    this._progressColor = value;\r\n    this.circle.setAttribute(\"stroke\", value);\r\n  }\r\n\r\n  get railsColor() {\r\n    return this._railsColor || Color.grey(0.1);\r\n  }\r\n\r\n  set railsColor(value) {\r\n    this._railsColor = value;\r\n    this.rails.setAttribute(\"stroke\", value);\r\n  }\r\n\r\n  get progress() {\r\n    return this._progress;\r\n  }\r\n\r\n  set progress(value) {\r\n    this._progress = Utils.clamp(value, 0, 1);\r\n    const strokeDashArray = this.radius * Math.PI * 2;\r\n    const strokeDashOffset = (1 - this._progress) * strokeDashArray;\r\n    this.circle.setAttribute(\"stroke-dasharray\", strokeDashArray);\r\n    this.circle.setAttribute(\"stroke-dashoffset\", strokeDashOffset);\r\n  }\r\n\r\n  addShape(type) {\r\n    const shape = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"circle\"\r\n    );\r\n    this.svg.appendChild(shape);\r\n    return shape;\r\n  }\r\n\r\n  setProgress(value, animated = true, animationOptions = {}) {\r\n    if (!animated) {\r\n      this.progress = value;\r\n      return;\r\n    }\r\n\r\n    const dynamicTime = Math.abs(this.progress - value) * 0.3;\r\n    animationOptions = _.defaults(animationOptions, {\r\n      curve: \"linear\",\r\n      time: dynamicTime,\r\n    });\r\n    const animationProperties = { progress: Utils.clamp(value, 0, 1) };\r\n\r\n    return this.animate(animationProperties, animationOptions);\r\n  }\r\n}\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport { Events } from \"./Events.js\";\r\n\r\nEvents.MIDICommand = \"midiCommand\";\r\n\r\nexport class MIDIInput extends BaseClass {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this._requestResolved = this._requestResolved.bind(this);\r\n    this._onMidiMessage = this._onMidiMessage.bind(this);\r\n    this._requestRejected = this._requestRejected.bind(this);\r\n  }\r\n\r\n  static initClass() {\r\n    this.define(\"enabled\", {\r\n      get() {\r\n        return (this._inputs?.length ?? undefined) || this._request;\r\n      },\r\n      set(value) {\r\n        if (value === this.enabled) return;\r\n\r\n        if (!navigator.requestMIDIAccess) {\r\n          return this._requestRejected();\r\n        }\r\n\r\n        if (value) {\r\n          this._request = navigator\r\n            .requestMIDIAccess()\r\n            .then(this._requestResolved, this._requestRejected);\r\n        } else {\r\n          this._inputs?.forEach((input) => input.close?.());\r\n          this._request = null;\r\n          this._inputs = [];\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  // Success handler\r\n  _requestResolved(access) {\r\n    this._inputs = [];\r\n    access.inputs.forEach((input) => {\r\n      this._inputs.push(input);\r\n      input.onmidimessage = this._onMidiMessage(input.id);\r\n    });\r\n  }\r\n\r\n  // Failure handler\r\n  _requestRejected(error) {\r\n    throw new Error(\r\n      `Requesting MIDI access failed: ${error ?? \"not supported by browser\"}`\r\n    );\r\n  }\r\n\r\n  // Event handler\r\n  _onMidiMessage(sourceID) {\r\n    return (message) => {\r\n      this.emit(Events.MIDICommand, sourceID, message.timeStamp, message.data);\r\n    };\r\n  }\r\n\r\n  // Event shortcut\r\n  onCommand(cb) {\r\n    return this.on(Events.MIDICommand, cb);\r\n  }\r\n}\r\n\r\n// Initialize static properties\r\nMIDIInput.initClass();\r\n\r\n// Export a singleton instance\r\nexport const midiInput = new MIDIInput();\r\n","import _ from \"../Underscore.js\";\r\nimport { BaseClass } from \"../BaseClass.js\";\r\nimport { Events } from \"../Events.js\";\r\nimport { MIDIInput } from \"../MIDIInput.js\";\r\nimport Utils from \"../Utils.js\";\r\n\r\nEvents.MIDIComponentValueChange = \"MIDIComponentValueChange\";\r\n\r\nexport class MIDIComponent extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"min\", this.simpleProperty(\"min\", 0));\r\n    this.define(\"max\", this.simpleProperty(\"max\", 127));\r\n    this.define(\"control\", this.simpleProperty(\"control\", null));\r\n    this.define(\"channel\", this.simpleProperty(\"channel\", null));\r\n    this.define(\"source\", this.simpleProperty(\"source\", null));\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n\r\n    MIDIInput.enabled = true;\r\n\r\n    MIDIInput.onCommand((source, timeStamp, data) => {\r\n      const [b1, b2, b3] = data;\r\n\r\n      const command = b1 & 0xf0;\r\n      const channel = (b1 & 0x0f) + 1; // 1-16\r\n      const data1 = b2 & 0x7f;\r\n      const data2 = b3 & 0x7f;\r\n\r\n      if (![0xb0, 0x90, 0x80].includes(command)) return;\r\n      if (this.source != null && this.source !== source) return;\r\n      if (this.channel != null && this.channel !== channel) return;\r\n      if (this.control != null && this.control !== data1) return;\r\n\r\n      let info = { source, channel, control: data1 };\r\n\r\n      if ([0x90, 0x80].includes(command)) {\r\n        info = _.defaults(info, { type: \"note\" });\r\n      }\r\n\r\n      this.emit(Events.MIDIComponentValueChange, this._modulate(data2), info);\r\n    });\r\n  }\r\n\r\n  _modulate(value) {\r\n    return Utils.modulate(value, [0, 127], [this.min, this.max]);\r\n  }\r\n\r\n  onValueChange(cb) {\r\n    return this.on(Events.MIDIComponentValueChange, cb);\r\n  }\r\n}\r\n\r\nMIDIComponent.initClass();\r\n","import Utils from \"./Utils.js\";\r\n\r\nconst FramerCSS = `\r\nbody {\r\n\tmargin: 0;\r\n}\r\n\r\n.framerContext {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tpointer-events: none;\r\n}\r\n\r\n.framerLayer {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center;\r\n\tbackground-size: cover;\r\n\t-webkit-overflow-scrolling: touch;\r\n\tbox-sizing: border-box;\r\n\tuser-select: none;\r\n}\r\n\r\n.framerLayer input,\r\n.framerLayer textarea,\r\n.framerLayer select,\r\n.framerLayer option,\r\n.framerLayer div[contenteditable=\"true\"] {\r\n\tpointer-events: auto;\r\n\tuser-select: auto;\r\n}\r\n\r\n.framerLayer svg {\r\n\toverflow: visible;\r\n\tdisplay: block;\r\n\t-webkit-font-smoothing: antialiased;\r\n}\r\n\r\n.framerDebug {\r\n\tpadding: 6px;\r\n\tcolor: #fff;\r\n\tfont: 10px/1em Monaco, monospace;\r\n}\r\n`;\r\n\r\nUtils.domComplete(() => {\r\n  Utils.insertCSS(FramerCSS);\r\n});\r\n\r\nexport const Config = {\r\n  FramerCSS,\r\n};\r\n","import Utils from \"./Utils.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\n\r\nconst getTime = () => Utils.getTime() * 1000;\r\n\r\nexport class AnimationLoop extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n\r\n    this.delta = 1 / 60;\r\n    this.raf = true;\r\n\r\n    // Disable RAF for certain WebKit versions in Framer Studio or Desktop\r\n    const webkitVersion = Utils.webkitVersion();\r\n    if (webkitVersion > 600 && webkitVersion < 601) {\r\n      if (Utils.isFramerStudio() || Utils.isDesktop()) {\r\n        this.raf = false;\r\n      }\r\n    }\r\n\r\n    // To avoid EventEmitter warning\r\n    this.maximumListeners = Infinity;\r\n\r\n    // Bind start method\r\n    this.start = this.start.bind(this);\r\n  }\r\n\r\n  start() {\r\n    let previousTime = getTime();\r\n\r\n    const update = () => {\r\n      let deltaTime;\r\n      if (this.delta) {\r\n        deltaTime = this.delta;\r\n      } else {\r\n        const currentTime = getTime();\r\n        deltaTime = (currentTime - previousTime) / 1000;\r\n        previousTime = currentTime;\r\n      }\r\n\r\n      this.emit(\"update\", deltaTime);\r\n      this.emit(\"render\", deltaTime);\r\n    };\r\n\r\n    const tick = () => {\r\n      if (this.raf) {\r\n        window.requestAnimationFrame(tick);\r\n        update();\r\n      } else {\r\n        setTimeout(() => {\r\n          window.requestAnimationFrame(tick);\r\n          update();\r\n        }, 0);\r\n      }\r\n    };\r\n\r\n    tick();\r\n  }\r\n}\r\n","export class Animator {\r\n  static initClass() {\r\n    // Static initialization or metadata can go here if needed\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    this.setup(options);\r\n  }\r\n\r\n  setup(options) {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  /**\r\n   * Return the next value based on delta progress\r\n   * Must be implemented by subclasses\r\n   */\r\n  next(delta) {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  finished() {\r\n    throw new Error(\"Not implemented\");\r\n  }\r\n\r\n  /**\r\n   * Generate an array of values by repeatedly calling next()\r\n   * @param {number} delta Time step per frame\r\n   * @param {number} limit Maximum number of frames to calculate\r\n   * @returns {Array} Array of values produced by next()\r\n   */\r\n  values(delta = 1 / 60, limit = 100) {\r\n    const values = [];\r\n    for (let i = 0; i <= limit; i++) {\r\n      values.push(this.next(delta));\r\n      if (this.finished()) break;\r\n    }\r\n    return values;\r\n  }\r\n}\r\n\r\n// Optional: run static initializer\r\nAnimator.initClass();\r\n","import { Animator } from \"./Animator.js\";\r\n\r\nexport class LinearAnimator extends Animator {\r\n  setup(options) {\r\n    this.options = _.defaults(options, {\r\n      time: 1,\r\n      precision: 1 / 1000,\r\n    });\r\n\r\n    return (this._time = 0);\r\n  }\r\n\r\n  next(delta) {\r\n    this._time += delta;\r\n\r\n    if (this.finished()) {\r\n      return 1;\r\n    }\r\n\r\n    return this._time / this.options.time;\r\n  }\r\n\r\n  finished() {\r\n    return this._time >= this.options.time - this.options.precision;\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nconst BezierCurveDefaults = {\r\n  linear: [0, 0, 1, 1],\r\n  ease: [0.25, 0.1, 0.25, 1],\r\n  \"ease-in\": [0.42, 0, 1, 1],\r\n  \"ease-out\": [0, 0, 0.58, 1],\r\n  \"ease-in-out\": [0.42, 0, 0.58, 1],\r\n};\r\n\r\nexport class BezierCurveAnimator extends Animator {\r\n  _time = 0;\r\n  options = {};\r\n  _unitBezier = null;\r\n\r\n  setup(options) {\r\n    // Input is a named bezier curve string\r\n    if (\r\n      _.isString(options) &&\r\n      BezierCurveDefaults.hasOwnProperty(options.toLowerCase())\r\n    ) {\r\n      options = { values: BezierCurveDefaults[options.toLowerCase()] };\r\n    }\r\n\r\n    // Input.values is a named bezier curve string\r\n    if (\r\n      options.values &&\r\n      _.isString(options.values) &&\r\n      BezierCurveDefaults.hasOwnProperty(options.values.toLowerCase())\r\n    ) {\r\n      options = {\r\n        values: BezierCurveDefaults[options.values.toLowerCase()],\r\n        time: options.time,\r\n      };\r\n    }\r\n\r\n    // Input is a single array of 4 values\r\n    if (_.isArray(options) && options.length === 4) {\r\n      options = { values: options };\r\n    }\r\n\r\n    this.options = _.defaults(options, {\r\n      values: BezierCurveDefaults.ease,\r\n      time: 1,\r\n      precision: 1 / 1000,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._unitBezier = new UnitBezier(...this.options.values);\r\n  }\r\n\r\n  next(delta) {\r\n    this._time += delta;\r\n\r\n    if (this.finished()) {\r\n      return 1;\r\n    }\r\n\r\n    return this._unitBezier.solve(this._time / this.options.time);\r\n  }\r\n\r\n  finished() {\r\n    return this._time >= this.options.time - this.options.precision;\r\n  }\r\n}\r\n\r\n// ES6 UnitBezier class\r\nclass UnitBezier {\r\n  epsilon = 1e-6; // precision\r\n\r\n  constructor(p1x, p1y, p2x, p2y) {\r\n    // Pre-calculate polynomial coefficients\r\n    this.cx = 3.0 * p1x;\r\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\r\n    this.ax = 1.0 - this.cx - this.bx;\r\n\r\n    this.cy = 3.0 * p1y;\r\n    this.by = 3.0 * (p2y - p1y) - this.cy;\r\n    this.ay = 1.0 - this.cy - this.by;\r\n  }\r\n\r\n  sampleCurveX(t) {\r\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\r\n  }\r\n\r\n  sampleCurveY(t) {\r\n    return ((this.ay * t + this.by) * t + this.cy) * t;\r\n  }\r\n\r\n  sampleCurveDerivativeX(t) {\r\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\r\n  }\r\n\r\n  solveCurveX(x) {\r\n    let t2 = x;\r\n    let x2;\r\n    let d2;\r\n\r\n    // Newton-Raphson method\r\n    for (let i = 0; i < 8; i++) {\r\n      x2 = this.sampleCurveX(t2) - x;\r\n      if (Math.abs(x2) < this.epsilon) return t2;\r\n      d2 = this.sampleCurveDerivativeX(t2);\r\n      if (Math.abs(d2) < this.epsilon) break;\r\n      t2 -= x2 / d2;\r\n    }\r\n\r\n    // Bisection method\r\n    let t0 = 0;\r\n    let t1 = 1;\r\n    t2 = x;\r\n\r\n    if (t2 < t0) return t0;\r\n    if (t2 > t1) return t1;\r\n\r\n    while (t0 < t1) {\r\n      x2 = this.sampleCurveX(t2);\r\n      if (Math.abs(x2 - x) < this.epsilon) return t2;\r\n      if (x > x2) t0 = t2;\r\n      else t1 = t2;\r\n      t2 = (t1 + t0) / 2;\r\n    }\r\n\r\n    return t2; // fallback\r\n  }\r\n\r\n  solve(x) {\r\n    return this.sampleCurveY(this.solveCurveX(x));\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nexport class SpringDHOAnimator extends Animator {\r\n  _time = 0;\r\n  _value = 0;\r\n  _velocity = 0;\r\n  options = {};\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    // bind finished if it will be used as a callback\r\n    this.finished = this.finished.bind(this);\r\n  }\r\n\r\n  setup(options = {}) {\r\n    this.options = _.defaults(options, {\r\n      velocity: 0,\r\n      tolerance: 1 / 10000,\r\n      stiffness: 50,\r\n      damping: 2,\r\n      mass: 0.2,\r\n      time: null,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._value = 0;\r\n    this._velocity = this.options.velocity;\r\n  }\r\n\r\n  next(delta) {\r\n    if (this.finished()) return 1;\r\n\r\n    this._time += delta;\r\n\r\n    const k = -this.options.stiffness;\r\n    const b = -this.options.damping;\r\n\r\n    const F_spring = k * (this._value - 1);\r\n    const F_damper = b * this._velocity;\r\n\r\n    this._velocity += ((F_spring + F_damper) / this.options.mass) * delta;\r\n    this._value += this._velocity * delta;\r\n\r\n    return this._value;\r\n  }\r\n\r\n  finished() {\r\n    return this._time > 0 && Math.abs(this._velocity) < this.options.tolerance;\r\n  }\r\n}\r\n","import { Animator } from \"./Animator.js\";\r\nimport { Integrator } from \"../Integrator.js\";\r\nimport _ from \"lodash\"; // assuming lodash is available\r\n\r\nexport class SpringRK4Animator extends Animator {\r\n  _time = 0;\r\n  _value = 0;\r\n  _velocity = 0;\r\n  _stopSpring = false;\r\n  _integrator = null;\r\n  options = {};\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    // bind finished if used as a callback\r\n    this.finished = this.finished.bind(this);\r\n  }\r\n\r\n  setup(options = {}) {\r\n    this.options = _.defaults(options, {\r\n      tension: 250,\r\n      friction: 25,\r\n      velocity: 0,\r\n      tolerance: 1 / 1000,\r\n    });\r\n\r\n    this._time = 0;\r\n    this._value = 0;\r\n    this._velocity = this.options.velocity;\r\n    this._stopSpring = false;\r\n\r\n    this._integrator = new Integrator((state) => {\r\n      return -this.options.tension * state.x - this.options.friction * state.v;\r\n    });\r\n  }\r\n\r\n  next(delta) {\r\n    if (this.finished()) return 1;\r\n\r\n    this._time += delta;\r\n\r\n    const stateBefore = {\r\n      x: this._value - 1,\r\n      v: this._velocity,\r\n    };\r\n\r\n    const stateAfter = this._integrator.integrateState(stateBefore, delta);\r\n\r\n    this._value = 1 + stateAfter.x;\r\n    this._velocity = stateAfter.v;\r\n\r\n    const netValueIsLow = Math.abs(stateAfter.x) < this.options.tolerance;\r\n    const netVelocityIsLow = Math.abs(stateAfter.v) < this.options.tolerance;\r\n\r\n    this._stopSpring = netValueIsLow && netVelocityIsLow;\r\n\r\n    return this._value;\r\n  }\r\n\r\n  finished() {\r\n    return this._stopSpring;\r\n  }\r\n}\r\n","import _ from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Layer } from \"./Layer.js\";\r\n\r\nconst ChromeAlert = `Importing layers is currently only supported on Safari. \r\nFor Chrome, run: open -a \"Google Chrome\" --allow-file-access-from-files`;\r\n\r\nconst resizeFrame = (scale, frame) => {\r\n  if (scale === 1 || !frame) return frame;\r\n  const result = {};\r\n  [\"x\", \"y\", \"width\", \"height\"].forEach((key) => {\r\n    if (frame.hasOwnProperty(key)) result[key] = frame[key] * scale;\r\n  });\r\n  return result;\r\n};\r\n\r\nconst startsWithNumber = (str) => /^[0-9]/.test(str);\r\n\r\nconst sanitizeLayerName = (name) => {\r\n  for (const suffix of [\"*\", \"-\", \".png\", \".jpg\", \".pdf\"]) {\r\n    if (name.toLowerCase().endsWith(suffix)) {\r\n      name = name.slice(0, -suffix.length);\r\n    }\r\n  }\r\n  return name;\r\n};\r\n\r\nexport class Importer {\r\n  constructor(path, options = {}, extraLayerProperties = {}) {\r\n    this.path = path;\r\n    this.options = options;\r\n    this.extraLayerProperties = extraLayerProperties;\r\n    this.scale = options.scale ?? 1;\r\n    this.paths = {\r\n      layerInfo: Utils.pathJoin(this.path, \"layers.json\"),\r\n      images: Utils.pathJoin(this.path, \"images\"),\r\n      documentName: decodeURIComponent(this.path.split(\"/\").pop()),\r\n    };\r\n    this._createdLayers = [];\r\n    this._createdLayersByName = {};\r\n  }\r\n\r\n  async load() {\r\n    const layerInfo = await this._loadLayerInfo();\r\n    if (!layerInfo || layerInfo.length === 0) {\r\n      throw new Error(\"Importer: no layers. Ensure at least one layer exists.\");\r\n    }\r\n\r\n    // Pass 1: create all layers recursively\r\n    layerInfo.forEach((info) => this._createLayer(info));\r\n\r\n    // Pass 2: correct hierarchy and positions\r\n    this._createdLayers.forEach((layer) => this._correctLayer(layer));\r\n    this._correctArtboards(this._createdLayers);\r\n\r\n    // Pass 3: ensure all layers are inserted\r\n    this._createdLayers.forEach((layer) => {\r\n      if (!layer.parent) layer.parent = null;\r\n    });\r\n\r\n    return this._createdLayersByName;\r\n  }\r\n\r\n  async _loadLayerInfo() {\r\n    try {\r\n      // Check preloaded global variable\r\n      const importedKey = `${this.paths.documentName}/layers.json.js`;\r\n      if (window.__imported__?.[importedKey]) {\r\n        return _.cloneDeep(window.__imported__[importedKey]);\r\n      }\r\n\r\n      // Load JSON asynchronously\r\n      const response = await fetch(this.paths.layerInfo);\r\n      if (!response.ok)\r\n        throw new Error(`Failed to load layers: ${response.statusText}`);\r\n      return await response.json();\r\n    } catch (err) {\r\n      console.warn(ChromeAlert);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  _createLayer(info, parent) {\r\n    // Scale frames\r\n    if (info.layerFrame)\r\n      info.layerFrame = resizeFrame(this.scale, info.layerFrame);\r\n    if (info.maskFrame)\r\n      info.maskFrame = resizeFrame(this.scale, info.maskFrame);\r\n    if (info.image?.frame)\r\n      info.image.frame = resizeFrame(this.scale, info.image.frame);\r\n\r\n    if (!info.children) info.children = [];\r\n\r\n    const LayerClass = Layer;\r\n    const layerInfo = {\r\n      shadow: true,\r\n      name: sanitizeLayerName(info.name),\r\n      frame: info.layerFrame,\r\n      clip: false,\r\n      backgroundColor: null,\r\n      visible: info.visible ?? true,\r\n      ...this.extraLayerProperties,\r\n    };\r\n\r\n    if (info.image) {\r\n      layerInfo.frame = info.image.frame;\r\n      layerInfo.image = Utils.pathJoin(this.path, info.image.path);\r\n    }\r\n\r\n    if (info.maskFrame) layerInfo.clip = true;\r\n    if (info.kind === \"artboard\")\r\n      layerInfo.backgroundColor = info.backgroundColor;\r\n\r\n    if (parent?.contentLayer) layerInfo.parent = parent.contentLayer;\r\n    else if (parent) layerInfo.parent = parent;\r\n\r\n    if (startsWithNumber(layerInfo.name)) {\r\n      throw new Error(\r\n        `Layer/Artboard names cannot start with a number: '${layerInfo.name}'`\r\n      );\r\n    }\r\n\r\n    const layer = new LayerClass(layerInfo);\r\n    layer.name = layerInfo.name;\r\n    layer.__framerImportedFromPath = this.path;\r\n\r\n    if (layerInfo.name.toLowerCase().includes(\"scroll\")) layer.scroll = true;\r\n    if (layerInfo.name.toLowerCase().includes(\"draggable\"))\r\n      layer.draggable.enabled = true;\r\n\r\n    if (!layer.image && !info.children.length && !info.maskFrame) {\r\n      layer.frame = Utils.frameZero();\r\n    }\r\n\r\n    [...info.children]\r\n      .reverse()\r\n      .forEach((childInfo) => this._createLayer(childInfo, layer));\r\n\r\n    if (info.kind === \"artboard\") layer.point = { x: 0, y: 0 };\r\n    else if (!layer.image && !info.maskFrame)\r\n      layer.frame = layer.contentFrame();\r\n\r\n    layer._info = info;\r\n    this._createdLayers.push(layer);\r\n    this._createdLayersByName[layer.name] = layer;\r\n\r\n    return layer;\r\n  }\r\n\r\n  _correctArtboards(layers) {\r\n    const artboards = layers.filter((l) => l._info.kind === \"artboard\");\r\n    if (!artboards.length) return;\r\n\r\n    const leftMostLayer = artboards.reduce(\r\n      (left, layer) => (!left || layer.x < left.x ? layer : left),\r\n      null\r\n    );\r\n    const offset = leftMostLayer.point;\r\n\r\n    artboards.forEach((layer) => {\r\n      layer.x -= offset.x;\r\n      layer.y -= offset.y;\r\n      layer.visible = true;\r\n    });\r\n  }\r\n\r\n  _correctLayer(layer) {\r\n    const traverse = (l) => {\r\n      if (l.parent) l.frame = Utils.convertPoint(l.frame, null, l.parent);\r\n      l.children.forEach(traverse);\r\n    };\r\n    if (!layer.parent) traverse(layer);\r\n  }\r\n}\r\n\r\n// Static helper\r\nImporter.load = async function (path, scale = 1) {\r\n  const importer = new Importer(path, { scale });\r\n  return await importer.load();\r\n};\r\n","import Utils from \"../Utils\";\r\nimport { BaseClass } from \"../BaseClass\";\r\n\r\nconst createTouch = (event, identifier, offset = { x: 0, y: 0 }) => {\r\n  const touch = {\r\n    identifier,\r\n    target: event.target,\r\n    pageX: event.pageX - offset.x,\r\n    pageY: event.pageY - offset.y,\r\n    clientX: event.clientX - offset.x,\r\n    clientY: event.clientY - offset.y,\r\n    screenX: event.screenX - offset.x,\r\n    screenY: event.screenY - offset.y,\r\n    point: {\r\n      x: event.pageX - offset.x,\r\n      y: event.pageY - offset.y,\r\n    },\r\n  };\r\n  return touch;\r\n};\r\n\r\nconst dispatchTouchEvent = (type, target, event, offset) => {\r\n  if (!target) ({ target } = event);\r\n\r\n  const touchEvent = document.createEvent(\"MouseEvent\");\r\n  touchEvent.initMouseEvent(\r\n    type,\r\n    true,\r\n    true,\r\n    window,\r\n    event.detail,\r\n    event.screenX,\r\n    event.screenY,\r\n    event.clientX,\r\n    event.clientY,\r\n    event.ctrlKey,\r\n    event.shiftKey,\r\n    event.altKey,\r\n    event.metaKey,\r\n    event.button,\r\n    event.relatedTarget\r\n  );\r\n\r\n  const touches = [createTouch(event, 1)];\r\n  if (offset) touches.push(createTouch(event, 2, offset));\r\n\r\n  touchEvent.touches =\r\n    touchEvent.changedTouches =\r\n    touchEvent.targetTouches =\r\n      touches;\r\n\r\n  return target.dispatchEvent(touchEvent);\r\n};\r\n\r\nconst cancelEvent = (event) => {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n};\r\n\r\nclass TouchEmulator extends BaseClass {\r\n  constructor() {\r\n    super();\r\n\r\n    this.keydown = this.keydown.bind(this);\r\n    this.keyup = this.keyup.bind(this);\r\n    this.mousedown = this.mousedown.bind(this);\r\n    this.mousemove = this.mousemove.bind(this);\r\n    this.mouseup = this.mouseup.bind(this);\r\n    this.mouseout = this.mouseout.bind(this);\r\n    this.mousemovePosition = this.mousemovePosition.bind(this);\r\n\r\n    this.touchPointerImage = \"url('framer/images/cursor@2x.png')\";\r\n    this.touchPointerImageActive = \"url('framer/images/cursor-active@2x.png')\";\r\n    this.touchPointerImageSize = 64;\r\n    this.touchPointerInitialOffset = { x: 0, y: 0 };\r\n\r\n    this.keyPinchCode = 18; // Alt\r\n    this.keyPanCode = 91; // Command\r\n\r\n    this.context = new Framer.Context({ name: \"TouchEmulator\" });\r\n    this.context._element.style.zIndex = 10000;\r\n    this.wrap = this.context.domEventManager.wrap;\r\n\r\n    this.wrap(document).addEventListener(\"mousedown\", this.mousedown, true);\r\n    this.wrap(document).addEventListener(\"mousemove\", this.mousemove, true);\r\n    this.wrap(document).addEventListener(\"mouseup\", this.mouseup, true);\r\n    this.wrap(document).addEventListener(\"keydown\", this.keydown, true);\r\n    this.wrap(document).addEventListener(\"keyup\", this.keyup, true);\r\n    this.wrap(document).addEventListener(\"mouseout\", this.mouseout, true);\r\n\r\n    this.isMouseDown = false;\r\n    this.isPinchKeyDown = false;\r\n    this.isPanKeyDown = false;\r\n\r\n    this.context.run(() => {\r\n      this.touchPointLayer = new Layer({\r\n        width: this.touchPointerImageSize,\r\n        height: this.touchPointerImageSize,\r\n        backgroundColor: null,\r\n        opacity: 0,\r\n      });\r\n      this.touchPointLayer.style.backgroundImage = this.touchPointerImage;\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.context?.reset();\r\n    this.context = null;\r\n  }\r\n\r\n  keydown(event) {\r\n    if (event.keyCode === this.keyPinchCode) {\r\n      this.isPinchKeyDown = true;\r\n      this.startPoint = this.centerPoint = null;\r\n      this.showTouchCursor();\r\n      this.touchPointLayer.midX = this.point?.x ?? 0;\r\n      this.touchPointLayer.midY = this.point?.y ?? 0;\r\n    }\r\n\r\n    if (event.keyCode === this.keyPanCode) {\r\n      this.isPanKeyDown = true;\r\n      cancelEvent(event);\r\n    }\r\n  }\r\n\r\n  keyup(event) {\r\n    if (event.keyCode === this.keyPinchCode) {\r\n      cancelEvent(event);\r\n      this.isPinchKeyDown = false;\r\n      this.hideTouchCursor();\r\n    }\r\n\r\n    if (event.keyCode === this.keyPanCode) {\r\n      cancelEvent(event);\r\n      if (this.touchPoint && this.point) {\r\n        this.centerPoint = Utils.pointCenter(this.touchPoint, this.point);\r\n        this.isPanKeyDown = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  mousedown(event) {\r\n    this.isMouseDown = true;\r\n    this.target = event.target;\r\n\r\n    if (this.isPinchKeyDown) {\r\n      dispatchTouchEvent(\r\n        \"touchstart\",\r\n        this.target,\r\n        event,\r\n        this.touchPointDelta\r\n      );\r\n    } else {\r\n      dispatchTouchEvent(\"touchstart\", this.target, event);\r\n    }\r\n\r\n    this.touchPointLayer.style.backgroundImage = this.touchPointerImageActive;\r\n  }\r\n\r\n  mousemove(event) {\r\n    this.point = { x: event.pageX, y: event.pageY };\r\n\r\n    this.startPoint ??= this.point;\r\n    this.centerPoint ??= this.point;\r\n\r\n    if (this.isPinchKeyDown && !this.isPanKeyDown && this.centerPoint) {\r\n      this.touchPoint = Utils.pointAdd(\r\n        this.touchPointerInitialOffset,\r\n        this.pinchPoint(this.point, this.centerPoint)\r\n      );\r\n      this.touchPointDelta = Utils.pointSubtract(this.point, this.touchPoint);\r\n    }\r\n\r\n    if (\r\n      this.isPinchKeyDown &&\r\n      this.isPanKeyDown &&\r\n      this.touchPoint &&\r\n      this.touchPointDelta\r\n    ) {\r\n      this.touchPoint = this.panPoint(this.point, this.touchPointDelta);\r\n    }\r\n\r\n    if ((this.isPinchKeyDown || this.isPanKeyDown) && this.touchPoint) {\r\n      this.touchPointLayer.visible = true;\r\n      this.touchPointLayer.midX = this.touchPoint.x;\r\n      this.touchPointLayer.midY = this.touchPoint.y;\r\n    }\r\n\r\n    if (this.isMouseDown) {\r\n      if ((this.isPinchKeyDown || this.isPanKeyDown) && this.touchPointDelta) {\r\n        dispatchTouchEvent(\r\n          \"touchmove\",\r\n          this.target,\r\n          event,\r\n          this.touchPointDelta\r\n        );\r\n      } else {\r\n        dispatchTouchEvent(\"touchmove\", this.target, event);\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseup(event) {\r\n    if (this.isPinchKeyDown || this.isPanKeyDown) {\r\n      dispatchTouchEvent(\"touchend\", this.target, event, this.touchPointDelta);\r\n    } else {\r\n      dispatchTouchEvent(\"touchend\", this.target, event);\r\n    }\r\n\r\n    this.endMultiTouch();\r\n  }\r\n\r\n  mouseout(event) {\r\n    if (this.isMouseDown) return;\r\n\r\n    const fromElement = event.relatedTarget || event.toElement;\r\n    if (!fromElement || fromElement.nodeName === \"HTML\") {\r\n      this.endMultiTouch();\r\n    }\r\n  }\r\n\r\n  showTouchCursor() {\r\n    if (!this.point) {\r\n      this.point = { x: 0, y: 0 };\r\n    }\r\n\r\n    this.touchPointLayer.animateStop();\r\n    this.touchPointLayer.midX = this.point.x;\r\n    this.touchPointLayer.midY = this.point.y;\r\n    this.touchPointLayer.scale = 1.8;\r\n\r\n    this.touchPointLayer.animate({\r\n      opacity: 1,\r\n      scale: 1,\r\n      options: { time: 0.1, curve: \"ease-out\" },\r\n    });\r\n  }\r\n\r\n  hideTouchCursor() {\r\n    if (this.touchPointLayer.opacity <= 0) return;\r\n\r\n    this.touchPointLayer.animateStop();\r\n    this.touchPointLayer.animate({\r\n      opacity: 0,\r\n      scale: 1.2,\r\n      options: { time: 0.08 },\r\n    });\r\n  }\r\n\r\n  mousemovePosition(event) {\r\n    this.point = { x: event.pageX, y: event.pageY };\r\n  }\r\n\r\n  endMultiTouch() {\r\n    this.isMouseDown = false;\r\n    this.touchPointLayer.style.backgroundImage = this.touchPointerImage;\r\n    this.hideTouchCursor();\r\n  }\r\n\r\n  pinchPoint(point, centerPoint) {\r\n    return Utils.pointSubtract(\r\n      centerPoint,\r\n      Utils.pointSubtract(point, centerPoint)\r\n    );\r\n  }\r\n\r\n  panPoint(point, offsetPoint) {\r\n    return Utils.pointSubtract(point, offsetPoint);\r\n  }\r\n}\r\n\r\nlet touchEmulator = null;\r\n\r\nexport const enable = () => {\r\n  if (Utils.isTouch()) return;\r\n  if (!touchEmulator) touchEmulator = new TouchEmulator();\r\n  return Events.enableEmulatedTouchEvents(true);\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!touchEmulator) return;\r\n  touchEmulator.destroy();\r\n  touchEmulator = null;\r\n  return Events.enableEmulatedTouchEvents(false);\r\n};\r\n\r\nexport const reset = () => {\r\n  touchEmulator?.endMultiTouch();\r\n};\r\n\r\nexport default TouchEmulator;\r\n","const handleScrollingLayerTouchMove = (event) => event.stopPropagation();\r\n\r\nconst handleScrollingLayerTouchStart = function () {\r\n  const element = this._element;\r\n  const startTopScroll = element.scrollTop;\r\n\r\n  if (startTopScroll <= 0) {\r\n    element.scrollTop = 1;\r\n  }\r\n\r\n  if (startTopScroll + element.offsetHeight >= element.scrollHeight) {\r\n    element.scrollTop = element.scrollHeight - element.offsetHeight - 1;\r\n  }\r\n};\r\n\r\nexport class MobileScrollFixLayer extends Framer.Layer {\r\n  constructor(options) {\r\n    super(options);\r\n    this._updateScrollListeners = this._updateScrollListeners.bind(this);\r\n\r\n    // Only apply to base Layer, not Scroll/Page components\r\n    if (this.constructor.name === \"Layer\") {\r\n      this.on(\"change:scrollVertical\", this._updateScrollListeners);\r\n      this._updateScrollListeners();\r\n    }\r\n  }\r\n\r\n  _updateScrollListeners() {\r\n    if (this.scrollVertical === true) {\r\n      this.on(\"touchmove\", handleScrollingLayerTouchMove);\r\n      this.on(\"touchstart\", handleScrollingLayerTouchStart);\r\n    } else {\r\n      this.off(\"touchmove\", handleScrollingLayerTouchMove);\r\n      this.off(\"touchstart\", handleScrollingLayerTouchStart);\r\n    }\r\n  }\r\n\r\n  toInspect(...args) {\r\n    return this.constructor.name === \"MobileScrollFixLayer\"\r\n      ? super.toInspect(\"Layer\")\r\n      : super.toInspect(...args);\r\n  }\r\n}\r\n\r\nexport const enableMobileScrollFix = () => {\r\n  document.ontouchmove = (event) => {\r\n    if (event.target === document.body) {\r\n      event.preventDefault();\r\n    }\r\n  };\r\n};\r\n\r\nexport default MobileScrollFixLayer;\r\n","import Utils from \"../Utils\";\r\nimport { BaseClass } from \"../BaseClass\";\r\nimport { Context } from \"../Context\";\r\nimport { Layer } from \"../Layer\";\r\n\r\nlet errorDisplay = null;\r\n\r\nconst Config = Utils.isMobile()\r\n  ? { height: 100, textInset: 20, fontSize: 32 }\r\n  : { height: 40, textInset: 12, fontSize: 14 };\r\n\r\nexport default class ErrorDisplay extends BaseClass {\r\n  _context = null;\r\n  _errorLayer = null;\r\n\r\n  constructor() {\r\n    super();\r\n    this.resize = this.resize.bind(this);\r\n\r\n    this._context ??= new Context({ name: \"ErrorDisplay\" });\r\n    this._context.index = 1000;\r\n\r\n    this._context.run(() => {\r\n      Events.wrap(window).addEventListener(\"error\", (e) =>\r\n        this.showError(e.message)\r\n      );\r\n      Events.wrap(window).addEventListener(\"resize\", this.resize);\r\n    });\r\n  }\r\n\r\n  createLayer() {\r\n    if (this._errorLayer) return this._errorLayer;\r\n\r\n    this._context.run(() => {\r\n      const error = new Layer({\r\n        name: \"error\",\r\n        y: Align.bottom,\r\n        width: Canvas.width,\r\n        height: Config.height,\r\n        backgroundColor: \"rgba(255, 0, 0, 1)\",\r\n      });\r\n\r\n      error.text = new Layer({\r\n        name: \"text\",\r\n        parent: error,\r\n        size: Utils.frameInset(error, Config.textInset),\r\n        point: Align.center,\r\n        backgroundColor: null,\r\n        clip: true,\r\n      });\r\n\r\n      error.text.style = {\r\n        font: `${Config.fontSize}px/1em ${Utils.deviceFont()}`,\r\n        lineHeight: `${parseInt(error.text.height - 2)}px`,\r\n        textAlign: \"center\",\r\n        wordWrap: \"break-word\",\r\n        textOverflow: \"ellipsis\",\r\n      };\r\n\r\n      error.onTap(() => {\r\n        this._errorLayer?.destroy();\r\n        this._errorLayer = null;\r\n      });\r\n\r\n      this._errorLayer = error;\r\n      this.resize();\r\n    });\r\n\r\n    return this._errorLayer;\r\n  }\r\n\r\n  resize() {\r\n    if (!this._errorLayer) return;\r\n\r\n    this._errorLayer.width = Canvas.width;\r\n    this._errorLayer.y = Canvas.height - this._errorLayer.height;\r\n    this._errorLayer.text.size = Utils.frameInset(\r\n      this._errorLayer,\r\n      Config.textInset\r\n    );\r\n    this._errorLayer.text.point = Align.center;\r\n  }\r\n\r\n  showError(message) {\r\n    const error = this.createLayer();\r\n    error.scale = 1.1;\r\n    error.text.html = message;\r\n\r\n    return error.animate({\r\n      scale: 1,\r\n      options: {\r\n        curve: \"spring(800, 55, 10)\",\r\n      },\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._context?.destroy();\r\n  }\r\n}\r\n\r\nexport const enable = () => {\r\n  if (errorDisplay) return;\r\n  errorDisplay = new ErrorDisplay();\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!errorDisplay) return;\r\n  errorDisplay.destroy();\r\n  errorDisplay = null;\r\n};\r\n","export const enable = (module = window) => {\r\n  const ClassWrapper =\r\n    (Klass) =>\r\n    (...args) => {\r\n      const instance = new Klass(...args);\r\n      return Object.setPrototypeOf(() => {}, instance);\r\n    };\r\n\r\n  module.Frame = ClassWrapper(Framer.Frame);\r\n  module.Layer = ClassWrapper(Framer.Layer);\r\n  module.BackgroundLayer = ClassWrapper(Framer.BackgroundLayer);\r\n  module.VideoLayer = ClassWrapper(Framer.VideoLayer);\r\n  module.Animation = ClassWrapper(Framer.Animation);\r\n\r\n  return module;\r\n};\r\n\r\nexport default enable;\r\n","import { Context } from \"../Context\";\r\nimport Utils from \"../Utils\";\r\n\r\nlet hints = null;\r\n\r\nexport default class Hints {\r\n  _context = null;\r\n  _target = null;\r\n\r\n  constructor() {\r\n    this._handleDown = this._handleDown.bind(this);\r\n    this._handleUp = this._handleUp.bind(this);\r\n\r\n    this._context = new Framer.Context({ name: \"Hints\" });\r\n    this._context.index = 10000;\r\n\r\n    this._context.run(() => {\r\n      const wrappedDoc = Events.wrap(document);\r\n      wrappedDoc.addEventListener(Events.TouchStart, this._handleDown, true);\r\n      wrappedDoc.addEventListener(Events.TouchEnd, this._handleUp, true);\r\n    });\r\n  }\r\n\r\n  _handleDown(event) {\r\n    if (this._isPreloading()) return;\r\n    this._target = event.target;\r\n  }\r\n\r\n  _handleUp(event) {\r\n    if (this._isPreloading()) return;\r\n\r\n    const layer = Framer.CurrentContext.layerForElement(this._target);\r\n\r\n    if (!layer) {\r\n      for (const context of Context.all()) {\r\n        if (\r\n          context !== Framer.DefaultContext &&\r\n          context !== Framer.CurrentContext &&\r\n          context.layerForElement(this._target)\r\n        ) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (layer?.willSeemToDoSomething()) return;\r\n\r\n    this.showHints();\r\n  }\r\n\r\n  _isPreloading() {\r\n    return Framer.Preloader?.isLoading === true;\r\n  }\r\n\r\n  showHints() {\r\n    const context = Framer.CurrentContext;\r\n    this._context.run(() => {\r\n      _.invokeMap(context.rootLayers, \"_showHint\");\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this._context?.destroy();\r\n  }\r\n}\r\n\r\nexport const enable = () => {\r\n  if (hints) return hints;\r\n  hints = new Hints(Framer.CurrentContext);\r\n  return hints;\r\n};\r\n\r\nexport const disable = () => {\r\n  if (!hints) return;\r\n  hints.destroy();\r\n  hints = null;\r\n};\r\n\r\nexport const showHints = () => {\r\n  if (!hints) return;\r\n  Utils.delay(0.5, () => hints.showHints());\r\n};\r\n","import { BaseClass } from \"../BaseClass\";\r\nimport { Context } from \"../Context\";\r\nimport Utils from \"../Utils\";\r\n\r\nclass Preloader extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"progress\", {\r\n      get() {\r\n        return this._mediaLoaded.length / this._media.length || 0;\r\n      },\r\n    });\r\n\r\n    this.define(\"time\", {\r\n      get() {\r\n        return (Date.now() - this._startTime) / 1000;\r\n      },\r\n    });\r\n\r\n    this.define(\"isLoading\", {\r\n      get() {\r\n        return this._isLoading;\r\n      },\r\n    });\r\n\r\n    this.define(\"isReady\", {\r\n      get() {\r\n        if (!this.isLoading) {\r\n          return false;\r\n        }\r\n        return this._mediaLoaded.length === this._media.length;\r\n      },\r\n    });\r\n  }\r\n\r\n  constructor(options) {\r\n    this.setLogo = this.setLogo.bind(this);\r\n    this.addImage = this.addImage.bind(this);\r\n    this.addPlayer = this.addPlayer.bind(this);\r\n    this.start = this.start.bind(this);\r\n    this._start = this._start.bind(this);\r\n    this.end = this.end.bind(this);\r\n    this._end = this._end.bind(this);\r\n    this._handleProgress = this._handleProgress.bind(this);\r\n    this._handleTimeout = this._handleTimeout.bind(this);\r\n    this._setupContext = this._setupContext.bind(this);\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this._media = [];\r\n    this._mediaLoaded = [];\r\n    this._isLoading = false;\r\n\r\n    this.timeout = 30;\r\n\r\n    this.start();\r\n  }\r\n\r\n  setupContext() {\r\n    this.context = new Context({ name: \"Preloader\" });\r\n    return this.context.run(this._setupContext);\r\n  }\r\n\r\n  setLogo(url) {\r\n    this._logo = url;\r\n    // Set directly via style, to avoid inclusion in the preloader list\r\n    if (this.brand) {\r\n      return (this.brand.style[\"background-image\"] = `url('${url}')`);\r\n    }\r\n  }\r\n\r\n  addImagesFromContext(context) {\r\n    return _.map(context.layers, \"image\").map(this.addImage);\r\n  }\r\n\r\n  addPlayersFromContext(context) {\r\n    return _.map(context.layers, \"player\").map(this.addPlayer);\r\n  }\r\n\r\n  addImage(image) {\r\n    if (image instanceof Gradient) {\r\n      return;\r\n    }\r\n    if (image && !Array.from(this._media).includes(image)) {\r\n      this._media.push(image);\r\n      // We simply count failed images as loaded for now so that we avoid\r\n      // being in some loading state forever.\r\n      return Utils.loadImage(image, (error) => {\r\n        this._mediaLoaded.push(image);\r\n        return this._handleProgress();\r\n      });\r\n    }\r\n  }\r\n\r\n  addPlayer(player) {\r\n    if (!player || Array.from(this._media).includes(player)) {\r\n      return;\r\n    }\r\n    if (player.src == null || player.getAttribute(\"src\") === \"undefined\") {\r\n      return;\r\n    }\r\n    if (player.readyState == null || !(player.readyState < 3)) {\r\n      return;\r\n    }\r\n    //  else\r\n    this._media.push(player);\r\n    // Wait until there is enough data for playback to start playing\r\n    return Events.wrap(player).addEventListener(\"canplaythrough\", () => {\r\n      this._mediaLoaded.push(player);\r\n      return this._handleProgress();\r\n    });\r\n  }\r\n\r\n  start() {\r\n    if (this.isLoading) {\r\n      return;\r\n    }\r\n\r\n    this._isLoading = true;\r\n    this._startTime = Date.now();\r\n\r\n    this.emit(\"start\");\r\n    this.setupContext();\r\n\r\n    // We need a little delay for the contexts to build up so we can\r\n    // actually find the images in it.\r\n    return Utils.delay(0.2, this._start);\r\n  }\r\n\r\n  _start() {\r\n    // Another bit of delay to find out if the images are already cached\r\n    // so we avoid a mini flickr of the progress indicator.\r\n    Utils.delay(0.2, () => {\r\n      this.progressIndicator.visible = true;\r\n      return (this.brand.visible = true);\r\n    });\r\n\r\n    // By default we take the image from the prototype and the device\r\n    this.addImagesFromContext(Framer.DefaultContext);\r\n    this.addImagesFromContext(Framer.CurrentContext);\r\n    this.addPlayersFromContext(Framer.DefaultContext);\r\n    this.addPlayersFromContext(Framer.CurrentContext);\r\n\r\n    // If we don't need any images to be preloaded we can stop\r\n    if (!this._media.length) {\r\n      return this.end();\r\n    }\r\n\r\n    // Make sure we always show the prototype after n seconds, even if not\r\n    // all the images managed to load at all.\r\n    return Utils.delay(this.timeout, this._handleTimeout);\r\n  }\r\n\r\n  end() {\r\n    if (!this.isLoading) {\r\n      return;\r\n    }\r\n    return this._end();\r\n  }\r\n\r\n  _end(animated) {\r\n    if (animated == null) {\r\n      animated = true;\r\n    }\r\n    Framer.DefaultContext.visible = true;\r\n\r\n    const finalize = () => {\r\n      this.emit(\"end\");\r\n      this._isLoading = false;\r\n      return this.context != null ? this.context.destroy() : undefined;\r\n    };\r\n\r\n    if (\r\n      (this.progressIndicator != null\r\n        ? this.progressIndicator.visible\r\n        : undefined) &&\r\n      animated\r\n    ) {\r\n      if (this.cover != null) {\r\n        this.cover.animate({\r\n          properties: { opacity: 0 },\r\n          time: 0.13,\r\n        });\r\n      }\r\n      return this.cover.onAnimationDidEnd(finalize);\r\n    } else {\r\n      return finalize();\r\n    }\r\n  }\r\n\r\n  _handleProgress() {\r\n    this.emit(\"progress\", this.progress);\r\n    if (this.progressIndicator != null) {\r\n      this.progressIndicator.setProgress(this.progress);\r\n    }\r\n    if (this.isReady) {\r\n      return this._handleLoaded();\r\n    }\r\n  }\r\n\r\n  _handleLoaded() {\r\n    if (this.time > 0.5) {\r\n      return Utils.delay(0.2, this.end);\r\n    } else {\r\n      return this.end();\r\n    }\r\n  }\r\n\r\n  _handleTimeout() {\r\n    if (!this.isLoading) {\r\n      return;\r\n    }\r\n    console.warn(\"Preloader timeout, ending\");\r\n    return this.end();\r\n  }\r\n\r\n  _setupContext() {\r\n    let layout;\r\n    this.cover = new Layer({\r\n      frame: Canvas,\r\n      backgroundColor: \"white\",\r\n    });\r\n\r\n    this.progressIndicator = new CircularProgressComponent({\r\n      size: 160,\r\n      point: Align.center,\r\n      parent: this.cover,\r\n      visible: false,\r\n    });\r\n\r\n    this.progressIndicator.railsColor = Color.grey(0, 0.1);\r\n    this.progressIndicator.progressColor = \"rgb(75, 169, 248)\";\r\n    this.progressIndicator.setProgress(this.progress);\r\n\r\n    this.brand = new Layer({\r\n      size: 96,\r\n      parent: this.cover,\r\n      backgroundColor: null,\r\n      visible: false,\r\n      style: {\r\n        backgroundSize: \"50%\",\r\n      },\r\n    });\r\n\r\n    // We display it a tad larger on mobile\r\n    if (Utils.isMobile()) {\r\n      this.progressIndicator.scale = 1.25;\r\n      this.brand.scale = 1.25;\r\n    }\r\n\r\n    if (this._logo) {\r\n      this.setLogo(this._logo);\r\n    } else {\r\n      // Use the online logo, make sure we don't use the file:// protocol\r\n      let logoUrl =\r\n        \"//resources.framerjs.com/static/images/preloader/framer-logo.png\";\r\n      if (_.startsWith(window.location.href, \"file://\")) {\r\n        logoUrl = \"http:\" + logoUrl;\r\n      }\r\n      this.setLogo(logoUrl);\r\n    }\r\n\r\n    (layout = () => {\r\n      this.cover.frame = Canvas;\r\n      this.progressIndicator.point = Align.center;\r\n      this.brand.x = Align.center;\r\n      return (this.brand.y = Align.center(2));\r\n    })();\r\n\r\n    return Canvas.onResize(layout);\r\n  }\r\n}\r\nPreloader.initClass();\r\n\r\nexport const enable = () => {\r\n  return (Framer.Preloader ??= new Preloader());\r\n};\r\n\r\nexport const disable = () => {\r\n  Framer.Preloader?._end(false);\r\n  Framer.Preloader = null;\r\n};\r\n\r\nexport const addImage = (url) => {\r\n  return Framer.Preloader?.addImage(url);\r\n};\r\n\r\nexport const setLogo = (url) => {\r\n  return Framer.Preloader?.setLogo(url);\r\n};\r\n\r\nexport default Preloader;\r\n","import Utils from \"./Utils.js\";\r\nimport { DOMEventManager } from \"./DOMEventManager.js\";\r\n\r\nconst GestureInputLongPressTime = 0.5;\r\nconst GestureInputDoubleTapTime = 0.25;\r\nconst GestureInputSwipeThreshold = 30;\r\nconst GestureInputEdgeSwipeDistance = 30;\r\nconst GestureInputVelocityTime = 0.1;\r\nconst GestureInputForceTapDesktop = MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN;\r\nconst GestureInputForceTapMobile = 0.7;\r\nconst GestureInputForceTapMobilePollTime = 1 / 30;\r\nconst GestureInputMinimumFingerDistance = 30;\r\n\r\nexport class GestureInputRecognizer {\r\n  constructor() {\r\n    this.startMouse = this.startMouse.bind(this);\r\n    this.startTouch = this.startTouch.bind(this);\r\n    this.touchstart = this.touchstart.bind(this);\r\n    this.touchmove = this.touchmove.bind(this);\r\n    this.touchend = this.touchend.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.tap = this.tap.bind(this);\r\n    this.tapstart = this.tapstart.bind(this);\r\n    this.tapend = this.tapend.bind(this);\r\n    this.doubletap = this.doubletap.bind(this);\r\n    this.longpressstart = this.longpressstart.bind(this);\r\n    this.longpressend = this.longpressend.bind(this);\r\n    this._updateTouchForce = this._updateTouchForce.bind(this);\r\n    this._updateMacForce = this._updateMacForce.bind(this);\r\n    this.forcetapchange = this.forcetapchange.bind(this);\r\n    this.forcetapstart = this.forcetapstart.bind(this);\r\n    this.forcetapend = this.forcetapend.bind(this);\r\n    this.panstart = this.panstart.bind(this);\r\n    this.pan = this.pan.bind(this);\r\n    this.panend = this.panend.bind(this);\r\n    this.panup = this.panup.bind(this);\r\n    this.pandown = this.pandown.bind(this);\r\n    this.panleft = this.panleft.bind(this);\r\n    this.panright = this.panright.bind(this);\r\n    this.pinchstart = this.pinchstart.bind(this);\r\n    this.pinch = this.pinch.bind(this);\r\n    this.pinchend = this.pinchend.bind(this);\r\n    this.scalestart = this.scalestart.bind(this);\r\n    this.scale = this.scale.bind(this);\r\n    this.scaleend = this.scaleend.bind(this);\r\n    this.rotatestart = this.rotatestart.bind(this);\r\n    this.rotate = this.rotate.bind(this);\r\n    this.rotateend = this.rotateend.bind(this);\r\n    this.swipestart = this.swipestart.bind(this);\r\n    this.swipe = this.swipe.bind(this);\r\n    this.swipeend = this.swipeend.bind(this);\r\n    this.swipedirectionstart = this.swipedirectionstart.bind(this);\r\n    this.swipedirection = this.swipedirection.bind(this);\r\n    this.swipedirectionend = this.swipedirectionend.bind(this);\r\n    this.edgeswipedirection = this.edgeswipedirection.bind(this);\r\n    this.edgeswipedirectionstart = this.edgeswipedirectionstart.bind(this);\r\n    this.edgeswipedirectionend = this.edgeswipedirectionend.bind(this);\r\n    this._process = this._process.bind(this);\r\n    this.em = new DOMEventManager();\r\n    this.em.wrap(window).addEventListener(\"mousedown\", this.startMouse);\r\n    this.em.wrap(window).addEventListener(\"touchstart\", this.startTouch);\r\n    this.session = null;\r\n  }\r\n\r\n  destroy() {\r\n    return this.em.removeAllListeners();\r\n  }\r\n\r\n  cancel() {\r\n    window.clearTimeout(this.session.pressTimer);\r\n    return (this.session = null);\r\n  }\r\n\r\n  startMouse(event) {\r\n    if (this.session) {\r\n      return;\r\n    }\r\n    this.em.wrap(window).addEventListener(\"mousemove\", this.touchmove);\r\n    this.em.wrap(window).addEventListener(\"mouseup\", this.touchend);\r\n    return this.touchstart(event);\r\n  }\r\n\r\n  startTouch(event) {\r\n    if (this.session) {\r\n      return;\r\n    }\r\n    this.em.wrap(window).addEventListener(\"touchmove\", this.touchmove);\r\n    this.em.wrap(window).addEventListener(\"touchend\", this.touchend);\r\n    return this.touchstart(event);\r\n  }\r\n\r\n  touchstart(event) {\r\n    // Only fire if we are not already in a session\r\n    if (this.session) {\r\n      return;\r\n    }\r\n\r\n    this.em\r\n      .wrap(window)\r\n      .addEventListener(\"webkitmouseforcechanged\", this._updateMacForce);\r\n\r\n    this.session = {\r\n      startEvent: this._getGestureEvent(event),\r\n      lastEvent: null,\r\n      startMultiEvent: null,\r\n      startTime: Date.now(),\r\n      pressTimer: window.setTimeout(\r\n        this.longpressstart,\r\n        GestureInputLongPressTime * 1000\r\n      ),\r\n      started: {},\r\n      events: [],\r\n      eventCount: 0,\r\n      cancelTap: false,\r\n    };\r\n\r\n    event = this._getGestureEvent(event);\r\n\r\n    this.tapstart(event);\r\n\r\n    if (Date.now() - this.doubleTapTime < GestureInputDoubleTapTime * 1000) {\r\n      this.doubletap(event);\r\n    } else {\r\n      this.doubleTapTime = Date.now();\r\n    }\r\n\r\n    this._process(event);\r\n    if (Utils.isTouch()) {\r\n      return this._updateTouchForce();\r\n    }\r\n  }\r\n\r\n  touchmove(event) {\r\n    return this._process(this._getGestureEvent(event));\r\n  }\r\n\r\n  touchend(event) {\r\n    // Only fire if there are no fingers left on the screen\r\n\r\n    if (event.touches != null) {\r\n      if (Utils.isTouch()) {\r\n        if (event.touches.length !== 0) {\r\n          return;\r\n        }\r\n      } else {\r\n        if (event.touches.length !== event.changedTouches.length) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.em.wrap(window).removeEventListener(\"mousemove\", this.touchmove);\r\n    this.em.wrap(window).removeEventListener(\"mouseup\", this.touchend);\r\n    this.em.wrap(window).removeEventListener(\"touchmove\", this.touchmove);\r\n    this.em.wrap(window).removeEventListener(\"touchend\", this.touchend);\r\n    this.em\r\n      .wrap(window)\r\n      .removeEventListener(\"webkitmouseforcechanged\", this._updateMacForce);\r\n\r\n    event = this._getGestureEvent(event);\r\n\r\n    for (var eventName in this.session.started) {\r\n      var value = this.session.started[eventName];\r\n      if (value) {\r\n        this[`${eventName}end`](event);\r\n      }\r\n    }\r\n\r\n    if (this.shouldFireTapEvent(event)) {\r\n      this.tap(event);\r\n    }\r\n\r\n    this.tapend(event);\r\n    return this.cancel();\r\n  }\r\n\r\n  reset() {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    return this.touchend(this.session.lastEvent);\r\n  }\r\n\r\n  // Tap\r\n\r\n  shouldFireTapEvent(event) {\r\n    const startEvent =\r\n      this.session != null ? this.session.startEvent : undefined;\r\n    if (startEvent != null) {\r\n      // We only want to fire a tap event if the original target is the same\r\n      // as the release target, so buttons work the way you expect if you\r\n      // release the mouse outside.\r\n      const isSameTarget = startEvent.target === event.target;\r\n      const isShortSession = event.time - this.session.startTime < 750;\r\n      const isShortDistance =\r\n        Utils.pointDistance(startEvent.touchCenter, event.touchCenter) < 45;\r\n      return (\r\n        isSameTarget &&\r\n        isShortSession &&\r\n        isShortDistance &&\r\n        !this.session.cancelTap\r\n      );\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  tap(event) {\r\n    return this._dispatchEvent(\"tap\", event);\r\n  }\r\n  tapstart(event) {\r\n    return this._dispatchEvent(\"tapstart\", event);\r\n  }\r\n  tapend(event) {\r\n    return this._dispatchEvent(\"tapend\", event);\r\n  }\r\n  doubletap(event) {\r\n    return this._dispatchEvent(\"doubletap\", event);\r\n  }\r\n\r\n  // Press\r\n\r\n  longpressstart() {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (this.session.started.longpress) {\r\n      return;\r\n    }\r\n    const event = this._getGestureEvent(this.session.startEvent);\r\n    this.session.started.longpress = event;\r\n    this._dispatchEvent(\"longpressstart\", event);\r\n    return this._dispatchEvent(\"longpress\", event);\r\n  }\r\n\r\n  longpressend(event) {\r\n    return this._dispatchEvent(\"longpressend\", event);\r\n  }\r\n\r\n  // ForceTap\r\n\r\n  _updateTouchForce() {\r\n    if (\r\n      !__guard__(\r\n        __guard__(\r\n          this.session != null ? this.session.lastEvent : undefined,\r\n          (x1) => x1.touches\r\n        ),\r\n        (x) => x.length\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n    this.session.force = this.session.lastEvent.touches[0].force || 0;\r\n    const event = this._getGestureEvent(this.session.lastEvent);\r\n    this.forcetapchange(event);\r\n\r\n    if (this.session.force >= GestureInputForceTapMobile) {\r\n      this.forcetapstart(event);\r\n    } else {\r\n      this.forcetapend(event);\r\n    }\r\n\r\n    return setTimeout(\r\n      this._updateTouchForce,\r\n      GestureInputForceTapMobilePollTime\r\n    );\r\n  }\r\n\r\n  _updateMacForce(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    this.session.force = Utils.modulate(event.webkitForce, [0, 3], [0, 1]);\r\n    this.forcetapchange(this._getGestureEvent(event));\r\n\r\n    // Trigger a force touch if we reach the desktop threshold\r\n    if (event.webkitForce >= GestureInputForceTapDesktop) {\r\n      return this.forcetapstart(event);\r\n    } else {\r\n      return this.forcetapend(event);\r\n    }\r\n  }\r\n\r\n  forcetapchange(event) {\r\n    return this._dispatchEvent(\"forcetapchange\", event);\r\n  }\r\n\r\n  forcetapstart(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (this.session.started.forcetap) {\r\n      return;\r\n    }\r\n    this.session.started.forcetap = event;\r\n    this._dispatchEvent(\"forcetapstart\", event);\r\n    return this._dispatchEvent(\"forcetap\", event);\r\n  }\r\n\r\n  forcetapend(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n    if (!this.session.started.forcetap) {\r\n      return;\r\n    }\r\n    this.session.started.forcetap = null;\r\n    return this._dispatchEvent(\"forcetapend\", event);\r\n  }\r\n\r\n  // Pan\r\n\r\n  panstart(event) {\r\n    this.session.started.pan = event;\r\n    return this._dispatchEvent(\r\n      \"panstart\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n\r\n  pan(event) {\r\n    this._dispatchEvent(\"pan\", event, this.session.started.pan.target);\r\n    const direction = this._getDirection(event.delta);\r\n    if (direction) {\r\n      return this[`pan${direction}`](event);\r\n    }\r\n  }\r\n\r\n  panend(event) {\r\n    this._dispatchEvent(\"panend\", event, this.session.started.pan.target);\r\n    return (this.session.started.pan = null);\r\n  }\r\n\r\n  panup(event) {\r\n    return this._dispatchEvent(\"panup\", event, this.session.started.pan.target);\r\n  }\r\n  pandown(event) {\r\n    return this._dispatchEvent(\r\n      \"pandown\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n  panleft(event) {\r\n    return this._dispatchEvent(\r\n      \"panleft\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n  panright(event) {\r\n    return this._dispatchEvent(\r\n      \"panright\",\r\n      event,\r\n      this.session.started.pan.target\r\n    );\r\n  }\r\n\r\n  // Pinch\r\n\r\n  pinchstart(event) {\r\n    this.session.started.pinch = event;\r\n    this.scalestart(event, this.session.started.pinch.target);\r\n    this.rotatestart(event, this.session.started.pinch.target);\r\n    return this._dispatchEvent(\"pinchstart\", event);\r\n  }\r\n\r\n  pinch(event) {\r\n    this._dispatchEvent(\"pinch\", event);\r\n    this.scale(event, this.session.started.pinch.target);\r\n    return this.rotate(event, this.session.started.pinch.target);\r\n  }\r\n\r\n  pinchend(event) {\r\n    this._dispatchEvent(\"pinchend\", event);\r\n    this.scaleend(event, this.session.started.pinch.target);\r\n    this.rotateend(event, this.session.started.pinch.target);\r\n    return (this.session.started.pinch = null);\r\n  }\r\n\r\n  scalestart(event) {\r\n    return this._dispatchEvent(\"scalestart\", event);\r\n  }\r\n  scale(event) {\r\n    return this._dispatchEvent(\"scale\", event);\r\n  }\r\n  scaleend(event) {\r\n    return this._dispatchEvent(\"scaleend\", event);\r\n  }\r\n\r\n  rotatestart(event) {\r\n    return this._dispatchEvent(\"rotatestart\", event);\r\n  }\r\n  rotate(event) {\r\n    return this._dispatchEvent(\"rotate\", event);\r\n  }\r\n  rotateend(event) {\r\n    return this._dispatchEvent(\"rotateend\", event);\r\n  }\r\n\r\n  // Swipe\r\n\r\n  swipestart(event) {\r\n    this._dispatchEvent(\"swipestart\", event);\r\n    this.session.started.swipe = event;\r\n    return this.swipedirectionstart(event);\r\n  }\r\n\r\n  swipe(event) {\r\n    this._dispatchEvent(\"swipe\", event);\r\n    return this.swipedirection(event);\r\n  }\r\n\r\n  swipeend(event) {\r\n    return this._dispatchEvent(\"swipeend\", event);\r\n  }\r\n\r\n  // Direction swipe\r\n\r\n  swipedirectionstart(event) {\r\n    if (!event.offsetDirection) {\r\n      return;\r\n    }\r\n    if (this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    this.session.started.swipedirection = event;\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    this._dispatchEvent(`swipe${direction}start`, event);\r\n\r\n    const swipeEdge = this._edgeForSwipeDirection(direction);\r\n\r\n    if (\r\n      swipeEdge === \"top\" &&\r\n      0 < event.start.y &&\r\n      event.start.y < GestureInputEdgeSwipeDistance\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"right\" &&\r\n      Screen.width - GestureInputEdgeSwipeDistance < event.start.x &&\r\n      event.start.x < Screen.width\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"bottom\" &&\r\n      Screen.height - GestureInputEdgeSwipeDistance < event.start.y &&\r\n      event.start.y < Screen.height\r\n    ) {\r\n      this.edgeswipedirectionstart(event);\r\n    }\r\n    if (\r\n      swipeEdge === \"left\" &&\r\n      0 < event.start.x &&\r\n      event.start.x < GestureInputEdgeSwipeDistance\r\n    ) {\r\n      return this.edgeswipedirectionstart(event);\r\n    }\r\n  }\r\n\r\n  swipedirection(event) {\r\n    if (!this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    this._dispatchEvent(`swipe${direction}`, event);\r\n    if (this.session.started.edgeswipedirection) {\r\n      return this.edgeswipedirection(event);\r\n    }\r\n  }\r\n\r\n  swipedirectionend(event) {\r\n    if (!this.session.started.swipedirection) {\r\n      return;\r\n    }\r\n    const direction = this.session.started.swipedirection.offsetDirection;\r\n    return this._dispatchEvent(`swipe${direction}end`, event);\r\n  }\r\n\r\n  // Edge swipe\r\n\r\n  edgeswipedirection(event) {\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipe\", this._createEvent(\"edgeswipe\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}`,\r\n      this._createEvent(`edgeswipe${swipeEdge}`, event)\r\n    );\r\n  }\r\n\r\n  edgeswipedirectionstart(event) {\r\n    if (this.session.started.edgeswipedirection) {\r\n      return;\r\n    }\r\n    this.session.started.edgeswipedirection = event;\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipestart\", this._createEvent(\"edgeswipestart\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}start`,\r\n      this._createEvent(`edgeswipe${swipeEdge}start`, event)\r\n    );\r\n  }\r\n\r\n  edgeswipedirectionend(event) {\r\n    const swipeEdge = this._edgeForSwipeDirection(\r\n      this.session.started.edgeswipedirection.offsetDirection\r\n    );\r\n    Screen.emit(\"edgeswipeend\", this._createEvent(\"edgeswipeend\", event));\r\n    return Screen.emit(\r\n      `edgeswipe${swipeEdge}end`,\r\n      this._createEvent(`edgeswipe${swipeEdge}end`, event)\r\n    );\r\n  }\r\n\r\n  // Utilities\r\n\r\n  _process(event) {\r\n    if (!this.session) {\r\n      return;\r\n    }\r\n\r\n    this.session.events.push(event);\r\n    event.eventCount = this.session.eventCount++;\r\n\r\n    // Detect pan events\r\n\r\n    // See if there was any movement\r\n    if (Math.abs(event.delta.x) > 0 || Math.abs(event.delta.y) > 0) {\r\n      if (!this.session.started.pan) {\r\n        this.panstart(event);\r\n      } else {\r\n        this.pan(event);\r\n      }\r\n    }\r\n\r\n    // Detect pinch, rotate and scale events\r\n\r\n    // Stop panning if we go from 2 to 1 finger\r\n    if (this.session.started.pinch && event.fingers === 1) {\r\n      this.pinchend(event);\r\n      // If we did not start yet and get two fingers, start\r\n    } else if (!this.session.started.pinch && event.fingers === 2) {\r\n      this.pinchstart(event);\r\n      // If we did start send pinch events\r\n    } else if (this.session.started.pinch) {\r\n      this.pinch(event);\r\n    }\r\n\r\n    // Detect swipe events\r\n\r\n    // If we did not start but moved more then the swipe threshold, start\r\n    if (\r\n      !this.session.started.swipe &&\r\n      (Math.abs(event.offset.x) > GestureInputSwipeThreshold ||\r\n        Math.abs(event.offset.y) > GestureInputSwipeThreshold)\r\n    ) {\r\n      this.swipestart(event);\r\n      // If we did start send swipe events\r\n    } else if (this.session.started.swipe) {\r\n      this.swipe(event);\r\n    }\r\n\r\n    return (this.session.lastEvent = event);\r\n  }\r\n\r\n  _getEventPoint(event) {\r\n    if (event.touches != null ? event.touches.length : undefined) {\r\n      return this._getTouchPoint(event, 0);\r\n    }\r\n    return { x: event.pageX, y: event.pageY };\r\n  }\r\n\r\n  _getGestureEvent(event) {\r\n    // Convert the point to the current context\r\n    const eventPoint = Utils.convertPointFromContext(\r\n      this._getEventPoint(event),\r\n      Framer.CurrentContext,\r\n      true,\r\n      true\r\n    );\r\n    _.extend(event, {\r\n      time: Date.now(), // Current time \r\n\r\n      point: eventPoint, // Current point \r\n      start: eventPoint, // Start point \r\n      previous: eventPoint, // Previous point \r\n\r\n      offset: { x: 0, y: 0 }, // Offset since start \r\n      offsetTime: 0, // Time since start \r\n      offsetAngle: 0, // Angle from start \r\n      offsetDirection: null, // Direction from start (up, down, left, right) \r\n\r\n      delta: { x: 0, y: 0 }, // Offset since last event \r\n      deltaTime: 0, // Time since last event \r\n      deltaAngle: 0, // Angle from last event \r\n      deltaDirection: null, // Direction from last event \r\n\r\n      force: 0, // 3d touch or force touch, iOS/Mac only \r\n      velocity: { x: 0, y: 0 }, // Velocity average over the last few events \r\n\r\n      fingers: (event.touches != null ? event.touches.length : undefined) || 0, // Number of fingers used \r\n      touchCenter: eventPoint, // Center between two fingers \r\n      touchOffset: { x: 0, y: 0 }, // Offset between two fingers \r\n      touchDistance: 0, // Distance between two fingers \r\n      scale: 1, // Scale value from two fingers \r\n      scaleDirection: null, // Direction for scale: up or down \r\n      rotation: 0,\r\n    }); // Rotation value from two fingers \r\n\r\n    // Properties relative to a start event\r\n    if (this.session != null ? this.session.startEvent : undefined) {\r\n      event.start = this.session.startEvent.point;\r\n      event.offset = Utils.pointSubtract(event.point, event.start);\r\n      event.offsetTime = event.time - this.session.startEvent.time;\r\n      event.offsetAngle = Utils.pointAngle(\r\n        this.session.startEvent.point,\r\n        event.point\r\n      );\r\n      event.offsetDirection = this._getDirection(event.offset);\r\n      event.touchCenterStart = this.session.startEvent.touchCenter;\r\n    }\r\n\r\n    // Properties relative to the previous event\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      event.previous = this.session.lastEvent.point;\r\n      event.deltaTime = event.time - this.session.lastEvent.time;\r\n      event.delta = Utils.pointSubtract(\r\n        event.point,\r\n        this.session.lastEvent.point\r\n      );\r\n      event.deltaAngle = Utils.pointAngle(\r\n        event.point,\r\n        this.session.lastEvent.point\r\n      );\r\n      event.deltaDirection = this._getDirection(event.delta);\r\n    }\r\n\r\n    // Properties related to multi touch\r\n    if (event.fingers > 1) {\r\n      const touchPointA = this._getTouchPoint(event, 0);\r\n      const touchPointB = this._getTouchPoint(event, 1);\r\n      event.touchCenter = Utils.pointCenter(touchPointB, touchPointA);\r\n      event.touchOffset = Utils.pointSubtract(touchPointB, touchPointA);\r\n      event.touchDistance = _.max([\r\n        GestureInputMinimumFingerDistance,\r\n        Utils.pointDistance(touchPointA, touchPointB),\r\n      ]);\r\n      event.rotation = Utils.pointAngle(touchPointA, touchPointB);\r\n    }\r\n\r\n    // Special cases\r\n\r\n    // Velocity\r\n    if (this.session != null ? this.session.events : undefined) {\r\n      const events = _.filter(this.session.events, function (e) {\r\n        if (e.eventCount === 0) {\r\n          return false;\r\n        }\r\n        return e.time > event.time - GestureInputVelocityTime * 1000;\r\n      });\r\n\r\n      event.velocity = this._getVelocity(events);\r\n    }\r\n\r\n    // Scale can only be set after we started a pinch session\r\n    if (this.session != null ? this.session.started.pinch : undefined) {\r\n      event.scale =\r\n        event.touchDistance / this.session.started.pinch.touchDistance;\r\n      event.scaleDirection = this._getScaleDirection(\r\n        event.scale - this.session.lastEvent.scale\r\n      );\r\n\r\n      // If this is a pinch end event, there was no movement so we use the last one\r\n      if (\r\n        !event.scaleDirection &&\r\n        (this.session != null ? this.session.lastEvent : undefined)\r\n      ) {\r\n        event.scaleDirection = this.session.lastEvent.scaleDirection;\r\n      }\r\n    }\r\n\r\n    // For delta we switch to center-compare if there are two fingers\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      // If we just switched fingers, we skip the delta event entirely\r\n      if (\r\n        event.fingers !== this.session.lastEvent.fingers &&\r\n        this.session.lastEvent.fingers === 2\r\n      ) {\r\n        event.delta = { x: 0, y: 0 };\r\n      }\r\n      // If we are having two finger events, we use the touchCenter as base for delta\r\n      if (event.fingers === 2 && this.session.lastEvent.fingers === 2) {\r\n        event.delta = Utils.pointSubtract(\r\n          event.touchCenter,\r\n          this.session.lastEvent.touchCenter\r\n        );\r\n      }\r\n    }\r\n\r\n    // Force touch\r\n    if (this.session != null ? this.session.lastEvent : undefined) {\r\n      if (this.session.force) {\r\n        event.force = this.session.force;\r\n      }\r\n    }\r\n\r\n    // Convert point style event properties to dom style:\r\n    // event.delta -> event.deltaX, event.deltaY\r\n    for (var pointKey of [\r\n      \"point\",\r\n      \"start\",\r\n      \"previous\",\r\n      \"offset\",\r\n      \"delta\",\r\n      \"velocity\",\r\n      \"touchCenter\",\r\n      \"touchOffset\",\r\n    ]) {\r\n      event[`${pointKey}X`] = event[pointKey].x;\r\n      event[`${pointKey}Y`] = event[pointKey].y;\r\n    }\r\n\r\n    return event;\r\n  }\r\n\r\n  _getTouchPoint(event, index) {\r\n    let point;\r\n    return (point = {\r\n      x: event.touches[index].pageX,\r\n      y: event.touches[index].pageY,\r\n    });\r\n  }\r\n\r\n  _getDirection(offset) {\r\n    if (Math.abs(offset.x) > Math.abs(offset.y)) {\r\n      if (offset.x > 0) {\r\n        return \"right\";\r\n      }\r\n      if (offset.x < 0) {\r\n        return \"left\";\r\n      }\r\n    }\r\n    if (Math.abs(offset.x) < Math.abs(offset.y)) {\r\n      if (offset.y < 0) {\r\n        return \"up\";\r\n      }\r\n      if (offset.y > 0) {\r\n        return \"down\";\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _edgeForSwipeDirection(direction) {\r\n    if (direction === \"down\") {\r\n      return \"top\";\r\n    }\r\n    if (direction === \"left\") {\r\n      return \"right\";\r\n    }\r\n    if (direction === \"up\") {\r\n      return \"bottom\";\r\n    }\r\n    if (direction === \"right\") {\r\n      return \"left\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _getScaleDirection(offset) {\r\n    if (offset > 0) {\r\n      return \"up\";\r\n    }\r\n    if (offset < 0) {\r\n      return \"down\";\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _createEvent(type, event) {\r\n    const touchEvent = document.createEvent(\"MouseEvent\");\r\n    touchEvent.initMouseEvent(\r\n      type,\r\n      true,\r\n      true,\r\n      window,\r\n      event.detail,\r\n      event.screenX,\r\n      event.screenY,\r\n      event.clientX,\r\n      event.clientY,\r\n      event.ctrlKey,\r\n      event.shiftKey,\r\n      event.altKey,\r\n      event.metaKey,\r\n      event.button,\r\n      event.relatedTarget\r\n    );\r\n\r\n    touchEvent.touches = event.touches;\r\n    touchEvent.changedTouches = event.touches;\r\n    touchEvent.targetTouches = event.touches;\r\n\r\n    for (var k in event) {\r\n      var v = event[k];\r\n      touchEvent[k] = v;\r\n    }\r\n\r\n    return touchEvent;\r\n  }\r\n\r\n  _dispatchEvent(type, event, target) {\r\n    const touchEvent = this._createEvent(type, event);\r\n    // By default we want to send the event to the target at the beginning\r\n    // of this session, so we catch tap ends etc when the mouse is released\r\n    // outside of the original target.\r\n    if (target == null) {\r\n      target = __guard__(\r\n        this.session != null ? this.session.startEvent : undefined,\r\n        (x) => x.target\r\n      );\r\n    }\r\n    if (target == null) {\r\n      ({ target } = event);\r\n    }\r\n    return target.dispatchEvent(touchEvent);\r\n  }\r\n\r\n  _getVelocity(events) {\r\n    if (events.length < 2) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n\r\n    const current = events[events.length - 1];\r\n    const first = events[0];\r\n    const time = current.time - first.time;\r\n\r\n    const velocity = {\r\n      x: (current.point.x - first.point.x) / time,\r\n      y: (current.point.y - first.point.y) / time,\r\n    };\r\n\r\n    if (velocity.x === Infinity) {\r\n      velocity.x = 0;\r\n    }\r\n    if (velocity.y === Infinity) {\r\n      velocity.y = 0;\r\n    }\r\n\r\n    return velocity;\r\n  }\r\n}\r\n\r\nfunction __guard__(value, transform) {\r\n  return typeof value !== \"undefined\" && value !== null\r\n    ? transform(value)\r\n    : undefined;\r\n}\r\n","import { BaseClass } from \"./BaseClass.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport Utils from \"./Utils.js\";\r\n\r\nexport class Canvas extends BaseClass {\r\n  static initClass() {\r\n    this.define(\"width\", { get: () => window.innerWidth });\r\n    this.define(\"height\", { get: () => window.innerHeight });\r\n    this.define(\"size\", { get: () => Utils.size(this) });\r\n    this.define(\"frame\", { get: () => Utils.frame(this) });\r\n\r\n    this.define(\"backgroundColor\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get: () => Framer.Device.background.backgroundColor,\r\n      set: (value) => (Framer.Device.background.backgroundColor = value),\r\n    });\r\n\r\n    this.define(\"image\", {\r\n      importable: false,\r\n      exportable: false,\r\n      get: () => Framer.Device.background.image,\r\n      set: (value) => (Framer.Device.background.image = value),\r\n    });\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    super(options);\r\n    this._handleResize = this._handleResize.bind(this);\r\n    Events.wrap(window).addEventListener(\"resize\", this._handleResize);\r\n  }\r\n\r\n  onResize(cb) {\r\n    return this.on(\"resize\", cb);\r\n  }\r\n\r\n  _handleResize(event) {\r\n    if (!Screen.device) {\r\n      Screen.emit(\"resize\");\r\n    }\r\n    this.emit(\"resize\");\r\n    this.emit(\"change:width\");\r\n    this.emit(\"change:height\");\r\n    this.emit(\"change:size\");\r\n    this.emit(\"change:frame\");\r\n  }\r\n\r\n  toInspect() {\r\n    return `<${this.constructor.name} ${this.width}x${this.height}>`;\r\n  }\r\n\r\n  // Point Conversion\r\n  convertPointToLayer(point, layer) {\r\n    return Utils.convertPointFromContext(point, layer, true, true);\r\n  }\r\n\r\n  convertPointToScreen(point) {\r\n    const ctx = Framer.Device.context;\r\n    return Utils.convertPointFromContext(point, ctx, true, true);\r\n  }\r\n}\r\n\r\n// Initialize static definitions\r\nCanvas.initClass();\r\n","// This gets automatically populated bij gulp\r\n\r\nexports.date = 1762655598;\r\nexports.branch = \"main\";\r\nexports.hash = \"ad96cba2-dirty\";\r\nexports.build = 3296;\r\nexports.version = `${exports.branch}/${exports.hash}`;\r\n","import { _ } from \"./Underscore.js\";\r\nimport Utils from \"./Utils.js\";\r\nimport { Color } from \"./Color.js\";\r\nimport { Gradient } from \"./Gradient.js\";\r\nimport { Layer } from \"./Layer.js\";\r\nimport { BackgroundLayer } from \"./BackgroundLayer.js\";\r\nimport { VideoLayer } from \"./VideoLayer.js\";\r\nimport { SVGLayer } from \"./SVGLayer.js\";\r\nimport { SVGPath } from \"./SVGPath.js\";\r\nimport { SVGGroup } from \"./SVGGroup.js\";\r\nimport { TextLayer } from \"./TextLayer.js\";\r\nimport { Events } from \"./Events.js\";\r\nimport { Gestures } from \"./Gestures.js\";\r\nimport { Animation } from \"./Animation.js\";\r\nimport { AnimationGroup, AnimationStateGroup } from \"./AnimationGroup.js\";\r\nimport { Screen } from \"./Screen.js\";\r\nimport { Align } from \"./Align.js\";\r\nimport { Blending } from \"./Blending.js\";\r\nimport { print } from \"./Print.js\";\r\n\r\nimport { ScrollComponent } from \"./Components/ScrollComponent.js\";\r\nimport { PageComponent } from \"./Components/PageComponent.js\";\r\nimport { SliderComponent } from \"./Components/SliderComponent.js\";\r\nimport { RangeSliderComponent } from \"./Components/RangeSliderComponent.js\";\r\nimport { DeviceComponent } from \"./Components/DeviceComponent.js\";\r\nimport { GridComponent } from \"./Components/GridComponent.js\";\r\nimport { FlowComponent } from \"./Components/FlowComponent.js\";\r\nimport { CircularProgressComponent } from \"./Components/CircularProgressComponent.js\";\r\nimport { MIDIComponent } from \"./Components/MIDIComponent.js\";\r\n\r\nimport { Context } from \"./Context.js\";\r\nimport { Config } from \"./Config.js\";\r\nimport { EventEmitter } from \"./EventEmitter.js\";\r\nimport { BaseClass } from \"./BaseClass.js\";\r\nimport { LayerStyle } from \"./LayerStyle.js\";\r\nimport { AnimationLoop } from \"./AnimationLoop.js\";\r\nimport { LinearAnimator } from \"./Animators/LinearAnimator.js\";\r\nimport { BezierCurveAnimator } from \"./Animators/BezierCurveAnimator.js\";\r\nimport { SpringDHOAnimator } from \"./Animators/SpringDHOAnimator.js\";\r\nimport { SpringRK4Animator } from \"./Animators/SpringRK4Animator.js\";\r\nimport * as Curves from \"./Animators/Curves.js\";\r\nimport { Importer } from \"./Importer.js\";\r\nimport * as Extras from \"./Extras/Extras.js\";\r\nimport { GestureInputRecognizer } from \"./GestureInputRecognizer.js\";\r\nimport { Defaults } from \"./Defaults.js\";\r\nimport { Canvas } from \"./Canvas.js\";\r\n\r\n// Import version file generated by Vite build\r\nimport * as Version from \"../build/version.js\";\r\n\r\nconst Framer = {};\r\n\r\n// Root modules\r\nFramer._ = _;\r\nFramer.Utils = Utils;\r\nFramer.Color = Color;\r\nFramer.Gradient = Gradient;\r\nFramer.Layer = Layer;\r\nFramer._Layer = Layer;\r\nFramer.BackgroundLayer = BackgroundLayer;\r\nFramer.VideoLayer = VideoLayer;\r\nFramer.SVGLayer = SVGLayer;\r\nFramer.SVGPath = SVGPath;\r\nFramer.SVGGroup = SVGGroup;\r\nFramer.TextLayer = TextLayer;\r\nFramer.Events = Events;\r\nFramer.Gestures = Gestures;\r\nFramer.Animation = Animation;\r\nFramer.AnimationGroup = AnimationGroup;\r\nFramer.AnimationStateGroup = AnimationStateGroup;\r\nFramer.Screen = Screen;\r\nFramer.Align = Align;\r\nFramer.Blending = Blending;\r\nFramer.print = print;\r\n\r\n// Components\r\nFramer.ScrollComponent = ScrollComponent;\r\nFramer.PageComponent = PageComponent;\r\nFramer.SliderComponent = SliderComponent;\r\nFramer.RangeSliderComponent = RangeSliderComponent;\r\nFramer.DeviceComponent = DeviceComponent;\r\nFramer.DeviceView = DeviceComponent;\r\nFramer.GridComponent = GridComponent;\r\nFramer.FlowComponent = FlowComponent;\r\nFramer.CircularProgressComponent = CircularProgressComponent;\r\nFramer.MIDIComponent = MIDIComponent;\r\n\r\n// Framer level modules\r\nFramer.Context = Context;\r\nFramer.Config = Config;\r\nFramer.EventEmitter = EventEmitter;\r\nFramer.BaseClass = BaseClass;\r\nFramer.LayerStyle = LayerStyle;\r\nFramer.AnimationLoop = AnimationLoop;\r\nFramer.LinearAnimator = LinearAnimator;\r\nFramer.BezierCurveAnimator = BezierCurveAnimator;\r\nFramer.SpringDHOAnimator = SpringDHOAnimator;\r\nFramer.SpringRK4Animator = SpringRK4Animator;\r\nFramer.LayerDraggable = Layer;\r\n\r\nFramer.Curves = Curves;\r\nif (typeof window !== \"undefined\") {\r\n  window.Bezier = Curves.Bezier;\r\n  window.Spring = Curves.Spring;\r\n}\r\n\r\nFramer.Importer = Importer;\r\nFramer.Extras = Extras;\r\n\r\nFramer.GestureInputRecognizer = new GestureInputRecognizer();\r\nFramer.Version = Version;\r\nFramer.Loop = new AnimationLoop();\r\n\r\n// Metadata\r\nFramer.Info = {};\r\n\r\n// Attach to window safely\r\nif (typeof window !== \"undefined\") {\r\n  _.extend(window, Framer);\r\n  window.Framer = Framer;\r\n}\r\n\r\n// Set defaults\r\nDefaults.setup();\r\nFramer.resetDefaults = Defaults.reset;\r\n\r\n// Default context\r\nFramer.DefaultContext = new Context({ name: \"Default\" });\r\nFramer.DefaultContext.backgroundColor = \"white\";\r\nFramer.CurrentContext = Framer.DefaultContext;\r\n\r\n// Canvas\r\nif (typeof window !== \"undefined\") {\r\n  window.Canvas = new Canvas();\r\n}\r\n\r\n// Extras\r\nif (Utils.isMobile()) Framer.Extras.MobileScrollFix.enable();\r\nif (!Utils.isTouch()) Framer.Extras.TouchEmulator.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.ErrorDisplay.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.Preloader.enable();\r\nif (!Utils.isFramerStudio()) Framer.Extras.Hints.enable();\r\n\r\nUtils.domComplete(() => Framer.Loop.start());\r\n\r\nexport default Framer;\r\n"],"names":["undefined","VERSION","LARGE_ARRAY_SIZE","CORE_ERROR_TEXT","FUNC_ERROR_TEXT","INVALID_TEMPL_VAR_ERROR_TEXT","HASH_UNDEFINED","MAX_MEMOIZE_SIZE","PLACEHOLDER","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","WRAP_BIND_FLAG","WRAP_BIND_KEY_FLAG","WRAP_CURRY_BOUND_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","WRAP_FLIP_FLAG","DEFAULT_TRUNC_LENGTH","DEFAULT_TRUNC_OMISSION","HOT_COUNT","HOT_SPAN","LAZY_FILTER_FLAG","LAZY_MAP_FLAG","LAZY_WHILE_FLAG","INFINITY","MAX_SAFE_INTEGER","MAX_INTEGER","NAN","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","HALF_MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","asyncTag","boolTag","dateTag","domExcTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","weakSetTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reWhitespace","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reForbiddenIdentifierChars","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","deburredLetters","htmlEscapes","htmlUnescapes","stringEscapes","freeParseFloat","freeParseInt","freeGlobal","global","freeSelf","root","freeExports","exports","freeModule","module","moduleExports","freeProcess","nodeUtil","types","nodeIsArrayBuffer","nodeIsDate","nodeIsMap","nodeIsRegExp","nodeIsSet","nodeIsTypedArray","apply","func","thisArg","args","arrayAggregator","array","setter","iteratee","accumulator","index","length","value","arrayEach","arrayEachRight","arrayEvery","predicate","arrayFilter","resIndex","result","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","values","offset","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","asciiToArray","string","asciiWords","baseFindKey","collection","eachFunc","key","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","object","basePropertyOf","baseReduce","baseSortBy","comparer","current","baseTimes","n","baseToPairs","props","baseTrim","trimmedEndIndex","baseUnary","baseValues","cacheHas","cache","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","chr","getValue","hasUnicode","hasUnicodeWord","iteratorToArray","iterator","data","mapToArray","map","overArg","transform","arg","replaceHolders","setToArray","set","setToPairs","strictLastIndexOf","stringSize","unicodeSize","stringToArray","unicodeToArray","unescapeHtmlChar","unicodeWords","runInContext","context","_","Array","Date","Error","Function","Math","Object","RegExp","String","TypeError","arrayProto","funcProto","objectProto","coreJsData","funcToString","hasOwnProperty","idCounter","maskSrcKey","uid","nativeObjectToString","objectCtorString","oldDash","reIsNative","Buffer","Symbol","Uint8Array","allocUnsafe","getPrototype","objectCreate","propertyIsEnumerable","splice","spreadableSymbol","symIterator","symToStringTag","defineProperty","getNative","ctxClearTimeout","ctxNow","ctxSetTimeout","nativeCeil","nativeFloor","nativeGetSymbols","nativeIsBuffer","nativeIsFinite","nativeJoin","nativeKeys","nativeMax","nativeMin","nativeNow","nativeParseInt","nativeRandom","nativeReverse","DataView","Map","Promise","Set","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","symbolToString","lodash","isObjectLike","isArray","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","lazyClone","copyArray","lazyReverse","lazyValue","dir","isArr","isRight","arrLength","view","getView","start","end","iteratees","iterLength","takeCount","baseWrapperValue","outer","iterIndex","type","computed","Hash","entries","entry","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","size","SetCache","setCacheAdd","setCacheHas","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArg","isArguments","isBuff","isBuffer","isType","isTypedArray","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","baseAggregator","baseEach","baseAssign","source","copyObject","keys","baseAssignIn","keysIn","baseAt","paths","skip","get","number","lower","upper","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","initCloneArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","copySymbols","initCloneByTag","stacked","isSet","subValue","isMap","keysFunc","getAllKeysIn","getAllKeys","baseConforms","baseConformsTo","baseDelay","wait","setTimeout","baseDifference","includes","isCommon","valuesLength","valuesIndex","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFill","toInteger","toLength","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","path","castPath","toKey","baseGetAllKeys","symbolsFunc","baseGetTag","getRawTag","objectToString","baseGt","other","baseHas","baseHasIn","baseInRange","baseIntersection","arrays","othLength","othIndex","caches","maxLength","seen","baseInverter","baseInvoke","parent","last","baseIsArguments","baseIsArrayBuffer","baseIsDate","baseIsEqual","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsMap","baseIsMatch","matchData","noCustomizer","srcValue","baseIsNative","isMasked","pattern","baseIsRegExp","baseIsSet","baseIsTypedArray","isLength","baseIteratee","identity","baseMatchesProperty","baseMatches","property","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","baseMergeDeep","newValue","safeGet","mergeFunc","isTyped","isArrayLikeObject","cloneTypedArray","isPlainObject","toPlainObject","baseNth","baseOrderBy","orders","getIteratee","criteria","compareMultiple","basePick","basePickBy","baseSet","basePropertyDeep","basePullAll","indexOf","basePullAt","indexes","previous","baseUnset","baseRange","step","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","low","high","mid","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","actions","action","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","toString","castRest","castSlice","clearTimeout","id","buffer","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneRegExp","regexp","cloneSymbol","symbol","typedArray","compareAscending","valIsDefined","valIsReflexive","objCriteria","othCriteria","ordersLength","order","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","getSymbols","getSymbolsIn","createAggregator","initializer","createAssigner","assigner","sources","guard","isIterateeCall","iterable","createBind","isBind","Ctor","createCtor","wrapper","fn","createCaseFirst","methodName","trailing","createCompounder","callback","words","deburr","thisBinding","createCurry","arity","getHolder","createRecurry","createHybrid","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","getFuncName","funcName","getData","isLaziable","partialsRight","holdersRight","argPos","ary","isAry","isBindKey","isFlip","holdersCount","newHolders","reorder","createInverter","toIteratee","createMathOperation","operator","defaultValue","createOver","arrayFunc","createPadding","chars","charsLength","createPartial","createRange","toFinite","createRelationalOperation","toNumber","wrapFunc","isCurry","newHoldersRight","newPartials","newPartialsRight","newData","setData","setWrapToString","createRound","precision","pair","noop","createToPairs","createWrap","mergeData","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","isPartial","arrStacked","othStacked","arrValue","othValue","compared","convert","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","flatten","otherFunc","isKeyable","isOwn","unmasked","stubArray","ctorString","transforms","getWrapDetails","match","hasPath","hasFunc","insertWrapDetails","details","isMaskable","stubFalse","memoizeCapped","memoize","srcBitmask","newBitmask","isCombo","otherArgs","oldArray","shortOut","reference","updateWrapDetails","count","lastCalled","stamp","remaining","rand","quote","subString","chunk","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","fill","findIndex","findLastIndex","flattenDeep","flattenDepth","fromPairs","head","initial","intersection","mapped","intersectionBy","intersectionWith","join","separator","lastIndexOf","nth","pull","pullAll","pullAllBy","pullAllWith","pullAt","remove","reverse","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","group","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","chain","tap","interceptor","thru","wrapperAt","wrapperChain","wrapperCommit","wrapperNext","toArray","done","wrapperToIterator","wrapperPlant","clone","wrapperReverse","wrapped","wrapperValue","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","forEach","forEachRight","groupBy","isString","invokeMap","keyBy","orderBy","partition","reduce","reduceRight","reject","negate","sample","sampleSize","shuffle","some","sortBy","now","after","before","bind","bindKey","curry","curryRight","debounce","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","time","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","defer","delay","flip","resolver","memoized","once","overArgs","funcsLength","partial","partialRight","rearg","rest","spread","throttle","unary","wrap","castArray","cloneWith","cloneDeep","cloneDeepWith","conformsTo","gt","gte","isArrayBuffer","isBoolean","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isInteger","isMatch","isMatchWith","isNaN","isNumber","isNative","isNull","isNil","isRegExp","isSafeInteger","isUndefined","isWeakMap","isWeakSet","lt","lte","sign","remainder","isBinary","toSafeInteger","assign","assignIn","assignInWith","assignWith","at","create","prototype","properties","defaults","propsIndex","propsLength","defaultsDeep","mergeWith","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","functions","functionsIn","has","invert","invertBy","invoke","mapKeys","mapValues","merge","omit","omitBy","pickBy","pick","prop","setWith","toPairs","toPairsIn","isArrLike","unset","update","updateWith","valuesIn","clamp","inRange","random","floating","temp","camelCase","word","capitalize","upperFirst","endsWith","target","position","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","pad","strLength","padEnd","padStart","parseInt","radix","repeat","replace","snakeCase","split","limit","startCase","startsWith","template","settings","imports","importsKeys","importsValues","isEscaping","isEvaluating","interpolate","reDelimiters","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","variable","attempt","toLower","toUpper","trim","trimEnd","trimStart","truncate","omission","substring","newEnd","unescape","upperCase","e","bindAll","methodNames","cond","conforms","defaultTo","flow","flowRight","matches","matchesProperty","method","methodOf","mixin","noConflict","nthArg","over","overEvery","overSome","propertyOf","range","rangeRight","stubObject","stubString","stubTrue","times","toPath","uniqueId","prefix","add","augend","addend","ceil","divide","dividend","divisor","floor","max","maxBy","mean","meanBy","min","minBy","multiply","multiplier","multiplicand","round","subtract","minuend","subtrahend","sum","sumBy","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","this","skew","rad","m","point","x","y","z","w","aa","a","b","c","ba","d","p","q","ca","da","t","u","v","f","g","ea","A","B","C","D","E","F","G","fa","H","I","J","ga","ha","ia","K","L","ja","ka","M","N","O","P","Q","R","S","T","U","la","V","ma","W","X","na","oa","pa","qa","h","l","k","r","xa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Y","Z","Utils","obj","part","val","fields","i","field","currentValue","arr","item","sorted","increment","timer","threshold","immediate","timeout","delayed","hash","currentArg","alpha","layer","photos","photo","names","geometric","Enum","name","j","text","style","fontSize","className","extract","str","code","objectInfo","objectType","output","digit","layers","selector","getHierarchyString","hierarchyMatch","hierarchy","regexString","curr","total","version","url","baseUrl","isBeta","isLocal","isFuture","os","appleFont","googleFont","microsoftFont","fonts","unavailableFonts","font","constraints","shouldCreateNode","rect","config","allLoadedResult","currentFont","currentFontLoaded","customActive","customInactive","customFontactive","customFontinactive","resolve","weight","fontToLoad","decimals","fromLow","fromHigh","toLow","toHigh","fontFamily","__guard__","x1","x2","x3","event","element","eventName","script","request","err","handleError","css","styleElement","input","fraction","pointA","pointB","points","frame","scale","sizes","minX","maxX","minY","maxY","xValues","yValues","width","height","parentFrame","child","constraintValues","ratio","frames","frameA","frameB","originX","originY","inset","distance","vs","inside","xi","yi","xj","yj","intersect","rectA","y1","y2","lastValue","diff","maxDiff","nTimes","rootContext","includeLayer","containers","container","convertedCorners","node","layerA","layerB","contextCornerPoints","boundingFrame","ox","oy","ppm","importedLayers","layerName","message","regex","existingElement","EE","EventEmitter","events","exists","evt","available","ee","a1","a2","a3","a4","a5","listeners","len","listener","eventNames","propertyList","descriptor","propertyName","depend","fallback","__guardMethod__","o","keyPath","objectKey","Class","cb","proxy","optionValue","Color","color","color1","allow3Char","rgb","husl","hsl","hex","amount","colorB","model","colorA","hslA","hslB","fromH","toH","deltaH","tween","colorString","tolerance","colorModel","needle","s","hue2rgb","processPercent","char","css_unit","permissive_match3","permissive_match4","percentage","trimLeft","trimRight","Gradient","gradientB","gradientA","angle","hue","gradient","equalAngle","equalStart","equalEnd","Events","enable","Defaults","optsClone","classValues","svgLayer","scaleX","scaleY","offsetX","offsetY","imageWidth","imageHeight","imageRatio","realWidth","realHeight","validScaleX","validScaleY","fillBackground","elements","PathClass","GroupClass","targets","children","defsResult","BezierCurveAnimator","SpringRK4Animator","Spring","dampingRatio","mass","velocity","curveOptions","duration","derivedOptions","animator","argumentsRegex","argumentObject","numbersRegex","numbers","definition","curve","unit","Animation","Curves.fromString","Curves.Spring","Curves.Bezier","animation","emit","delta","direction","propKeys","valueA","valueB","propKey","keyValueA","keyValueB","numShadows","asc","left","fromShadow","toShadow","fromData","toData","targetData","animatableProperties","derivedKey","derivedKeys","shadowIndex","pixelMultiplier","num","createString","shadow","dpr","shadowString","cssName","layerPropertyName","shadowStrings","factor","radius","borderWidth","left1","borderTopBottom","borderRightLeft","borderTop","borderBottom","borderLeft","borderRight","topRatio","leftRatio","padding","states","stateName","opts","stateNameA","stateNameB","startAnimation","stateSwitched","switchState","onStart","onStop","onEnd","instantProps","suggestion","state","capture","methods","LayerStates","_machine","stateProperties","accelerationForState","dt","dxdt","dvdt","initialState","derivative","positionNearZero","velocityNearZero","bound","force","belowMinWithVelocity","aboveMaxWithVelocity","belowMinTravelingBack","aboveMaxTravelingBack","check","friction","BaseEvents","SimulatorClass","animatingProperties","layerProperties","first","p1","p2","payload","constrainedPoint","constraintsOffset","touchEvent","bounds","proposedPoint","xFinished","yFinished","correctedDelta","axis","simulation","updatePoint","startSimulationX","startSimulationY","velocityX","velocityY","topBefore","pinchLocation","topAfter","originDelta","rotation","getter","targetDesc","desc","layerProperty","cssProperty","validator","transformer","targetElement","includeMainElement","useSubpropertyProxy","oldValue","mainElement","subElement","elementContainer","proxiedValue","subProperty","isValidObject","layerOrContext","Layer","shadowProp","shadows","needle3","needle1","needle2","ids","isBackgroundColorDefault","imageUrl","oldParent","result1","newParent","tmp","self","left2","factorX","factorY","o1","layerScaledFrame","getComputedStyle","query","copiedChild","copy","toRoot","includePending","maxIndex","siblings","minIndex","touch","targetLayer","highlightFrame","constructor","video","sizeProp","layerSize","svgSize","propName","proxiedName","pathProps","indicesToRemove","matrix","measuredElement","svgMeasure","cssProp","attributes","attribute","defineProp","strokeStart","strokeEnd","strokeStartEndUpdater","isStart","link","startLength","endLength","dasharray","gap","from","to","relativeToLayer","privateProp","childValue","persistedValue","htmlString","svgNode","idElements","svg","SVGLayer","configuration","maybeLineBreak","span","search","block","inline","templateRanges","inlineStyle","div","totalWidth","firstStyle","textOverflow","maxLines","currentIndex","newText","combinedText","styledText","blockDiv","elementFont","currentSize","measuredWidth","measuredHeight","constrainedHeight","lineHeight","availableHeight","visibleLines","firstRange","formatter","promise","firstName","oldText","fontWeight","explicitWidth","explicitHeight","topAndBottom","heightFactor","forceRender","constrainedWidth","calculatedSize","animations","ctx","Screen","align","Align","Blending","webkitPerspective","layerId","interval","previousContext","layerListeners","parentElement","ignoredArgument","printPrefix","printNode","print","contentInset","contentFrame","constraintsFrame","scrollPoint","animate","animationOptions","contentPoint","contentLayer","closestLayer","adjustedLength","deltaX","deltaY","ScrollComponent","instance","scroll","isPageComponent","screenFrame","currentPage","withoutCurrentPage","page","nextPage","directions","xDisabled","yDisabled","xLock","yLock","isRound","Knob","touchX","touchY","knob","clickedValue","snapToPixels","fullScreen","deviceType","device","lDevicetype","lKey","shouldZoomToFit","hideBezel","deviceScale","contentScale","orientation","orientationName","contentScaleFactor","screenSizeChanged","clientWidth","clientHeight","newHeight","pixelRatio","deviceProps","resourceUrl","forceHide","phoneScale","windowWidth","windowHeight","dimension","paddingOffset","suggestedSize","handsProperties","contentProperties","previousBackgroundColor","previousScreenBackgroundVisiblity","hands","nextHandIndex","nextHand","hand","handData","column","row","cell","layerOrOptions","transitionFunction","wrappedLayer","overlay","transition","flowLayer","previousWrappingContent","previousWrappingScroll","content","forwardEvents","candidate","attachedLeft","atttachedRight","attachedTop","attachedBottom","header","footer","bodyFrame","body","headerHeight","nav","strokeDashArray","strokeDashOffset","shape","animated","dynamicTime","animationProperties","access","error","sourceID","timeStamp","b1","b2","b3","command","channel","data1","data2","info","Config","webkitVersion","previousTime","deltaTime","currentTime","tick","p1x","p1y","p2x","p2y","t2","d2","t0","t1","F_spring","F_damper","stateBefore","stateAfter","netValueIsLow","netVelocityIsLow","suffix","extraLayerProperties","layerInfo","importedKey","response","LayerClass","childInfo","artboards","traverse","identifier","touches","fromElement","centerPoint","offsetPoint","startTopScroll","ClassWrapper","Klass","wrappedDoc","image","player","finalize","layout","logoUrl","startEvent","isSameTarget","isShortSession","isShortDistance","swipeEdge","eventPoint","touchPointA","touchPointB","pointKey","Canvas","Framer","CircularProgressComponent"],"mappings":"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I,KAAK,OACH,WACAu0C,gBAAc,KAAM,WAAY,eAAgB,KAAMv0C,IAAE,QAAQ,CACtE,EAEI,KAAK,OACH,iBACAu0C,gBACE,KACA,iBACA,uBACA,EACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,uBACAu0C,gBACE,KACA,uBACA,uBACA,IACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,qBACAu0C,gBACE,KACA,qBACA,uBACA,IACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,sBACAu0C,gBACE,KACA,sBACA,uBACA,EACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,qBACAu0C,gBACE,KACA,qBACA,uBACA,IACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,mBACAu0C,gBACE,KACA,mBACA,uBACA,EACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,sBACAu0C,gBACE,KACA,sBACA,uBACA,EACAv0C,IAAE,QACV,CACA,EACI,KAAK,OACH,kBACAu0C,gBACE,KACA,kBACA,uBACA,EACAv0C,IAAE,QACV,CACA,EAEI,KAAK,OACH,iBACAu0C,gBACE,KACA,iBACA,iBACA,OACAv0C,IAAE,QACV,CACA,EAEI,QAASm9B,EAAI,EAAGA,GAAK,EAAGA,KACpBA,GACO,KAAK,OAAO,SAASA,EAAI,CAAC,GAAI,CACnC,WAAY,GACZ,QAAS,CACP,UACA,UACA,aACA,eACA,cACA,YACZ,EACU,KAAM,CACJ,OAAI,KAAK,SAAW,OAClB,KAAK,QAAU,IAEb,KAAK,QAAQA,CAAC,GAAK,OACrB,KAAK,QAAQA,CAAC,EAAI,mBAAmB,KAAM,CAAA,EAAIA,CAAC,GAE3C,KAAK,QAAQA,CAAC,CACvB,EACA,IAAI1iC,EAAO,CACT,OAAI,KAAK,SAAW,OAClB,KAAK,QAAU,IAEjB,KAAK,QAAQ0iC,CAAC,EAAI,mBAAmB,KAAM1iC,EAAO0iC,CAAC,EAC5C,KAAK,mBACd,CACV,CAAS,GACAA,CAAC,EAIN,QAASoY,IAAc,CAAC,IAAK,IAAK,OAAQ,SAAU,QAAS,MAAM,GAC/DA,GACO,KAAK,OAAO,SAASA,CAAU,GAAI,CACxC,KAAM,CACJ,OAAI,KAAK,SAAW,MAAQ,KAAK,QAAQ,SAAW,EAC3C,KAEF,KAAK,QAAQ,CAAC,EAAEA,EAAW,YAAW,CAAE,CACjD,EACA,IAAI96C,EAAO,CACT,OAAO,KAAK,sBAAsB86C,EAAW,YAAW,EAAI96C,CAAK,CACnE,CACV,CAAS,GACA86C,CAAU,EAGf,KAAK,OAAO,UAAW,CACrB,QAAS,KACT,KAAM,CACJ,OAAO,KAAK,kBAAkB,SAAS,CACzC,EACA,IAAI96C,EAAO,CACLA,GAAS,OACXA,EAAQ,CAAA,GAEV,MAAM+6C,EAAU,CAAA,EAChB,QAASj7C,EAAQ,EAAGA,EAAQE,EAAM,OAAQF,IAAS,CACjD,IAAI20C,EAASz0C,EAAMF,CAAK,EACpB20C,IAAW,KACbsG,EAAQ,KAAK,IAAI,EAEjBA,EAAQ,KAAK,mBAAmB,KAAMtG,EAAQ30C,CAAK,CAAC,CAExD,CACA,YAAK,kBAAkB,UAAWi7C,CAAO,EAClC,KAAK,mBACd,CACN,CAAK,EAGD,KAAK,OACH,kBACAjB,gBACE,KACA,kBACA,kBACA,KACApM,QAAM,gBACNA,QAAM,OACd,CACA,EACI,KAAK,OACH,QACAoM,gBACE,KACA,QACA,QACA,KACApM,QAAM,gBACNA,QAAM,QACN,KACA,KACA,eACA,EACR,CACA,EAGI,KAAK,OACH,eACAoM,gBACE,KACA,eACA,eACA,EACA,KACA,eACA,KACA,KACA,iBACA,EAEF,CACN,EACI,KAAK,OACH,cACAA,gBACE,KACA,cACA,cACA,KACApM,QAAM,gBACNA,QAAM,QACN,KACA,KACA,gBACR,CACA,EACI,KAAK,OACH,cACAoM,gBACE,KACA,cACA,cACA,EACA,KACA,cACA,KACA,KACA,iBACA,EAEF,CACN,EACI,KAAK,OACH,cACAA,gBACE,KACA,cACA,cACA,QACAv0C,IAAE,SACF,KACA,KACA,KACA,gBACR,CACA,EAEI,KAAK,OACH,UACAu0C,gBAAc,KAAM,UAAW,kBAAmB,GAAOv0C,IAAE,SAAS,CAC1E,EACI,KAAK,OACH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","x_google_ignoreList":[0,3,5]}